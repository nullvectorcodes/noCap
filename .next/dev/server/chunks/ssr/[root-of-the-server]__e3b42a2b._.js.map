{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohammadsaalim/projects/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { Send, Sparkles, Terminal, User, Bot, Copy, Check, Info, ArrowUp } from \"lucide-react\";\nimport clsx from \"clsx\";\n\ninterface Message {\n  id: string;\n  role: \"user\" | \"ai\";\n  content: string;\n  meta?: {\n    meaning?: string;\n    example?: string;\n  };\n  timestamp: number;\n}\n\nexport default function Home() {\n  const [input, setInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([]);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Auto-scroll to bottom of chat\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, loading]);\n\n  const handleAnalyze = async () => {\n    if (!input.trim() || loading) return;\n\n    const userMsg: Message = {\n      id: Date.now().toString(),\n      role: \"user\",\n      content: input.trim(),\n      timestamp: Date.now(),\n    };\n\n    setMessages((prev) => [...prev, userMsg]);\n    setInput(\"\");\n    setLoading(true);\n\n    try {\n      const res = await fetch(\"/api/chat\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ message: userMsg.content }),\n      });\n\n      const data = await res.json();\n\n      let aiContent = \"\";\n      let meta = {};\n\n      if (data.error) {\n        aiContent = `⚠️ Error: ${data.error}`;\n      } else {\n        const rawContent = data.reply;\n        // Basic parsing for the structured format we requested\n        const meaningMatch = rawContent.match(/Meaning:\\s*(.*?)(?=\\n|Example:|$)/);\n        const exampleMatch = rawContent.match(/Example:\\s*(.*?)(?=$)/);\n\n        if (meaningMatch) {\n          meta = {\n            meaning: meaningMatch ? meaningMatch[1].trim() : undefined,\n            example: exampleMatch ? exampleMatch[1].trim() : undefined,\n          };\n          aiContent = rawContent; // Keeping raw for fallback\n        } else {\n          aiContent = rawContent;\n        }\n      }\n\n      const aiMsg: Message = {\n        id: (Date.now() + 1).toString(),\n        role: \"ai\",\n        content: aiContent,\n        meta: Object.keys(meta).length > 0 ? meta : undefined,\n        timestamp: Date.now(),\n      };\n\n      setMessages((prev) => [...prev, aiMsg]);\n\n    } catch (err) {\n      setMessages((prev) => [...prev, {\n        id: (Date.now() + 1).toString(),\n        role: \"ai\",\n        content: \"⚠️ Failed to connect to the server. Is LM Studio running?\",\n        timestamp: Date.now(),\n      }]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleAnalyze();\n    }\n  };\n\n  return (\n    <main className=\"flex flex-col h-screen bg-[#050505] text-white overflow-hidden relative font-sans selection:bg-white/20\">\n\n      {/* Background Ambience - Subtle and Premium */}\n      <div className=\"fixed inset-0 z-0 pointer-events-none\">\n        <div className=\"absolute top-[-20%] left-[20%] w-[60%] h-[60%] bg-purple-900/5 rounded-full blur-[150px]\" />\n        <div className=\"absolute bottom-[-20%] right-[20%] w-[60%] h-[60%] bg-blue-900/5 rounded-full blur-[150px]\" />\n      </div>\n\n      {/* Header - Minimalist */}\n      <header className=\"fixed top-0 w-full z-50 bg-[#050505]/80 backdrop-blur-2xl border-b border-white/5 h-16 flex items-center justify-center transition-all duration-300\">\n        <div className=\"flex items-center gap-2.5 opacity-90 hover:opacity-100 transition-opacity cursor-default\">\n          <Sparkles className=\"w-4 h-4 text-purple-400\" />\n          <span className=\"font-semibold tracking-wide text-sm text-neutral-200\">noCap AI</span>\n        </div>\n      </header>\n\n      {/* Chat Area */}\n      <div className=\"flex-1 overflow-y-auto z-10 pt-24 scroll-smooth custom-scrollbar relative\">\n        <div className={clsx(\n          \"min-h-full pb-32 px-4 max-w-2xl mx-auto flex flex-col justify-end gap-6\",\n          messages.length === 0 && \"justify-center\"\n        )}>\n\n          {/* Empty State - Elegant */}\n          {messages.length === 0 && (\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              transition={{ duration: 0.5 }}\n              className=\"flex flex-col items-center justify-center text-center space-y-6 pb-20\"\n            >\n              <div className=\"w-20 h-20 rounded-3xl bg-neutral-900/50 flex items-center justify-center border border-white/5 ring-1 ring-white/5 shadow-2xl shadow-purple-900/10\">\n                <Terminal className=\"w-10 h-10 text-neutral-400\" />\n              </div>\n              <div className=\"space-y-2\">\n                <h2 className=\"text-3xl font-semibold text-white tracking-tight\">\n                  Decode the streets.\n                </h2>\n                <p className=\"text-neutral-500 text-sm max-w-xs mx-auto leading-relaxed\">\n                  Your personal AI interpreter for modern slang. <br /> Private, offline, and instant.\n                </p>\n              </div>\n            </motion.div>\n          )}\n\n          {/* Messages */}\n          <AnimatePresence initial={false}>\n            {messages.map((msg) => (\n              <motion.div\n                key={msg.id}\n                initial={{ opacity: 0, y: 10, scale: 0.98 }}\n                animate={{ opacity: 1, y: 0, scale: 1 }}\n                transition={{ duration: 0.3, ease: \"easeOut\" }}\n                className={clsx(\n                  \"flex w-full group\",\n                  msg.role === \"user\" ? \"justify-end\" : \"justify-start\"\n                )}\n              >\n                <div className={clsx(\n                  \"max-w-[85%] sm:max-w-[80%] rounded-2xl p-4 sm:p-5 relative overflow-hidden shadow-sm\",\n                  msg.role === \"user\"\n                    ? \"bg-[#333333] text-white\" // Sophisticated dark grey for user\n                    : \"bg-transparent border border-white/10\" // Clean transparent for AI\n                )}>\n\n                  {/* AI Icon */}\n                  {msg.role === \"ai\" && (\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <div className=\"w-5 h-5 rounded-full bg-gradient-to-tr from-purple-500 to-indigo-500 flex items-center justify-center\">\n                        <Sparkles className=\"w-3 h-3 text-white\" />\n                      </div>\n                      <span className=\"text-xs font-semibold text-neutral-400\">noCap</span>\n                    </div>\n                  )}\n\n                  <div className={clsx(msg.role === \"ai\" ? \"pl-0\" : \"\")}>\n                    {msg.role === \"ai\" && msg.meta ? (\n                      // Premium Structured Result\n                      <div className=\"space-y-5\">\n                        <div className=\"group/meaning\">\n                          <p className=\"text-[10px] uppercase tracking-widest text-neutral-500 font-bold mb-1.5 ml-0.5\">Meaning</p>\n                          <p className=\"text-lg leading-7 font-normal text-neutral-100 selection:bg-purple-500/30\">\n                            {msg.meta.meaning}\n                          </p>\n                        </div>\n                        {msg.meta.example && (\n                          <div className=\"relative pl-4 border-l-2 border-purple-500/30 py-1\">\n                            <p className=\"text-[10px] uppercase tracking-widest text-neutral-500 font-bold mb-1.5\">Example</p>\n                            <p className=\"font-mono text-[13px] md:text-sm text-neutral-300 italic leading-relaxed\">\n                              \"{msg.meta.example}\"\n                            </p>\n                          </div>\n                        )}\n                      </div>\n                    ) : (\n                      // Raw Text / User Message\n                      <p className={clsx(\n                        \"text-[15px] sm:text-base leading-relaxed whitespace-pre-wrap\",\n                        msg.role === \"user\" ? \"font-normal text-white\" : \"text-neutral-300\"\n                      )}>\n                        {msg.content}\n                      </p>\n                    )}\n                  </div>\n                </div>\n              </motion.div>\n            ))}\n          </AnimatePresence>\n\n          {/* Loading Indicator - Subtle */}\n          {loading && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              className=\"flex justify-start w-full pl-1\"\n            >\n              <div className=\"flex items-center gap-1.5 h-8\">\n                <div className=\"w-1.5 h-1.5 bg-neutral-600 rounded-full animate-pulse\" />\n                <div className=\"w-1.5 h-1.5 bg-neutral-600 rounded-full animate-pulse delay-75\" />\n                <div className=\"w-1.5 h-1.5 bg-neutral-600 rounded-full animate-pulse delay-150\" />\n              </div>\n            </motion.div>\n          )}\n\n          <div ref={messagesEndRef} className=\"h-0\" />\n        </div>\n      </div>\n\n      {/* Input Footer - Apple Style */}\n      <div className=\"fixed bottom-0 w-full z-40 px-4 pb-6 sm:pb-8 pt-4\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"relative\">\n            {/* Blur backdrop for input */}\n            <div className=\"absolute inset-0 bg-[#050505]/50 backdrop-blur-xl rounded-[32px] -m-2 opacity-90\" />\n\n            <div className=\"relative flex items-center bg-[#18181b] rounded-[26px] border border-white/10 p-1.5 pr-2 focus-within:border-white/20 focus-within:ring-1 focus-within:ring-white/5 transition-all shadow-2xl shadow-purple-900/20\">\n              <input\n                ref={inputRef}\n                type=\"text\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                onKeyDown={handleKeyDown}\n                placeholder=\"Type a slang phrase...\"\n                className=\"flex-1 bg-transparent border-none outline-none text-white placeholder-neutral-500 h-[44px] px-4 text-[15px]\"\n                disabled={loading}\n                autoFocus\n              />\n              <button\n                onClick={handleAnalyze}\n                disabled={!input || loading}\n                className={clsx(\n                  \"ml-2 w-8 h-8 rounded-full flex items-center justify-center transition-all duration-200\",\n                  input.trim() && !loading\n                    ? \"bg-white text-black hover:scale-105 active:scale-95\"\n                    : \"bg-neutral-800 text-neutral-600 cursor-not-allowed\"\n                )}\n              >\n                {loading ? (\n                  <div className=\"w-3.5 h-3.5 border-2 border-neutral-400 border-t-neutral-800 rounded-full animate-spin\" />\n                ) : (\n                  <ArrowUp className=\"w-4 h-4 stroke-[3]\" />\n                )}\n              </button>\n            </div>\n          </div>\n          <p className=\"text-center text-[10px] text-neutral-700 mt-3 font-medium tracking-wide\">\n            Powered by Local LM Studio\n          </p>\n        </div>\n      </div>\n\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}
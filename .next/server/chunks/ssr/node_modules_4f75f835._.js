module.exports=[37936,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(11857)},53306,(a,b,c)=>{"use strict";c.parse=function(a,b){if("string"!=typeof a)throw TypeError("argument str must be a string");var c={},d=a.length;if(d<2)return c;var f=b&&b.decode||l,g=0,h=0,i=0;do{if(-1===(h=a.indexOf("=",g)))break;if(-1===(i=a.indexOf(";",g)))i=d;else if(h>i){g=a.lastIndexOf(";",h-1)+1;continue}var m=j(a,g,h),n=k(a,h,m),o=a.slice(m,n);if(!e.call(c,o)){var p=j(a,h+1,i),q=k(a,i,p);34===a.charCodeAt(p)&&34===a.charCodeAt(q-1)&&(p++,q--);var r=a.slice(p,q);c[o]=function(a,b){try{return b(a)}catch(b){return a}}(r,f)}g=i+1}while(g<d)return c},c.serialize=function(a,b,c){var e=c&&c.encode||encodeURIComponent;if("function"!=typeof e)throw TypeError("option encode is invalid");if(!f.test(a))throw TypeError("argument name is invalid");var j=e(b);if(!g.test(j))throw TypeError("argument val is invalid");var k=a+"="+j;if(!c)return k;if(null!=c.maxAge){var l=Math.floor(c.maxAge);if(!isFinite(l))throw TypeError("option maxAge is invalid");k+="; Max-Age="+l}if(c.domain){if(!h.test(c.domain))throw TypeError("option domain is invalid");k+="; Domain="+c.domain}if(c.path){if(!i.test(c.path))throw TypeError("option path is invalid");k+="; Path="+c.path}if(c.expires){var m,n=c.expires;if(m=n,"[object Date]"!==d.call(m)||isNaN(n.valueOf()))throw TypeError("option expires is invalid");k+="; Expires="+n.toUTCString()}if(c.httpOnly&&(k+="; HttpOnly"),c.secure&&(k+="; Secure"),c.partitioned&&(k+="; Partitioned"),c.priority)switch("string"==typeof c.priority?c.priority.toLowerCase():c.priority){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(c.sameSite)switch("string"==typeof c.sameSite?c.sameSite.toLowerCase():c.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return k};var d=Object.prototype.toString,e=Object.prototype.hasOwnProperty,f=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,g=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,h=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/;function j(a,b,c){do{var d=a.charCodeAt(b);if(32!==d&&9!==d)return b}while(++b<c)return c}function k(a,b,c){for(;b>c;){var d=a.charCodeAt(--b);if(32!==d&&9!==d)return b+1}return c}function l(a){return -1!==a.indexOf("%")?decodeURIComponent(a):a}},79058,23725,93951,64518,a=>{"use strict";let b;var c,d,e=a.i(53306),f={},g=Array.from({length:64});for(let a=0;a+65<=90;a++){let b=String.fromCharCode(a+65);f[b]=a,g[a]=b}for(let a=0;a+97<=122;a++){let b=String.fromCharCode(a+97),c=a+26;f[b]=c,g[c]=b}for(let a=0;a<10;a++){f[a.toString(10)]=a+52;let b=a.toString(10),c=a+52;f[b]=c,g[c]=b}f["-"]=62,g[62]="-",f._=63,g[63]="_";var h=a=>new TextEncoder().encode(a),i=a=>{let b=a+"=".repeat((4-a.length%4)%4),c=b.length/4*3;b.endsWith("==")?c-=2:b.endsWith("=")&&c--;let d=new ArrayBuffer(c),e=new DataView(d);for(let a=0;a<b.length;a+=4){let c=0,d=0;for(let e=a,g=a+3;e<=g;e++)if("="===b[e])c>>=6;else{if(!(b[e]in f))throw TypeError(`Invalid character ${b[e]} in base64 string.`);c|=f[b[e]]<<(g-e)*6,d+=6}let g=a/4*3;c>>=d%8;let h=Math.floor(d/8);for(let a=0;a<h;a++){let b=(h-a-1)*8;e.setUint8(g+a,(c&255<<b)>>b)}}return new Uint8Array(d)},j=a=>{let b="string"==typeof a?h(a):a,c="";for(let a=0;a<b.length;a+=3){let d=0,e=0;for(let c=a,f=Math.min(a+3,b.length);c<f;c++)d|=b[c]<<(f-c-1)*8,e+=8;let f=Math.ceil(e/6);d<<=6*f-e;for(let a=1;a<=f;a++){let b=(f-a)*6;c+=g[(d&63<<b)>>b]}}return c},k={encryption:{saltBits:256,algorithm:"aes-256-cbc",iterations:1,minPasswordlength:32},integrity:{saltBits:256,algorithm:"sha256",iterations:1,minPasswordlength:32},ttl:0,timestampSkewSec:60,localtimeOffsetMsec:0},l=a=>({...a,encryption:{...a.encryption},integrity:{...a.integrity}}),m={"aes-128-ctr":{keyBits:128,ivBits:128,name:"AES-CTR"},"aes-256-cbc":{keyBits:256,ivBits:128,name:"AES-CBC"},sha256:{keyBits:256,name:"SHA-256"}},n="Fe26.2",o=(a,b)=>{let c;if(b<1)throw Error("Invalid random bits count");return c=new Uint8Array(Math.ceil(b/8)),a.getRandomValues(c),c},p=async(a,b,c,d,e,f)=>{let g=h(b),i=await a.subtle.importKey("raw",g,{name:"PBKDF2"},!1,["deriveBits"]),j=h(c);return await a.subtle.deriveBits({name:"PBKDF2",hash:f,salt:j,iterations:d},i,8*e)},q=async(a,b,c)=>{var d;if(!(null==b?void 0:b.length))throw Error("Empty password");if(null==c||"object"!=typeof c)throw Error("Bad options");if(!(c.algorithm in m))throw Error(`Unknown algorithm: ${c.algorithm}`);let e=m[c.algorithm],f={},g=null!=(d=c.hmac)&&d,h=g?{name:"HMAC",hash:e.name}:{name:e.name},i=g?["sign","verify"]:["encrypt","decrypt"];if("string"==typeof b){if(b.length<c.minPasswordlength)throw Error(`Password string too short (min ${c.minPasswordlength} characters required)`);let{salt:d=""}=c;if(!d){let{saltBits:b=0}=c;if(!b)throw Error("Missing salt and saltBits options");d=[...new Uint8Array(o(a,b))].map(a=>a.toString(16).padStart(2,"0")).join("")}let g=await p(a,b,d,c.iterations,e.keyBits/8,"SHA-1");f.key=await a.subtle.importKey("raw",g,h,!1,i),f.salt=d}else{if(b.length<e.keyBits/8)throw Error("Key buffer (password) too small");f.key=await a.subtle.importKey("raw",b,h,!1,i),f.salt=""}return c.iv?f.iv=c.iv:"ivBits"in e&&(f.iv=o(a,e.ivBits)),f},r=(a,b,c)=>["aes-128-ctr"===a?{name:"AES-CTR",counter:b.iv,length:128}:{name:"AES-CBC",iv:b.iv},b.key,"string"==typeof c?h(c):c],s=async(a,b,c,d)=>{let e=await q(a,b,c);return{encrypted:new Uint8Array(await a.subtle.encrypt(...r(c.algorithm,e,d))),key:e}},t=async(a,b,c,d)=>{let e,f=await q(a,b,c);return e=new Uint8Array(await a.subtle.decrypt(...r(c.algorithm,f,d))),new TextDecoder().decode(e)},u=async(a,b,c,d)=>{let e=await q(a,b,{...c,hmac:!0}),f=h(d);return{digest:j(new Uint8Array(await a.subtle.sign({name:"HMAC"},e.key,f))),salt:e.salt}},v=a=>"string"==typeof a||a instanceof Uint8Array?{encryption:a,integrity:a}:"secret"in a?{id:a.id,encryption:a.secret,integrity:a.secret}:{id:a.id,encryption:a.encryption,integrity:a.integrity},w=async(a,b,c,d)=>{if(!c)throw Error("Empty password");let e=l(d),f=Date.now()+(e.localtimeOffsetMsec||0),g=JSON.stringify(b),{id:h="",encryption:i,integrity:k}=v(c);if(h&&!/^\w+$/.test(h))throw Error("Invalid password id");let{encrypted:m,key:o}=await s(a,i,e.encryption,g),p=j(new Uint8Array(m)),q=j(o.iv),r=e.ttl?f+e.ttl:"",t=`${n}*${h}*${o.salt}*${q}*${p}*${r}`,w=await u(a,k,e.integrity,t);return`${t}*${w.salt}*${w.digest}`},x=async(a,b,c,d)=>{if(!c)throw Error("Empty password");let e=l(d),f=Date.now()+(e.localtimeOffsetMsec||0),g=b.split("*");if(8!==g.length)throw Error("Incorrect number of sealed components");let h=g[0],j=g[1],k=g[2],m=g[3],o=g[4],p=g[5],q=g[6],r=g[7],s=`${h}*${j}*${k}*${m}*${o}*${p}`;if(n!==h)throw Error("Wrong mac prefix");if(p){if(!/^\d+$/.test(p))throw Error("Invalid expiration");if(Number.parseInt(p,10)<=f-1e3*e.timestampSkewSec)throw Error("Expired seal")}let w="";if(j=j||"default","string"==typeof c||c instanceof Uint8Array)w=c;else if(j in c)w=c[j];else throw Error(`Cannot find password: ${j}`);w=v(w);let x=e.integrity;if(x.salt=q,!((a,b)=>{let c=+(a.length!==b.length);c&&(b=a);for(let d=0;d<a.length;d+=1)c|=a.charCodeAt(d)^b.charCodeAt(d);return 0===c})((await u(a,w.integrity,x,s)).digest,r))throw Error("Bad hmac value");let y=i(o),z=e.encryption;z.salt=k,z.iv=i(m);let A=await t(a,w.encryption,z,y);return A?JSON.parse(A):null},y=a.i(66680);let z=y.default.webcrypto?.subtle||{},A=()=>y.default.randomUUID(),B=a=>y.default.webcrypto.getRandomValues(a),C={randomUUID:A,getRandomValues:B,subtle:z};a.s(["default",()=>C,"getRandomValues",()=>B,"randomUUID",()=>A,"subtle",()=>z],9585);var D=a.i(9585),E={ttl:1209600,cookieOptions:{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}};function F(a){return"string"==typeof a?{1:a}:a}var G=async function(a,{password:b,ttl:c=1209600}){let d=F(b),e=Math.max(...Object.keys(d).map(Number)),f={id:e.toString(),secret:d[e]},g=await w(D,a,f,{...k,ttl:1e3*c});return`${g}~2`},H=async function(a,{password:b,ttl:c=1209600}){let d=F(b),{sealWithoutVersion:e,tokenVersion:f}=function(a){let[b,c]=a.split("~");return{sealWithoutVersion:b,tokenVersion:null==c?null:parseInt(c,10)}}(a);try{let a=await x(D,e,d,{...k,ttl:1e3*c})??{};if(2===f)return a;return{...a.persistent}}catch(a){if(a instanceof Error&&/^(Expired seal|Bad hmac value|Cannot find password|Incorrect number of sealed components)/.test(a.message))return{};throw a}};c=G,d=H,a.s(["sealData",()=>G,"unsealData",()=>H],79058);var I=a.i(47299),J=a.i(43698),K=a.i(87769);class L extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class M extends L{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class N extends L{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class O extends L{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class P extends L{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class Q extends L{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class R extends L{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class S extends L{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class T extends L{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(a="no applicable key found in the JSON Web Key Set",b){super(a,b)}}class U extends L{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}class V extends L{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(a="request timed out",b){super(a,b)}}class W extends L{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(a="signature verification failed",b){super(a,b)}}let X=new TextEncoder,Y=new TextDecoder;function Z(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}let $=async(a,b,c)=>{let d;switch(a.protocol){case"https:":d=J.get;break;case"http:":d=I.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:e,headers:f}=c,g=d(a.href,{agent:e,timeout:b,headers:f}),[h]=await Promise.race([(0,K.once)(g,"response"),(0,K.once)(g,"timeout")]);if(!h)throw g.destroy(),new V;if(200!==h.statusCode)throw new L("Expected 200 OK from the JSON Web Key Set HTTP response");let i=[];for await(let a of h)i.push(a);try{return JSON.parse(Y.decode(Z(...i)))}catch{throw new L("Failed to parse the JSON Web Key Set HTTP response as JSON")}};var _=a.i(51615);let aa=a=>{let b;return new Uint8Array(_.Buffer.from(((b=a)instanceof Uint8Array&&(b=Y.decode(b)),b),"base64url"))};function ab(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}async function ac(a,b){if(!ab(a))throw TypeError("JWK must be an object");switch(b||=a.alg,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return aa(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new P('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":var c;return(c={...a,alg:b}).d?(0,y.createPrivateKey)({format:"jwk",key:c}):(0,y.createPublicKey)({format:"jwk",key:c});default:throw new P('Unsupported "kty" (Key Type) Parameter value')}}function ad(a){return ab(a)}function ae(a){return"function"==typeof structuredClone?structuredClone(a):JSON.parse(JSON.stringify(a))}class af{_jwks;_cached=new WeakMap;constructor(a){if(!function(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(ad)}(a))throw new S("JSON Web Key Set malformed");this._jwks=ae(a)}async getKey(a,b){let{alg:c,kid:d}={...a,...b?.header},e=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new P('Unsupported "alg" value for a JSON Web Key Set')}}(c),f=this._jwks.keys.filter(a=>{let b=e===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&"string"==typeof a.alg&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES256K":b="secp256k1"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv;break;case"Ed25519":b="Ed25519"===a.crv;break;case"EdDSA":b="Ed25519"===a.crv||"Ed448"===a.crv}return b}),{0:g,length:h}=f;if(0===h)throw new T;if(1!==h){let a=new U,{_cached:b}=this;throw a[Symbol.asyncIterator]=async function*(){for(let a of f)try{yield await ag(b,a,c)}catch{}},a}return ag(this._cached,g,c)}}async function ag(a,b,c){let d=a.get(b)||a.set(b,{}).get(b);if(void 0===d[c]){let a=await ac({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new S("JSON Web Key Set members must be public keys");d[c]=a}return d[c]}function ah(a){let b=new af(a),c=async(a,c)=>b.getKey(a,c);return Object.defineProperties(c,{jwks:{value:()=>ae(b._jwks),enumerable:!0,configurable:!1,writable:!1}}),c}("u"<typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(b="jose/v5.10.0");let ai=Symbol();class aj{_url;_timeoutDuration;_cooldownDuration;_cacheMaxAge;_jwksTimestamp;_pendingFetch;_options;_local;_cache;constructor(a,b){if(!(a instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(a.href),this._options={agent:b?.agent,headers:b?.headers},this._timeoutDuration="number"==typeof b?.timeoutDuration?b?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof b?.cooldownDuration?b?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof b?.cacheMaxAge?b?.cacheMaxAge:6e5,b?.[ai]!==void 0&&(this._cache=b?.[ai],function(a,b){return!("object"!=typeof a||null===a||!("uat"in a)||"number"!=typeof a.uat||Date.now()-a.uat>=b)&&"jwks"in a&&!!ab(a.jwks)&&!!Array.isArray(a.jwks.keys)&&!!Array.prototype.every.call(a.jwks.keys,ab)}(b?.[ai],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=ah(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(a,b){this._local&&this.fresh()||await this.reload();try{return await this._local(a,b)}catch(c){if(c instanceof T&&!1===this.coolingDown())return await this.reload(),this._local(a,b);throw c}}async reload(){this._pendingFetch&&("u">typeof WebSocketPair||"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"u">typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let a=new Headers(this._options.headers);b&&!a.has("User-Agent")&&(a.set("User-Agent",b),this._options.headers=Object.fromEntries(a.entries())),this._pendingFetch||=$(this._url,this._timeoutDuration,this._options).then(a=>{this._local=ah(a),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=a),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(a=>{throw this._pendingFetch=void 0,a}),await this._pendingFetch}}function ak(a,b){let c=new aj(a,b),d=async(a,b)=>c.getKey(a,b);return Object.defineProperties(d,{coolingDown:{get:()=>c.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>c.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>c.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!c._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>c._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),d}function al(a){let b,c;if("string"!=typeof a)throw new R("JWTs must use Compact JWS serialization, JWT must be a string");let{1:d,length:e}=a.split(".");if(5===e)throw new R("Only JWTs using Compact JWS serialization can be decoded");if(3!==e)throw new R("Invalid JWT");if(!d)throw new R("JWTs must contain a payload");try{b=aa(d)}catch{throw new R("Failed to base64url decode the payload")}try{c=JSON.parse(Y.decode(b))}catch{throw new R("Failed to parse the decoded payload as JSON")}if(!ab(c))throw new R("Invalid JWT Claims Set");return c}a.s(["createRemoteJWKSet",()=>ak],23725),a.s(["decodeJwt",()=>al],93951);var am=a.i(12057);function an(a){switch(a){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"Ed25519":case"EdDSA":return;default:throw new P(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}let ao=y.webcrypto;function ap(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let aq=(a,...b)=>ap("Key must be ",a,...b);function ar(a,b,...c){return ap(`Key for the ${a} algorithm must be `,b,...c)}let as=a=>am.types.isKeyObject(a)||am.types.isCryptoKey(a),at=["KeyObject"];function au(a){return ab(a)&&"string"==typeof a.kty}(globalThis.CryptoKey||ao?.CryptoKey)&&at.push("CryptoKey"),new WeakMap;let av=(a,b)=>{let c;try{c=a instanceof y.KeyObject?a.asymmetricKeyDetails?.modulusLength:Buffer.from(a.n,"base64url").byteLength<<3}catch{}if("number"!=typeof c||c<2048)throw TypeError(`${b} requires key modulusLength to be 2048 bits or larger`)},aw=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function ax(a,b){let c,d,e,f;if(b instanceof y.KeyObject)c=b.asymmetricKeyType,d=b.asymmetricKeyDetails;else switch(e=!0,b.kty){case"RSA":c="rsa";break;case"EC":c="ec";break;case"OKP":if("Ed25519"===b.crv){c="ed25519";break}if("Ed448"===b.crv){c="ed448";break}throw TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448");default:throw TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}switch(a){case"Ed25519":if("ed25519"!==c)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519");break;case"EdDSA":if(!["ed25519","ed448"].includes(c))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if("rsa"!==c)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");av(b,a);break;case"PS256":case"PS384":case"PS512":if("rsa-pss"===c){let{hashAlgorithm:b,mgf1HashAlgorithm:c,saltLength:e}=d,f=parseInt(a.slice(-3),10);if(void 0!==b&&(b!==`sha${f}`||c!==b))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${a}`);if(void 0!==e&&e>f>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${a}`)}else if("rsa"!==c)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");av(b,a),f={padding:y.constants.RSA_PKCS1_PSS_PADDING,saltLength:y.constants.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==c)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let d=((a,b)=>{let c;if(am.types.isCryptoKey(a))c=y.KeyObject.from(a);else if(am.types.isKeyObject(a))c=a;else if(au(a))return a.crv;else throw TypeError(aq(a,...at));if("secret"===c.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(c.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${c.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${c.asymmetricKeyType.slice(1)}`;case"ec":{let a=c.asymmetricKeyDetails.namedCurve;if(b)return a;switch(a){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new P("Unsupported key curve for this operation")}}default:throw TypeError("Invalid asymmetric key type for this operation")}})(b),e=aw.get(a);if(d!==e)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${e}, got ${d}`);f={dsaEncoding:"ieee-p1363"};break}default:throw new P(`alg ${a} is not supported either by JOSE or your javascript runtime`)}return e?{format:"jwk",key:b,...f}:f?{...f,key:b}:b}function ay(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function az(a,b){return a.name===b}function aA(a){return parseInt(a.name.slice(4),10)}function aB(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(aq(b,...at));return(0,y.createSecretKey)(b)}if(b instanceof y.KeyObject)return b;if(am.types.isCryptoKey(b))return!function(a,b,...c){switch(b){case"HS256":case"HS384":case"HS512":{if(!az(a.algorithm,"HMAC"))throw ay("HMAC");let c=parseInt(b.slice(2),10);if(aA(a.algorithm.hash)!==c)throw ay(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!az(a.algorithm,"RSASSA-PKCS1-v1_5"))throw ay("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(aA(a.algorithm.hash)!==c)throw ay(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!az(a.algorithm,"RSA-PSS"))throw ay("RSA-PSS");let c=parseInt(b.slice(2),10);if(aA(a.algorithm.hash)!==c)throw ay(`SHA-${c}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==a.algorithm.name&&"Ed448"!==a.algorithm.name)throw ay("Ed25519 or Ed448");break;case"Ed25519":if(!az(a.algorithm,"Ed25519"))throw ay("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!az(a.algorithm,"ECDSA"))throw ay("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw ay(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}if(c.length&&!c.some(b=>a.usages.includes(b))){let a="CryptoKey does not support this operation, its usages must include ";if(c.length>2){let b=c.pop();a+=`one of ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of ${c[0]} or ${c[1]}.`:a+=`${c[0]}.`;throw TypeError(a)}}(b,a,c),y.KeyObject.from(b);if(au(b))return a.startsWith("HS")?(0,y.createSecretKey)(Buffer.from(b.k,"base64url")):b;throw TypeError(aq(b,...at,"Uint8Array","JSON Web Key"))}let aC=(0,am.promisify)(y.sign),aD=async(a,b,c)=>{let d=aB(a,b,"sign");if(a.startsWith("HS")){let b=y.createHmac(function(a){switch(a){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new P(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}(a),d);return b.update(c),b.digest()}return aC(an(a),c,ax(a,d))},aE=(0,am.promisify)(y.verify),aF=async(a,b,c,d)=>{let e=aB(a,b,"verify");if(a.startsWith("HS")){let b=await aD(a,e,d);try{return y.timingSafeEqual(c,b)}catch{return!1}}let f=an(a),g=ax(a,e);try{return await aE(f,d,g,c)}catch{return!1}},aG=a=>a?.[Symbol.toStringTag],aH=(a,b,c)=>{if(void 0!==b.use&&"sig"!==b.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==b.key_ops&&b.key_ops.includes?.(c)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${c}`);if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, when present its alg must be ${a}`);return!0};function aI(a,b,c,d){b.startsWith("HS")||"dir"===b||b.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(b)?((a,b,c,d)=>{if(!(b instanceof Uint8Array)){if(d&&au(b)){if(au(b)&&"oct"===b.kty&&"string"==typeof b.k&&aH(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!as(b))throw TypeError(ar(a,b,...at,"Uint8Array",d?"JSON Web Key":null));if("secret"!==b.type)throw TypeError(`${aG(b)} instances for symmetric algorithms must be of type "secret"`)}})(b,c,d,a):((a,b,c,d)=>{if(d&&au(b))switch(c){case"sign":if("oct"!==b.kty&&"string"==typeof b.d&&aH(a,b,c))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if("oct"!==b.kty&&void 0===b.d&&aH(a,b,c))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!as(b))throw TypeError(ar(a,b,...at,d?"JSON Web Key":null));if("secret"===b.type)throw TypeError(`${aG(b)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===c&&"public"===b.type)throw TypeError(`${aG(b)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===c&&"public"===b.type)throw TypeError(`${aG(b)} instances for asymmetric algorithm decryption must be of type "private"`);if(b.algorithm&&"verify"===c&&"private"===b.type)throw TypeError(`${aG(b)} instances for asymmetric algorithm verifying must be of type "public"`);if(b.algorithm&&"encrypt"===c&&"private"===b.type)throw TypeError(`${aG(b)} instances for asymmetric algorithm encryption must be of type "public"`)})(b,c,d,a)}aI.bind(void 0,!1);let aJ=aI.bind(void 0,!0),aK=function(a,b,c,d,e){let f;if(void 0!==e.crit&&d?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new P(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)};async function aL(a,b,c){let d,e;if(!ab(a))throw new Q("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new Q('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new Q("JWS Protected Header incorrect type");if(void 0===a.payload)throw new Q("JWS Payload missing");if("string"!=typeof a.signature)throw new Q("JWS Signature missing or incorrect type");if(void 0!==a.header&&!ab(a.header))throw new Q("JWS Unprotected Header incorrect type");let f={};if(a.protected)try{let b=aa(a.protected);f=JSON.parse(Y.decode(b))}catch{throw new Q("JWS Protected Header is invalid")}if(!((...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0})(f,a.header))throw new Q("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...f,...a.header},h=aK(Q,new Map([["b64",!0]]),c?.crit,f,g),i=!0;if(h.has("b64")&&"boolean"!=typeof(i=f.b64))throw new Q('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:j}=g;if("string"!=typeof j||!j)throw new Q('JWS "alg" (Algorithm) Header Parameter missing or invalid');let k=c&&((a,b)=>{if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)})("algorithms",c.algorithms);if(k&&!k.has(j))throw new O('"alg" (Algorithm) Header Parameter value not allowed');if(i){if("string"!=typeof a.payload)throw new Q("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new Q("JWS Payload must be a string or an Uint8Array instance");let l=!1;"function"==typeof b?(b=await b(f,a),l=!0,aJ(j,b,"verify"),au(b)&&(b=await ac(b,j))):aJ(j,b,"verify");let m=Z(X.encode(a.protected??""),X.encode("."),"string"==typeof a.payload?X.encode(a.payload):a.payload);try{d=aa(a.signature)}catch{throw new Q("Failed to base64url decode the signature")}if(!await aF(j,b,d,m))throw new W;if(i)try{e=aa(a.payload)}catch{throw new Q("Failed to base64url decode the payload")}else e="string"==typeof a.payload?X.encode(a.payload):a.payload;let n={payload:e};return(void 0!==a.protected&&(n.protectedHeader=f),void 0!==a.header&&(n.unprotectedHeader=a.header),l)?{...n,key:b}:n}async function aM(a,b,c){if(a instanceof Uint8Array&&(a=Y.decode(a)),"string"!=typeof a)throw new Q("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new Q("Invalid Compact JWS");let h=await aL({payload:e,protected:d,signature:f},b,c),i={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...i,key:h.key}:i}let aN=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,aO=a=>{let b,c=aN.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b},aP=a=>a.toLowerCase().replace(/^application\//,"");async function aQ(a,b,c){let d=await aM(a,b,c);if(d.protectedHeader.crit?.includes("b64")&&!1===d.protectedHeader.b64)throw new R("JWTs MUST NOT use unencoded payload");let e={payload:((a,b,c={})=>{var d,e;let f,g;try{f=JSON.parse(Y.decode(b))}catch{}if(!ab(f))throw new R("JWT Claims Set must be a top-level JSON object");let{typ:h}=c;if(h&&("string"!=typeof a.typ||aP(a.typ)!==aP(h)))throw new M('unexpected "typ" JWT header value',f,"typ","check_failed");let{requiredClaims:i=[],issuer:j,subject:k,audience:l,maxTokenAge:m}=c,n=[...i];for(let a of(void 0!==m&&n.push("iat"),void 0!==l&&n.push("aud"),void 0!==k&&n.push("sub"),void 0!==j&&n.push("iss"),new Set(n.reverse())))if(!(a in f))throw new M(`missing required "${a}" claim`,f,a,"missing");if(j&&!(Array.isArray(j)?j:[j]).includes(f.iss))throw new M('unexpected "iss" claim value',f,"iss","check_failed");if(k&&f.sub!==k)throw new M('unexpected "sub" claim value',f,"sub","check_failed");if(l&&(d=f.aud,e="string"==typeof l?[l]:l,"string"==typeof d?!e.includes(d):!(Array.isArray(d)&&e.some(Set.prototype.has.bind(new Set(d))))))throw new M('unexpected "aud" claim value',f,"aud","check_failed");switch(typeof c.clockTolerance){case"string":g=aO(c.clockTolerance);break;case"number":g=c.clockTolerance;break;case"undefined":g=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:o}=c,p=Math.floor((o||new Date).getTime()/1e3);if((void 0!==f.iat||m)&&"number"!=typeof f.iat)throw new M('"iat" claim must be a number',f,"iat","invalid");if(void 0!==f.nbf){if("number"!=typeof f.nbf)throw new M('"nbf" claim must be a number',f,"nbf","invalid");if(f.nbf>p+g)throw new M('"nbf" claim timestamp check failed',f,"nbf","check_failed")}if(void 0!==f.exp){if("number"!=typeof f.exp)throw new M('"exp" claim must be a number',f,"exp","invalid");if(f.exp<=p-g)throw new N('"exp" claim timestamp check failed',f,"exp","check_failed")}if(m){let a=p-f.iat;if(a-g>("number"==typeof m?m:aO(m)))throw new N('"iat" claim timestamp check failed (too far in the past)',f,"iat","check_failed");if(a<0-g)throw new M('"iat" claim timestamp check failed (it should be in the past)',f,"iat","check_failed")}return f})(d.protectedHeader,d.payload,c),protectedHeader:d.protectedHeader};return"function"==typeof b?{...e,key:d.key}:e}a.s(["jwtVerify",()=>aQ],64518)},63681,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={RequestCookies:function(){return f.RequestCookies},ResponseCookies:function(){return f.ResponseCookies},stringifyCookie:function(){return f.stringifyCookie}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(36226)},51409,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReflectAdapter",{enumerable:!0,get:function(){return d}});class d{static get(a,b,c){let d=Reflect.get(a,b,c);return"function"==typeof d?d.bind(a):d}static set(a,b,c,d){return Reflect.set(a,b,c,d)}static has(a,b){return Reflect.has(a,b)}static deleteProperty(a,b){return Reflect.deleteProperty(a,b)}}},4712,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ActionDidNotRevalidate:function(){return f},ActionDidRevalidateDynamicOnly:function(){return h},ActionDidRevalidateStaticAndDynamic:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=0,g=1,h=2},14896,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={MutableRequestCookiesAdapter:function(){return o},ReadonlyRequestCookiesError:function(){return j},RequestCookiesAdapter:function(){return k},appendMutableCookies:function(){return n},areCookiesMutableInCurrentPhase:function(){return q},createCookiesWithMutableAccessCheck:function(){return p},getModifiedCookieValues:function(){return m},responseCookiesToRequestCookies:function(){return s}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(63681),g=a.r(51409),h=a.r(56704),i=a.r(4712);class j extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new j}}class k{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return j.callable;default:return g.ReflectAdapter.get(a,b,c)}}})}}let l=Symbol.for("next.mutated.cookies");function m(a){let b=a[l];return b&&Array.isArray(b)&&0!==b.length?b:[]}function n(a,b){let c=m(b);if(0===c.length)return!1;let d=new f.ResponseCookies(a),e=d.getAll();for(let a of c)d.set(a);for(let a of e)d.set(a);return!0}class o{static wrap(a,b){let c=new f.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let d=[],e=new Set,j=()=>{let a=h.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=i.ActionDidRevalidateStaticAndDynamic),d=c.getAll().filter(a=>e.has(a.name)),b){let a=[];for(let b of d){let c=new f.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},k=new Proxy(c,{get(a,b,c){switch(b){case l:return d;case"delete":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),k}finally{j()}};case"set":return function(...b){e.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),k}finally{j()}};default:return g.ReflectAdapter.get(a,b,c)}}});return k}}function p(a){let b=new Proxy(a.mutableCookies,{get(c,d,e){switch(d){case"delete":return function(...d){return r(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return r(a,"cookies().set"),c.set(...d),b};default:return g.ReflectAdapter.get(c,d,e)}}});return b}function q(a){return"action"===a.phase}function r(a,b){if(!q(a))throw new j}function s(a){let b=new f.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},96556,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DynamicServerError:function(){return g},isDynamicServerError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="DYNAMIC_SERVER_USAGE";class g extends Error{constructor(a){super(`Dynamic server usage: ${a}`),this.description=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&"string"==typeof a.digest&&a.digest===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},60312,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={StaticGenBailoutError:function(){return g},isStaticGenBailoutError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="NEXT_STATIC_GEN_BAILOUT";class g extends Error{constructor(...a){super(...a),this.code=f}}function h(a){return"object"==typeof a&&null!==a&&"code"in a&&a.code===f}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},13091,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isHangingPromiseRejectionError:function(){return f},makeDevtoolsIOAwarePromise:function(){return l},makeHangingPromise:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===g}let g="HANGING_PROMISE_REJECTION";class h extends Error{constructor(a,b){super(`During prerendering, ${b} rejects when the prerender is complete. Typically these errors are handled by React but if you move ${b} to a different context by using \`setTimeout\`, \`after\`, or similar functions you may observe this error and you should handle it in that context. This occurred at route "${a}".`),this.route=a,this.expression=b,this.digest=g}}let i=new WeakMap;function j(a,b,c){if(a.aborted)return Promise.reject(new h(b,c));{let d=new Promise((d,e)=>{let f=e.bind(null,new h(b,c)),g=i.get(a);if(g)g.push(f);else{let b=[f];i.set(a,b),a.addEventListener("abort",()=>{for(let a=0;a<b.length;a++)b[a]()},{once:!0})}});return d.catch(k),d}}function k(){}function l(a,b,c){return b.stagedRendering?b.stagedRendering.delayUntilStage(c,void 0,a):new Promise(b=>{setTimeout(()=>{b(a)},0)})}},17491,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={METADATA_BOUNDARY_NAME:function(){return f},OUTLET_BOUNDARY_NAME:function(){return h},ROOT_LAYOUT_BOUNDARY_NAME:function(){return i},VIEWPORT_BOUNDARY_NAME:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="__next_metadata_boundary__",g="__next_viewport_boundary__",h="__next_outlet_boundary__",i="__next_root_layout_boundary__"},61933,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={atLeastOneTask:function(){return h},scheduleImmediate:function(){return g},scheduleOnNextTick:function(){return f},waitAtLeastOneReactRenderTask:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a=>{Promise.resolve().then(()=>{process.nextTick(a)})},g=a=>{setImmediate(a)};function h(){return new Promise(a=>g(a))}function i(){return new Promise(a=>setImmediate(a))}},49640,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={BailoutToCSRError:function(){return g},isBailoutToCSRError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f="BAILOUT_TO_CLIENT_SIDE_RENDERING";class g extends Error{constructor(a){super(`Bail out to client-side rendering: ${a}`),this.reason=a,this.digest=f}}function h(a){return"object"==typeof a&&null!==a&&"digest"in a&&a.digest===f}},60384,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e,f={Postpone:function(){return B},PreludeState:function(){return $},abortAndThrowOnSynchronousRequestDataAccess:function(){return A},abortOnSynchronousPlatformIOAccess:function(){return z},accessedDynamicData:function(){return J},annotateDynamicAccess:function(){return O},consumeDynamicAccess:function(){return K},createDynamicTrackingState:function(){return s},createDynamicValidationState:function(){return t},createHangingInputAbortSignal:function(){return N},createRenderInBrowserAbortSignal:function(){return M},delayUntilRuntimeStage:function(){return ac},formatDynamicAPIAccesses:function(){return L},getFirstDynamicReason:function(){return u},getStaticShellDisallowedDynamicReasons:function(){return ab},isDynamicPostpone:function(){return E},isPrerenderInterruptedError:function(){return I},logDisallowedDynamicError:function(){return _},markCurrentScopeAsDynamic:function(){return v},postponeWithTracking:function(){return C},throwIfDisallowedDynamic:function(){return aa},throwToInterruptStaticGeneration:function(){return w},trackAllowedDynamicAccess:function(){return W},trackDynamicDataInDynamicRender:function(){return x},trackDynamicHoleInRuntimeShell:function(){return X},trackDynamicHoleInStaticShell:function(){return Y},useDynamicRouteParams:function(){return P},useDynamicSearchParams:function(){return Q}};for(var g in f)Object.defineProperty(c,g,{enumerable:!0,get:f[g]});let h=(d=a.r(717))&&d.__esModule?d:{default:d},i=a.r(96556),j=a.r(60312),k=a.r(32319),l=a.r(56704),m=a.r(13091),n=a.r(17491),o=a.r(61933),p=a.r(49640),q=a.r(50640),r="function"==typeof h.default.unstable_postpone;function s(a){return{isDebugDynamicAccesses:a,dynamicAccesses:[],syncDynamicErrorWithStack:null}}function t(){return{hasSuspenseAboveBody:!1,hasDynamicMetadata:!1,dynamicMetadata:null,hasDynamicViewport:!1,hasAllowedDynamic:!1,dynamicErrors:[]}}function u(a){var b;return null==(b=a.dynamicAccesses[0])?void 0:b.expression}function v(a,b,c){if(b)switch(b.type){case"cache":case"unstable-cache":case"private-cache":return}if(!a.forceDynamic&&!a.forceStatic){if(a.dynamicShouldError)throw Object.defineProperty(new j.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${c}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(b)switch(b.type){case"prerender-ppr":return C(a.route,c,b.dynamicTracking);case"prerender-legacy":b.revalidate=0;let d=Object.defineProperty(new i.DynamicServerError(`Route ${a.route} couldn't be rendered statically because it used ${c}. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E550",enumerable:!1,configurable:!0});throw a.dynamicUsageDescription=c,a.dynamicUsageStack=d.stack,d}}}function w(a,b,c){let d=Object.defineProperty(new i.DynamicServerError(`Route ${b.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.revalidate=0,b.dynamicUsageDescription=a,b.dynamicUsageStack=d.stack,d}function x(a){switch(a.type){case"cache":case"unstable-cache":case"private-cache":return}}function y(a,b,c){let d=H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`);c.controller.abort(d);let e=c.dynamicTracking;e&&e.dynamicAccesses.push({stack:e.isDebugDynamicAccesses?Error().stack:void 0,expression:b})}function z(a,b,c,d){let e=d.dynamicTracking;y(a,b,d),e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}function A(a,b,c,d){if(!1===d.controller.signal.aborted){y(a,b,d);let e=d.dynamicTracking;e&&null===e.syncDynamicErrorWithStack&&(e.syncDynamicErrorWithStack=c)}throw H(`Route ${a} needs to bail out of prerendering at this point because it used ${b}.`)}function B({reason:a,route:b}){let c=k.workUnitAsyncStorage.getStore();C(b,a,c&&"prerender-ppr"===c.type?c.dynamicTracking:null)}function C(a,b,c){(function(){if(!r)throw Object.defineProperty(Error("Invariant: React.unstable_postpone is not defined. This suggests the wrong version of React was loaded. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E224",enumerable:!1,configurable:!0})})(),c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:b}),h.default.unstable_postpone(D(a,b))}function D(a,b){return`Route ${a} needs to bail out of prerendering at this point because it used ${b}. React throws this special object to indicate where. It should not be caught by your own try/catch. Learn more: https://nextjs.org/docs/messages/ppr-caught-error`}function E(a){return"object"==typeof a&&null!==a&&"string"==typeof a.message&&F(a.message)}function F(a){return a.includes("needs to bail out of prerendering at this point because it used")&&a.includes("Learn more: https://nextjs.org/docs/messages/ppr-caught-error")}if(!1===F(D("%%%","^^^")))throw Object.defineProperty(Error("Invariant: isDynamicPostpone misidentified a postpone reason. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E296",enumerable:!1,configurable:!0});let G="NEXT_PRERENDER_INTERRUPTED";function H(a){let b=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return b.digest=G,b}function I(a){return"object"==typeof a&&null!==a&&a.digest===G&&"name"in a&&"message"in a&&a instanceof Error}function J(a){return a.length>0}function K(a,b){return a.dynamicAccesses.push(...b.dynamicAccesses),a.dynamicAccesses}function L(a){return a.filter(a=>"string"==typeof a.stack&&a.stack.length>0).map(({expression:a,stack:b})=>(b=b.split("\n").slice(4).filter(a=>!(a.includes("node_modules/next/")||a.includes(" (<anonymous>)")||a.includes(" (node:"))).join("\n"),`Dynamic API Usage Debug - ${a}:
${b}`))}function M(){let a=new AbortController;return a.abort(Object.defineProperty(new p.BailoutToCSRError("Render in Browser"),"__NEXT_ERROR_CODE",{value:"E721",enumerable:!1,configurable:!0})),a.signal}function N(a){switch(a.type){case"prerender":case"prerender-runtime":let b=new AbortController;if(a.cacheSignal)a.cacheSignal.inputReady().then(()=>{b.abort()});else{let c=(0,k.getRuntimeStagePromise)(a);c?c.then(()=>(0,o.scheduleOnNextTick)(()=>b.abort())):(0,o.scheduleOnNextTick)(()=>b.abort())}return b.signal;case"prerender-client":case"prerender-ppr":case"prerender-legacy":case"request":case"cache":case"private-cache":case"unstable-cache":return}}function O(a,b){let c=b.dynamicTracking;c&&c.dynamicAccesses.push({stack:c.isDebugDynamicAccesses?Error().stack:void 0,expression:a})}function P(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b&&c)switch(c.type){case"prerender-client":case"prerender":{let d=c.fallbackRouteParams;d&&d.size>0&&h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d&&d.size>0)return C(b.route,a,c.dynamicTracking);break}case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called during a runtime prerender. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E771",enumerable:!1,configurable:!0});case"cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0})}}function Q(a){let b=l.workAsyncStorage.getStore(),c=k.workUnitAsyncStorage.getStore();if(b)switch(!c&&(0,k.throwForMissingRequestStore)(a),c.type){case"prerender-client":h.default.use((0,m.makeHangingPromise)(c.renderSignal,b.route,a));break;case"prerender-legacy":case"prerender-ppr":if(b.forceStatic)return;throw Object.defineProperty(new p.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called from a Server Component. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E795",enumerable:!1,configurable:!0});case"cache":case"unstable-cache":case"private-cache":throw Object.defineProperty(new q.InvariantError(`\`${a}\` was called inside a cache scope. Next.js should be preventing ${a} from being included in server components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E745",enumerable:!1,configurable:!0});case"request":return}}let R=/\n\s+at Suspense \(<anonymous>\)/,S=RegExp(`\\n\\s+at Suspense \\(<anonymous>\\)(?:(?!\\n\\s+at (?:body|div|main|section|article|aside|header|footer|nav|form|p|span|h1|h2|h3|h4|h5|h6) \\(<anonymous>\\))[\\s\\S])*?\\n\\s+at ${n.ROOT_LAYOUT_BOUNDARY_NAME} \\([^\\n]*\\)`),T=RegExp(`\\n\\s+at ${n.METADATA_BOUNDARY_NAME}[\\n\\s]`),U=RegExp(`\\n\\s+at ${n.VIEWPORT_BOUNDARY_NAME}[\\n\\s]`),V=RegExp(`\\n\\s+at ${n.OUTLET_BOUNDARY_NAME}[\\n\\s]`);function W(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.hasDynamicMetadata=!0;return}if(U.test(b)){c.hasDynamicViewport=!0;return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data was accessed outside of <Suspense>. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function X(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateMetadata\`. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Uncached data or \`connection()\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Y(a,b,c,d){if(!V.test(b)){if(T.test(b)){c.dynamicMetadata=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateMetadata\` or you have file-based metadata such as icons that depend on dynamic params segments. Except for this instance, the page would have been entirely prerenderable which may have been the intended behavior. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`,b);return}if(U.test(b)){let d=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed inside \`generateViewport\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`,b);c.dynamicErrors.push(d);return}if(S.test(b)){c.hasAllowedDynamic=!0,c.hasSuspenseAboveBody=!0;return}else if(R.test(b)){c.hasAllowedDynamic=!0;return}else{if(d.syncDynamicErrorWithStack)return void c.dynamicErrors.push(d.syncDynamicErrorWithStack);let e=Z(`Route "${a.route}": Runtime data such as \`cookies()\`, \`headers()\`, \`params\`, or \`searchParams\` was accessed outside of \`<Suspense>\`. This delays the entire page from rendering, resulting in a slow user experience. Learn more: https://nextjs.org/docs/messages/blocking-route`,b);return void c.dynamicErrors.push(e)}}}function Z(a,b){let c=Object.defineProperty(Error(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return c.stack=c.name+": "+a+b,c}var $=((e={})[e.Full=0]="Full",e[e.Empty=1]="Empty",e[e.Errored=2]="Errored",e);function _(a,b){console.error(b),a.dev||(a.hasReadableErrorStacks?console.error(`To get a more detailed stack trace and pinpoint the issue, start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.`):console.error(`To get a more detailed stack trace and pinpoint the issue, try one of the following:
  - Start the app in development mode by running \`next dev\`, then open "${a.route}" in your browser to investigate the error.
  - Rerun the production build with \`next build --debug-prerender\` to generate better stack traces.`))}function aa(a,b,c,d){if(d.syncDynamicErrorWithStack)throw _(a,d.syncDynamicErrorWithStack),new j.StaticGenBailoutError;if(0!==b){if(c.hasSuspenseAboveBody)return;let d=c.dynamicErrors;if(d.length>0){for(let b=0;b<d.length;b++)_(a,d[b]);throw new j.StaticGenBailoutError}if(c.hasDynamicViewport)throw console.error(`Route "${a.route}" has a \`generateViewport\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) without explicitly allowing fully dynamic rendering. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-viewport`),new j.StaticGenBailoutError;if(1===b)throw console.error(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason. This is a bug in Next.js.`),new j.StaticGenBailoutError}else if(!1===c.hasAllowedDynamic&&c.hasDynamicMetadata)throw console.error(`Route "${a.route}" has a \`generateMetadata\` that depends on Request data (\`cookies()\`, etc...) or uncached external data (\`fetch(...)\`, etc...) when the rest of the route does not. See more info here: https://nextjs.org/docs/messages/next-prerender-dynamic-metadata`),new j.StaticGenBailoutError}function ab(a,b,c){if(c.hasSuspenseAboveBody)return[];if(0!==b){let d=c.dynamicErrors;if(d.length>0)return d;if(1===b)return[Object.defineProperty(new q.InvariantError(`Route "${a.route}" did not produce a static shell and Next.js was unable to determine a reason.`),"__NEXT_ERROR_CODE",{value:"E936",enumerable:!1,configurable:!0})]}else if(!1===c.hasAllowedDynamic&&0===c.dynamicErrors.length&&c.dynamicMetadata)return[c.dynamicMetadata];return[]}function ac(a,b){return a.runtimeStagePromise?a.runtimeStagePromise.then(()=>b):b}},8018,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return i}});let d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=e(void 0);if(c&&c.has(a))return c.get(a);var d={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(d,g,h):d[g]=a[g]}return d.default=a,c&&c.set(a,d),d}(a.r(717));function e(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(e=function(a){return a?c:b})(a)}let f={current:null},g="function"==typeof d.cache?d.cache:a=>a,h=console.warn;function i(a){return function(...b){h(a(...b))}}g(a=>{try{h(f.current)}finally{f.current=null}})},86309,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={isRequestAPICallableInsideAfter:function(){return j},throwForSearchParamsAccessInUseCache:function(){return i},throwWithStaticGenerationBailoutErrorWithDynamicError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(60312),g=a.r(24725);function h(a,b){throw Object.defineProperty(new f.StaticGenBailoutError(`Route ${a} with \`dynamic = "error"\` couldn't be rendered statically because it used ${b}. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E543",enumerable:!1,configurable:!0})}function i(a,b){let c=Object.defineProperty(Error(`Route ${a.route} used \`searchParams\` inside "use cache". Accessing dynamic request data inside a cache scope is not supported. If you need some search params inside a cached function await \`searchParams\` outside of the cached function and pass only the required search params as arguments to the cached function. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E842",enumerable:!1,configurable:!0});throw Error.captureStackTrace(c,b),a.invalidDynamicUsageError??=c,c}function j(){let a=g.afterTaskAsyncStorage.getStore();return(null==a?void 0:a.rootTaskSpawnPhase)==="action"}},28340,(a,b,c)=>{"use strict";function d(){let a,b,c=new Promise((c,d)=>{a=c,b=d});return{resolve:a,reject:b,promise:c}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"createPromiseWithResolvers",{enumerable:!0,get:function(){return d}})},31382,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={RenderStage:function(){return i},StagedRenderingController:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(50640),h=a.r(28340);var i=((d={})[d.Before=1]="Before",d[d.Static=2]="Static",d[d.Runtime=3]="Runtime",d[d.Dynamic=4]="Dynamic",d[d.Abandoned=5]="Abandoned",d);class j{constructor(a=null,b){this.abortSignal=a,this.hasRuntimePrefetch=b,this.currentStage=1,this.staticInterruptReason=null,this.runtimeInterruptReason=null,this.staticStageEndTime=1/0,this.runtimeStageEndTime=1/0,this.runtimeStageListeners=[],this.dynamicStageListeners=[],this.runtimeStagePromise=(0,h.createPromiseWithResolvers)(),this.dynamicStagePromise=(0,h.createPromiseWithResolvers)(),this.mayAbandon=!1,a&&(a.addEventListener("abort",()=>{let{reason:b}=a;this.currentStage<3&&(this.runtimeStagePromise.promise.catch(k),this.runtimeStagePromise.reject(b)),(this.currentStage<4||5===this.currentStage)&&(this.dynamicStagePromise.promise.catch(k),this.dynamicStagePromise.reject(b))},{once:!0}),this.mayAbandon=!0)}onStage(a,b){if(this.currentStage>=a)b();else if(3===a)this.runtimeStageListeners.push(b);else if(4===a)this.dynamicStageListeners.push(b);else throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}canSyncInterrupt(){if(1===this.currentStage)return!1;let a=this.hasRuntimePrefetch?4:3;return this.currentStage<a}syncInterruptCurrentStageWithReason(a){if(1!==this.currentStage){if(this.mayAbandon)return this.abandonRenderImpl();switch(this.currentStage){case 2:this.staticInterruptReason=a,this.advanceStage(4);return;case 3:this.hasRuntimePrefetch&&(this.runtimeInterruptReason=a,this.advanceStage(4));return}}}getStaticInterruptReason(){return this.staticInterruptReason}getRuntimeInterruptReason(){return this.runtimeInterruptReason}getStaticStageEndTime(){return this.staticStageEndTime}getRuntimeStageEndTime(){return this.runtimeStageEndTime}abandonRender(){if(!this.mayAbandon)throw Object.defineProperty(new g.InvariantError("`abandonRender` called on a stage controller that cannot be abandoned."),"__NEXT_ERROR_CODE",{value:"E938",enumerable:!1,configurable:!0});this.abandonRenderImpl()}abandonRenderImpl(){let{currentStage:a}=this;switch(a){case 2:this.currentStage=5,this.resolveRuntimeStage();return;case 3:this.currentStage=5;return}}advanceStage(a){if(a<=this.currentStage)return;let b=this.currentStage;if(this.currentStage=a,b<3&&a>=3&&(this.staticStageEndTime=performance.now()+performance.timeOrigin,this.resolveRuntimeStage()),b<4&&a>=4){this.runtimeStageEndTime=performance.now()+performance.timeOrigin,this.resolveDynamicStage();return}}resolveRuntimeStage(){let a=this.runtimeStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.runtimeStagePromise.resolve()}resolveDynamicStage(){let a=this.dynamicStageListeners;for(let b=0;b<a.length;b++)a[b]();a.length=0,this.dynamicStagePromise.resolve()}getStagePromise(a){switch(a){case 3:return this.runtimeStagePromise.promise;case 4:return this.dynamicStagePromise.promise;default:throw Object.defineProperty(new g.InvariantError(`Invalid render stage: ${a}`),"__NEXT_ERROR_CODE",{value:"E881",enumerable:!1,configurable:!0})}}waitForStage(a){return this.getStagePromise(a)}delayUntilStage(a,b,c){var d,e,f;let g,h=(d=this.getStagePromise(a),e=b,f=c,g=new Promise((a,b)=>{d.then(a.bind(null,f),b)}),void 0!==e&&(g.displayName=e),g);return this.abortSignal&&h.catch(k),h}}function k(){}},81740,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"cookies",{enumerable:!0,get:function(){return n}});let d=a.r(14896),e=a.r(63681),f=a.r(56704),g=a.r(32319),h=a.r(60384),i=a.r(60312),j=a.r(13091),k=a.r(8018),l=a.r(86309),m=a.r(50640);function n(){let a="cookies",b=f.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(b.forceStatic)return p(d.RequestCookiesAdapter.seal(new e.RequestCookies(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,n),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var k=b,q=c;let g=o.get(q);if(g)return g;let r=(0,j.makeHangingPromise)(q.renderSignal,k.route,"`cookies()`");return o.set(q,r),r;case"prerender-client":let s="`cookies`";throw Object.defineProperty(new m.InvariantError(`${s} must not be used within a Client Component. Next.js should be preventing ${s} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,h.delayUntilRuntimeStage)(c,p(c.cookies));case"private-cache":return p(c.cookies);case"request":return(0,h.trackDynamicDataInDynamicRender)(c),p((0,d.areCookiesMutableInCurrentPhase)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.throwForMissingRequestStore)(a)}a.r(31382);let o=new WeakMap;function p(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),c}(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},29927,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HeadersAdapter:function(){return h},ReadonlyHeadersError:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(51409);class g extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new g}}class h extends Headers{constructor(a){super(),this.headers=new Proxy(a,{get(b,c,d){if("symbol"==typeof c)return f.ReflectAdapter.get(b,c,d);let e=c.toLowerCase(),g=Object.keys(a).find(a=>a.toLowerCase()===e);if(void 0!==g)return f.ReflectAdapter.get(b,g,d)},set(b,c,d,e){if("symbol"==typeof c)return f.ReflectAdapter.set(b,c,d,e);let g=c.toLowerCase(),h=Object.keys(a).find(a=>a.toLowerCase()===g);return f.ReflectAdapter.set(b,h??c,d,e)},has(b,c){if("symbol"==typeof c)return f.ReflectAdapter.has(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0!==e&&f.ReflectAdapter.has(b,e)},deleteProperty(b,c){if("symbol"==typeof c)return f.ReflectAdapter.deleteProperty(b,c);let d=c.toLowerCase(),e=Object.keys(a).find(a=>a.toLowerCase()===d);return void 0===e||f.ReflectAdapter.deleteProperty(b,e)}})}static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"append":case"delete":case"set":return g.callable;default:return f.ReflectAdapter.get(a,b,c)}}})}merge(a){return Array.isArray(a)?a.join(", "):a}static from(a){return a instanceof Headers?a:new h(a)}append(a,b){let c=this.headers[a];"string"==typeof c?this.headers[a]=[c,b]:Array.isArray(c)?c.push(b):this.headers[a]=b}delete(a){delete this.headers[a]}get(a){let b=this.headers[a];return void 0!==b?this.merge(b):null}has(a){return void 0!==this.headers[a]}set(a,b){this.headers[a]=b}forEach(a,b){for(let[c,d]of this.entries())a.call(b,d,c,this)}*entries(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase(),c=this.get(b);yield[b,c]}}*keys(){for(let a of Object.keys(this.headers)){let b=a.toLowerCase();yield b}}*values(){for(let a of Object.keys(this.headers)){let b=this.get(a);yield b}}[Symbol.iterator](){return this.entries()}}},35754,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"headers",{enumerable:!0,get:function(){return m}});let d=a.r(29927),e=a.r(56704),f=a.r(32319),g=a.r(60384),h=a.r(60312),i=a.r(13091),j=a.r(8018),k=a.r(86309),l=a.r(50640);function m(){let a="headers",b=e.workAsyncStorage.getStore(),c=f.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,k.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(b.forceStatic)return o(d.HeadersAdapter.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":var j=b,p=c;let e=n.get(p);if(e)return e;let f=(0,i.makeHangingPromise)(p.renderSignal,j.route,"`headers()`");return n.set(p,f),f;case"prerender-client":let q="`headers`";throw Object.defineProperty(new l.InvariantError(`${q} must not be used within a client component. Next.js should be preventing ${q} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,g.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,g.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,g.delayUntilRuntimeStage)(c,o(c.headers));case"private-cache":return o(c.headers);case"request":return(0,g.trackDynamicDataInDynamicRender)(c),o(c.headers)}}(0,f.throwForMissingRequestStore)(a)}a.r(31382);let n=new WeakMap;function o(a){let b=n.get(a);if(b)return b;let c=Promise.resolve(a);return n.set(a,c),c}(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},51125,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"draftMode",{enumerable:!0,get:function(){return k}});let d=a.r(32319),e=a.r(56704),f=a.r(60384),g=a.r(8018),h=a.r(60312),i=a.r(96556),j=a.r(50640);function k(){let a=e.workAsyncStorage.getStore(),b=d.workUnitAsyncStorage.getStore();switch((!a||!b)&&(0,d.throwForMissingRequestStore)("draftMode"),b.type){case"prerender-runtime":return(0,f.delayUntilRuntimeStage)(b,l(b.draftMode,a));case"request":return l(b.draftMode,a);case"cache":case"private-cache":case"unstable-cache":let c=(0,d.getDraftModeProviderForCacheScope)(a,b);if(c)return l(c,a);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return l(null,a);default:return b}}function l(a,b){let c=n.get(a??m);return c||Promise.resolve(new o(a))}a.r(51409);let m={},n=new WeakMap;class o{constructor(a){this._provider=a}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){p("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){p("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function p(a,b){let c=e.workAsyncStorage.getStore(),g=d.workUnitAsyncStorage.getStore();if(c){if((null==g?void 0:g.phase)==="after")throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(c.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(g)switch(g.type){case"cache":case"private-cache":{let d=Object.defineProperty(Error(`Route ${c.route} used "${a}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(d,b),c.invalidDynamicUsageError??=d,d}case"unstable-cache":throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let b=Object.defineProperty(Error(`Route ${c.route} used ${a} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,f.abortAndThrowOnSynchronousRequestDataAccess)(c.route,a,b,g)}case"prerender-client":let d="`draftMode`";throw Object.defineProperty(new j.InvariantError(`${d} must not be used within a Client Component. Next.js should be preventing ${d} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,f.postponeWithTracking)(c.route,a,g.dynamicTracking);case"prerender-legacy":g.revalidate=0;let e=Object.defineProperty(new i.DynamicServerError(`Route ${c.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.dynamicUsageDescription=a,c.dynamicUsageStack=e.stack,e;case"request":(0,f.trackDynamicDataInDynamicRender)(g)}}}(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},5246,(a,b,c)=>{b.exports.cookies=a.r(81740).cookies,b.exports.headers=a.r(35754).headers,b.exports.draftMode=a.r(51125).draftMode},20916,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return e}});class d extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class e extends URLSearchParams{append(){throw new d}delete(){throw new d}set(){throw new d}sort(){throw new d}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},21170,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"RedirectStatusCode",{enumerable:!0,get:function(){return e}});var d,e=((d={})[d.SeeOther=303]="SeeOther",d[d.TemporaryRedirect=307]="TemporaryRedirect",d[d.PermanentRedirect=308]="PermanentRedirect",d);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},28859,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={REDIRECT_ERROR_CODE:function(){return h},RedirectType:function(){return i},isRedirectError:function(){return j}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=a.r(21170),h="NEXT_REDIRECT";var i=((d={}).push="push",d.replace="replace",d);function j(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let b=a.digest.split(";"),[c,d]=b,e=b.slice(2,-2).join(";"),f=Number(b.at(-2));return c===h&&("replace"===d||"push"===d)&&"string"==typeof e&&!isNaN(f)&&f in g.RedirectStatusCode}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},44868,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return n},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return l},permanentRedirect:function(){return k},redirect:function(){return j}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(21170),g=a.r(28859),h=a.r(20635).actionAsyncStorage;function i(a,b,c=f.RedirectStatusCode.TemporaryRedirect){let d=Object.defineProperty(Error(g.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return d.digest=`${g.REDIRECT_ERROR_CODE};${b};${a};${c};`,d}function j(a,b){throw i(a,b??=h?.getStore()?.isAction?g.RedirectType.push:g.RedirectType.replace,f.RedirectStatusCode.TemporaryRedirect)}function k(a,b=g.RedirectType.replace){throw i(a,b,f.RedirectStatusCode.PermanentRedirect)}function l(a){return(0,g.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function m(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function n(a){if(!(0,g.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},89798,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={HTTPAccessErrorStatus:function(){return f},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return h},getAccessFallbackErrorTypeByStatus:function(){return k},getAccessFallbackHTTPStatus:function(){return j},isHTTPAccessFallbackError:function(){return i}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},g=new Set(Object.values(f)),h="NEXT_HTTP_ERROR_FALLBACK";function i(a){if("object"!=typeof a||null===a||!("digest"in a)||"string"!=typeof a.digest)return!1;let[b,c]=a.digest.split(";");return b===h&&g.has(Number(c))}function j(a){return Number(a.digest.split(";")[1])}function k(a){switch(a){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},16155,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"notFound",{enumerable:!0,get:function(){return f}});let d=a.r(89798),e=`${d.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function f(){let a=Object.defineProperty(Error(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=e,a}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},34557,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"forbidden",{enumerable:!0,get:function(){return d}}),a.r(89798).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},93845,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unauthorized",{enumerable:!0,get:function(){return d}}),a.r(89798).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},73808,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isPostpone",{enumerable:!0,get:function(){return e}});let d=Symbol.for("react.postpone");function e(a){return"object"==typeof a&&null!==a&&a.$$typeof===d}},1567,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"isNextRouterError",{enumerable:!0,get:function(){return f}});let d=a.r(89798),e=a.r(28859);function f(a){return(0,e.isRedirectError)(a)||(0,d.isHTTPAccessFallbackError)(a)}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},94783,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b)||(0,h.isPrerenderInterruptedError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=a.r(13091),e=a.r(73808),f=a.r(49640),g=a.r(1567),h=a.r(60384),i=a.r(96556);("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},60968,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=a.r(94783).unstable_rethrow;("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},73727,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={ReadonlyURLSearchParams:function(){return f.ReadonlyURLSearchParams},RedirectType:function(){return h.RedirectType},forbidden:function(){return j.forbidden},notFound:function(){return i.notFound},permanentRedirect:function(){return g.permanentRedirect},redirect:function(){return g.redirect},unauthorized:function(){return k.unauthorized},unstable_isUnrecognizedActionError:function(){return m},unstable_rethrow:function(){return l.unstable_rethrow}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20916),g=a.r(44868),h=a.r(28859),i=a.r(16155),j=a.r(34557),k=a.r(93845),l=a.r(60968);function m(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},70396,a=>{"use strict";a.i(73727),a.s([])},39754,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.CryptoProvider=void 0,c.CryptoProvider=class{constructor(){this.encoder=new TextEncoder}}},92241,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=a.e&&a.e.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b},g=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.NodeCryptoProvider=void 0;let h=f(a.r(54799)),i=a.r(39754);class j extends i.CryptoProvider{computeHMACSignature(a,b){return h.createHmac("sha256",b).update(a,"utf8").digest("hex")}computeHMACSignatureAsync(a,b){return g(this,void 0,void 0,function*(){return this.computeHMACSignature(a,b)})}secureCompare(a,b){return g(this,void 0,void 0,function*(){let c=this.encoder.encode(a),d=this.encoder.encode(b);if(c.length!==d.length)return!1;let e=h.randomBytes(32),f=h.createHmac("sha256",e).update(c).digest(),g=h.createHmac("sha256",e).update(d).digest();return h.timingSafeEqual(f,g)})}encrypt(a,b,c,d){return g(this,void 0,void 0,function*(){let e=c||h.randomBytes(32),f=h.createCipheriv("aes-256-gcm",b,e);d&&f.setAAD(Buffer.from(d));let g=Buffer.concat([f.update(Buffer.from(a)),f.final()]),i=f.getAuthTag();return{ciphertext:new Uint8Array(g),iv:new Uint8Array(e),tag:new Uint8Array(i)}})}decrypt(a,b,c,d,e){return g(this,void 0,void 0,function*(){let f=h.createDecipheriv("aes-256-gcm",b,c);return f.setAuthTag(Buffer.from(d)),e&&f.setAAD(Buffer.from(e)),new Uint8Array(Buffer.concat([f.update(Buffer.from(a)),f.final()]))})}randomBytes(a){return new Uint8Array(h.randomBytes(a))}randomUUID(){return h.randomUUID()}}c.NodeCryptoProvider=j},48571,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.SubtleCryptoProvider=void 0;let e=a.r(39754);class f extends e.CryptoProvider{constructor(a){super(),this.subtleCrypto=a||crypto.subtle}computeHMACSignature(a,b){throw Error("SubleCryptoProvider cannot be used in a synchronous context.")}computeHMACSignatureAsync(a,b){return d(this,void 0,void 0,function*(){let c=new TextEncoder,d=yield this.subtleCrypto.importKey("raw",c.encode(b),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),e=new Uint8Array((yield this.subtleCrypto.sign("hmac",d,c.encode(a)))),f=Array(e.length);for(let a=0;a<e.length;a++)f[a]=g[e[a]];return f.join("")})}secureCompare(a,b){return d(this,void 0,void 0,function*(){let c=this.encoder.encode(a),d=this.encoder.encode(b);if(c.length!==d.length)return!1;let e={name:"HMAC",hash:"SHA-256"},f=yield crypto.subtle.generateKey(e,!1,["sign","verify"]),g=yield crypto.subtle.sign(e,f,c);return yield crypto.subtle.verify(e,f,g,d)})}encrypt(a,b,c,e){return d(this,void 0,void 0,function*(){let d=c||crypto.getRandomValues(new Uint8Array(32)),f=yield this.subtleCrypto.importKey("raw",b,{name:"AES-GCM"},!1,["encrypt"]),g={name:"AES-GCM",iv:d};e&&(g.additionalData=e);let h=new Uint8Array((yield this.subtleCrypto.encrypt(g,f,a))),i=h.length-16,j=h.slice(i);return{ciphertext:h.slice(0,i),iv:d,tag:j}})}decrypt(a,b,c,e,f){return d(this,void 0,void 0,function*(){let d=new Uint8Array(a.length+e.length);d.set(a,0),d.set(e,a.length);let g=yield this.subtleCrypto.importKey("raw",b,{name:"AES-GCM"},!1,["decrypt"]),h={name:"AES-GCM",iv:c};return f&&(h.additionalData=f),new Uint8Array((yield this.subtleCrypto.decrypt(h,g,d)))})}randomBytes(a){let b=new Uint8Array(a);return crypto.getRandomValues(b),b}randomUUID(){if("u">typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let a=this.randomBytes(16);a[6]=15&a[6]|64,a[8]=63&a[8]|128;let b=Array.from(a,a=>g[a]).join("");return`${b.slice(0,8)}-${b.slice(8,12)}-${b.slice(12,16)}-${b.slice(16,20)}-${b.slice(20)}`}}c.SubtleCryptoProvider=f;let g=Array(256);for(let a=0;a<g.length;a++)g[a]=a.toString(16).padStart(2,"0")},88483,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.HttpClientError=c.HttpClientResponse=c.HttpClient=void 0;class d{constructor(a,b){this.baseURL=a,this.options=b,this.MAX_RETRY_ATTEMPTS=3,this.BACKOFF_MULTIPLIER=1.5,this.MINIMUM_SLEEP_TIME_IN_MILLISECONDS=500,this.RETRY_STATUS_CODES=[408,500,502,504],this.sleep=a=>new Promise(b=>setTimeout(b,this.getSleepTimeInMilliseconds(a)))}getClientName(){throw Error("getClientName not implemented")}addClientToUserAgent(a){return a.indexOf(" ")>-1?a.replace(/\b\s/,`/${this.getClientName()} `):a+=`/${this.getClientName()}`}static getResourceURL(a,b,c){return new URL([b,d.getQueryString(c)].filter(Boolean).join("?"),a).toString()}static getQueryString(a){if(!a)return;let b={};return Object.entries(a).forEach(([a,c])=>{""!==c&&void 0!==c&&(b[a]=c)}),new URLSearchParams(b).toString()}static getContentTypeHeader(a){if(a instanceof URLSearchParams)return{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}}static getBody(a){return null===a||a instanceof URLSearchParams?a:JSON.stringify(a)}static isPathRetryable(a){return a.startsWith("/fga/")||a.startsWith("/vault/")||a.startsWith("/audit_logs/events")}getSleepTimeInMilliseconds(a){return this.MINIMUM_SLEEP_TIME_IN_MILLISECONDS*Math.pow(this.BACKOFF_MULTIPLIER,a)*(Math.random()+.5)}}c.HttpClient=d,c.HttpClientResponse=class{constructor(a,b){this._statusCode=a,this._headers=b}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}},c.HttpClientError=class extends Error{constructor({message:a,response:b}){super(a),this.name="HttpClientError",this.message="The request could not be completed.",this.message=a,this.response=b}}},39361,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ParseError=void 0,c.ParseError=class extends Error{constructor({message:a,rawBody:b,rawStatus:c,requestID:d}){super(a),this.name="ParseError",this.status=500,this.rawBody=b,this.rawStatus=c,this.requestID=d}}},50717,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.FetchHttpClientResponse=c.FetchHttpClient=void 0;let e=a.r(88483),f=a.r(39361);class g extends e.HttpClient{constructor(a,b,c){if(super(a,b),this.baseURL=a,this.options=b,!c){if(!globalThis.fetch)throw Error("Fetch function not defined in the global scope and no replacement was provided.");c=globalThis.fetch}this._fetchFn=c.bind(globalThis)}getClientName(){return"fetch"}get(a,b){return d(this,void 0,void 0,function*(){let c=e.HttpClient.getResourceURL(this.baseURL,a,b.params);return e.HttpClient.isPathRetryable(a)?yield this.fetchRequestWithRetry(c,"GET",null,b.headers):yield this.fetchRequest(c,"GET",null,b.headers)})}post(a,b,c){return d(this,void 0,void 0,function*(){let d=e.HttpClient.getResourceURL(this.baseURL,a,c.params);return e.HttpClient.isPathRetryable(a)?yield this.fetchRequestWithRetry(d,"POST",e.HttpClient.getBody(b),Object.assign(Object.assign({},e.HttpClient.getContentTypeHeader(b)),c.headers)):yield this.fetchRequest(d,"POST",e.HttpClient.getBody(b),Object.assign(Object.assign({},e.HttpClient.getContentTypeHeader(b)),c.headers))})}put(a,b,c){return d(this,void 0,void 0,function*(){let d=e.HttpClient.getResourceURL(this.baseURL,a,c.params);return e.HttpClient.isPathRetryable(a)?yield this.fetchRequestWithRetry(d,"PUT",e.HttpClient.getBody(b),Object.assign(Object.assign({},e.HttpClient.getContentTypeHeader(b)),c.headers)):yield this.fetchRequest(d,"PUT",e.HttpClient.getBody(b),Object.assign(Object.assign({},e.HttpClient.getContentTypeHeader(b)),c.headers))})}delete(a,b){return d(this,void 0,void 0,function*(){let c=e.HttpClient.getResourceURL(this.baseURL,a,b.params);return e.HttpClient.isPathRetryable(a)?yield this.fetchRequestWithRetry(c,"DELETE",null,b.headers):yield this.fetchRequest(c,"DELETE",null,b.headers)})}fetchRequest(a,b,c,g){var i,j,k,l,m;return d(this,void 0,void 0,function*(){let d,n,o="POST"===b||"PUT"===b||"PATCH"===b,{"User-Agent":p}=(null==(i=this.options)?void 0:i.headers)||{},q=null!=(k=null==(j=this.options)?void 0:j.timeout)?k:6e4;d=new AbortController,n=setTimeout(()=>{null==d||d.abort()},q);try{let i=yield this._fetchFn(a,{method:b,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null==(l=this.options)?void 0:l.headers),g),{"User-Agent":this.addClientToUserAgent((p||"workos-node").toString())}),body:c||(o?"":void 0),signal:null==d?void 0:d.signal});if(n&&clearTimeout(n),!i.ok){let a,b=null!=(m=i.headers.get("X-Request-ID"))?m:"",c=yield i.text();try{a=JSON.parse(c)}catch(a){if(a instanceof SyntaxError)throw new f.ParseError({message:a.message,rawBody:c,requestID:b,rawStatus:i.status});throw a}throw new e.HttpClientError({message:i.statusText,response:{status:i.status,headers:i.headers,data:a}})}return new h(i)}catch(a){if(n&&clearTimeout(n),a instanceof Error&&"AbortError"===a.name)throw new e.HttpClientError({message:`Request timeout after ${q}ms`,response:{status:408,headers:{},data:{error:"Request timeout"}}});throw a}})}fetchRequestWithRetry(a,b,c,e){return d(this,void 0,void 0,function*(){let f,g=1,h=()=>d(this,void 0,void 0,function*(){let d=null;try{f=yield this.fetchRequest(a,b,c,e)}catch(a){d=a}if(this.shouldRetryRequest(d,g))return g++,yield this.sleep(g),h();if(null!=d)throw d;return f});return h()})}shouldRetryRequest(a,b){return!(b>this.MAX_RETRY_ATTEMPTS)&&(!!(null!=a&&(a instanceof TypeError||a instanceof e.HttpClientError&&this.RETRY_STATUS_CODES.includes(a.response.status)))||!1)}}c.FetchHttpClient=g;class h extends e.HttpClientResponse{constructor(a){super(a.status,h._transformHeadersToObject(a.headers)),this._res=a}getRawResponse(){return this._res}toJSON(){let a=this._res.headers.get("content-type");return(null==a?void 0:a.includes("application/json"))?this._res.json():null}static _transformHeadersToObject(a){let b={};for(let c of Object.entries(a)){if(!Array.isArray(c)||2!==c.length)throw Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");b[c[0]]=c[1]}return b}}c.FetchHttpClientResponse=h},65477,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__setModuleDefault||(Object.create?function(a,b){Object.defineProperty(a,"default",{enumerable:!0,value:b})}:function(a,b){a.default=b}),f=a.e&&a.e.__importStar||function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)"default"!==c&&Object.prototype.hasOwnProperty.call(a,c)&&d(b,a,c);return e(b,a),b},g=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.NodeHttpClientResponse=c.NodeHttpClient=void 0;let h=a.r(88483),i=f(a.r(47299)),j=f(a.r(43698)),k=i.default||i,l=j.default||j;class m extends h.HttpClient{constructor(a,b){super(a,b),this.baseURL=a,this.options=b,this.httpAgent=new k.Agent({keepAlive:!0}),this.httpsAgent=new l.Agent({keepAlive:!0})}getClientName(){return"node"}static getBody(a){return null==a?null:a instanceof URLSearchParams?a.toString():JSON.stringify(a)}get(a,b){return g(this,void 0,void 0,function*(){let c=h.HttpClient.getResourceURL(this.baseURL,a,b.params);return h.HttpClient.isPathRetryable(a)?yield this.nodeRequestWithRetry(c,"GET",null,b.headers):yield this.nodeRequest(c,"GET",null,b.headers)})}post(a,b,c){return g(this,void 0,void 0,function*(){let d=h.HttpClient.getResourceURL(this.baseURL,a,c.params);return h.HttpClient.isPathRetryable(a)?yield this.nodeRequestWithRetry(d,"POST",m.getBody(b),Object.assign(Object.assign({},h.HttpClient.getContentTypeHeader(b)),c.headers)):yield this.nodeRequest(d,"POST",m.getBody(b),Object.assign(Object.assign({},h.HttpClient.getContentTypeHeader(b)),c.headers))})}put(a,b,c){return g(this,void 0,void 0,function*(){let d=h.HttpClient.getResourceURL(this.baseURL,a,c.params);return h.HttpClient.isPathRetryable(a)?yield this.nodeRequestWithRetry(d,"PUT",m.getBody(b),Object.assign(Object.assign({},h.HttpClient.getContentTypeHeader(b)),c.headers)):yield this.nodeRequest(d,"PUT",m.getBody(b),Object.assign(Object.assign({},h.HttpClient.getContentTypeHeader(b)),c.headers))})}delete(a,b){return g(this,void 0,void 0,function*(){let c=h.HttpClient.getResourceURL(this.baseURL,a,b.params);return h.HttpClient.isPathRetryable(a)?yield this.nodeRequestWithRetry(c,"DELETE",null,b.headers):yield this.nodeRequest(c,"DELETE",null,b.headers)})}nodeRequest(a,b,c,d){return g(this,void 0,void 0,function*(){return new Promise((e,f)=>{var i,j;let m=a.startsWith("https"),o=m?this.httpsAgent:this.httpAgent,p=m?l:k,{"User-Agent":q}=null==(i=this.options)?void 0:i.headers,r={method:b,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null==(j=this.options)?void 0:j.headers),d),{"User-Agent":this.addClientToUserAgent(q.toString())}),agent:o},s=p.request(a,r,a=>g(this,void 0,void 0,function*(){let b=new n(a);a.statusCode&&(a.statusCode<200||a.statusCode>299)&&f(new h.HttpClientError({message:a.statusMessage,response:{status:a.statusCode,headers:a.headers,data:yield b.toJSON()}})),e(b)}));s.on("error",a=>{f(Error(a.message))}),c&&(s.setHeader("Content-Length",Buffer.byteLength(c)),s.write(c)),s.end()})})}nodeRequestWithRetry(a,b,c,d){var e,f;return g(this,void 0,void 0,function*(){let i=a.startsWith("https"),j=i?this.httpsAgent:this.httpAgent,m=i?l:k,{"User-Agent":o}=null==(e=this.options)?void 0:e.headers,p={method:b,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null==(f=this.options)?void 0:f.headers),d),{"User-Agent":this.addClientToUserAgent(o.toString())}),agent:j},q=1,r=()=>g(this,void 0,void 0,function*(){return new Promise((b,d)=>{let e=m.request(a,p,a=>g(this,void 0,void 0,function*(){let c=new n(a);if(this.shouldRetryRequest(a,q))return q++,yield this.sleep(q),r().then(b).catch(d);a.statusCode&&(a.statusCode<200||a.statusCode>299)&&d(new h.HttpClientError({message:a.statusMessage,response:{status:a.statusCode,headers:a.headers,data:yield c.toJSON()}})),b(new n(a))}));e.on("error",a=>g(this,void 0,void 0,function*(){if(null!=a&&a instanceof TypeError)return q++,yield this.sleep(q),r().then(b).catch(d);d(Error(a.message))})),c&&(e.setHeader("Content-Length",Buffer.byteLength(c)),e.write(c)),e.end()})});return r()})}shouldRetryRequest(a,b){return!(b>this.MAX_RETRY_ATTEMPTS)&&!!(null!=a&&this.RETRY_STATUS_CODES.includes(a.statusCode))}}c.NodeHttpClient=m;class n extends h.HttpClientResponse{constructor(a){super(a.statusCode,a.headers||{}),this._res=a}getRawResponse(){return this._res}toJSON(){return new Promise((a,b)=>{let c=this._res.headers["content-type"];(null==c?void 0:c.includes("application/json"))||a(null);let d="";this._res.setEncoding("utf8"),this._res.on("data",a=>{d+=a}),this._res.once("end",()=>{try{a(JSON.parse(d))}catch(a){b(a)}})})}}c.NodeHttpClientResponse=n},51185,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.GenericServerException=void 0,c.GenericServerException=class extends Error{constructor(a,b,c,d){super(),this.status=a,this.rawData=c,this.requestID=d,this.name="GenericServerException",this.message="The request could not be completed.",b&&(this.message=b)}}},57965,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.BadRequestException=void 0,c.BadRequestException=class extends Error{constructor({code:a,errors:b,message:c,requestID:d}){super(),this.status=400,this.name="BadRequestException",this.message="Bad request",this.requestID=d,c&&(this.message=c),a&&(this.code=a),b&&(this.errors=b)}}},92983,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.NoApiKeyProvidedException=void 0,c.NoApiKeyProvidedException=class extends Error{constructor(){super(...arguments),this.status=500,this.name="NoApiKeyProvidedException",this.message='Missing API key. Pass it to the constructor (new WorkOS("sk_test_Sz3IQjepeSWaI4cMS4ms4sMuU")) or define it in the WORKOS_API_KEY environment variable.'}}},24186,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.NotFoundException=void 0,c.NotFoundException=class extends Error{constructor({code:a,message:b,path:c,requestID:d}){super(),this.status=404,this.name="NotFoundException",this.code=a,this.message=null!=b?b:`The requested path '${c}' could not be found.`,this.requestID=d}}},12989,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.OauthException=void 0,c.OauthException=class extends Error{constructor(a,b,c,d,e){super(),this.status=a,this.requestID=b,this.error=c,this.errorDescription=d,this.rawData=e,this.name="OauthException",c&&d?this.message=`Error: ${c}
Error Description: ${d}`:c?this.message=`Error: ${c}`:this.message="An error has occurred."}}},29475,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.RateLimitExceededException=void 0;let d=a.r(51185);class e extends d.GenericServerException{constructor(a,b,c){super(429,a,{},b),this.retryAfter=c,this.name="RateLimitExceededException"}}c.RateLimitExceededException=e},56502,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SignatureVerificationException=void 0,c.SignatureVerificationException=class extends Error{constructor(a){super(a||"Signature verification failed."),this.name="SignatureVerificationException"}}},22030,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.UnauthorizedException=void 0,c.UnauthorizedException=class extends Error{constructor(a){super(),this.requestID=a,this.status=401,this.name="UnauthorizedException",this.message="Could not authorize the request. Maybe your API key is invalid?"}}},74717,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.UnprocessableEntityException=void 0,c.UnprocessableEntityException=class extends Error{constructor({code:a,errors:b,message:c,requestID:d}){if(super(),this.status=422,this.name="UnprocessableEntityException",this.message="Unprocessable entity",this.requestID=d,c&&(this.message=c),a&&(this.code=a),b){const a=1===b.length?"requirement":"requirements";for(const{code:c}of(this.message=`The following ${a} must be met:
`,b))this.message=this.message.concat(`	${c}
`)}}}},77771,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(51185),c),e(a.r(57965),c),e(a.r(92983),c),e(a.r(24186),c),e(a.r(12989),c),e(a.r(29475),c),e(a.r(56502),c),e(a.r(22030),c),e(a.r(74717),c)},11347,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.SignatureProvider=void 0;let e=a.r(77771);c.SignatureProvider=class{constructor(a){this.cryptoProvider=a}verifyHeader({payload:a,sigHeader:b,secret:c,tolerance:f=18e4}){return d(this,void 0,void 0,function*(){let[d,g]=this.getTimestampAndSignatureHash(b);if(!g||0===Object.keys(g).length)throw new e.SignatureVerificationException("No signature hash found with expected scheme v1");if(parseInt(d,10)<Date.now()-f)throw new e.SignatureVerificationException("Timestamp outside the tolerance zone");let h=yield this.computeSignature(d,a,c);if((yield this.cryptoProvider.secureCompare(h,g))===!1)throw new e.SignatureVerificationException("Signature hash does not match the expected signature hash for payload");return!0})}getTimestampAndSignatureHash(a){let[b,c]=a.split(",");if(void 0===b||void 0===c)throw new e.SignatureVerificationException("Signature or timestamp missing");let{1:d}=b.split("="),{1:f}=c.split("=");return[d,f]}computeSignature(a,b,c){return d(this,void 0,void 0,function*(){b=JSON.stringify(b);let d=`${a}.${b}`;return yield this.cryptoProvider.computeHMACSignatureAsync(d,c)})}}},24964,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.unreachable=void 0,c.unreachable=(a,b=`Entered unreachable code. Received '${a}'.`)=>{throw TypeError(b)}},3683,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeOrganizationDomain=void 0,c.deserializeOrganizationDomain=a=>({object:a.object,id:a.id,domain:a.domain,organizationId:a.organization_id,state:a.state,verificationToken:a.verification_token,verificationStrategy:a.verification_strategy,createdAt:a.created_at,updatedAt:a.updated_at})},68924,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeOrganization=void 0;let d=a.r(3683);c.deserializeOrganization=a=>{var b,c;return Object.assign(Object.assign({object:a.object,id:a.id,name:a.name,allowProfilesOutsideOrganization:a.allow_profiles_outside_organization,domains:a.domains.map(d.deserializeOrganizationDomain)},void 0===a.stripe_customer_id?void 0:{stripeCustomerId:a.stripe_customer_id}),{createdAt:a.created_at,updatedAt:a.updated_at,externalId:null!=(b=a.external_id)?b:null,metadata:null!=(c=a.metadata)?c:{}})}},71765,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeAuthenticateWithCodeOptions=void 0,c.serializeAuthenticateWithCodeOptions=a=>({grant_type:"authorization_code",client_id:a.clientId,client_secret:a.clientSecret,code:a.code,code_verifier:a.codeVerifier,invitation_token:a.invitationToken,ip_address:a.ipAddress,user_agent:a.userAgent})},28324,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeAuthenticateWithCodeAndVerifierOptions=void 0,c.serializeAuthenticateWithCodeAndVerifierOptions=a=>({grant_type:"authorization_code",client_id:a.clientId,code:a.code,code_verifier:a.codeVerifier,invitation_token:a.invitationToken,ip_address:a.ipAddress,user_agent:a.userAgent})},71451,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeAuthenticateWithMagicAuthOptions=void 0,c.serializeAuthenticateWithMagicAuthOptions=a=>({grant_type:"urn:workos:oauth:grant-type:magic-auth:code",client_id:a.clientId,client_secret:a.clientSecret,code:a.code,email:a.email,invitation_token:a.invitationToken,link_authorization_code:a.linkAuthorizationCode,ip_address:a.ipAddress,user_agent:a.userAgent})},80997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeAuthenticateWithPasswordOptions=void 0,c.serializeAuthenticateWithPasswordOptions=a=>({grant_type:"password",client_id:a.clientId,client_secret:a.clientSecret,email:a.email,password:a.password,invitation_token:a.invitationToken,ip_address:a.ipAddress,user_agent:a.userAgent})},33163,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeAuthenticateWithRefreshTokenOptions=void 0,c.serializeAuthenticateWithRefreshTokenOptions=a=>({grant_type:"refresh_token",client_id:a.clientId,client_secret:a.clientSecret,refresh_token:a.refreshToken,organization_id:a.organizationId,ip_address:a.ipAddress,user_agent:a.userAgent})},91050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeAuthenticateWithTotpOptions=void 0,c.serializeAuthenticateWithTotpOptions=a=>({grant_type:"urn:workos:oauth:grant-type:mfa-totp",client_id:a.clientId,client_secret:a.clientSecret,code:a.code,authentication_challenge_id:a.authenticationChallengeId,pending_authentication_token:a.pendingAuthenticationToken,ip_address:a.ipAddress,user_agent:a.userAgent})},97145,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeAuthenticationEvent=void 0,c.deserializeAuthenticationEvent=a=>({email:a.email,error:a.error,ipAddress:a.ip_address,status:a.status,type:a.type,userAgent:a.user_agent,userId:a.user_id})},53397,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeOauthTokens=void 0,c.deserializeOauthTokens=a=>a?{accessToken:a.access_token,refreshToken:a.refresh_token,expiresAt:a.expires_at,scopes:a.scopes}:void 0},3418,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeUser=void 0,c.deserializeUser=a=>{var b,c;return{object:a.object,id:a.id,email:a.email,emailVerified:a.email_verified,firstName:a.first_name,profilePictureUrl:a.profile_picture_url,lastName:a.last_name,lastSignInAt:a.last_sign_in_at,locale:a.locale,createdAt:a.created_at,updatedAt:a.updated_at,externalId:null!=(b=a.external_id)?b:null,metadata:null!=(c=a.metadata)?c:{}}}},75763,(a,b,c)=>{"use strict";var d=a.e&&a.e.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeAuthenticationResponse=void 0;let e=a.r(53397),f=a.r(3418);c.deserializeAuthenticationResponse=a=>{let{user:b,organization_id:c,access_token:g,refresh_token:h,authentication_method:i,impersonator:j,oauth_tokens:k}=a,l=d(a,["user","organization_id","access_token","refresh_token","authentication_method","impersonator","oauth_tokens"]);return Object.assign({user:(0,f.deserializeUser)(b),organizationId:c,accessToken:g,refreshToken:h,impersonator:j,authenticationMethod:i,oauthTokens:(0,e.deserializeOauthTokens)(k)},l)}},62439,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreateMagicAuthOptions=void 0,c.serializeCreateMagicAuthOptions=a=>({email:a.email,invitation_token:a.invitationToken})},63020,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreatePasswordResetOptions=void 0,c.serializeCreatePasswordResetOptions=a=>({email:a.email})},33330,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeEmailVerificationEvent=c.deserializeEmailVerification=void 0,c.deserializeEmailVerification=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,code:a.code,createdAt:a.created_at,updatedAt:a.updated_at}),c.deserializeEmailVerificationEvent=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,createdAt:a.created_at,updatedAt:a.updated_at})},4413,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeEnrollAuthFactorOptions=void 0,c.serializeEnrollAuthFactorOptions=a=>({type:a.type,totp_issuer:a.totpIssuer,totp_user:a.totpUser,totp_secret:a.totpSecret})},15937,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeTotpWithSecrets=c.deserializeTotp=void 0,c.deserializeTotp=a=>({issuer:a.issuer,user:a.user}),c.deserializeTotpWithSecrets=a=>({issuer:a.issuer,user:a.user,qrCode:a.qr_code,secret:a.secret,uri:a.uri})},59066,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeFactorWithSecrets=c.deserializeFactor=void 0;let d=a.r(15937);c.deserializeFactor=a=>({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,type:a.type,totp:(0,d.deserializeTotp)(a.totp),userId:a.user_id}),c.deserializeFactorWithSecrets=a=>({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,type:a.type,totp:(0,d.deserializeTotpWithSecrets)(a.totp),userId:a.user_id})},3086,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeInvitationEvent=c.deserializeInvitation=void 0,c.deserializeInvitation=a=>({object:a.object,id:a.id,email:a.email,state:a.state,acceptedAt:a.accepted_at,revokedAt:a.revoked_at,expiresAt:a.expires_at,organizationId:a.organization_id,inviterUserId:a.inviter_user_id,acceptedUserId:a.accepted_user_id,token:a.token,acceptInvitationUrl:a.accept_invitation_url,createdAt:a.created_at,updatedAt:a.updated_at}),c.deserializeInvitationEvent=a=>({object:a.object,id:a.id,email:a.email,state:a.state,acceptedAt:a.accepted_at,revokedAt:a.revoked_at,expiresAt:a.expires_at,organizationId:a.organization_id,inviterUserId:a.inviter_user_id,acceptedUserId:a.accepted_user_id,createdAt:a.created_at,updatedAt:a.updated_at})},42254,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeListSessionsOptions=void 0,c.serializeListSessionsOptions=a=>Object.assign({},a)},20590,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeMagicAuthEvent=c.deserializeMagicAuth=void 0,c.deserializeMagicAuth=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,code:a.code,createdAt:a.created_at,updatedAt:a.updated_at}),c.deserializeMagicAuthEvent=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,createdAt:a.created_at,updatedAt:a.updated_at})},30174,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializePasswordResetEvent=c.deserializePasswordReset=void 0,c.deserializePasswordReset=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,passwordResetToken:a.password_reset_token,passwordResetUrl:a.password_reset_url,expiresAt:a.expires_at,createdAt:a.created_at}),c.deserializePasswordResetEvent=a=>({object:a.object,id:a.id,userId:a.user_id,email:a.email,expiresAt:a.expires_at,createdAt:a.created_at})},52319,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeResetPasswordOptions=void 0,c.serializeResetPasswordOptions=a=>({token:a.token,new_password:a.newPassword})},12290,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeSendPasswordResetEmailOptions=void 0,c.serializeSendPasswordResetEmailOptions=a=>({email:a.email,password_reset_url:a.passwordResetUrl})},98206,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeSession=void 0,c.deserializeSession=a=>({object:"session",id:a.id,userId:a.user_id,ipAddress:a.ip_address,userAgent:a.user_agent,organizationId:a.organization_id,impersonator:a.impersonator,authMethod:a.auth_method,status:a.status,expiresAt:a.expires_at,endedAt:a.ended_at,createdAt:a.created_at,updatedAt:a.updated_at})},67445,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreateUserOptions=void 0,c.serializeCreateUserOptions=a=>({email:a.email,password:a.password,password_hash:a.passwordHash,password_hash_type:a.passwordHashType,first_name:a.firstName,last_name:a.lastName,email_verified:a.emailVerified,external_id:a.externalId,metadata:a.metadata})},67609,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeSendMagicAuthCodeOptions=void 0,c.serializeSendMagicAuthCodeOptions=a=>({email:a.email})},40651,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeUpdateUserOptions=void 0,c.serializeUpdateUserOptions=a=>({email:a.email,email_verified:a.emailVerified,first_name:a.firstName,last_name:a.lastName,password:a.password,password_hash:a.passwordHash,password_hash_type:a.passwordHashType,external_id:a.externalId,locale:a.locale,metadata:a.metadata})},45039,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeUpdateUserPasswordOptions=void 0,c.serializeUpdateUserPasswordOptions=a=>({password:a.password})},49472,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(71765),c),e(a.r(28324),c),e(a.r(71451),c),e(a.r(80997),c),e(a.r(33163),c),e(a.r(91050),c),e(a.r(97145),c),e(a.r(75763),c),e(a.r(62439),c),e(a.r(63020),c),e(a.r(33330),c),e(a.r(4413),c),e(a.r(59066),c),e(a.r(3086),c),e(a.r(42254),c),e(a.r(20590),c),e(a.r(30174),c),e(a.r(52319),c),e(a.r(12290),c),e(a.r(98206),c),e(a.r(67445),c),e(a.r(67609),c),e(a.r(40651),c),e(a.r(45039),c),e(a.r(3418),c)},61829,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeOrganizationMembership=void 0,c.deserializeOrganizationMembership=a=>Object.assign({object:a.object,id:a.id,userId:a.user_id,organizationId:a.organization_id,organizationName:a.organization_name,status:a.status,createdAt:a.created_at,updatedAt:a.updated_at,role:a.role},a.roles&&{roles:a.roles})},53864,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeAction=void 0;let d=a.r(68924),e=a.r(49472),f=a.r(61829);c.deserializeAction=a=>{switch(a.object){case"user_registration_action_context":let b;return{id:a.id,object:a.object,userData:{object:(b=a.user_data).object,email:b.email,firstName:b.first_name,lastName:b.last_name},invitation:a.invitation?(0,e.deserializeInvitation)(a.invitation):void 0,ipAddress:a.ip_address,userAgent:a.user_agent,deviceFingerprint:a.device_fingerprint};case"authentication_action_context":return{id:a.id,object:a.object,user:(0,e.deserializeUser)(a.user),organization:a.organization?(0,d.deserializeOrganization)(a.organization):void 0,organizationMembership:a.organization_membership?(0,f.deserializeOrganizationMembership)(a.organization_membership):void 0,ipAddress:a.ip_address,userAgent:a.user_agent,deviceFingerprint:a.device_fingerprint,issuer:a.issuer}}}},69848,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.Actions=void 0;let e=a.r(11347),f=a.r(24964),g=a.r(53864);c.Actions=class{constructor(a){this.signatureProvider=new e.SignatureProvider(a)}get computeSignature(){return this.signatureProvider.computeSignature.bind(this.signatureProvider)}get verifyHeader(){return this.signatureProvider.verifyHeader.bind(this.signatureProvider)}serializeType(a){switch(a){case"authentication":return"authentication_action_response";case"user_registration":return"user_registration_action_response";default:return(0,f.unreachable)(a)}}signResponse(a,b){return d(this,void 0,void 0,function*(){let c,{verdict:d,type:e}=a;"Deny"===d&&a.errorMessage&&(c=a.errorMessage);let f=Object.assign({timestamp:Date.now(),verdict:d},"Deny"===d&&a.errorMessage&&{error_message:c});return{object:this.serializeType(e),payload:f,signature:yield this.computeSignature(f.timestamp,f,b)}})}constructAction({payload:a,sigHeader:b,secret:c,tolerance:e=3e4}){return d(this,void 0,void 0,function*(){return yield this.verifyHeader({payload:a,sigHeader:b,secret:c,tolerance:e}),(0,g.deserializeAction)(a)})}}},9958,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeUpdatedEventDirectoryGroup=c.deserializeDirectoryGroup=void 0,c.deserializeDirectoryGroup=a=>({id:a.id,idpId:a.idp_id,directoryId:a.directory_id,organizationId:a.organization_id,name:a.name,createdAt:a.created_at,updatedAt:a.updated_at,rawAttributes:a.raw_attributes}),c.deserializeUpdatedEventDirectoryGroup=a=>({id:a.id,idpId:a.idp_id,directoryId:a.directory_id,organizationId:a.organization_id,name:a.name,createdAt:a.created_at,updatedAt:a.updated_at,rawAttributes:a.raw_attributes,previousAttributes:a.previous_attributes})},12690,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeUpdatedEventDirectoryUser=c.deserializeDirectoryUserWithGroups=c.deserializeDirectoryUser=void 0;let d=a.r(9958);c.deserializeDirectoryUser=a=>({object:a.object,id:a.id,directoryId:a.directory_id,organizationId:a.organization_id,rawAttributes:a.raw_attributes,customAttributes:a.custom_attributes,idpId:a.idp_id,firstName:a.first_name,email:a.email,emails:a.emails,username:a.username,lastName:a.last_name,jobTitle:a.job_title,state:a.state,role:a.role,roles:a.roles,createdAt:a.created_at,updatedAt:a.updated_at}),c.deserializeDirectoryUserWithGroups=a=>Object.assign(Object.assign({},(0,c.deserializeDirectoryUser)(a)),{groups:a.groups.map(d.deserializeDirectoryGroup)}),c.deserializeUpdatedEventDirectoryUser=a=>({object:"directory_user",id:a.id,directoryId:a.directory_id,organizationId:a.organization_id,rawAttributes:a.raw_attributes,customAttributes:a.custom_attributes,idpId:a.idp_id,firstName:a.first_name,email:a.email,emails:a.emails,username:a.username,lastName:a.last_name,jobTitle:a.job_title,state:a.state,role:a.role,roles:a.roles,createdAt:a.created_at,updatedAt:a.updated_at,previousAttributes:a.previous_attributes})},6392,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeDeletedEventDirectory=c.deserializeEventDirectory=c.deserializeDirectoryState=c.deserializeDirectory=void 0,c.deserializeDirectory=a=>({object:a.object,id:a.id,domain:a.domain,externalKey:a.external_key,name:a.name,organizationId:a.organization_id,state:(0,c.deserializeDirectoryState)(a.state),type:a.type,createdAt:a.created_at,updatedAt:a.updated_at}),c.deserializeDirectoryState=a=>"linked"===a?"active":"unlinked"===a?"inactive":a,c.deserializeEventDirectory=a=>({object:a.object,id:a.id,externalKey:a.external_key,type:a.type,state:a.state,name:a.name,organizationId:a.organization_id,domains:a.domains,createdAt:a.created_at,updatedAt:a.updated_at}),c.deserializeDeletedEventDirectory=a=>({object:a.object,id:a.id,type:a.type,state:a.state,name:a.name,organizationId:a.organization_id,createdAt:a.created_at,updatedAt:a.updated_at})},49669,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeListDirectoriesOptions=void 0,c.serializeListDirectoriesOptions=a=>({organization_id:a.organizationId,search:a.search,limit:a.limit,before:a.before,after:a.after,order:a.order})},74996,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(9958),c),e(a.r(12690),c),e(a.r(6392),c),e(a.r(49669),c)},47084,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreateOrganizationOptions=void 0,c.serializeCreateOrganizationOptions=a=>({name:a.name,allow_profiles_outside_organization:a.allowProfilesOutsideOrganization,domain_data:a.domainData,domains:a.domains,external_id:a.externalId,metadata:a.metadata})},66418,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeUpdateOrganizationOptions=void 0,c.serializeUpdateOrganizationOptions=a=>({name:a.name,allow_profiles_outside_organization:a.allowProfilesOutsideOrganization,domain_data:a.domainData,domains:a.domains,stripe_customer_id:a.stripeCustomerId,external_id:a.externalId,metadata:a.metadata})},48082,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(47084),c),e(a.r(68924),c),e(a.r(66418),c)},51003,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeConnection=void 0,c.deserializeConnection=a=>({object:a.object,id:a.id,organizationId:a.organization_id,name:a.name,connectionType:a.connection_type,type:a.connection_type,state:a.state,domains:a.domains,createdAt:a.created_at,updatedAt:a.updated_at})},41687,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeListConnectionsOptions=void 0,c.serializeListConnectionsOptions=a=>({connection_type:a.connectionType,domain:a.domain,organization_id:a.organizationId,limit:a.limit,before:a.before,after:a.after,order:a.order})},9779,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeProfile=void 0,c.deserializeProfile=a=>({id:a.id,idpId:a.idp_id,organizationId:a.organization_id,connectionId:a.connection_id,connectionType:a.connection_type,email:a.email,firstName:a.first_name,lastName:a.last_name,role:a.role,roles:a.roles,groups:a.groups,customAttributes:a.custom_attributes,rawAttributes:a.raw_attributes})},35887,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeProfileAndToken=void 0;let d=a.r(53397),e=a.r(9779);c.deserializeProfileAndToken=a=>({accessToken:a.access_token,profile:(0,e.deserializeProfile)(a.profile),oauthTokens:(0,d.deserializeOauthTokens)(a.oauth_tokens)})},29391,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(51003),c),e(a.r(41687),c),e(a.r(35887),c),e(a.r(9779),c)},17600,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeRoleEvent=void 0,c.deserializeRoleEvent=a=>({object:"role",slug:a.slug,permissions:a.permissions,createdAt:a.created_at,updatedAt:a.updated_at})},5320,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeAuthenticationRadarRiskDetectedEvent=void 0,c.deserializeAuthenticationRadarRiskDetectedEvent=a=>({authMethod:a.auth_method,action:a.action,control:a.control,blocklistType:a.blocklist_type,ipAddress:a.ip_address,userAgent:a.user_agent,userId:a.user_id,email:a.email})},20222,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeApiKey=void 0,c.deserializeApiKey=function(a){return{object:a.object,id:a.id,owner:a.owner,name:a.name,obfuscatedValue:a.obfuscated_value,lastUsedAt:a.last_used_at,permissions:a.permissions,createdAt:a.created_at,updatedAt:a.updated_at}}},23987,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeEvent=void 0;let d=a.r(74996),e=a.r(48082),f=a.r(29391),g=a.r(49472),h=a.r(3683),i=a.r(61829),j=a.r(17600),k=a.r(98206),l=a.r(5320),m=a.r(20222);c.deserializeEvent=a=>{let b={id:a.id,createdAt:a.created_at,context:a.context};switch(a.event){case"authentication.email_verification_succeeded":case"authentication.magic_auth_failed":case"authentication.magic_auth_succeeded":case"authentication.mfa_succeeded":case"authentication.oauth_failed":case"authentication.oauth_succeeded":case"authentication.passkey_failed":case"authentication.passkey_succeeded":case"authentication.password_failed":case"authentication.password_succeeded":case"authentication.sso_failed":case"authentication.sso_succeeded":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeAuthenticationEvent)(a.data)});case"authentication.radar_risk_detected":return Object.assign(Object.assign({},b),{event:a.event,data:(0,l.deserializeAuthenticationRadarRiskDetectedEvent)(a.data)});case"connection.activated":case"connection.deactivated":case"connection.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,f.deserializeConnection)(a.data)});case"dsync.activated":case"dsync.deactivated":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeEventDirectory)(a.data)});case"dsync.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeDeletedEventDirectory)(a.data)});case"dsync.group.created":case"dsync.group.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeDirectoryGroup)(a.data)});case"dsync.group.updated":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeUpdatedEventDirectoryGroup)(a.data)});case"dsync.group.user_added":case"dsync.group.user_removed":return Object.assign(Object.assign({},b),{event:a.event,data:{directoryId:a.data.directory_id,user:(0,d.deserializeDirectoryUser)(a.data.user),group:(0,d.deserializeDirectoryGroup)(a.data.group)}});case"dsync.user.created":case"dsync.user.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeDirectoryUser)(a.data)});case"dsync.user.updated":return Object.assign(Object.assign({},b),{event:a.event,data:(0,d.deserializeUpdatedEventDirectoryUser)(a.data)});case"email_verification.created":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeEmailVerificationEvent)(a.data)});case"invitation.accepted":case"invitation.created":case"invitation.revoked":case"invitation.resent":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeInvitationEvent)(a.data)});case"magic_auth.created":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeMagicAuthEvent)(a.data)});case"password_reset.created":case"password_reset.succeeded":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializePasswordResetEvent)(a.data)});case"user.created":case"user.updated":case"user.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,g.deserializeUser)(a.data)});case"organization_membership.added":case"organization_membership.created":case"organization_membership.deleted":case"organization_membership.updated":case"organization_membership.removed":return Object.assign(Object.assign({},b),{event:a.event,data:(0,i.deserializeOrganizationMembership)(a.data)});case"role.created":case"role.deleted":case"role.updated":return Object.assign(Object.assign({},b),{event:a.event,data:(0,j.deserializeRoleEvent)(a.data)});case"session.created":case"session.revoked":return Object.assign(Object.assign({},b),{event:a.event,data:(0,k.deserializeSession)(a.data)});case"organization.created":case"organization.updated":case"organization.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,e.deserializeOrganization)(a.data)});case"organization_domain.verified":case"organization_domain.verification_failed":case"organization_domain.created":case"organization_domain.updated":case"organization_domain.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,h.deserializeOrganizationDomain)(a.data)});case"api_key.created":case"api_key.deleted":return Object.assign(Object.assign({},b),{event:a.event,data:(0,m.deserializeApiKey)(a.data)})}}},88277,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeList=void 0,c.deserializeList=(a,b)=>({object:"list",data:a.data.map(b),listMetadata:a.list_metadata})},40252,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(23987),c),e(a.r(88277),c)},25413,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.Webhooks=void 0;let e=a.r(40252),f=a.r(11347);c.Webhooks=class{constructor(a){this.signatureProvider=new f.SignatureProvider(a)}get verifyHeader(){return this.signatureProvider.verifyHeader.bind(this.signatureProvider)}get computeSignature(){return this.signatureProvider.computeSignature.bind(this.signatureProvider)}get getTimestampAndSignatureHash(){return this.signatureProvider.getTimestampAndSignatureHash.bind(this.signatureProvider)}constructEvent({payload:a,sigHeader:b,secret:c,tolerance:f=18e4}){return d(this,void 0,void 0,function*(){return yield this.verifyHeader({payload:a,sigHeader:b,secret:c,tolerance:f}),(0,e.deserializeEvent)(a)})}}},95506,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeValidateApiKeyResponse=void 0;let d=a.r(20222);c.deserializeValidateApiKeyResponse=function(a){return{apiKey:a.api_key?(0,d.deserializeApiKey)(a.api_key):null}}},11904,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.ApiKeys=void 0;let e=a.r(95506);c.ApiKeys=class{constructor(a){this.workos=a}validateApiKey(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/api_keys/validations",a);return(0,e.deserializeValidateApiKeyResponse)(b)})}deleteApiKey(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/api_keys/${a}`)})}}},83983,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=a.e&&a.e.__await||function(a){return this instanceof e?(this.v=a,this):new e(a)},f=a.e&&a.e.__asyncValues||function(a){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var b,c=a[Symbol.asyncIterator];return c?c.call(a):(a="function"==typeof __values?__values(a):a[Symbol.iterator](),b={},d("next"),d("throw"),d("return"),b[Symbol.asyncIterator]=function(){return this},b);function d(c){b[c]=a[c]&&function(b){return new Promise(function(d,e){var f,g,h;f=d,g=e,h=(b=a[c](b)).done,Promise.resolve(b.value).then(function(a){f({value:a,done:h})},g)})}}},g=a.e&&a.e.__asyncDelegator||function(a){var b,c;return b={},d("next"),d("throw",function(a){throw a}),d("return"),b[Symbol.iterator]=function(){return this},b;function d(d,f){b[d]=a[d]?function(b){return(c=!c)?{value:e(a[d](b)),done:!1}:f?f(b):b}:f}},h=a.e&&a.e.__asyncGenerator||function(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,f=c.apply(a,b||[]),g=[];return d={},h("next"),h("throw"),h("return"),d[Symbol.asyncIterator]=function(){return this},d;function h(a){f[a]&&(d[a]=function(b){return new Promise(function(c,d){g.push([a,b,c,d])>1||i(a,b)})})}function i(a,b){try{var c;(c=f[a](b)).value instanceof e?Promise.resolve(c.value.v).then(j,k):l(g[0][2],c)}catch(a){l(g[0][3],a)}}function j(a){i("next",a)}function k(a){i("throw",a)}function l(a,b){a(b),g.shift(),g.length&&i(g[0][0],g[0][1])}};Object.defineProperty(c,"__esModule",{value:!0}),c.AutoPaginatable=void 0,c.AutoPaginatable=class{constructor(a,b,c){this.list=a,this.apiCall=b,this.object="list",this.options=Object.assign({},c)}get data(){return this.list.data}get listMetadata(){return this.list.listMetadata}generatePages(a){return h(this,arguments,function*(){let b=yield e(this.apiCall(Object.assign(Object.assign({},this.options),{limit:100,after:a.after})));yield yield e(b.data),b.listMetadata.after&&(yield e(new Promise(a=>setTimeout(a,350))),yield e((yield*g(f(this.generatePages({after:b.listMetadata.after}))))))})}autoPagination(){var a,b,c,e;return d(this,void 0,void 0,function*(){if(this.options.limit)return this.data;let d=[];try{for(var g,h=!0,i=f(this.generatePages({after:this.options.after}));!(a=(g=yield i.next()).done);h=!0)e=g.value,h=!1,d.push(...e)}catch(a){b={error:a}}finally{try{!h&&!a&&(c=i.return)&&(yield c.call(i))}finally{if(b)throw b.error}}return d})}}},71833,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.fetchAndDeserialize=void 0;let e=a.r(40252);c.fetchAndDeserialize=(a,b,c,f,g)=>d(void 0,void 0,void 0,function*(){let{data:d}=yield a.get(b,Object.assign({query:Object.assign(Object.assign({},f),{order:(null==f?void 0:f.order)||"desc"})},g));return(0,e.deserializeList)(d,c)})},65944,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.DirectorySync=void 0;let e=a.r(83983),f=a.r(74996),g=a.r(71833);c.DirectorySync=class{constructor(a){this.workos=a}listDirectories(a){return d(this,void 0,void 0,function*(){return new e.AutoPaginatable((yield(0,g.fetchAndDeserialize)(this.workos,"/directories",f.deserializeDirectory,a?(0,f.serializeListDirectoriesOptions)(a):void 0)),a=>(0,g.fetchAndDeserialize)(this.workos,"/directories",f.deserializeDirectory,a),a?(0,f.serializeListDirectoriesOptions)(a):void 0)})}getDirectory(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/directories/${a}`);return(0,f.deserializeDirectory)(b)})}deleteDirectory(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/directories/${a}`)})}listGroups(a){return d(this,void 0,void 0,function*(){return new e.AutoPaginatable((yield(0,g.fetchAndDeserialize)(this.workos,"/directory_groups",f.deserializeDirectoryGroup,a)),a=>(0,g.fetchAndDeserialize)(this.workos,"/directory_groups",f.deserializeDirectoryGroup,a),a)})}listUsers(a){return d(this,void 0,void 0,function*(){return new e.AutoPaginatable((yield(0,g.fetchAndDeserialize)(this.workos,"/directory_users",f.deserializeDirectoryUserWithGroups,a)),a=>(0,g.fetchAndDeserialize)(this.workos,"/directory_users",f.deserializeDirectoryUserWithGroups,a),a)})}getUser(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/directory_users/${a}`);return(0,f.deserializeDirectoryUserWithGroups)(b)})}getGroup(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/directory_groups/${a}`);return(0,f.deserializeDirectoryGroup)(b)})}}},94568,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeListEventOptions=void 0,c.serializeListEventOptions=a=>({events:a.events,organization_id:a.organizationId,range_start:a.rangeStart,range_end:a.rangeEnd,limit:a.limit,after:a.after})},42447,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(94568),c)},35928,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.Events=void 0;let e=a.r(40252),f=a.r(42447);c.Events=class{constructor(a){this.workos=a}listEvents(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get("/events",{query:a?(0,f.serializeListEventOptions)(a):void 0});return(0,e.deserializeList)(b,e.deserializeEvent)})}}},28321,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeRole=void 0,c.deserializeRole=a=>({object:a.object,id:a.id,name:a.name,slug:a.slug,description:a.description,permissions:a.permissions,type:a.type,createdAt:a.created_at,updatedAt:a.updated_at})},19158,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeFeatureFlag=void 0,c.deserializeFeatureFlag=a=>({object:a.object,id:a.id,name:a.name,slug:a.slug,description:a.description,tags:a.tags,enabled:a.enabled,defaultValue:a.default_value,createdAt:a.created_at,updatedAt:a.updated_at})},43728,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(19158),c)},30020,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreateOrganizationApiKeyOptions=void 0,c.serializeCreateOrganizationApiKeyOptions=function(a){return{name:a.name,permissions:a.permissions}}},32554,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeCreatedApiKey=void 0,c.deserializeCreatedApiKey=function(a){return{object:a.object,id:a.id,owner:a.owner,name:a.name,obfuscatedValue:a.obfuscated_value,value:a.value,lastUsedAt:a.last_used_at,permissions:a.permissions,createdAt:a.created_at,updatedAt:a.updated_at}}},34581,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(20222),c),e(a.r(30020),c),e(a.r(32554),c),e(a.r(95506),c)},52077,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=a.e&&a.e.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};Object.defineProperty(c,"__esModule",{value:!0}),c.Organizations=void 0;let f=a.r(83983),g=a.r(48082),h=a.r(71833),i=a.r(28321),j=a.r(43728),k=a.r(34581);c.Organizations=class{constructor(a){this.workos=a}listOrganizations(a){return d(this,void 0,void 0,function*(){return new f.AutoPaginatable((yield(0,h.fetchAndDeserialize)(this.workos,"/organizations",g.deserializeOrganization,a)),a=>(0,h.fetchAndDeserialize)(this.workos,"/organizations",g.deserializeOrganization,a),a)})}createOrganization(a,b={}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post("/organizations",(0,g.serializeCreateOrganizationOptions)(a),b);return(0,g.deserializeOrganization)(c)})}deleteOrganization(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/organizations/${a}`)})}getOrganization(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/organizations/${a}`);return(0,g.deserializeOrganization)(b)})}getOrganizationByExternalId(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/organizations/external_id/${a}`);return(0,g.deserializeOrganization)(b)})}updateOrganization(a){return d(this,void 0,void 0,function*(){let{organization:b}=a,c=e(a,["organization"]),{data:d}=yield this.workos.put(`/organizations/${b}`,(0,g.serializeUpdateOrganizationOptions)(c));return(0,g.deserializeOrganization)(d)})}listOrganizationRoles(a){return d(this,void 0,void 0,function*(){let{organizationId:b}=a,{data:c}=yield this.workos.get(`/organizations/${b}/roles`);return{object:"list",data:c.data.map(a=>(0,i.deserializeRole)(a))}})}listOrganizationFeatureFlags(a){return d(this,void 0,void 0,function*(){let{organizationId:b}=a,c=e(a,["organizationId"]);return new f.AutoPaginatable((yield(0,h.fetchAndDeserialize)(this.workos,`/organizations/${b}/feature-flags`,j.deserializeFeatureFlag,c)),a=>(0,h.fetchAndDeserialize)(this.workos,`/organizations/${b}/feature-flags`,j.deserializeFeatureFlag,a),c)})}listOrganizationApiKeys(a){return d(this,void 0,void 0,function*(){let{organizationId:b}=a,c=e(a,["organizationId"]);return new f.AutoPaginatable((yield(0,h.fetchAndDeserialize)(this.workos,`/organizations/${b}/api_keys`,k.deserializeApiKey,c)),a=>(0,h.fetchAndDeserialize)(this.workos,`/organizations/${b}/api_keys`,k.deserializeApiKey,a),c)})}createOrganizationApiKey(a,b={}){return d(this,void 0,void 0,function*(){let{organizationId:c}=a,{data:d}=yield this.workos.post(`/organizations/${c}/api_keys`,(0,k.serializeCreateOrganizationApiKeyOptions)(a),b);return(0,k.deserializeCreatedApiKey)(d)})}}},74371,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreateOrganizationDomainOptions=void 0,c.serializeCreateOrganizationDomainOptions=a=>({domain:a.domain,organization_id:a.organizationId})},63636,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.OrganizationDomains=void 0;let e=a.r(74371),f=a.r(3683);c.OrganizationDomains=class{constructor(a){this.workos=a}get(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/organization_domains/${a}`);return(0,f.deserializeOrganizationDomain)(b)})}verify(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/organization_domains/${a}/verify`,{});return(0,f.deserializeOrganizationDomain)(b)})}create(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/organization_domains",(0,e.serializeCreateOrganizationDomainOptions)(a));return(0,f.deserializeOrganizationDomain)(b)})}delete(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/organization_domains/${a}`)})}}},74752,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializePasswordlessSession=void 0,c.deserializePasswordlessSession=a=>({id:a.id,email:a.email,expiresAt:a.expires_at,link:a.link,object:a.object})},28997,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=a.e&&a.e.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};Object.defineProperty(c,"__esModule",{value:!0}),c.Passwordless=void 0;let f=a.r(74752);c.Passwordless=class{constructor(a){this.workos=a}createSession(a){var{redirectURI:b,expiresIn:c}=a,g=e(a,["redirectURI","expiresIn"]);return d(this,void 0,void 0,function*(){let{data:a}=yield this.workos.post("/passwordless/sessions",Object.assign(Object.assign({},g),{redirect_uri:b,expires_in:c}));return(0,f.deserializePasswordlessSession)(a)})}sendSession(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/passwordless/sessions/${a}/send`,{});return b})}}},64854,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeAccessToken=void 0,c.deserializeAccessToken=function(a){return{object:"access_token",accessToken:a.access_token,expiresAt:a.expires_at?new Date(Date.parse(a.expires_at)):null,scopes:a.scopes,missingScopes:a.missing_scopes}}},80714,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeGetAccessTokenResponse=c.serializeGetAccessTokenOptions=void 0;let d=a.r(64854);c.serializeGetAccessTokenOptions=function(a){return{user_id:a.userId,organization_id:a.organizationId}},c.deserializeGetAccessTokenResponse=function(a){return a.active?{active:!0,accessToken:(0,d.deserializeAccessToken)(a.access_token)}:{active:!1,error:a.error}}},68415,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=a.e&&a.e.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c};Object.defineProperty(c,"__esModule",{value:!0}),c.Pipes=void 0;let f=a.r(80714);c.Pipes=class{constructor(a){this.workos=a}getAccessToken(a){var{provider:b}=a,c=e(a,["provider"]);return d(this,void 0,void 0,function*(){let{data:a}=yield this.workos.post(`data-integrations/${b}/token`,(0,f.serializeGetAccessTokenOptions)(c));return(0,f.deserializeGetAccessTokenResponse)(a)})}}},59432,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.Portal=void 0,c.Portal=class{constructor(a){this.workos=a}generateLink({intent:a,organization:b,returnUrl:c,successUrl:e}){return d(this,void 0,void 0,function*(){let{data:d}=yield this.workos.post("/portal/generate_link",{intent:a,organization:b,return_url:c,success_url:e});return d})}}},27655,(a,b,c)=>{"use strict";b.exports=TypeError},67379,(a,b,c)=>{b.exports=a.r(24361).inspect},16149,(a,b,c)=>{var d="function"==typeof Map&&Map.prototype,e=Object.getOwnPropertyDescriptor&&d?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,f=d&&e&&"function"==typeof e.get?e.get:null,g=d&&Map.prototype.forEach,h="function"==typeof Set&&Set.prototype,i=Object.getOwnPropertyDescriptor&&h?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,j=h&&i&&"function"==typeof i.get?i.get:null,k=h&&Set.prototype.forEach,l="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,m="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,n="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,o=Boolean.prototype.valueOf,p=Object.prototype.toString,q=Function.prototype.toString,r=String.prototype.match,s=String.prototype.slice,t=String.prototype.replace,u=String.prototype.toUpperCase,v=String.prototype.toLowerCase,w=RegExp.prototype.test,x=Array.prototype.concat,y=Array.prototype.join,z=Array.prototype.slice,A=Math.floor,B="function"==typeof BigInt?BigInt.prototype.valueOf:null,C=Object.getOwnPropertySymbols,D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,E="function"==typeof Symbol&&"object"==typeof Symbol.iterator,F="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===E?"object":"symbol")?Symbol.toStringTag:null,G=Object.prototype.propertyIsEnumerable,H=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(a){return a.__proto__}:null);function I(a,b){if(a===1/0||a===-1/0||a!=a||a&&a>-1e3&&a<1e3||w.call(/e/,b))return b;var c=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof a){var d=a<0?-A(-a):A(a);if(d!==a){var e=String(d),f=s.call(b,e.length+1);return t.call(e,c,"$&_")+"."+t.call(t.call(f,/([0-9]{3})/g,"$&_"),/_$/,"")}}return t.call(b,c,"$&_")}var J=a.r(67379),K=J.custom,L=S(K)?K:null,M={__proto__:null,double:'"',single:"'"},N={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function O(a,b,c){var d=M[c.quoteStyle||b];return d+a+d}function P(a){return!F||!("object"==typeof a&&(F in a||void 0!==a[F]))}function Q(a){return"[object Array]"===V(a)&&P(a)}function R(a){return"[object RegExp]"===V(a)&&P(a)}function S(a){if(E)return a&&"object"==typeof a&&a instanceof Symbol;if("symbol"==typeof a)return!0;if(!a||"object"!=typeof a||!D)return!1;try{return D.call(a),!0}catch(a){}return!1}b.exports=function b(c,d,e,h){var i,p,u,w,A,C=d||{};if(U(C,"quoteStyle")&&!U(M,C.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(U(C,"maxStringLength")&&("number"==typeof C.maxStringLength?C.maxStringLength<0&&C.maxStringLength!==1/0:null!==C.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var K=!U(C,"customInspect")||C.customInspect;if("boolean"!=typeof K&&"symbol"!==K)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(U(C,"indent")&&null!==C.indent&&"	"!==C.indent&&!(parseInt(C.indent,10)===C.indent&&C.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(U(C,"numericSeparator")&&"boolean"!=typeof C.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var T=C.numericSeparator;if(void 0===c)return"undefined";if(null===c)return"null";if("boolean"==typeof c)return c?"true":"false";if("string"==typeof c)return function a(b,c){if(b.length>c.maxStringLength){var d=b.length-c.maxStringLength;return a(s.call(b,0,c.maxStringLength),c)+("... "+d)+" more character"+(d>1?"s":"")}var e=N[c.quoteStyle||"single"];return e.lastIndex=0,O(t.call(t.call(b,e,"\\$1"),/[\x00-\x1f]/g,X),"single",c)}(c,C);if("number"==typeof c){if(0===c)return 1/0/c>0?"0":"-0";var ab=String(c);return T?I(c,ab):ab}if("bigint"==typeof c){var ac=String(c)+"n";return T?I(c,ac):ac}var ad=void 0===C.depth?5:C.depth;if(void 0===e&&(e=0),e>=ad&&ad>0&&"object"==typeof c)return Q(c)?"[Array]":"[Object]";var ae=function(a,b){var c;if("	"===a.indent)c="	";else{if("number"!=typeof a.indent||!(a.indent>0))return null;c=y.call(Array(a.indent+1)," ")}return{base:c,prev:y.call(Array(b+1),c)}}(C,e);if(void 0===h)h=[];else if(W(h,c)>=0)return"[Circular]";function af(a,c,d){if(c&&(h=z.call(h)).push(c),d){var f={depth:C.depth};return U(C,"quoteStyle")&&(f.quoteStyle=C.quoteStyle),b(a,f,e+1,h)}return b(a,C,e+1,h)}if("function"==typeof c&&!R(c)){var ag=function(a){if(a.name)return a.name;var b=r.call(q.call(a),/^function\s*([\w$]+)/);return b?b[1]:null}(c),ah=aa(c,af);return"[Function"+(ag?": "+ag:" (anonymous)")+"]"+(ah.length>0?" { "+y.call(ah,", ")+" }":"")}if(S(c)){var ai=E?t.call(String(c),/^(Symbol\(.*\))_[^)]*$/,"$1"):D.call(c);return"object"!=typeof c||E?ai:Y(ai)}if((aj=c)&&"object"==typeof aj&&("u">typeof HTMLElement&&aj instanceof HTMLElement||"string"==typeof aj.nodeName&&"function"==typeof aj.getAttribute)){for(var aj,ak,al="<"+v.call(String(c.nodeName)),am=c.attributes||[],an=0;an<am.length;an++){al+=" "+am[an].name+"="+O((ak=am[an].value,t.call(String(ak),/"/g,"&quot;")),"double",C)}return al+=">",c.childNodes&&c.childNodes.length&&(al+="..."),al+="</"+v.call(String(c.nodeName))+">"}if(Q(c)){if(0===c.length)return"[]";var ao=aa(c,af);return ae&&!function(a){for(var b=0;b<a.length;b++)if(W(a[b],"\n")>=0)return!1;return!0}(ao)?"["+_(ao,ae)+"]":"[ "+y.call(ao,", ")+" ]"}if("[object Error]"===V(i=c)&&P(i)){var ap=aa(c,af);return"cause"in Error.prototype||!("cause"in c)||G.call(c,"cause")?0===ap.length?"["+String(c)+"]":"{ ["+String(c)+"] "+y.call(ap,", ")+" }":"{ ["+String(c)+"] "+y.call(x.call("[cause]: "+af(c.cause),ap),", ")+" }"}if("object"==typeof c&&K){if(L&&"function"==typeof c[L]&&J)return J(c,{depth:ad-e});else if("symbol"!==K&&"function"==typeof c.inspect)return c.inspect()}if(function(a){if(!f||!a||"object"!=typeof a)return!1;try{f.call(a);try{j.call(a)}catch(a){return!0}return a instanceof Map}catch(a){}return!1}(c)){var aq=[];return g&&g.call(c,function(a,b){aq.push(af(b,c,!0)+" => "+af(a,c))}),$("Map",f.call(c),aq,ae)}if(function(a){if(!j||!a||"object"!=typeof a)return!1;try{j.call(a);try{f.call(a)}catch(a){return!0}return a instanceof Set}catch(a){}return!1}(c)){var ar=[];return k&&k.call(c,function(a){ar.push(af(a,c))}),$("Set",j.call(c),ar,ae)}if(function(a){if(!l||!a||"object"!=typeof a)return!1;try{l.call(a,l);try{m.call(a,m)}catch(a){return!0}return a instanceof WeakMap}catch(a){}return!1}(c))return Z("WeakMap");if(function(a){if(!m||!a||"object"!=typeof a)return!1;try{m.call(a,m);try{l.call(a,l)}catch(a){return!0}return a instanceof WeakSet}catch(a){}return!1}(c))return Z("WeakSet");if(function(a){if(!n||!a||"object"!=typeof a)return!1;try{return n.call(a),!0}catch(a){}return!1}(c))return Z("WeakRef");if("[object Number]"===V(p=c)&&P(p))return Y(af(Number(c)));if(function(a){if(!a||"object"!=typeof a||!B)return!1;try{return B.call(a),!0}catch(a){}return!1}(c))return Y(af(B.call(c)));if("[object Boolean]"===V(u=c)&&P(u))return Y(o.call(c));if("[object String]"===V(w=c)&&P(w))return Y(af(String(c)));if("u">typeof globalThis&&c===globalThis||c===a.g)return"{ [object globalThis] }";if(!("[object Date]"===V(A=c)&&P(A))&&!R(c)){var as=aa(c,af),at=H?H(c)===Object.prototype:c instanceof Object||c.constructor===Object,au=c instanceof Object?"":"null prototype",av=!at&&F&&Object(c)===c&&F in c?s.call(V(c),8,-1):au?"Object":"",aw=(at||"function"!=typeof c.constructor?"":c.constructor.name?c.constructor.name+" ":"")+(av||au?"["+y.call(x.call([],av||[],au||[]),": ")+"] ":"");return 0===as.length?aw+"{}":ae?aw+"{"+_(as,ae)+"}":aw+"{ "+y.call(as,", ")+" }"}return String(c)};var T=Object.prototype.hasOwnProperty||function(a){return a in this};function U(a,b){return T.call(a,b)}function V(a){return p.call(a)}function W(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return -1}function X(a){var b=a.charCodeAt(0),c={8:"b",9:"t",10:"n",12:"f",13:"r"}[b];return c?"\\"+c:"\\x"+(b<16?"0":"")+u.call(b.toString(16))}function Y(a){return"Object("+a+")"}function Z(a){return a+" { ? }"}function $(a,b,c,d){return a+" ("+b+") {"+(d?_(c,d):y.call(c,", "))+"}"}function _(a,b){if(0===a.length)return"";var c="\n"+b.prev+b.base;return c+y.call(a,","+c)+"\n"+b.prev}function aa(a,b){var c,d=Q(a),e=[];if(d){e.length=a.length;for(var f=0;f<a.length;f++)e[f]=U(a,f)?b(a[f],a):""}var g="function"==typeof C?C(a):[];if(E){c={};for(var h=0;h<g.length;h++)c["$"+g[h]]=g[h]}for(var i in a)if(U(a,i)&&(!d||String(Number(i))!==i||!(i<a.length)))if(E&&c["$"+i]instanceof Symbol)continue;else w.call(/[^\w$]/,i)?e.push(b(i,a)+": "+b(a[i],a)):e.push(i+": "+b(a[i],a));if("function"==typeof C)for(var j=0;j<g.length;j++)G.call(a,g[j])&&e.push("["+b(g[j])+"]: "+b(a[g[j]],a));return e}},85695,(a,b,c)=>{"use strict";var d=a.r(16149),e=a.r(27655),f=function(a,b,c){for(var d,e=a;null!=(d=e.next);e=d)if(d.key===b)return e.next=d.next,c||(d.next=a.next,a.next=d),d},g=function(a,b){if(a){var c=f(a,b);return c&&c.value}},h=function(a,b,c){var d=f(a,b);d?d.value=c:a.next={key:b,next:a.next,value:c}},i=function(a,b){if(a)return f(a,b,!0)};b.exports=function(){var a,b={assert:function(a){if(!b.has(a))throw new e("Side channel does not contain "+d(a))},delete:function(b){var c=a&&a.next,d=i(a,b);return d&&c&&c===d&&(a=void 0),!!d},get:function(b){return g(a,b)},has:function(b){var c;return!!(c=a)&&!!f(c,b)},set:function(b,c){a||(a={next:void 0}),h(a,b,c)}};return b}},72058,(a,b,c)=>{"use strict";b.exports=Object},78495,(a,b,c)=>{"use strict";b.exports=Error},58171,(a,b,c)=>{"use strict";b.exports=EvalError},66958,(a,b,c)=>{"use strict";b.exports=RangeError},65539,(a,b,c)=>{"use strict";b.exports=ReferenceError},38992,(a,b,c)=>{"use strict";b.exports=SyntaxError},42855,(a,b,c)=>{"use strict";b.exports=URIError},53232,(a,b,c)=>{"use strict";b.exports=Math.abs},26687,(a,b,c)=>{"use strict";b.exports=Math.floor},35291,(a,b,c)=>{"use strict";b.exports=Math.max},35728,(a,b,c)=>{"use strict";b.exports=Math.min},32587,(a,b,c)=>{"use strict";b.exports=Math.pow},72501,(a,b,c)=>{"use strict";b.exports=Math.round},88917,(a,b,c)=>{"use strict";b.exports=Number.isNaN||function(a){return a!=a}},12788,(a,b,c)=>{"use strict";var d=a.r(88917);b.exports=function(a){return d(a)||0===a?a:a<0?-1:1}},67529,(a,b,c)=>{"use strict";b.exports=Object.getOwnPropertyDescriptor},50078,(a,b,c)=>{"use strict";var d=a.r(67529);if(d)try{d([],"length")}catch(a){d=null}b.exports=d},68531,(a,b,c)=>{"use strict";var d=Object.defineProperty||!1;if(d)try{d({},"a",{value:1})}catch(a){d=!1}b.exports=d},35445,(a,b,c)=>{"use strict";b.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var a={},b=Symbol("test"),c=Object(b);if("string"==typeof b||"[object Symbol]"!==Object.prototype.toString.call(b)||"[object Symbol]"!==Object.prototype.toString.call(c))return!1;for(var d in a[b]=42,a)return!1;if("function"==typeof Object.keys&&0!==Object.keys(a).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(a).length)return!1;var e=Object.getOwnPropertySymbols(a);if(1!==e.length||e[0]!==b||!Object.prototype.propertyIsEnumerable.call(a,b))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var f=Object.getOwnPropertyDescriptor(a,b);if(42!==f.value||!0!==f.enumerable)return!1}return!0}},54636,(a,b,c)=>{"use strict";var d="u">typeof Symbol&&Symbol,e=a.r(35445);b.exports=function(){return"function"==typeof d&&"function"==typeof Symbol&&"symbol"==typeof d("foo")&&"symbol"==typeof Symbol("bar")&&e()}},76586,(a,b,c)=>{"use strict";b.exports="u">typeof Reflect&&Reflect.getPrototypeOf||null},30428,(a,b,c)=>{"use strict";b.exports=a.r(72058).getPrototypeOf||null},12830,(a,b,c)=>{"use strict";var d=Object.prototype.toString,e=Math.max,f=function(a,b){for(var c=[],d=0;d<a.length;d+=1)c[d]=a[d];for(var e=0;e<b.length;e+=1)c[e+a.length]=b[e];return c},g=function(a,b){for(var c=[],d=b||0,e=0;d<a.length;d+=1,e+=1)c[e]=a[d];return c},h=function(a,b){for(var c="",d=0;d<a.length;d+=1)c+=a[d],d+1<a.length&&(c+=b);return c};b.exports=function(a){var b,c=this;if("function"!=typeof c||"[object Function]"!==d.apply(c))throw TypeError("Function.prototype.bind called on incompatible "+c);for(var i=g(arguments,1),j=e(0,c.length-i.length),k=[],l=0;l<j;l++)k[l]="$"+l;if(b=Function("binder","return function ("+h(k,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof b){var d=c.apply(this,f(i,arguments));return Object(d)===d?d:this}return c.apply(a,f(i,arguments))}),c.prototype){var m=function(){};m.prototype=c.prototype,b.prototype=new m,m.prototype=null}return b}},87192,(a,b,c)=>{"use strict";var d=a.r(12830);b.exports=Function.prototype.bind||d},77284,(a,b,c)=>{"use strict";b.exports=Function.prototype.call},68741,(a,b,c)=>{"use strict";b.exports=Function.prototype.apply},430,(a,b,c)=>{"use strict";b.exports="u">typeof Reflect&&Reflect&&Reflect.apply},51985,(a,b,c)=>{"use strict";var d=a.r(87192),e=a.r(68741),f=a.r(77284);b.exports=a.r(430)||d.call(f,e)},14447,(a,b,c)=>{"use strict";var d=a.r(87192),e=a.r(27655),f=a.r(77284),g=a.r(51985);b.exports=function(a){if(a.length<1||"function"!=typeof a[0])throw new e("a function is required");return g(d,f,a)}},1493,(a,b,c)=>{"use strict";var d,e=a.r(14447),f=a.r(50078);try{d=[].__proto__===Array.prototype}catch(a){if(!a||"object"!=typeof a||!("code"in a)||"ERR_PROTO_ACCESS"!==a.code)throw a}var g=!!d&&f&&f(Object.prototype,"__proto__"),h=Object,i=h.getPrototypeOf;b.exports=g&&"function"==typeof g.get?e([g.get]):"function"==typeof i&&function(a){return i(null==a?a:h(a))}},91301,(a,b,c)=>{"use strict";var d=a.r(76586),e=a.r(30428),f=a.r(1493);b.exports=d?function(a){return d(a)}:e?function(a){if(!a||"object"!=typeof a&&"function"!=typeof a)throw TypeError("getProto: not an object");return e(a)}:f?function(a){return f(a)}:null},6378,(a,b,c)=>{"use strict";var d=Function.prototype.call,e=Object.prototype.hasOwnProperty;b.exports=a.r(87192).call(d,e)},19374,(a,b,c)=>{"use strict";var d=a.r(72058),e=a.r(78495),f=a.r(58171),g=a.r(66958),h=a.r(65539),i=a.r(38992),j=a.r(27655),k=a.r(42855),l=a.r(53232),m=a.r(26687),n=a.r(35291),o=a.r(35728),p=a.r(32587),q=a.r(72501),r=a.r(12788),s=Function,t=function(a){try{return s('"use strict"; return ('+a+").constructor;")()}catch(a){}},u=a.r(50078),v=a.r(68531),w=function(){throw new j},x=u?function(){try{return arguments.callee,w}catch(a){try{return u(arguments,"callee").get}catch(a){return w}}}():w,y=a.r(54636)(),z=a.r(91301),A=a.r(30428),B=a.r(76586),C=a.r(68741),D=a.r(77284),E={},F="u">typeof Uint8Array&&z?z(Uint8Array):void 0,G={__proto__:null,"%AggregateError%":"u"<typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"u"<typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":y&&z?z([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":E,"%AsyncGenerator%":E,"%AsyncGeneratorFunction%":E,"%AsyncIteratorPrototype%":E,"%Atomics%":"u"<typeof Atomics?void 0:Atomics,"%BigInt%":"u"<typeof BigInt?void 0:BigInt,"%BigInt64Array%":"u"<typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"u"<typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"u"<typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":e,"%eval%":eval,"%EvalError%":f,"%Float16Array%":"u"<typeof Float16Array?void 0:Float16Array,"%Float32Array%":"u"<typeof Float32Array?void 0:Float32Array,"%Float64Array%":"u"<typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"u"<typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":E,"%Int8Array%":"u"<typeof Int8Array?void 0:Int8Array,"%Int16Array%":"u"<typeof Int16Array?void 0:Int16Array,"%Int32Array%":"u"<typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y&&z?z(z([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"u"<typeof Map?void 0:Map,"%MapIteratorPrototype%":"u">typeof Map&&y&&z?z(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":d,"%Object.getOwnPropertyDescriptor%":u,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"u"<typeof Promise?void 0:Promise,"%Proxy%":"u"<typeof Proxy?void 0:Proxy,"%RangeError%":g,"%ReferenceError%":h,"%Reflect%":"u"<typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"u"<typeof Set?void 0:Set,"%SetIteratorPrototype%":"u">typeof Set&&y&&z?z(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"u"<typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y&&z?z(""[Symbol.iterator]()):void 0,"%Symbol%":y?Symbol:void 0,"%SyntaxError%":i,"%ThrowTypeError%":x,"%TypedArray%":F,"%TypeError%":j,"%Uint8Array%":"u"<typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"u"<typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"u"<typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"u"<typeof Uint32Array?void 0:Uint32Array,"%URIError%":k,"%WeakMap%":"u"<typeof WeakMap?void 0:WeakMap,"%WeakRef%":"u"<typeof WeakRef?void 0:WeakRef,"%WeakSet%":"u"<typeof WeakSet?void 0:WeakSet,"%Function.prototype.call%":D,"%Function.prototype.apply%":C,"%Object.defineProperty%":v,"%Object.getPrototypeOf%":A,"%Math.abs%":l,"%Math.floor%":m,"%Math.max%":n,"%Math.min%":o,"%Math.pow%":p,"%Math.round%":q,"%Math.sign%":r,"%Reflect.getPrototypeOf%":B};if(z)try{null.error}catch(a){var H=z(z(a));G["%Error.prototype%"]=H}var I=function a(b){var c;if("%AsyncFunction%"===b)c=t("async function () {}");else if("%GeneratorFunction%"===b)c=t("function* () {}");else if("%AsyncGeneratorFunction%"===b)c=t("async function* () {}");else if("%AsyncGenerator%"===b){var d=a("%AsyncGeneratorFunction%");d&&(c=d.prototype)}else if("%AsyncIteratorPrototype%"===b){var e=a("%AsyncGenerator%");e&&z&&(c=z(e.prototype))}return G[b]=c,c},J={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},K=a.r(87192),L=a.r(6378),M=K.call(D,Array.prototype.concat),N=K.call(C,Array.prototype.splice),O=K.call(D,String.prototype.replace),P=K.call(D,String.prototype.slice),Q=K.call(D,RegExp.prototype.exec),R=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,T=function(a){var b=P(a,0,1),c=P(a,-1);if("%"===b&&"%"!==c)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===c&&"%"!==b)throw new i("invalid intrinsic syntax, expected opening `%`");var d=[];return O(a,R,function(a,b,c,e){d[d.length]=c?O(e,S,"$1"):b||a}),d},U=function(a,b){var c,d=a;if(L(J,d)&&(d="%"+(c=J[d])[0]+"%"),L(G,d)){var e=G[d];if(e===E&&(e=I(d)),void 0===e&&!b)throw new j("intrinsic "+a+" exists, but is not available. Please file an issue!");return{alias:c,name:d,value:e}}throw new i("intrinsic "+a+" does not exist!")};b.exports=function(a,b){if("string"!=typeof a||0===a.length)throw new j("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof b)throw new j('"allowMissing" argument must be a boolean');if(null===Q(/^%?[^%]*%?$/,a))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var c=T(a),d=c.length>0?c[0]:"",e=U("%"+d+"%",b),f=e.name,g=e.value,h=!1,k=e.alias;k&&(d=k[0],N(c,M([0,1],k)));for(var l=1,m=!0;l<c.length;l+=1){var n=c[l],o=P(n,0,1),p=P(n,-1);if(('"'===o||"'"===o||"`"===o||'"'===p||"'"===p||"`"===p)&&o!==p)throw new i("property names with quotes must have matching quotes");if("constructor"!==n&&m||(h=!0),d+="."+n,L(G,f="%"+d+"%"))g=G[f];else if(null!=g){if(!(n in g)){if(!b)throw new j("base intrinsic for "+a+" exists, but the property is not available.");return}if(u&&l+1>=c.length){var q=u(g,n);g=(m=!!q)&&"get"in q&&!("originalValue"in q.get)?q.get:g[n]}else m=L(g,n),g=g[n];m&&!h&&(G[f]=g)}}return g}},17558,(a,b,c)=>{"use strict";var d=a.r(19374),e=a.r(14447),f=e([d("%String.prototype.indexOf%")]);b.exports=function(a,b){var c=d(a,!!b);return"function"==typeof c&&f(a,".prototype.")>-1?e([c]):c}},15257,(a,b,c)=>{"use strict";var d=a.r(19374),e=a.r(17558),f=a.r(16149),g=a.r(27655),h=d("%Map%",!0),i=e("Map.prototype.get",!0),j=e("Map.prototype.set",!0),k=e("Map.prototype.has",!0),l=e("Map.prototype.delete",!0),m=e("Map.prototype.size",!0);b.exports=!!h&&function(){var a,b={assert:function(a){if(!b.has(a))throw new g("Side channel does not contain "+f(a))},delete:function(b){if(a){var c=l(a,b);return 0===m(a)&&(a=void 0),c}return!1},get:function(b){if(a)return i(a,b)},has:function(b){return!!a&&k(a,b)},set:function(b,c){a||(a=new h),j(a,b,c)}};return b}},76348,(a,b,c)=>{"use strict";var d=a.r(19374),e=a.r(17558),f=a.r(16149),g=a.r(15257),h=a.r(27655),i=d("%WeakMap%",!0),j=e("WeakMap.prototype.get",!0),k=e("WeakMap.prototype.set",!0),l=e("WeakMap.prototype.has",!0),m=e("WeakMap.prototype.delete",!0);b.exports=i?function(){var a,b,c={assert:function(a){if(!c.has(a))throw new h("Side channel does not contain "+f(a))},delete:function(c){if(i&&c&&("object"==typeof c||"function"==typeof c)){if(a)return m(a,c)}else if(g&&b)return b.delete(c);return!1},get:function(c){return i&&c&&("object"==typeof c||"function"==typeof c)&&a?j(a,c):b&&b.get(c)},has:function(c){return i&&c&&("object"==typeof c||"function"==typeof c)&&a?l(a,c):!!b&&b.has(c)},set:function(c,d){i&&c&&("object"==typeof c||"function"==typeof c)?(a||(a=new i),k(a,c,d)):g&&(b||(b=g()),b.set(c,d))}};return c}:g},67068,(a,b,c)=>{"use strict";var d=a.r(27655),e=a.r(16149),f=a.r(85695),g=a.r(15257),h=a.r(76348)||g||f;b.exports=function(){var a,b={assert:function(a){if(!b.has(a))throw new d("Side channel does not contain "+e(a))},delete:function(b){return!!a&&a.delete(b)},get:function(b){return a&&a.get(b)},has:function(b){return!!a&&a.has(b)},set:function(b,c){a||(a=h()),a.set(b,c)}};return b}},63302,(a,b,c)=>{"use strict";var d=String.prototype.replace,e=/%20/g,f="RFC3986";b.exports={default:f,formatters:{RFC1738:function(a){return d.call(a,e,"+")},RFC3986:function(a){return String(a)}},RFC1738:"RFC1738",RFC3986:f}},13191,(a,b,c)=>{"use strict";var d=a.r(63302),e=a.r(67068),f=Object.prototype.hasOwnProperty,g=Array.isArray,h=e(),i=function(a,b){return h.set(a,b),a},j=function(a){return h.has(a)},k=function(a){return h.get(a)},l=function(a,b){h.set(a,b)},m=function(){for(var a=[],b=0;b<256;++b)a.push("%"+((b<16?"0":"")+b.toString(16)).toUpperCase());return a}(),n=function(a){for(;a.length>1;){var b=a.pop(),c=b.obj[b.prop];if(g(c)){for(var d=[],e=0;e<c.length;++e)void 0!==c[e]&&d.push(c[e]);b.obj[b.prop]=d}}},o=function(a,b){for(var c=b&&b.plainObjects?{__proto__:null}:{},d=0;d<a.length;++d)void 0!==a[d]&&(c[d]=a[d]);return c};b.exports={arrayToObject:o,assign:function(a,b){return Object.keys(b).reduce(function(a,c){return a[c]=b[c],a},a)},combine:function(a,b,c,d){if(j(a)){var e=k(a)+1;return a[e]=b,l(a,e),a}var f=[].concat(a,b);return f.length>c?i(o(f,{plainObjects:d}),f.length-1):f},compact:function(a){for(var b=[{obj:{o:a},prop:"o"}],c=[],d=0;d<b.length;++d)for(var e=b[d],f=e.obj[e.prop],g=Object.keys(f),h=0;h<g.length;++h){var i=g[h],j=f[i];"object"==typeof j&&null!==j&&-1===c.indexOf(j)&&(b.push({obj:f,prop:i}),c.push(j))}return n(b),a},decode:function(a,b,c){var d=a.replace(/\+/g," ");if("iso-8859-1"===c)return d.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(d)}catch(a){return d}},encode:function(a,b,c,e,f){if(0===a.length)return a;var g=a;if("symbol"==typeof a?g=Symbol.prototype.toString.call(a):"string"!=typeof a&&(g=String(a)),"iso-8859-1"===c)return escape(g).replace(/%u[0-9a-f]{4}/gi,function(a){return"%26%23"+parseInt(a.slice(2),16)+"%3B"});for(var h="",i=0;i<g.length;i+=1024){for(var j=g.length>=1024?g.slice(i,i+1024):g,k=[],l=0;l<j.length;++l){var n=j.charCodeAt(l);if(45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||f===d.RFC1738&&(40===n||41===n)){k[k.length]=j.charAt(l);continue}if(n<128){k[k.length]=m[n];continue}if(n<2048){k[k.length]=m[192|n>>6]+m[128|63&n];continue}if(n<55296||n>=57344){k[k.length]=m[224|n>>12]+m[128|n>>6&63]+m[128|63&n];continue}l+=1,n=65536+((1023&n)<<10|1023&j.charCodeAt(l)),k[k.length]=m[240|n>>18]+m[128|n>>12&63]+m[128|n>>6&63]+m[128|63&n]}h+=k.join("")}return h},isBuffer:function(a){return!!a&&"object"==typeof a&&!!(a.constructor&&a.constructor.isBuffer&&a.constructor.isBuffer(a))},isOverflow:j,isRegExp:function(a){return"[object RegExp]"===Object.prototype.toString.call(a)},maybeMap:function(a,b){if(g(a)){for(var c=[],d=0;d<a.length;d+=1)c.push(b(a[d]));return c}return b(a)},merge:function a(b,c,d){if(!c)return b;if("object"!=typeof c&&"function"!=typeof c){if(g(b))b.push(c);else if(!b||"object"!=typeof b)return[b,c];else if(j(b)){var e=k(b)+1;b[e]=c,l(b,e)}else(d&&(d.plainObjects||d.allowPrototypes)||!f.call(Object.prototype,c))&&(b[c]=!0);return b}if(!b||"object"!=typeof b){if(j(c)){for(var h=Object.keys(c),m=d&&d.plainObjects?{__proto__:null,0:b}:{0:b},n=0;n<h.length;n++)m[parseInt(h[n],10)+1]=c[h[n]];return i(m,k(c)+1)}return[b].concat(c)}var p=b;return(g(b)&&!g(c)&&(p=o(b,d)),g(b)&&g(c))?(c.forEach(function(c,e){if(f.call(b,e)){var g=b[e];g&&"object"==typeof g&&c&&"object"==typeof c?b[e]=a(g,c,d):b.push(c)}else b[e]=c}),b):Object.keys(c).reduce(function(b,e){var g=c[e];return f.call(b,e)?b[e]=a(b[e],g,d):b[e]=g,b},p)}}},53269,(a,b,c)=>{"use strict";var d=a.r(67068),e=a.r(13191),f=a.r(63302),g=Object.prototype.hasOwnProperty,h={brackets:function(a){return a+"[]"},comma:"comma",indices:function(a,b){return a+"["+b+"]"},repeat:function(a){return a}},i=Array.isArray,j=Array.prototype.push,k=function(a,b){j.apply(a,i(b)?b:[b])},l=Date.prototype.toISOString,m=f.default,n={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:m,formatter:f.formatters[m],indices:!1,serializeDate:function(a){return l.call(a)},skipNulls:!1,strictNullHandling:!1},o={},p=function a(b,c,f,g,h,j,l,m,p,q,r,s,t,u,v,w,x,y){for(var z,A,B=b,C=y,D=0,E=!1;void 0!==(C=C.get(o))&&!E;){var F=C.get(b);if(D+=1,void 0!==F)if(F===D)throw RangeError("Cyclic object value");else E=!0;void 0===C.get(o)&&(D=0)}if("function"==typeof q?B=q(c,B):B instanceof Date?B=t(B):"comma"===f&&i(B)&&(B=e.maybeMap(B,function(a){return a instanceof Date?t(a):a})),null===B){if(j)return p&&!w?p(c,n.encoder,x,"key",u):c;B=""}if("string"==typeof(z=B)||"number"==typeof z||"boolean"==typeof z||"symbol"==typeof z||"bigint"==typeof z||e.isBuffer(B))return p?[v(w?c:p(c,n.encoder,x,"key",u))+"="+v(p(B,n.encoder,x,"value",u))]:[v(c)+"="+v(String(B))];var G=[];if(void 0===B)return G;if("comma"===f&&i(B))w&&p&&(B=e.maybeMap(B,p)),A=[{value:B.length>0?B.join(",")||null:void 0}];else if(i(q))A=q;else{var H=Object.keys(B);A=r?H.sort(r):H}var I=m?String(c).replace(/\./g,"%2E"):String(c),J=g&&i(B)&&1===B.length?I+"[]":I;if(h&&i(B)&&0===B.length)return J+"[]";for(var K=0;K<A.length;++K){var L=A[K],M="object"==typeof L&&L&&void 0!==L.value?L.value:B[L];if(!l||null!==M){var N=s&&m?String(L).replace(/\./g,"%2E"):String(L),O=i(B)?"function"==typeof f?f(J,N):J:J+(s?"."+N:"["+N+"]");y.set(b,D);var P=d();P.set(o,y),k(G,a(M,O,f,g,h,j,l,m,"comma"===f&&w&&i(B)?null:p,q,r,s,t,u,v,w,x,P))}}return G},q=function(a){if(!a)return n;if(void 0!==a.allowEmptyArrays&&"boolean"!=typeof a.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==a.encodeDotInKeys&&"boolean"!=typeof a.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw TypeError("Encoder has to be a function.");var b,c=a.charset||n.charset;if(void 0!==a.charset&&"utf-8"!==a.charset&&"iso-8859-1"!==a.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var d=f.default;if(void 0!==a.format){if(!g.call(f.formatters,a.format))throw TypeError("Unknown format option provided.");d=a.format}var e=f.formatters[d],j=n.filter;if(("function"==typeof a.filter||i(a.filter))&&(j=a.filter),b=a.arrayFormat in h?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":n.arrayFormat,"commaRoundTrip"in a&&"boolean"!=typeof a.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var k=void 0===a.allowDots?!0===a.encodeDotInKeys||n.allowDots:!!a.allowDots;return{addQueryPrefix:"boolean"==typeof a.addQueryPrefix?a.addQueryPrefix:n.addQueryPrefix,allowDots:k,allowEmptyArrays:"boolean"==typeof a.allowEmptyArrays?!!a.allowEmptyArrays:n.allowEmptyArrays,arrayFormat:b,charset:c,charsetSentinel:"boolean"==typeof a.charsetSentinel?a.charsetSentinel:n.charsetSentinel,commaRoundTrip:!!a.commaRoundTrip,delimiter:void 0===a.delimiter?n.delimiter:a.delimiter,encode:"boolean"==typeof a.encode?a.encode:n.encode,encodeDotInKeys:"boolean"==typeof a.encodeDotInKeys?a.encodeDotInKeys:n.encodeDotInKeys,encoder:"function"==typeof a.encoder?a.encoder:n.encoder,encodeValuesOnly:"boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:n.encodeValuesOnly,filter:j,format:d,formatter:e,serializeDate:"function"==typeof a.serializeDate?a.serializeDate:n.serializeDate,skipNulls:"boolean"==typeof a.skipNulls?a.skipNulls:n.skipNulls,sort:"function"==typeof a.sort?a.sort:null,strictNullHandling:"boolean"==typeof a.strictNullHandling?a.strictNullHandling:n.strictNullHandling}};b.exports=function(a,b){var c,e=a,f=q(b);"function"==typeof f.filter?e=(0,f.filter)("",e):i(f.filter)&&(c=f.filter);var g=[];if("object"!=typeof e||null===e)return"";var j=h[f.arrayFormat],l="comma"===j&&f.commaRoundTrip;c||(c=Object.keys(e)),f.sort&&c.sort(f.sort);for(var m=d(),n=0;n<c.length;++n){var o=c[n],r=e[o];f.skipNulls&&null===r||k(g,p(r,o,j,l,f.allowEmptyArrays,f.strictNullHandling,f.skipNulls,f.encodeDotInKeys,f.encode?f.encoder:null,f.filter,f.sort,f.allowDots,f.serializeDate,f.format,f.formatter,f.encodeValuesOnly,f.charset,m))}var s=g.join(f.delimiter),t=!0===f.addQueryPrefix?"?":"";return f.charsetSentinel&&("iso-8859-1"===f.charset?t+="utf8=%26%2310003%3B&":t+="utf8=%E2%9C%93&"),s.length>0?t+s:""}},30087,(a,b,c)=>{"use strict";var d=a.r(13191),e=Object.prototype.hasOwnProperty,f=Array.isArray,g={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:d.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},h=function(a,b,c){if(a&&"string"==typeof a&&b.comma&&a.indexOf(",")>-1)return a.split(",");if(b.throwOnLimitExceeded&&c>=b.arrayLimit)throw RangeError("Array limit exceeded. Only "+b.arrayLimit+" element"+(1===b.arrayLimit?"":"s")+" allowed in an array.");return a},i=function(a,b){var c={__proto__:null},i=b.ignoreQueryPrefix?a.replace(/^\?/,""):a;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var j=b.parameterLimit===1/0?void 0:b.parameterLimit,k=i.split(b.delimiter,b.throwOnLimitExceeded?j+1:j);if(b.throwOnLimitExceeded&&k.length>j)throw RangeError("Parameter limit exceeded. Only "+j+" parameter"+(1===j?"":"s")+" allowed.");var l=-1,m=b.charset;if(b.charsetSentinel)for(n=0;n<k.length;++n)0===k[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===k[n]?m="utf-8":"utf8=%26%2310003%3B"===k[n]&&(m="iso-8859-1"),l=n,n=k.length);for(n=0;n<k.length;++n)if(n!==l){var n,o,p,q=k[n],r=q.indexOf("]="),s=-1===r?q.indexOf("="):r+1;if(-1===s?(o=b.decoder(q,g.decoder,m,"key"),p=b.strictNullHandling?null:""):null!==(o=b.decoder(q.slice(0,s),g.decoder,m,"key"))&&(p=d.maybeMap(h(q.slice(s+1),b,f(c[o])?c[o].length:0),function(a){return b.decoder(a,g.decoder,m,"value")})),p&&b.interpretNumericEntities&&"iso-8859-1"===m&&(p=String(p).replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(parseInt(b,10))})),q.indexOf("[]=")>-1&&(p=f(p)?[p]:p),null!==o){var t=e.call(c,o);t&&"combine"===b.duplicates?c[o]=d.combine(c[o],p,b.arrayLimit,b.plainObjects):t&&"last"!==b.duplicates||(c[o]=p)}}return c},j=function(a,b,c,e){var f=0;if(a.length>0&&"[]"===a[a.length-1]){var g=a.slice(0,-1).join("");f=Array.isArray(b)&&b[g]?b[g].length:0}for(var i=e?b:h(b,c,f),j=a.length-1;j>=0;--j){var k,l=a[j];if("[]"===l&&c.parseArrays)k=d.isOverflow(i)?i:c.allowEmptyArrays&&(""===i||c.strictNullHandling&&null===i)?[]:d.combine([],i,c.arrayLimit,c.plainObjects);else{k=c.plainObjects?{__proto__:null}:{};var m="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,n=c.decodeDotInKeys?m.replace(/%2E/g,"."):m,o=parseInt(n,10);c.parseArrays||""!==n?!isNaN(o)&&l!==n&&String(o)===n&&o>=0&&c.parseArrays&&o<=c.arrayLimit?(k=[])[o]=i:"__proto__"!==n&&(k[n]=i):k={0:i}}i=k}return i},k=function(a,b){var c=b.allowDots?a.replace(/\.([^.[]+)/g,"[$1]"):a;if(b.depth<=0){if(!b.plainObjects&&e.call(Object.prototype,c)&&!b.allowPrototypes)return;return[c]}var d=/(\[[^[\]]*])/g,f=/(\[[^[\]]*])/.exec(c),g=f?c.slice(0,f.index):c,h=[];if(g){if(!b.plainObjects&&e.call(Object.prototype,g)&&!b.allowPrototypes)return;h.push(g)}for(var i=0;null!==(f=d.exec(c))&&i<b.depth;){i+=1;var j=f[1].slice(1,-1);if(!b.plainObjects&&e.call(Object.prototype,j)&&!b.allowPrototypes)return;h.push(f[1])}if(f){if(!0===b.strictDepth)throw RangeError("Input depth exceeded depth option of "+b.depth+" and strictDepth is true");h.push("["+c.slice(f.index)+"]")}return h},l=function(a,b,c,d){if(a){var e=k(a,c);if(e)return j(e,b,c,d)}},m=function(a){if(!a)return g;if(void 0!==a.allowEmptyArrays&&"boolean"!=typeof a.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==a.decodeDotInKeys&&"boolean"!=typeof a.decodeDotInKeys)throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==a.decoder&&void 0!==a.decoder&&"function"!=typeof a.decoder)throw TypeError("Decoder has to be a function.");if(void 0!==a.charset&&"utf-8"!==a.charset&&"iso-8859-1"!==a.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==a.throwOnLimitExceeded&&"boolean"!=typeof a.throwOnLimitExceeded)throw TypeError("`throwOnLimitExceeded` option must be a boolean");var b=void 0===a.charset?g.charset:a.charset,c=void 0===a.duplicates?g.duplicates:a.duplicates;if("combine"!==c&&"first"!==c&&"last"!==c)throw TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===a.allowDots?!0===a.decodeDotInKeys||g.allowDots:!!a.allowDots,allowEmptyArrays:"boolean"==typeof a.allowEmptyArrays?!!a.allowEmptyArrays:g.allowEmptyArrays,allowPrototypes:"boolean"==typeof a.allowPrototypes?a.allowPrototypes:g.allowPrototypes,allowSparse:"boolean"==typeof a.allowSparse?a.allowSparse:g.allowSparse,arrayLimit:"number"==typeof a.arrayLimit?a.arrayLimit:g.arrayLimit,charset:b,charsetSentinel:"boolean"==typeof a.charsetSentinel?a.charsetSentinel:g.charsetSentinel,comma:"boolean"==typeof a.comma?a.comma:g.comma,decodeDotInKeys:"boolean"==typeof a.decodeDotInKeys?a.decodeDotInKeys:g.decodeDotInKeys,decoder:"function"==typeof a.decoder?a.decoder:g.decoder,delimiter:"string"==typeof a.delimiter||d.isRegExp(a.delimiter)?a.delimiter:g.delimiter,depth:"number"==typeof a.depth||!1===a.depth?+a.depth:g.depth,duplicates:c,ignoreQueryPrefix:!0===a.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof a.interpretNumericEntities?a.interpretNumericEntities:g.interpretNumericEntities,parameterLimit:"number"==typeof a.parameterLimit?a.parameterLimit:g.parameterLimit,parseArrays:!1!==a.parseArrays,plainObjects:"boolean"==typeof a.plainObjects?a.plainObjects:g.plainObjects,strictDepth:"boolean"==typeof a.strictDepth?!!a.strictDepth:g.strictDepth,strictNullHandling:"boolean"==typeof a.strictNullHandling?a.strictNullHandling:g.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof a.throwOnLimitExceeded&&a.throwOnLimitExceeded}};b.exports=function(a,b){var c=m(b);if(""===a||null==a)return c.plainObjects?{__proto__:null}:{};for(var e="string"==typeof a?i(a,c):a,f=c.plainObjects?{__proto__:null}:{},g=Object.keys(e),h=0;h<g.length;++h){var j=g[h],k=l(j,e[j],c,"string"==typeof a);f=d.merge(f,k,c)}return!0===c.allowSparse?f:d.compact(f)}},7513,(a,b,c)=>{"use strict";var d=a.r(53269),e=a.r(30087);b.exports={formats:a.r(63302),parse:e,stringify:d}},49197,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.SSO=void 0;let f=e(a.r(7513)),g=a.r(71833),h=a.r(83983),i=a.r(29391);c.SSO=class{constructor(a){this.workos=a}listConnections(a){return d(this,void 0,void 0,function*(){return new h.AutoPaginatable((yield(0,g.fetchAndDeserialize)(this.workos,"/connections",i.deserializeConnection,a?(0,i.serializeListConnectionsOptions)(a):void 0)),a=>(0,g.fetchAndDeserialize)(this.workos,"/connections",i.deserializeConnection,a),a?(0,i.serializeListConnectionsOptions)(a):void 0)})}deleteConnection(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/connections/${a}`)})}getAuthorizationUrl({connection:a,clientId:b,domain:c,domainHint:d,loginHint:e,organization:g,provider:h,providerQueryParams:i,providerScopes:j,redirectUri:k,state:l}){let m;if(!c&&!h&&!a&&!g)throw Error("Incomplete arguments. Need to specify either a 'connection', 'organization', 'domain', or 'provider'.");c&&this.workos.emitWarning("The `domain` parameter for `getAuthorizationURL` is deprecated. Please use `organization` instead.");let n=(m={connection:a,organization:g,domain:c,domain_hint:d,login_hint:e,provider:h,provider_query_params:i,provider_scopes:j,client_id:b,redirect_uri:k,response_type:"code",state:l},f.default.stringify(m,{arrayFormat:"repeat",sort:(a,b)=>a.localeCompare(b),format:"RFC1738"}));return`${this.workos.baseURL}/sso/authorize?${n}`}getConnection(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/connections/${a}`);return(0,i.deserializeConnection)(b)})}getProfileAndToken({code:a,clientId:b}){return d(this,void 0,void 0,function*(){let c=new URLSearchParams({client_id:b,client_secret:this.workos.key,grant_type:"authorization_code",code:a}),{data:d}=yield this.workos.post("/sso/token",c);return(0,i.deserializeProfileAndToken)(d)})}getProfile({accessToken:a}){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get("/sso/profile",{accessToken:a});return(0,i.deserializeProfile)(b)})}}},33867,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeChallenge=void 0,c.deserializeChallenge=a=>({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,expiresAt:a.expires_at,code:a.code,authenticationFactorId:a.authentication_factor_id})},16354,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeSms=void 0,c.deserializeSms=a=>({phoneNumber:a.phone_number})},2452,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeFactorWithSecrets=c.deserializeFactor=void 0;let d=a.r(16354),e=a.r(15937);c.deserializeFactor=a=>Object.assign(Object.assign({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,type:a.type},a.sms?{sms:(0,d.deserializeSms)(a.sms)}:{}),a.totp?{totp:(0,e.deserializeTotp)(a.totp)}:{}),c.deserializeFactorWithSecrets=a=>Object.assign(Object.assign({object:a.object,id:a.id,createdAt:a.created_at,updatedAt:a.updated_at,type:a.type},a.sms?{sms:(0,d.deserializeSms)(a.sms)}:{}),a.totp?{totp:(0,e.deserializeTotpWithSecrets)(a.totp)}:{})},92001,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeVerifyResponse=void 0;let d=a.r(33867);c.deserializeVerifyResponse=a=>({challenge:(0,d.deserializeChallenge)(a.challenge),valid:a.valid})},96972,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(33867),c),e(a.r(2452),c),e(a.r(92001),c)},51248,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.Mfa=void 0;let e=a.r(96972);c.Mfa=class{constructor(a){this.workos=a}deleteFactor(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/auth/factors/${a}`)})}getFactor(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/auth/factors/${a}`);return(0,e.deserializeFactor)(b)})}enrollFactor(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/auth/factors/enroll",Object.assign({type:a.type},(()=>{switch(a.type){case"sms":return{phone_number:a.phoneNumber};case"totp":return{totp_issuer:a.issuer,totp_user:a.user};default:return{}}})()));return(0,e.deserializeFactorWithSecrets)(b)})}challengeFactor(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/auth/factors/${a.authenticationFactorId}/challenge`,{sms_template:"smsTemplate"in a?a.smsTemplate:void 0});return(0,e.deserializeChallenge)(b)})}verifyFactor(a){return d(this,void 0,void 0,function*(){return this.verifyChallenge(a)})}verifyChallenge(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/auth/challenges/${a.authenticationChallengeId}/verify`,{code:a.code});return(0,e.deserializeVerifyResponse)(b)})}}},69907,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeAuditLogExport=void 0,c.deserializeAuditLogExport=a=>({object:a.object,id:a.id,state:a.state,url:a.url,createdAt:a.created_at,updatedAt:a.updated_at})},4168,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeAuditLogExportOptions=void 0,c.serializeAuditLogExportOptions=a=>({actions:a.actions,actors:a.actors,actor_names:a.actorNames,actor_ids:a.actorIds,organization_id:a.organizationId,range_end:a.rangeEnd.toISOString(),range_start:a.rangeStart.toISOString(),targets:a.targets})},33802,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreateAuditLogEventOptions=void 0,c.serializeCreateAuditLogEventOptions=a=>({action:a.action,version:a.version,occurred_at:a.occurredAt.toISOString(),actor:a.actor,targets:a.targets,context:{location:a.context.location,user_agent:a.context.userAgent},metadata:a.metadata})},92166,(a,b,c)=>{"use strict";function d(a){if(!a)return{};let b={};return Object.keys(a).forEach(c=>{b[c]={type:a[c]}}),b}Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreateAuditLogSchemaOptions=void 0,c.serializeCreateAuditLogSchemaOptions=a=>{var b;return{actor:{metadata:{type:"object",properties:d(null==(b=a.actor)?void 0:b.metadata)}},targets:a.targets.map(a=>({type:a.type,metadata:a.metadata?{type:"object",properties:d(a.metadata)}:void 0})),metadata:a.metadata?{type:"object",properties:d(a.metadata)}:void 0}}},45324,(a,b,c)=>{"use strict";function d(a){if(!a||!a.properties)return{};let b={};return Object.keys(a.properties).forEach(c=>{a.properties&&(b[c]=a.properties[c].type)}),b}Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeAuditLogSchema=void 0,c.deserializeAuditLogSchema=a=>{var b;return{object:a.object,version:a.version,targets:a.targets.map(a=>({type:a.type,metadata:a.metadata?d(a.metadata):void 0})),actor:{metadata:d(null==(b=a.actor)?void 0:b.metadata)},metadata:a.metadata?d(a.metadata):void 0,createdAt:a.created_at}}},86564,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(69907),c),e(a.r(4168),c),e(a.r(33802),c),e(a.r(92166),c),e(a.r(45324),c)},67,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.AuditLogs=void 0;let e=a.r(86564);c.AuditLogs=class{constructor(a){this.workos=a}createEvent(a,b,c={}){return d(this,void 0,void 0,function*(){let d=Object.assign(Object.assign({},c),{idempotencyKey:c.idempotencyKey||`workos-node-${this.workos.getCryptoProvider().randomUUID()}`});yield this.workos.post("/audit_logs/events",{event:(0,e.serializeCreateAuditLogEventOptions)(b),organization_id:a},d)})}createExport(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/audit_logs/exports",(0,e.serializeAuditLogExportOptions)(a));return(0,e.deserializeAuditLogExport)(b)})}getExport(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/audit_logs/exports/${a}`);return(0,e.deserializeAuditLogExport)(b)})}createSchema(a,b={}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post(`/audit_logs/actions/${a.action}/schemas`,(0,e.serializeCreateAuditLogSchemaOptions)(a),b);return(0,e.deserializeAuditLogSchema)(c)})}}},57146,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680);c.default=(a,b)=>(0,d.createHash)(a).update(b).digest()},40642,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.concatKdf=c.lengthAndInput=c.uint32be=c.uint64be=c.p2s=c.concat=c.decoder=c.encoder=void 0;let d=a.r(57146);function e(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}function f(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function g(a){let b=new Uint8Array(4);return f(b,a),b}c.encoder=new TextEncoder,c.decoder=new TextDecoder,c.concat=e,c.p2s=function(a,b){return e(c.encoder.encode(a),new Uint8Array([0]),b)},c.uint64be=function(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return f(c,b,0),f(c,a%0x100000000,4),c},c.uint32be=g,c.lengthAndInput=function(a){return e(g(a.length),a)},c.concatKdf=async function(a,b,c){let e=Math.ceil((b>>3)/32),f=new Uint8Array(32*e);for(let b=0;b<e;b++){let e=new Uint8Array(4+a.length+c.length);e.set(g(b+1)),e.set(a,4),e.set(c,4+a.length),f.set(await (0,d.default)("sha256",e),32*b)}return f.slice(0,b>>3)}},45388,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.decode=c.encode=c.encodeBase64=c.decodeBase64=void 0;let d=a.r(51615),e=a.r(40642);c.encode=a=>d.Buffer.from(a).toString("base64url"),c.decodeBase64=a=>new Uint8Array(d.Buffer.from(a,"base64")),c.encodeBase64=a=>d.Buffer.from(a).toString("base64"),c.decode=a=>{let b;return new Uint8Array(d.Buffer.from(((b=a)instanceof Uint8Array&&(b=e.decoder.decode(b)),b),"base64"))}},90289,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.JWSSignatureVerificationFailed=c.JWKSTimeout=c.JWKSMultipleMatchingKeys=c.JWKSNoMatchingKey=c.JWKSInvalid=c.JWKInvalid=c.JWTInvalid=c.JWSInvalid=c.JWEInvalid=c.JWEDecryptionFailed=c.JOSENotSupported=c.JOSEAlgNotAllowed=c.JWTExpired=c.JWTClaimValidationFailed=c.JOSEError=void 0;class d extends Error{static get code(){return"ERR_JOSE_GENERIC"}code="ERR_JOSE_GENERIC";constructor(a){super(a),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}c.JOSEError=d,c.JWTClaimValidationFailed=class extends d{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a),this.claim=c,this.reason=d,this.payload=b}},c.JWTExpired=class extends d{static get code(){return"ERR_JWT_EXPIRED"}code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a),this.claim=c,this.reason=d,this.payload=b}},c.JOSEAlgNotAllowed=class extends d{static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}code="ERR_JOSE_ALG_NOT_ALLOWED"},c.JOSENotSupported=class extends d{static get code(){return"ERR_JOSE_NOT_SUPPORTED"}code="ERR_JOSE_NOT_SUPPORTED"},c.JWEDecryptionFailed=class extends d{static get code(){return"ERR_JWE_DECRYPTION_FAILED"}code="ERR_JWE_DECRYPTION_FAILED";message="decryption operation failed"},c.JWEInvalid=class extends d{static get code(){return"ERR_JWE_INVALID"}code="ERR_JWE_INVALID"},c.JWSInvalid=class extends d{static get code(){return"ERR_JWS_INVALID"}code="ERR_JWS_INVALID"},c.JWTInvalid=class extends d{static get code(){return"ERR_JWT_INVALID"}code="ERR_JWT_INVALID"},c.JWKInvalid=class extends d{static get code(){return"ERR_JWK_INVALID"}code="ERR_JWK_INVALID"},c.JWKSInvalid=class extends d{static get code(){return"ERR_JWKS_INVALID"}code="ERR_JWKS_INVALID"},c.JWKSNoMatchingKey=class extends d{static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}code="ERR_JWKS_NO_MATCHING_KEY";message="no applicable key found in the JSON Web Key Set"};class e extends d{[Symbol.asyncIterator];static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";message="multiple matching keys found in the JSON Web Key Set"}c.JWKSMultipleMatchingKeys=e,c.JWKSTimeout=class extends d{static get code(){return"ERR_JWKS_TIMEOUT"}code="ERR_JWKS_TIMEOUT";message="request timed out"},c.JWSSignatureVerificationFailed=class extends d{static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";message="signature verification failed"}},32447,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var d=a.r(66680);Object.defineProperty(c,"default",{enumerable:!0,get:function(){return d.randomFillSync}})},6917,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.bitLength=void 0;let d=a.r(90289),e=a.r(32447);function f(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new d.JOSENotSupported(`Unsupported JWE Algorithm: ${a}`)}}c.bitLength=f,c.default=a=>(0,e.default)(new Uint8Array(f(a)>>3))},7688,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(90289),e=a.r(6917);c.default=(a,b)=>{if(b.length<<3!==(0,e.bitLength)(a))throw new d.JWEInvalid("Invalid Initialization Vector length")}},65837,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(12057);c.default=a=>d.types.isKeyObject(a)},52813,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(90289),e=a.r(65837);c.default=(a,b)=>{let c;switch(a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":c=parseInt(a.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":c=parseInt(a.slice(1,4),10);break;default:throw new d.JOSENotSupported(`Content Encryption Algorithm ${a} is not supported either by JOSE or your javascript runtime`)}if(b instanceof Uint8Array){let a=b.byteLength<<3;if(a!==c)throw new d.JWEInvalid(`Invalid Content Encryption Key length. Expected ${c} bits, got ${a} bits`);return}if((0,e.default)(b)&&"secret"===b.type){let a=b.symmetricKeySize<<3;if(a!==c)throw new d.JWEInvalid(`Invalid Content Encryption Key length. Expected ${c} bits, got ${a} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},52984,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=a.r(66680).timingSafeEqual},59555,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680),e=a.r(40642);c.default=function(a,b,c,f,g,h){let i=(0,e.concat)(a,b,c,(0,e.uint64be)(a.length<<3)),j=(0,d.createHmac)(`sha${f}`,g);return j.update(i),j.digest().slice(0,h>>3)}},41027,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isCryptoKey=void 0;let d=a.r(66680),e=a.r(12057);c.default=d.webcrypto,c.isCryptoKey=a=>e.types.isCryptoKey(a)},24668,(a,b,c)=>{"use strict";function d(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function e(a,b){return a.name===b}function f(a){return parseInt(a.name.slice(4),10)}function g(a,b){if(b.length&&!b.some(b=>a.usages.includes(b))){let a="CryptoKey does not support this operation, its usages must include ";if(b.length>2){let c=b.pop();a+=`one of ${b.join(", ")}, or ${c}.`}else 2===b.length?a+=`one of ${b[0]} or ${b[1]}.`:a+=`${b[0]}.`;throw TypeError(a)}}Object.defineProperty(c,"__esModule",{value:!0}),c.checkEncCryptoKey=c.checkSigCryptoKey=void 0,c.checkSigCryptoKey=function(a,b,...c){switch(b){case"HS256":case"HS384":case"HS512":{if(!e(a.algorithm,"HMAC"))throw d("HMAC");let c=parseInt(b.slice(2),10);if(f(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!e(a.algorithm,"RSASSA-PKCS1-v1_5"))throw d("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(f(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!e(a.algorithm,"RSA-PSS"))throw d("RSA-PSS");let c=parseInt(b.slice(2),10);if(f(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==a.algorithm.name&&"Ed448"!==a.algorithm.name)throw d("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!e(a.algorithm,"ECDSA"))throw d("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw d(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}g(a,c)},c.checkEncCryptoKey=function(a,b,...c){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if(!e(a.algorithm,"AES-GCM"))throw d("AES-GCM");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw d(c,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!e(a.algorithm,"AES-KW"))throw d("AES-KW");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw d(c,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw d("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!e(a.algorithm,"PBKDF2"))throw d("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!e(a.algorithm,"RSA-OAEP"))throw d("RSA-OAEP");let c=parseInt(b.slice(9),10)||1;if(f(a.algorithm.hash)!==c)throw d(`SHA-${c}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}g(a,c)}},54573,(a,b,c)=>{"use strict";function d(a,b,...c){if(c.length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}Object.defineProperty(c,"__esModule",{value:!0}),c.withAlg=void 0,c.default=(a,...b)=>d("Key must be ",a,...b),c.withAlg=function(a,b,...c){return d(`Key for the ${a} algorithm must be `,b,...c)}},47756,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0});let e=a.r(66680);c.default=a=>(d||=new Set((0,e.getCiphers)())).has(a)},159,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.types=void 0;let d=a.r(41027),e=a.r(65837);c.default=a=>(0,e.default)(a)||(0,d.isCryptoKey)(a);let f=["KeyObject"];c.types=f,(globalThis.CryptoKey||d.default?.CryptoKey)&&f.push("CryptoKey")},76552,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680),e=a.r(7688),f=a.r(52813),g=a.r(40642),h=a.r(90289),i=a.r(52984),j=a.r(59555),k=a.r(41027),l=a.r(24668),m=a.r(65837),n=a.r(54573),o=a.r(47756),p=a.r(159);c.default=(a,b,c,q,r,s)=>{let t;if((0,k.isCryptoKey)(b))(0,l.checkEncCryptoKey)(b,a,"decrypt"),t=d.KeyObject.from(b);else if(b instanceof Uint8Array||(0,m.default)(b))t=b;else throw TypeError((0,n.default)(b,...p.types,"Uint8Array"));if(!q)throw new h.JWEInvalid("JWE Initialization Vector missing");if(!r)throw new h.JWEInvalid("JWE Authentication Tag missing");switch((0,f.default)(a,t),(0,e.default)(a,q),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(a,b,c,e,f,k){let l,n,p=parseInt(a.slice(1,4),10);(0,m.default)(b)&&(b=b.export());let q=b.subarray(p>>3),r=b.subarray(0,p>>3),s=parseInt(a.slice(-3),10),t=`aes-${p}-cbc`;if(!(0,o.default)(t))throw new h.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);let u=(0,j.default)(k,e,c,s,r,p);try{l=(0,i.default)(f,u)}catch{}if(!l)throw new h.JWEDecryptionFailed;try{let a=(0,d.createDecipheriv)(t,q,e);n=(0,g.concat)(a.update(c),a.final())}catch{}if(!n)throw new h.JWEDecryptionFailed;return n}(a,t,c,q,r,s);case"A128GCM":case"A192GCM":case"A256GCM":var u=t;let v=parseInt(a.slice(1,4),10),w=`aes-${v}-gcm`;if(!(0,o.default)(w))throw new h.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);try{let a=(0,d.createDecipheriv)(w,u,q,{authTagLength:16});a.setAuthTag(r),s.byteLength&&a.setAAD(s,{plaintextLength:c.length});let b=a.update(c);return a.final(),b}catch{throw new h.JWEDecryptionFailed}default:throw new h.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},76195,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=(...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}},2997,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=function(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}},70557,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.unwrap=c.wrap=void 0;let d=a.r(51615),e=a.r(66680),f=a.r(90289),g=a.r(40642),h=a.r(41027),i=a.r(24668),j=a.r(65837),k=a.r(54573),l=a.r(47756),m=a.r(159);function n(a,b){if(a.symmetricKeySize<<3!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function o(a,b,c){if((0,j.default)(a))return a;if(a instanceof Uint8Array)return(0,e.createSecretKey)(a);if((0,h.isCryptoKey)(a))return(0,i.checkEncCryptoKey)(a,b,c),e.KeyObject.from(a);throw TypeError((0,k.default)(a,...m.types,"Uint8Array"))}c.wrap=(a,b,c)=>{let h=parseInt(a.slice(1,4),10),i=`aes${h}-wrap`;if(!(0,l.default)(i))throw new f.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`);let j=o(b,a,"wrapKey");n(j,a);let k=(0,e.createCipheriv)(i,j,d.Buffer.alloc(8,166));return(0,g.concat)(k.update(c),k.final())},c.unwrap=(a,b,c)=>{let h=parseInt(a.slice(1,4),10),i=`aes${h}-wrap`;if(!(0,l.default)(i))throw new f.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`);let j=o(b,a,"unwrapKey");n(j,a);let k=(0,e.createDecipheriv)(i,j,d.Buffer.alloc(8,166));return(0,g.concat)(k.update(c),k.final())}},65462,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.weakMap=void 0;let d=a.r(66680),e=a.r(90289),f=a.r(41027),g=a.r(65837),h=a.r(54573),i=a.r(159);c.weakMap=new WeakMap,c.default=(a,b)=>{let c;if((0,f.isCryptoKey)(a))c=d.KeyObject.from(a);else if((0,g.default)(a))c=a;else throw TypeError((0,h.default)(a,...i.types));if("secret"===c.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(c.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${c.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${c.asymmetricKeyType.slice(1)}`;case"ec":{let a=c.asymmetricKeyDetails.namedCurve;if(b)return a;switch(a){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new e.JOSENotSupported("Unsupported key curve for this operation")}}default:throw TypeError("Invalid asymmetric key type for this operation")}}},85405,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ecdhAllowed=c.generateEpk=c.deriveKey=void 0;let d=a.r(66680),e=a.r(12057),f=a.r(65462),g=a.r(40642),h=a.r(90289),i=a.r(41027),j=a.r(24668),k=a.r(65837),l=a.r(54573),m=a.r(159),n=(0,e.promisify)(d.generateKeyPair);c.deriveKey=async function(a,b,c,e,f=new Uint8Array(0),h=new Uint8Array(0)){let n,o;if((0,i.isCryptoKey)(a))(0,j.checkEncCryptoKey)(a,"ECDH"),n=d.KeyObject.from(a);else if((0,k.default)(a))n=a;else throw TypeError((0,l.default)(a,...m.types));if((0,i.isCryptoKey)(b))(0,j.checkEncCryptoKey)(b,"ECDH","deriveBits"),o=d.KeyObject.from(b);else if((0,k.default)(b))o=b;else throw TypeError((0,l.default)(b,...m.types));let p=(0,g.concat)((0,g.lengthAndInput)(g.encoder.encode(c)),(0,g.lengthAndInput)(f),(0,g.lengthAndInput)(h),(0,g.uint32be)(e)),q=(0,d.diffieHellman)({privateKey:o,publicKey:n});return(0,g.concatKdf)(q,e,p)},c.generateEpk=async function(a){let b;if((0,i.isCryptoKey)(a))b=d.KeyObject.from(a);else if((0,k.default)(a))b=a;else throw TypeError((0,l.default)(a,...m.types));switch(b.asymmetricKeyType){case"x25519":return n("x25519");case"x448":return n("x448");case"ec":return n("ec",{namedCurve:(0,f.default)(b)});default:throw new h.JOSENotSupported("Invalid or unsupported EPK")}},c.ecdhAllowed=a=>["P-256","P-384","P-521","X25519","X448"].includes((0,f.default)(a))},43228,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(90289);c.default=function(a){if(!(a instanceof Uint8Array)||a.length<8)throw new d.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}},41188,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.decrypt=c.encrypt=void 0;let d=a.r(12057),e=a.r(66680),f=a.r(32447),g=a.r(40642),h=a.r(45388),i=a.r(70557),j=a.r(43228),k=a.r(41027),l=a.r(24668),m=a.r(65837),n=a.r(54573),o=a.r(159),p=(0,d.promisify)(e.pbkdf2);function q(a,b){if((0,m.default)(a))return a.export();if(a instanceof Uint8Array)return a;if((0,k.isCryptoKey)(a))return(0,l.checkEncCryptoKey)(a,b,"deriveBits","deriveKey"),e.KeyObject.from(a).export();throw TypeError((0,n.default)(a,...o.types,"Uint8Array"))}c.encrypt=async(a,b,c,d=2048,e=(0,f.default)(new Uint8Array(16)))=>{(0,j.default)(e);let k=(0,g.p2s)(a,e),l=parseInt(a.slice(13,16),10)>>3,m=q(b,a),n=await p(m,k,d,l,`sha${a.slice(8,11)}`);return{encryptedKey:await (0,i.wrap)(a.slice(-6),n,c),p2c:d,p2s:(0,h.encode)(e)}},c.decrypt=async(a,b,c,d,e)=>{(0,j.default)(e);let f=(0,g.p2s)(a,e),h=parseInt(a.slice(13,16),10)>>3,k=q(b,a),l=await p(k,f,d,h,`sha${a.slice(8,11)}`);return(0,i.unwrap)(a.slice(-6),l,c)}},21306,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=(a,b)=>{let{modulusLength:c}=a.asymmetricKeyDetails;if("number"!=typeof c||c<2048)throw TypeError(`${b} requires key modulusLength to be 2048 bits or larger`)}},34399,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.decrypt=c.encrypt=void 0;let d=a.r(66680),e=a.r(12057),f=a.r(21306),g=a.r(41027),h=a.r(24668),i=a.r(65837),j=a.r(54573),k=a.r(159),l=(a,b)=>{if("rsa"!==a.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,f.default)(a,b)},m=(0,e.deprecate)(()=>d.constants.RSA_PKCS1_PADDING,'The RSA1_5 "alg" (JWE Algorithm) is deprecated and will be removed in the next major revision.'),n=a=>{switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return d.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return m();default:return}},o=a=>{switch(a){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function p(a,b,...c){if((0,i.default)(a))return a;if((0,g.isCryptoKey)(a))return(0,h.checkEncCryptoKey)(a,b,...c),d.KeyObject.from(a);throw TypeError((0,j.default)(a,...k.types))}c.encrypt=(a,b,c)=>{let e=n(a),f=o(a),g=p(b,a,"wrapKey","encrypt");return l(g,a),(0,d.publicEncrypt)({key:g,oaepHash:f,padding:e},c)},c.decrypt=(a,b,c)=>{let e=n(a),f=o(a),g=p(b,a,"unwrapKey","decrypt");return l(g,a),(0,d.privateDecrypt)({key:g,oaepHash:f,padding:e},c)}},19073,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default={}},93992,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.bitLength=void 0;let d=a.r(90289),e=a.r(32447);function f(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new d.JOSENotSupported(`Unsupported JWE Algorithm: ${a}`)}}c.bitLength=f,c.default=a=>(0,e.default)(new Uint8Array(f(a)>>3))},37798,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.fromX509=c.fromSPKI=c.fromPKCS8=c.toPKCS8=c.toSPKI=void 0;let d=a.r(66680),e=a.r(51615),f=a.r(41027),g=a.r(65837),h=a.r(54573),i=a.r(159),j=(a,b,c)=>{let e;if((0,f.isCryptoKey)(c)){if(!c.extractable)throw TypeError("CryptoKey is not extractable");e=d.KeyObject.from(c)}else if((0,g.default)(c))e=c;else throw TypeError((0,h.default)(c,...i.types));if(e.type!==a)throw TypeError(`key is not a ${a} key`);return e.export({format:"pem",type:b})};c.toSPKI=a=>j("public","spki",a),c.toPKCS8=a=>j("private","pkcs8",a),c.fromPKCS8=a=>(0,d.createPrivateKey)({key:e.Buffer.from(a.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),c.fromSPKI=a=>(0,d.createPublicKey)({key:e.Buffer.from(a.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),c.fromX509=a=>(0,d.createPublicKey)({key:a,type:"spki",format:"pem"})},81843,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680);c.default=a=>(a.d?d.createPrivateKey:d.createPublicKey)({format:"jwk",key:a})},43052,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.importJWK=c.importPKCS8=c.importX509=c.importSPKI=void 0;let d=a.r(45388),e=a.r(37798),f=a.r(81843),g=a.r(90289),h=a.r(2997);c.importSPKI=async function(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,e.fromSPKI)(a,b,c)},c.importX509=async function(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,e.fromX509)(a,b,c)},c.importPKCS8=async function(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,e.fromPKCS8)(a,b,c)},c.importJWK=async function(a,b){if(!(0,h.default)(a))throw TypeError("JWK must be an object");switch(b||=a.alg,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,d.decode)(a.k);case"RSA":if(void 0!==a.oth)throw new g.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,f.default)({...a,alg:b});default:throw new g.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}},78749,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(54573),e=a.r(159),f=a=>a?.[Symbol.toStringTag];c.default=(a,b,c)=>{if(a.startsWith("HS")||"dir"===a||a.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(a)){if(!(b instanceof Uint8Array)){if(!(0,e.default)(b))throw TypeError((0,d.withAlg)(a,b,...e.types,"Uint8Array"));if("secret"!==b.type)throw TypeError(`${f(b)} instances for symmetric algorithms must be of type "secret"`)}}else{if(!(0,e.default)(b))throw TypeError((0,d.withAlg)(a,b,...e.types));if("secret"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===c&&"public"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===c&&"public"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithm decryption must be of type "private"`);if(b.algorithm&&"verify"===c&&"private"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithm verifying must be of type "public"`);if(b.algorithm&&"encrypt"===c&&"private"===b.type)throw TypeError(`${f(b)} instances for asymmetric algorithm encryption must be of type "public"`)}}},83668,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680),e=a.r(7688),f=a.r(52813),g=a.r(40642),h=a.r(59555),i=a.r(41027),j=a.r(24668),k=a.r(65837),l=a.r(54573),m=a.r(6917),n=a.r(90289),o=a.r(47756),p=a.r(159);c.default=(a,b,c,q,r)=>{let s;if((0,i.isCryptoKey)(c))(0,j.checkEncCryptoKey)(c,a,"encrypt"),s=d.KeyObject.from(c);else if(c instanceof Uint8Array||(0,k.default)(c))s=c;else throw TypeError((0,l.default)(c,...p.types,"Uint8Array"));switch((0,f.default)(a,s),q?(0,e.default)(a,q):q=(0,m.default)(a),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(a,b,c,e,f){let i=parseInt(a.slice(1,4),10);(0,k.default)(c)&&(c=c.export());let j=c.subarray(i>>3),l=c.subarray(0,i>>3),m=`aes-${i}-cbc`;if(!(0,o.default)(m))throw new n.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);let p=(0,d.createCipheriv)(m,j,e),q=(0,g.concat)(p.update(b),p.final()),r=parseInt(a.slice(-3),10),s=(0,h.default)(f,e,q,r,l,i);return{ciphertext:q,tag:s,iv:e}}(a,b,s,q,r);case"A128GCM":case"A192GCM":case"A256GCM":var t=s,u=q;let v=parseInt(a.slice(1,4),10),w=`aes-${v}-gcm`;if(!(0,o.default)(w))throw new n.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);let x=(0,d.createCipheriv)(w,t,u,{authTagLength:16});r.byteLength&&x.setAAD(r,{plaintextLength:b.length});let y=x.update(b);return x.final(),{ciphertext:y,tag:x.getAuthTag(),iv:u};default:throw new n.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},32539,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.unwrap=c.wrap=void 0;let d=a.r(83668),e=a.r(76552),f=a.r(45388);c.wrap=async function(a,b,c,e){let g=a.slice(0,7),h=await (0,d.default)(g,c,b,e,new Uint8Array(0));return{encryptedKey:h.ciphertext,iv:(0,f.encode)(h.iv),tag:(0,f.encode)(h.tag)}},c.unwrap=async function(a,b,c,d,f){let g=a.slice(0,7);return(0,e.default)(g,b,c,d,f,new Uint8Array(0))}},73636,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(70557),e=a.r(85405),f=a.r(41188),g=a.r(34399),h=a.r(45388),i=a.r(19073),j=a.r(90289),k=a.r(93992),l=a.r(43052),m=a.r(78749),n=a.r(2997),o=a.r(32539);c.default=async function(a,b,c,p,q){switch((0,m.default)(a,b,"decrypt"),b=await i.default.normalizePrivateKey?.(b,a)||b,a){case"dir":if(void 0!==c)throw new j.JWEInvalid("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new j.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let f,g;if(!(0,n.default)(p.epk))throw new j.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!e.ecdhAllowed(b))throw new j.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let i=await (0,l.importJWK)(p.epk,a);if(void 0!==p.apu){if("string"!=typeof p.apu)throw new j.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{f=(0,h.decode)(p.apu)}catch{throw new j.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==p.apv){if("string"!=typeof p.apv)throw new j.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{g=(0,h.decode)(p.apv)}catch{throw new j.JWEInvalid("Failed to base64url decode the apv")}}let m=await e.deriveKey(i,b,"ECDH-ES"===a?p.enc:a,"ECDH-ES"===a?(0,k.bitLength)(p.enc):parseInt(a.slice(-5,-2),10),f,g);if("ECDH-ES"===a)return m;if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");return(0,d.unwrap)(a.slice(-6),m,c)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");return(0,g.decrypt)(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let d;if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof p.p2c)throw new j.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let e=q?.maxPBES2Count||1e4;if(p.p2c>e)throw new j.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof p.p2s)throw new j.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{d=(0,h.decode)(p.p2s)}catch{throw new j.JWEInvalid("Failed to base64url decode the p2s")}return(0,f.decrypt)(a,b,c,p.p2c,d)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");return(0,d.unwrap)(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let d,e;if(void 0===c)throw new j.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof p.iv)throw new j.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof p.tag)throw new j.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{d=(0,h.decode)(p.iv)}catch{throw new j.JWEInvalid("Failed to base64url decode the iv")}try{e=(0,h.decode)(p.tag)}catch{throw new j.JWEInvalid("Failed to base64url decode the tag")}return(0,o.unwrap)(a,b,c,d,e)}default:throw new j.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}},73059,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(90289);c.default=function(a,b,c,e,f){let g;if(void 0!==f.crit&&e?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!e||void 0===e.crit)return new Set;if(!Array.isArray(e.crit)||0===e.crit.length||e.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let h of(g=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,e.crit)){if(!g.has(h))throw new d.JOSENotSupported(`Extension Header Parameter "${h}" is not recognized`);if(void 0===f[h])throw new a(`Extension Header Parameter "${h}" is missing`);if(g.get(h)&&void 0===e[h])throw new a(`Extension Header Parameter "${h}" MUST be integrity protected`)}return new Set(e.crit)}},94616,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=(a,b)=>{if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}},89666,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.flattenedDecrypt=void 0;let d=a.r(45388),e=a.r(76552),f=a.r(90289),g=a.r(76195),h=a.r(2997),i=a.r(73636),j=a.r(40642),k=a.r(93992),l=a.r(73059),m=a.r(94616);c.flattenedDecrypt=async function(a,b,c){let n,o,p,q,r,s,t;if(!(0,h.default)(a))throw new f.JWEInvalid("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new f.JWEInvalid("JOSE Header missing");if(void 0!==a.iv&&"string"!=typeof a.iv)throw new f.JWEInvalid("JWE Initialization Vector incorrect type");if("string"!=typeof a.ciphertext)throw new f.JWEInvalid("JWE Ciphertext missing or incorrect type");if(void 0!==a.tag&&"string"!=typeof a.tag)throw new f.JWEInvalid("JWE Authentication Tag incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new f.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new f.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new f.JWEInvalid("JWE AAD incorrect type");if(void 0!==a.header&&!(0,h.default)(a.header))throw new f.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!(0,h.default)(a.unprotected))throw new f.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=(0,d.decode)(a.protected);n=JSON.parse(j.decoder.decode(b))}catch{throw new f.JWEInvalid("JWE Protected Header is invalid")}if(!(0,g.default)(n,a.header,a.unprotected))throw new f.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let u={...n,...a.header,...a.unprotected};if((0,l.default)(f.JWEInvalid,new Map,c?.crit,n,u),void 0!==u.zip)throw new f.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:v,enc:w}=u;if("string"!=typeof v||!v)throw new f.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof w||!w)throw new f.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let x=c&&(0,m.default)("keyManagementAlgorithms",c.keyManagementAlgorithms),y=c&&(0,m.default)("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(x&&!x.has(v)||!x&&v.startsWith("PBES2"))throw new f.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(y&&!y.has(w))throw new f.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==a.encrypted_key)try{o=(0,d.decode)(a.encrypted_key)}catch{throw new f.JWEInvalid("Failed to base64url decode the encrypted_key")}let z=!1;"function"==typeof b&&(b=await b(n,a),z=!0);try{p=await (0,i.default)(v,b,o,u,c)}catch(a){if(a instanceof TypeError||a instanceof f.JWEInvalid||a instanceof f.JOSENotSupported)throw a;p=(0,k.default)(w)}if(void 0!==a.iv)try{q=(0,d.decode)(a.iv)}catch{throw new f.JWEInvalid("Failed to base64url decode the iv")}if(void 0!==a.tag)try{r=(0,d.decode)(a.tag)}catch{throw new f.JWEInvalid("Failed to base64url decode the tag")}let A=j.encoder.encode(a.protected??"");s=void 0!==a.aad?(0,j.concat)(A,j.encoder.encode("."),j.encoder.encode(a.aad)):A;try{t=(0,d.decode)(a.ciphertext)}catch{throw new f.JWEInvalid("Failed to base64url decode the ciphertext")}let B={plaintext:await (0,e.default)(w,p,t,q,r,s)};if(void 0!==a.protected&&(B.protectedHeader=n),void 0!==a.aad)try{B.additionalAuthenticatedData=(0,d.decode)(a.aad)}catch{throw new f.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(B.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(B.unprotectedHeader=a.header),z)?{...B,key:b}:B}},13323,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.compactDecrypt=void 0;let d=a.r(89666),e=a.r(90289),f=a.r(40642);c.compactDecrypt=async function(a,b,c){if(a instanceof Uint8Array&&(a=f.decoder.decode(a)),"string"!=typeof a)throw new e.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:g,1:h,2:i,3:j,4:k,length:l}=a.split(".");if(5!==l)throw new e.JWEInvalid("Invalid Compact JWE");let m=await (0,d.flattenedDecrypt)({ciphertext:j,iv:i||void 0,protected:g,tag:k||void 0,encrypted_key:h||void 0},b,c),n={plaintext:m.plaintext,protectedHeader:m.protectedHeader};return"function"==typeof b?{...n,key:m.key}:n}},8358,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.generalDecrypt=void 0;let d=a.r(89666),e=a.r(90289),f=a.r(2997);c.generalDecrypt=async function(a,b,c){if(!(0,f.default)(a))throw new e.JWEInvalid("General JWE must be an object");if(!Array.isArray(a.recipients)||!a.recipients.every(f.default))throw new e.JWEInvalid("JWE Recipients missing or incorrect type");if(!a.recipients.length)throw new e.JWEInvalid("JWE Recipients has no members");for(let e of a.recipients)try{return await (0,d.flattenedDecrypt)({aad:a.aad,ciphertext:a.ciphertext,encrypted_key:e.encrypted_key,header:e.header,iv:a.iv,protected:a.protected,tag:a.tag,unprotected:a.unprotected},b,c)}catch{}throw new e.JWEDecryptionFailed}},83880,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680),e=a.r(45388),f=a.r(90289),g=a.r(41027),h=a.r(65837),i=a.r(54573),j=a.r(159);c.default=a=>{let b;if((0,g.isCryptoKey)(a)){if(!a.extractable)throw TypeError("CryptoKey is not extractable");b=d.KeyObject.from(a)}else if((0,h.default)(a))b=a;else if(a instanceof Uint8Array)return{kty:"oct",k:(0,e.encode)(a)};else throw TypeError((0,i.default)(a,...j.types,"Uint8Array"));if("secret"!==b.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(b.asymmetricKeyType))throw new f.JOSENotSupported("Unsupported key asymmetricKeyType");return b.export({format:"jwk"})}},32104,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.exportJWK=c.exportPKCS8=c.exportSPKI=void 0;let d=a.r(37798),e=a.r(37798),f=a.r(83880);c.exportSPKI=async function(a){return(0,d.toSPKI)(a)},c.exportPKCS8=async function(a){return(0,e.toPKCS8)(a)},c.exportJWK=async function(a){return(0,f.default)(a)}},81158,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(70557),e=a.r(85405),f=a.r(41188),g=a.r(34399),h=a.r(45388),i=a.r(19073),j=a.r(93992),k=a.r(90289),l=a.r(32104),m=a.r(78749),n=a.r(32539);c.default=async function(a,b,c,o,p={}){let q,r,s;switch((0,m.default)(a,c,"encrypt"),c=await i.default.normalizePublicKey?.(c,a)||c,a){case"dir":s=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!e.ecdhAllowed(c))throw new k.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:f,apv:g}=p,{epk:i}=p;i||=(await e.generateEpk(c)).privateKey;let{x:m,y:n,crv:t,kty:u}=await (0,l.exportJWK)(i),v=await e.deriveKey(c,i,"ECDH-ES"===a?b:a,"ECDH-ES"===a?(0,j.bitLength)(b):parseInt(a.slice(-5,-2),10),f,g);if(r={epk:{x:m,crv:t,kty:u}},"EC"===u&&(r.epk.y=n),f&&(r.apu=(0,h.encode)(f)),g&&(r.apv=(0,h.encode)(g)),"ECDH-ES"===a){s=v;break}s=o||(0,j.default)(b);let w=a.slice(-6);q=await (0,d.wrap)(w,v,s);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s=o||(0,j.default)(b),q=await (0,g.encrypt)(a,c,s);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{s=o||(0,j.default)(b);let{p2c:d,p2s:e}=p;({encryptedKey:q,...r}=await (0,f.encrypt)(a,c,s,d,e));break}case"A128KW":case"A192KW":case"A256KW":s=o||(0,j.default)(b),q=await (0,d.wrap)(a,c,s);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{s=o||(0,j.default)(b);let{iv:d}=p;({encryptedKey:q,...r}=await (0,n.wrap)(a,c,s,d));break}default:throw new k.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:s,encryptedKey:q,parameters:r}}},61378,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.FlattenedEncrypt=c.unprotected=void 0;let d=a.r(45388),e=a.r(83668),f=a.r(81158),g=a.r(90289),h=a.r(76195),i=a.r(40642),j=a.r(73059);c.unprotected=Symbol(),c.FlattenedEncrypt=class{_plaintext;_protectedHeader;_sharedUnprotectedHeader;_unprotectedHeader;_aad;_cek;_iv;_keyManagementParameters;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=a}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}async encrypt(a,b){let k,l,m,n,o;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new g.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,h.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new g.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let p={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,j.default)(g.JWEInvalid,new Map,b?.crit,this._protectedHeader,p),void 0!==p.zip)throw new g.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:q,enc:r}=p;if("string"!=typeof q||!q)throw new g.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof r||!r)throw new g.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this._cek&&("dir"===q||"ECDH-ES"===q))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${q}`);{let d;({cek:l,encryptedKey:k,parameters:d}=await (0,f.default)(q,r,a,this._cek,this._keyManagementParameters)),d&&(b&&c.unprotected in b?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...d}:this.setUnprotectedHeader(d):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...d}:this.setProtectedHeader(d))}n=this._protectedHeader?i.encoder.encode((0,d.encode)(JSON.stringify(this._protectedHeader))):i.encoder.encode(""),this._aad?(o=(0,d.encode)(this._aad),m=(0,i.concat)(n,i.encoder.encode("."),i.encoder.encode(o))):m=n;let{ciphertext:s,tag:t,iv:u}=await (0,e.default)(r,this._plaintext,l,this._iv,m),v={ciphertext:(0,d.encode)(s)};return u&&(v.iv=(0,d.encode)(u)),t&&(v.tag=(0,d.encode)(t)),k&&(v.encrypted_key=(0,d.encode)(k)),o&&(v.aad=o),this._protectedHeader&&(v.protected=i.decoder.decode(n)),this._sharedUnprotectedHeader&&(v.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(v.header=this._unprotectedHeader),v}}},54246,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.GeneralEncrypt=void 0;let d=a.r(61378),e=a.r(90289),f=a.r(93992),g=a.r(76195),h=a.r(81158),i=a.r(45388),j=a.r(73059);class k{parent;unprotectedHeader;key;options;constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addRecipient(...a){return this.parent.addRecipient(...a)}encrypt(...a){return this.parent.encrypt(...a)}done(){return this.parent}}c.GeneralEncrypt=class{_plaintext;_recipients=[];_protectedHeader;_unprotectedHeader;_aad;constructor(a){this._plaintext=a}addRecipient(a,b){let c=new k(this,a,{crit:b?.crit});return this._recipients.push(c),c}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}async encrypt(){let a;if(!this._recipients.length)throw new e.JWEInvalid("at least one recipient must be added");if(1===this._recipients.length){let[a]=this._recipients,b=await new d.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(a.unprotectedHeader).encrypt(a.key,{...a.options}),c={ciphertext:b.ciphertext,iv:b.iv,recipients:[{}],tag:b.tag};return b.aad&&(c.aad=b.aad),b.protected&&(c.protected=b.protected),b.unprotected&&(c.unprotected=b.unprotected),b.encrypted_key&&(c.recipients[0].encrypted_key=b.encrypted_key),b.header&&(c.recipients[0].header=b.header),c}for(let b=0;b<this._recipients.length;b++){let c=this._recipients[b];if(!(0,g.default)(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new e.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let d={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:f}=d;if("string"!=typeof f||!f)throw new e.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===f||"ECDH-ES"===f)throw new e.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof d.enc||!d.enc)throw new e.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(a){if(a!==d.enc)throw new e.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else a=d.enc;if((0,j.default)(e.JWEInvalid,new Map,c.options.crit,this._protectedHeader,d),void 0!==d.zip)throw new e.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}let b=(0,f.default)(a),c={ciphertext:"",iv:"",recipients:[],tag:""};for(let e=0;e<this._recipients.length;e++){let f=this._recipients[e],g={};c.recipients.push(g);let j=({...this._protectedHeader,...this._unprotectedHeader,...f.unprotectedHeader}).alg.startsWith("PBES2")?2048+e:void 0;if(0===e){let a=await new d.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(b).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(f.unprotectedHeader).setKeyManagementParameters({p2c:j}).encrypt(f.key,{...f.options,[d.unprotected]:!0});c.ciphertext=a.ciphertext,c.iv=a.iv,c.tag=a.tag,a.aad&&(c.aad=a.aad),a.protected&&(c.protected=a.protected),a.unprotected&&(c.unprotected=a.unprotected),g.encrypted_key=a.encrypted_key,a.header&&(g.header=a.header);continue}let{encryptedKey:k,parameters:l}=await (0,h.default)(f.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,a,f.key,b,{p2c:j});g.encrypted_key=(0,i.encode)(k),(f.unprotectedHeader||l)&&(g.header={...f.unprotectedHeader,...l})}return c}}},52368,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(90289);c.default=function(a){switch(a){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new d.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},56618,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680),e=a.r(65462),f=a.r(90289),g=a.r(21306),h={padding:d.constants.RSA_PKCS1_PSS_PADDING,saltLength:d.constants.RSA_PSS_SALTLEN_DIGEST},i=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);c.default=function(a,b){switch(a){case"EdDSA":if(!["ed25519","ed448"].includes(b.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return b;case"RS256":case"RS384":case"RS512":if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,g.default)(b,a),b;case"PS256":case"PS384":case"PS512":if("rsa-pss"===b.asymmetricKeyType){let{hashAlgorithm:c,mgf1HashAlgorithm:d,saltLength:e}=b.asymmetricKeyDetails,f=parseInt(a.slice(-3),10);if(void 0!==c&&(c!==`sha${f}`||d!==c))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${a}`);if(void 0!==e&&e>f>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${a}`)}else if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,g.default)(b,a),{key:b,...h};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let c=(0,e.default)(b),d=i.get(a);if(c!==d)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${d}, got ${c}`);return{dsaEncoding:"ieee-p1363",key:b}}default:throw new f.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},16168,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(90289);c.default=function(a){switch(a){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new d.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},99227,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680),e=a.r(41027),f=a.r(24668),g=a.r(54573),h=a.r(159);c.default=function(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError((0,g.default)(b,...h.types));return(0,d.createSecretKey)(b)}if(b instanceof d.KeyObject)return b;if((0,e.isCryptoKey)(b))return(0,f.checkSigCryptoKey)(b,a,c),d.KeyObject.from(b);throw TypeError((0,g.default)(b,...h.types,"Uint8Array"))}},63317,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680),e=a.r(12057),f=a.r(52368),g=a.r(16168),h=a.r(56618),i=a.r(99227),j=(0,e.promisify)(d.sign);c.default=async(a,b,c)=>{let e=(0,i.default)(a,b,"sign");if(a.startsWith("HS")){let b=d.createHmac((0,g.default)(a),e);return b.update(c),b.digest()}return j((0,f.default)(a),c,(0,h.default)(a,e))}},11143,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(66680),e=a.r(12057),f=a.r(52368),g=a.r(56618),h=a.r(63317),i=a.r(99227),j=(0,e.promisify)(d.verify);c.default=async(a,b,c,e)=>{let k=(0,i.default)(a,b,"verify");if(a.startsWith("HS")){let b=await (0,h.default)(a,k,e);try{return d.timingSafeEqual(c,b)}catch{return!1}}let l=(0,f.default)(a),m=(0,g.default)(a,k);try{return await j(l,e,m,c)}catch{return!1}}},29823,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.flattenedVerify=void 0;let d=a.r(45388),e=a.r(11143),f=a.r(90289),g=a.r(40642),h=a.r(76195),i=a.r(2997),j=a.r(78749),k=a.r(73059),l=a.r(94616);c.flattenedVerify=async function(a,b,c){let m,n;if(!(0,i.default)(a))throw new f.JWSInvalid("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new f.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new f.JWSInvalid("JWS Protected Header incorrect type");if(void 0===a.payload)throw new f.JWSInvalid("JWS Payload missing");if("string"!=typeof a.signature)throw new f.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==a.header&&!(0,i.default)(a.header))throw new f.JWSInvalid("JWS Unprotected Header incorrect type");let o={};if(a.protected)try{let b=(0,d.decode)(a.protected);o=JSON.parse(g.decoder.decode(b))}catch{throw new f.JWSInvalid("JWS Protected Header is invalid")}if(!(0,h.default)(o,a.header))throw new f.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let p={...o,...a.header},q=(0,k.default)(f.JWSInvalid,new Map([["b64",!0]]),c?.crit,o,p),r=!0;if(q.has("b64")&&"boolean"!=typeof(r=o.b64))throw new f.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:s}=p;if("string"!=typeof s||!s)throw new f.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let t=c&&(0,l.default)("algorithms",c.algorithms);if(t&&!t.has(s))throw new f.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(r){if("string"!=typeof a.payload)throw new f.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new f.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let u=!1;"function"==typeof b&&(b=await b(o,a),u=!0),(0,j.default)(s,b,"verify");let v=(0,g.concat)(g.encoder.encode(a.protected??""),g.encoder.encode("."),"string"==typeof a.payload?g.encoder.encode(a.payload):a.payload);try{m=(0,d.decode)(a.signature)}catch{throw new f.JWSInvalid("Failed to base64url decode the signature")}if(!await (0,e.default)(s,b,m,v))throw new f.JWSSignatureVerificationFailed;if(r)try{n=(0,d.decode)(a.payload)}catch{throw new f.JWSInvalid("Failed to base64url decode the payload")}else n="string"==typeof a.payload?g.encoder.encode(a.payload):a.payload;let w={payload:n};return(void 0!==a.protected&&(w.protectedHeader=o),void 0!==a.header&&(w.unprotectedHeader=a.header),u)?{...w,key:b}:w}},4810,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.compactVerify=void 0;let d=a.r(29823),e=a.r(90289),f=a.r(40642);c.compactVerify=async function(a,b,c){if(a instanceof Uint8Array&&(a=f.decoder.decode(a)),"string"!=typeof a)throw new e.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:g,1:h,2:i,length:j}=a.split(".");if(3!==j)throw new e.JWSInvalid("Invalid Compact JWS");let k=await (0,d.flattenedVerify)({payload:h,protected:g,signature:i},b,c),l={payload:k.payload,protectedHeader:k.protectedHeader};return"function"==typeof b?{...l,key:k.key}:l}},74229,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.generalVerify=void 0;let d=a.r(29823),e=a.r(90289),f=a.r(2997);c.generalVerify=async function(a,b,c){if(!(0,f.default)(a))throw new e.JWSInvalid("General JWS must be an object");if(!Array.isArray(a.signatures)||!a.signatures.every(f.default))throw new e.JWSInvalid("JWS Signatures missing or incorrect type");for(let e of a.signatures)try{return await (0,d.flattenedVerify)({header:e.header,payload:a.payload,protected:e.protected,signature:e.signature},b,c)}catch{}throw new e.JWSSignatureVerificationFailed}},58662,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=a=>Math.floor(a.getTime()/1e3)},84761,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;c.default=a=>{let b,c=d.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let e=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(e);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*e);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*e);break;case"day":case"days":case"d":b=Math.round(86400*e);break;case"week":case"weeks":case"w":b=Math.round(604800*e);break;default:b=Math.round(0x1e187e0*e)}return"-"===c[1]||"ago"===c[4]?-b:b}},40260,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(90289),e=a.r(40642),f=a.r(58662),g=a.r(84761),h=a.r(2997),i=a=>a.toLowerCase().replace(/^application\//,"");c.default=(a,b,c={})=>{var j,k;let l,m;try{l=JSON.parse(e.decoder.decode(b))}catch{}if(!(0,h.default)(l))throw new d.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{typ:n}=c;if(n&&("string"!=typeof a.typ||i(a.typ)!==i(n)))throw new d.JWTClaimValidationFailed('unexpected "typ" JWT header value',l,"typ","check_failed");let{requiredClaims:o=[],issuer:p,subject:q,audience:r,maxTokenAge:s}=c,t=[...o];for(let a of(void 0!==s&&t.push("iat"),void 0!==r&&t.push("aud"),void 0!==q&&t.push("sub"),void 0!==p&&t.push("iss"),new Set(t.reverse())))if(!(a in l))throw new d.JWTClaimValidationFailed(`missing required "${a}" claim`,l,a,"missing");if(p&&!(Array.isArray(p)?p:[p]).includes(l.iss))throw new d.JWTClaimValidationFailed('unexpected "iss" claim value',l,"iss","check_failed");if(q&&l.sub!==q)throw new d.JWTClaimValidationFailed('unexpected "sub" claim value',l,"sub","check_failed");if(r&&(j=l.aud,k="string"==typeof r?[r]:r,"string"==typeof j?!k.includes(j):!(Array.isArray(j)&&k.some(Set.prototype.has.bind(new Set(j))))))throw new d.JWTClaimValidationFailed('unexpected "aud" claim value',l,"aud","check_failed");switch(typeof c.clockTolerance){case"string":m=(0,g.default)(c.clockTolerance);break;case"number":m=c.clockTolerance;break;case"undefined":m=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:u}=c,v=(0,f.default)(u||new Date);if((void 0!==l.iat||s)&&"number"!=typeof l.iat)throw new d.JWTClaimValidationFailed('"iat" claim must be a number',l,"iat","invalid");if(void 0!==l.nbf){if("number"!=typeof l.nbf)throw new d.JWTClaimValidationFailed('"nbf" claim must be a number',l,"nbf","invalid");if(l.nbf>v+m)throw new d.JWTClaimValidationFailed('"nbf" claim timestamp check failed',l,"nbf","check_failed")}if(void 0!==l.exp){if("number"!=typeof l.exp)throw new d.JWTClaimValidationFailed('"exp" claim must be a number',l,"exp","invalid");if(l.exp<=v-m)throw new d.JWTExpired('"exp" claim timestamp check failed',l,"exp","check_failed")}if(s){let a=v-l.iat;if(a-m>("number"==typeof s?s:(0,g.default)(s)))throw new d.JWTExpired('"iat" claim timestamp check failed (too far in the past)',l,"iat","check_failed");if(a<0-m)throw new d.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',l,"iat","check_failed")}return l}},64596,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.jwtVerify=void 0;let d=a.r(4810),e=a.r(40260),f=a.r(90289);c.jwtVerify=async function(a,b,c){let g=await (0,d.compactVerify)(a,b,c);if(g.protectedHeader.crit?.includes("b64")&&!1===g.protectedHeader.b64)throw new f.JWTInvalid("JWTs MUST NOT use unencoded payload");let h={payload:(0,e.default)(g.protectedHeader,g.payload,c),protectedHeader:g.protectedHeader};return"function"==typeof b?{...h,key:g.key}:h}},14278,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.jwtDecrypt=void 0;let d=a.r(13323),e=a.r(40260),f=a.r(90289);c.jwtDecrypt=async function(a,b,c){let g=await (0,d.compactDecrypt)(a,b,c),h=(0,e.default)(g.protectedHeader,g.plaintext,c),{protectedHeader:i}=g;if(void 0!==i.iss&&i.iss!==h.iss)throw new f.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',h,"iss","mismatch");if(void 0!==i.sub&&i.sub!==h.sub)throw new f.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',h,"sub","mismatch");if(void 0!==i.aud&&JSON.stringify(i.aud)!==JSON.stringify(h.aud))throw new f.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',h,"aud","mismatch");let j={payload:h,protectedHeader:i};return"function"==typeof b?{...j,key:g.key}:j}},19001,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.CompactEncrypt=void 0;let d=a.r(61378);c.CompactEncrypt=class{_flattened;constructor(a){this._flattened=new d.FlattenedEncrypt(a)}setContentEncryptionKey(a){return this._flattened.setContentEncryptionKey(a),this}setInitializationVector(a){return this._flattened.setInitializationVector(a),this}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}setKeyManagementParameters(a){return this._flattened.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this._flattened.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}},81070,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.FlattenedSign=void 0;let d=a.r(45388),e=a.r(63317),f=a.r(76195),g=a.r(90289),h=a.r(40642),i=a.r(78749),j=a.r(73059);c.FlattenedSign=class{_payload;_protectedHeader;_unprotectedHeader;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=a}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}async sign(a,b){let c;if(!this._protectedHeader&&!this._unprotectedHeader)throw new g.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,f.default)(this._protectedHeader,this._unprotectedHeader))throw new g.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let k={...this._protectedHeader,...this._unprotectedHeader},l=(0,j.default)(g.JWSInvalid,new Map([["b64",!0]]),b?.crit,this._protectedHeader,k),m=!0;if(l.has("b64")&&"boolean"!=typeof(m=this._protectedHeader.b64))throw new g.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:n}=k;if("string"!=typeof n||!n)throw new g.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,i.default)(n,a,"sign");let o=this._payload;m&&(o=h.encoder.encode((0,d.encode)(o))),c=this._protectedHeader?h.encoder.encode((0,d.encode)(JSON.stringify(this._protectedHeader))):h.encoder.encode("");let p=(0,h.concat)(c,h.encoder.encode("."),o),q=await (0,e.default)(n,a,p),r={signature:(0,d.encode)(q),payload:""};return m&&(r.payload=h.decoder.decode(o)),this._unprotectedHeader&&(r.header=this._unprotectedHeader),this._protectedHeader&&(r.protected=h.decoder.decode(c)),r}}},68946,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.CompactSign=void 0;let d=a.r(81070);c.CompactSign=class{_flattened;constructor(a){this._flattened=new d.FlattenedSign(a)}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}async sign(a,b){let c=await this._flattened.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}},10976,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.GeneralSign=void 0;let d=a.r(81070),e=a.r(90289);class f{parent;protectedHeader;unprotectedHeader;options;key;constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setProtectedHeader(a){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=a,this}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addSignature(...a){return this.parent.addSignature(...a)}sign(...a){return this.parent.sign(...a)}done(){return this.parent}}c.GeneralSign=class{_payload;_signatures=[];constructor(a){this._payload=a}addSignature(a,b){let c=new f(this,a,b);return this._signatures.push(c),c}async sign(){if(!this._signatures.length)throw new e.JWSInvalid("at least one signature must be added");let a={signatures:[],payload:""};for(let b=0;b<this._signatures.length;b++){let c=this._signatures[b],f=new d.FlattenedSign(this._payload);f.setProtectedHeader(c.protectedHeader),f.setUnprotectedHeader(c.unprotectedHeader);let{payload:g,...h}=await f.sign(c.key,c.options);if(0===b)a.payload=g;else if(a.payload!==g)throw new e.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");a.signatures.push(h)}return a}}},48651,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ProduceJWT=void 0;let d=a.r(58662),e=a.r(2997),f=a.r(84761);function g(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}c.ProduceJWT=class{_payload;constructor(a={}){if(!(0,e.default)(a))throw TypeError("JWT Claims Set MUST be an object");this._payload=a}setIssuer(a){return this._payload={...this._payload,iss:a},this}setSubject(a){return this._payload={...this._payload,sub:a},this}setAudience(a){return this._payload={...this._payload,aud:a},this}setJti(a){return this._payload={...this._payload,jti:a},this}setNotBefore(a){return"number"==typeof a?this._payload={...this._payload,nbf:g("setNotBefore",a)}:a instanceof Date?this._payload={...this._payload,nbf:g("setNotBefore",(0,d.default)(a))}:this._payload={...this._payload,nbf:(0,d.default)(new Date)+(0,f.default)(a)},this}setExpirationTime(a){return"number"==typeof a?this._payload={...this._payload,exp:g("setExpirationTime",a)}:a instanceof Date?this._payload={...this._payload,exp:g("setExpirationTime",(0,d.default)(a))}:this._payload={...this._payload,exp:(0,d.default)(new Date)+(0,f.default)(a)},this}setIssuedAt(a){return void 0===a?this._payload={...this._payload,iat:(0,d.default)(new Date)}:a instanceof Date?this._payload={...this._payload,iat:g("setIssuedAt",(0,d.default)(a))}:"string"==typeof a?this._payload={...this._payload,iat:g("setIssuedAt",(0,d.default)(new Date)+(0,f.default)(a))}:this._payload={...this._payload,iat:g("setIssuedAt",a)},this}}},61481,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.SignJWT=void 0;let d=a.r(68946),e=a.r(90289),f=a.r(40642),g=a.r(48651);class h extends g.ProduceJWT{_protectedHeader;setProtectedHeader(a){return this._protectedHeader=a,this}async sign(a,b){let c=new d.CompactSign(f.encoder.encode(JSON.stringify(this._payload)));if(c.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new e.JWTInvalid("JWTs MUST NOT use unencoded payload");return c.sign(a,b)}}c.SignJWT=h},47812,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.EncryptJWT=void 0;let d=a.r(19001),e=a.r(40642),f=a.r(48651);class g extends f.ProduceJWT{_cek;_iv;_keyManagementParameters;_protectedHeader;_replicateIssuerAsHeader;_replicateSubjectAsHeader;_replicateAudienceAsHeader;setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(a,b){let c=new d.CompactEncrypt(e.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),c.setProtectedHeader(this._protectedHeader),this._iv&&c.setInitializationVector(this._iv),this._cek&&c.setContentEncryptionKey(this._cek),this._keyManagementParameters&&c.setKeyManagementParameters(this._keyManagementParameters),c.encrypt(a,b)}}c.EncryptJWT=g},21718,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.calculateJwkThumbprintUri=c.calculateJwkThumbprint=void 0;let d=a.r(57146),e=a.r(45388),f=a.r(90289),g=a.r(40642),h=a.r(2997),i=(a,b)=>{if("string"!=typeof a||!a)throw new f.JWKInvalid(`${b} missing or invalid`)};async function j(a,b){let c;if(!(0,h.default)(a))throw TypeError("JWK must be an object");if("sha256"!==(b??="sha256")&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(a.kty){case"EC":i(a.crv,'"crv" (Curve) Parameter'),i(a.x,'"x" (X Coordinate) Parameter'),i(a.y,'"y" (Y Coordinate) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x,y:a.y};break;case"OKP":i(a.crv,'"crv" (Subtype of Key Pair) Parameter'),i(a.x,'"x" (Public Key) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x};break;case"RSA":i(a.e,'"e" (Exponent) Parameter'),i(a.n,'"n" (Modulus) Parameter'),c={e:a.e,kty:a.kty,n:a.n};break;case"oct":i(a.k,'"k" (Key Value) Parameter'),c={k:a.k,kty:a.kty};break;default:throw new f.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let j=g.encoder.encode(JSON.stringify(c));return(0,e.encode)(await (0,d.default)(b,j))}c.calculateJwkThumbprint=j,c.calculateJwkThumbprintUri=async function(a,b){b??="sha256";let c=await j(a,b);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${b.slice(-3)}:${c}`}},21313,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.EmbeddedJWK=void 0;let d=a.r(43052),e=a.r(2997),f=a.r(90289);c.EmbeddedJWK=async function(a,b){let c={...a,...b?.header};if(!(0,e.default)(c.jwk))throw new f.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let g=await (0,d.importJWK)({...c.jwk,ext:!0},c.alg);if(g instanceof Uint8Array||"public"!==g.type)throw new f.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return g}},94004,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.createLocalJWKSet=c.LocalJWKSet=void 0;let d=a.r(43052),e=a.r(90289),f=a.r(2997);function g(a){return(0,f.default)(a)}function h(a){return"function"==typeof structuredClone?structuredClone(a):JSON.parse(JSON.stringify(a))}class i{_jwks;_cached=new WeakMap;constructor(a){if(!function(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(g)}(a))throw new e.JWKSInvalid("JSON Web Key Set malformed");this._jwks=h(a)}async getKey(a,b){let{alg:c,kid:d}={...a,...b?.header},f=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new e.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(c),g=this._jwks.keys.filter(a=>{let b=f===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&"string"==typeof a.alg&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b&&"EdDSA"===c&&(b="Ed25519"===a.crv||"Ed448"===a.crv),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES256K":b="secp256k1"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv}return b}),{0:h,length:i}=g;if(0===i)throw new e.JWKSNoMatchingKey;if(1!==i){let a=new e.JWKSMultipleMatchingKeys,{_cached:b}=this;throw a[Symbol.asyncIterator]=async function*(){for(let a of g)try{yield await j(b,a,c)}catch{}},a}return j(this._cached,h,c)}}async function j(a,b,c){let f=a.get(b)||a.set(b,{}).get(b);if(void 0===f[c]){let a=await (0,d.importJWK)({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new e.JWKSInvalid("JSON Web Key Set members must be public keys");f[c]=a}return f[c]}c.LocalJWKSet=i,c.createLocalJWKSet=function(a){let b=new i(a),c=async(a,c)=>b.getKey(a,c);return Object.defineProperties(c,{jwks:{value:()=>h(b._jwks),enumerable:!0,configurable:!1,writable:!1}}),c}},99404,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});let d=a.r(47299),e=a.r(43698),f=a.r(87769),g=a.r(90289),h=a.r(40642);c.default=async(a,b,c)=>{let i;switch(a.protocol){case"https:":i=e.get;break;case"http:":i=d.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:j,headers:k}=c,l=i(a.href,{agent:j,timeout:b,headers:k}),[m]=await Promise.race([(0,f.once)(l,"response"),(0,f.once)(l,"timeout")]);if(!m)throw l.destroy(),new g.JWKSTimeout;if(200!==m.statusCode)throw new g.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let n=[];for await(let a of m)n.push(a);try{return JSON.parse(h.decoder.decode((0,h.concat)(...n)))}catch{throw new g.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}}},80147,(a,b,c)=>{"use strict";let d;Object.defineProperty(c,"__esModule",{value:!0}),c.createRemoteJWKSet=c.experimental_jwksCache=void 0;let e=a.r(99404),f=a.r(90289),g=a.r(94004),h=a.r(2997);("u"<typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(d="jose/v5.6.3"),c.experimental_jwksCache=Symbol();class i{_url;_timeoutDuration;_cooldownDuration;_cacheMaxAge;_jwksTimestamp;_pendingFetch;_options;_local;_cache;constructor(a,b){if(!(a instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(a.href),this._options={agent:b?.agent,headers:b?.headers},this._timeoutDuration="number"==typeof b?.timeoutDuration?b?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof b?.cooldownDuration?b?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof b?.cacheMaxAge?b?.cacheMaxAge:6e5,b?.[c.experimental_jwksCache]!==void 0&&(this._cache=b?.[c.experimental_jwksCache],function(a,b){return!("object"!=typeof a||null===a||!("uat"in a)||"number"!=typeof a.uat||Date.now()-a.uat>=b)&&"jwks"in a&&!!(0,h.default)(a.jwks)&&!!Array.isArray(a.jwks.keys)&&!!Array.prototype.every.call(a.jwks.keys,h.default)}(b?.[c.experimental_jwksCache],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=(0,g.createLocalJWKSet)(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(a,b){this._local&&this.fresh()||await this.reload();try{return await this._local(a,b)}catch(c){if(c instanceof f.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),this._local(a,b);throw c}}async reload(){this._pendingFetch&&("u">typeof WebSocketPair||"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"u">typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let a=new Headers(this._options.headers);d&&!a.has("User-Agent")&&(a.set("User-Agent",d),this._options.headers=Object.fromEntries(a.entries())),this._pendingFetch||=(0,e.default)(this._url,this._timeoutDuration,this._options).then(a=>{this._local=(0,g.createLocalJWKSet)(a),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=a),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(a=>{throw this._pendingFetch=void 0,a}),await this._pendingFetch}}c.createRemoteJWKSet=function(a,b){let c=new i(a,b),d=async(a,b)=>c.getKey(a,b);return Object.defineProperties(d,{coolingDown:{get:()=>c.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>c.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>c.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!c._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>c._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),d}},23492,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.UnsecuredJWT=void 0;let d=a.r(45388),e=a.r(40642),f=a.r(90289),g=a.r(40260),h=a.r(48651);class i extends h.ProduceJWT{encode(){let a=d.encode(JSON.stringify({alg:"none"})),b=d.encode(JSON.stringify(this._payload));return`${a}.${b}.`}static decode(a,b){let c;if("string"!=typeof a)throw new f.JWTInvalid("Unsecured JWT must be a string");let{0:h,1:i,2:j,length:k}=a.split(".");if(3!==k||""!==j)throw new f.JWTInvalid("Invalid Unsecured JWT");try{if(c=JSON.parse(e.decoder.decode(d.decode(h))),"none"!==c.alg)throw Error()}catch{throw new f.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,g.default)(c,d.decode(i),b),header:c}}}c.UnsecuredJWT=i},86413,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.decode=c.encode=void 0;let d=a.r(45388);c.encode=d.encode,c.decode=d.decode},44090,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.decodeProtectedHeader=void 0;let d=a.r(86413),e=a.r(40642),f=a.r(2997);c.decodeProtectedHeader=function(a){let b;if("string"==typeof a){let c=a.split(".");(3===c.length||5===c.length)&&([b]=c)}else if("object"==typeof a&&a)if("protected"in a)b=a.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof b||!b)throw Error();let a=JSON.parse(e.decoder.decode((0,d.decode)(b)));if(!(0,f.default)(a))throw Error();return a}catch{throw TypeError("Invalid Token or Protected Header formatting")}}},13932,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.decodeJwt=void 0;let d=a.r(86413),e=a.r(40642),f=a.r(2997),g=a.r(90289);c.decodeJwt=function(a){let b,c;if("string"!=typeof a)throw new g.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:h,length:i}=a.split(".");if(5===i)throw new g.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new g.JWTInvalid("Invalid JWT");if(!h)throw new g.JWTInvalid("JWTs must contain a payload");try{b=(0,d.decode)(h)}catch{throw new g.JWTInvalid("Failed to base64url decode the payload")}try{c=JSON.parse(e.decoder.decode(b))}catch{throw new g.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,f.default)(c))throw new g.JWTInvalid("Invalid JWT Claims Set");return c}},56468,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.generateKeyPair=c.generateSecret=void 0;let d=a.r(66680),e=a.r(12057),f=a.r(32447),g=a.r(90289),h=(0,e.promisify)(d.generateKeyPair);c.generateSecret=async function(a,b){let c;switch(a){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":c=parseInt(a.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":c=parseInt(a.slice(1,4),10);break;default:throw new g.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,d.createSecretKey)((0,f.default)(new Uint8Array(c>>3)))},c.generateKeyPair=async function(a,b){switch(a){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let a=b?.modulusLength??2048;if("number"!=typeof a||a<2048)throw new g.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return await h("rsa",{modulusLength:a,publicExponent:65537})}case"ES256":return h("ec",{namedCurve:"P-256"});case"ES256K":return h("ec",{namedCurve:"secp256k1"});case"ES384":return h("ec",{namedCurve:"P-384"});case"ES512":return h("ec",{namedCurve:"P-521"});case"EdDSA":switch(b?.crv){case void 0:case"Ed25519":return h("ed25519");case"Ed448":return h("ed448");default:throw new g.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let a=b?.crv??"P-256";switch(a){case void 0:case"P-256":case"P-384":case"P-521":return h("ec",{namedCurve:a});case"X25519":return h("x25519");case"X448":return h("x448");default:throw new g.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}}default:throw new g.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}},12768,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.generateKeyPair=void 0;let d=a.r(56468);c.generateKeyPair=async function(a,b){return(0,d.generateKeyPair)(a,b)}},36885,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.generateSecret=void 0;let d=a.r(56468);c.generateSecret=async function(a,b){return(0,d.generateSecret)(a,b)}},75476,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default="node:crypto"},55338,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default=a.r(75476).default},30908,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.cryptoRuntime=c.base64url=c.generateSecret=c.generateKeyPair=c.errors=c.decodeJwt=c.decodeProtectedHeader=c.importJWK=c.importX509=c.importPKCS8=c.importSPKI=c.exportJWK=c.exportSPKI=c.exportPKCS8=c.UnsecuredJWT=c.experimental_jwksCache=c.createRemoteJWKSet=c.createLocalJWKSet=c.EmbeddedJWK=c.calculateJwkThumbprintUri=c.calculateJwkThumbprint=c.EncryptJWT=c.SignJWT=c.GeneralSign=c.FlattenedSign=c.CompactSign=c.FlattenedEncrypt=c.CompactEncrypt=c.jwtDecrypt=c.jwtVerify=c.generalVerify=c.flattenedVerify=c.compactVerify=c.GeneralEncrypt=c.generalDecrypt=c.flattenedDecrypt=c.compactDecrypt=void 0;var d=a.r(13323);Object.defineProperty(c,"compactDecrypt",{enumerable:!0,get:function(){return d.compactDecrypt}});var e=a.r(89666);Object.defineProperty(c,"flattenedDecrypt",{enumerable:!0,get:function(){return e.flattenedDecrypt}});var f=a.r(8358);Object.defineProperty(c,"generalDecrypt",{enumerable:!0,get:function(){return f.generalDecrypt}});var g=a.r(54246);Object.defineProperty(c,"GeneralEncrypt",{enumerable:!0,get:function(){return g.GeneralEncrypt}});var h=a.r(4810);Object.defineProperty(c,"compactVerify",{enumerable:!0,get:function(){return h.compactVerify}});var i=a.r(29823);Object.defineProperty(c,"flattenedVerify",{enumerable:!0,get:function(){return i.flattenedVerify}});var j=a.r(74229);Object.defineProperty(c,"generalVerify",{enumerable:!0,get:function(){return j.generalVerify}});var k=a.r(64596);Object.defineProperty(c,"jwtVerify",{enumerable:!0,get:function(){return k.jwtVerify}});var l=a.r(14278);Object.defineProperty(c,"jwtDecrypt",{enumerable:!0,get:function(){return l.jwtDecrypt}});var m=a.r(19001);Object.defineProperty(c,"CompactEncrypt",{enumerable:!0,get:function(){return m.CompactEncrypt}});var n=a.r(61378);Object.defineProperty(c,"FlattenedEncrypt",{enumerable:!0,get:function(){return n.FlattenedEncrypt}});var o=a.r(68946);Object.defineProperty(c,"CompactSign",{enumerable:!0,get:function(){return o.CompactSign}});var p=a.r(81070);Object.defineProperty(c,"FlattenedSign",{enumerable:!0,get:function(){return p.FlattenedSign}});var q=a.r(10976);Object.defineProperty(c,"GeneralSign",{enumerable:!0,get:function(){return q.GeneralSign}});var r=a.r(61481);Object.defineProperty(c,"SignJWT",{enumerable:!0,get:function(){return r.SignJWT}});var s=a.r(47812);Object.defineProperty(c,"EncryptJWT",{enumerable:!0,get:function(){return s.EncryptJWT}});var t=a.r(21718);Object.defineProperty(c,"calculateJwkThumbprint",{enumerable:!0,get:function(){return t.calculateJwkThumbprint}}),Object.defineProperty(c,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return t.calculateJwkThumbprintUri}});var u=a.r(21313);Object.defineProperty(c,"EmbeddedJWK",{enumerable:!0,get:function(){return u.EmbeddedJWK}});var v=a.r(94004);Object.defineProperty(c,"createLocalJWKSet",{enumerable:!0,get:function(){return v.createLocalJWKSet}});var w=a.r(80147);Object.defineProperty(c,"createRemoteJWKSet",{enumerable:!0,get:function(){return w.createRemoteJWKSet}}),Object.defineProperty(c,"experimental_jwksCache",{enumerable:!0,get:function(){return w.experimental_jwksCache}});var x=a.r(23492);Object.defineProperty(c,"UnsecuredJWT",{enumerable:!0,get:function(){return x.UnsecuredJWT}});var y=a.r(32104);Object.defineProperty(c,"exportPKCS8",{enumerable:!0,get:function(){return y.exportPKCS8}}),Object.defineProperty(c,"exportSPKI",{enumerable:!0,get:function(){return y.exportSPKI}}),Object.defineProperty(c,"exportJWK",{enumerable:!0,get:function(){return y.exportJWK}});var z=a.r(43052);Object.defineProperty(c,"importSPKI",{enumerable:!0,get:function(){return z.importSPKI}}),Object.defineProperty(c,"importPKCS8",{enumerable:!0,get:function(){return z.importPKCS8}}),Object.defineProperty(c,"importX509",{enumerable:!0,get:function(){return z.importX509}}),Object.defineProperty(c,"importJWK",{enumerable:!0,get:function(){return z.importJWK}});var A=a.r(44090);Object.defineProperty(c,"decodeProtectedHeader",{enumerable:!0,get:function(){return A.decodeProtectedHeader}});var B=a.r(13932);Object.defineProperty(c,"decodeJwt",{enumerable:!0,get:function(){return B.decodeJwt}}),c.errors=a.r(90289);var C=a.r(12768);Object.defineProperty(c,"generateKeyPair",{enumerable:!0,get:function(){return C.generateKeyPair}});var D=a.r(36885);Object.defineProperty(c,"generateSecret",{enumerable:!0,get:function(){return D.generateSecret}}),c.base64url=a.r(86413);var E=a.r(55338);Object.defineProperty(c,"cryptoRuntime",{enumerable:!0,get:function(){return E.default}})},51144,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.AuthenticateWithSessionCookieFailureReason=void 0,(e=d||(c.AuthenticateWithSessionCookieFailureReason=d={})).INVALID_JWT="invalid_jwt",e.INVALID_SESSION_COOKIE="invalid_session_cookie",e.NO_SESSION_COOKIE_PROVIDED="no_session_cookie_provided"},64644,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.RefreshAndSealSessionDataFailureReason=void 0,(e=d||(c.RefreshAndSealSessionDataFailureReason=d={})).INVALID_SESSION_COOKE="invalid_session_cookie",e.INVALID_SESSION_COOKIE="invalid_session_cookie",e.NO_SESSION_COOKIE_PROVIDED="no_session_cookie_provided",e.INVALID_GRANT="invalid_grant",e.MFA_ENROLLMENT="mfa_enrollment",e.SSO_REQUIRED="sso_required",e.ORGANIZATION_NOT_AUTHORIZED="organization_not_authorized"},17549,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeRevokeSessionOptions=void 0,c.serializeRevokeSessionOptions=a=>({session_id:a.sessionId})},44363,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeAuthenticateWithEmailVerificationOptions=void 0,c.serializeAuthenticateWithEmailVerificationOptions=a=>({grant_type:"urn:workos:oauth:grant-type:email-verification:code",client_id:a.clientId,client_secret:a.clientSecret,pending_authentication_token:a.pendingAuthenticationToken,code:a.code,ip_address:a.ipAddress,user_agent:a.userAgent})},21694,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeAuthenticateWithOrganizationSelectionOptions=void 0,c.serializeAuthenticateWithOrganizationSelectionOptions=a=>({grant_type:"urn:workos:oauth:grant-type:organization-selection",client_id:a.clientId,client_secret:a.clientSecret,pending_authentication_token:a.pendingAuthenticationToken,organization_id:a.organizationId,ip_address:a.ipAddress,user_agent:a.userAgent})},85318,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreateOrganizationMembershipOptions=void 0,c.serializeCreateOrganizationMembershipOptions=a=>({organization_id:a.organizationId,user_id:a.userId,role_slug:a.roleSlug,role_slugs:a.roleSlugs})},17342,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeIdentities=void 0,c.deserializeIdentities=a=>a.map(a=>({idpId:a.idp_id,type:a.type,provider:a.provider}))},19,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeListInvitationsOptions=void 0,c.serializeListInvitationsOptions=a=>({email:a.email,organization_id:a.organizationId,limit:a.limit,before:a.before,after:a.after,order:a.order})},26147,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeListOrganizationMembershipsOptions=void 0,c.serializeListOrganizationMembershipsOptions=a=>{var b;return{user_id:a.userId,organization_id:a.organizationId,statuses:null==(b=a.statuses)?void 0:b.join(","),limit:a.limit,before:a.before,after:a.after,order:a.order}}},72779,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeListUsersOptions=void 0,c.serializeListUsersOptions=a=>({email:a.email,organization_id:a.organizationId,limit:a.limit,before:a.before,after:a.after,order:a.order})},58911,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeSendInvitationOptions=void 0,c.serializeSendInvitationOptions=a=>({email:a.email,organization_id:a.organizationId,expires_in_days:a.expiresInDays,inviter_user_id:a.inviterUserId,role_slug:a.roleSlug})},40822,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeUpdateOrganizationMembershipOptions=void 0,c.serializeUpdateOrganizationMembershipOptions=a=>({role_slug:a.roleSlug,role_slugs:a.roleSlugs})},75229,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},24128,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},77372,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},90179,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},95760,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},35462,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},48338,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},64867,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},20924,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},82468,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},4502,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},36768,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},7851,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},77801,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},70058,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},41613,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},42658,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},13379,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},88515,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},28739,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},40557,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},45354,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},1496,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},40917,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},82565,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},21707,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},87892,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},65090,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},22536,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},48074,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},5795,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},68142,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},50783,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},43202,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},55824,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},30800,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},29656,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},67223,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},59808,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},58307,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},37433,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},61941,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},59878,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},71881,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},49622,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(75229),c),e(a.r(24128),c),e(a.r(77372),c),e(a.r(90179),c),e(a.r(95760),c),e(a.r(35462),c),e(a.r(48338),c),e(a.r(64867),c),e(a.r(51144),c),e(a.r(20924),c),e(a.r(82468),c),e(a.r(4502),c),e(a.r(36768),c),e(a.r(7851),c),e(a.r(77801),c),e(a.r(70058),c),e(a.r(41613),c),e(a.r(42658),c),e(a.r(13379),c),e(a.r(88515),c),e(a.r(28739),c),e(a.r(40557),c),e(a.r(45354),c),e(a.r(1496),c),e(a.r(40917),c),e(a.r(82565),c),e(a.r(21707),c),e(a.r(87892),c),e(a.r(65090),c),e(a.r(22536),c),e(a.r(48074),c),e(a.r(5795),c),e(a.r(68142),c),e(a.r(50783),c),e(a.r(64644),c),e(a.r(43202),c),e(a.r(17549),c),e(a.r(55824),c),e(a.r(30800),c),e(a.r(29656),c),e(a.r(67223),c),e(a.r(59808),c),e(a.r(58307),c),e(a.r(37433),c),e(a.r(61941),c),e(a.r(59878),c),e(a.r(71881),c)},35575,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.CookieSession=void 0;let e=a.r(30908),f=a.r(12989),g=a.r(49622);c.CookieSession=class{constructor(a,b,c){if(!c)throw Error("cookiePassword is required");this.userManagement=a,this.ironSessionProvider=a.ironSessionProvider,this.cookiePassword=c,this.sessionData=b,this.jwks=this.userManagement.jwks}authenticate(){return d(this,void 0,void 0,function*(){let a;if(!this.sessionData)return{authenticated:!1,reason:g.AuthenticateWithSessionCookieFailureReason.NO_SESSION_COOKIE_PROVIDED};try{a=yield this.ironSessionProvider.unsealData(this.sessionData,{password:this.cookiePassword})}catch(a){return{authenticated:!1,reason:g.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE}}if(!a.accessToken)return{authenticated:!1,reason:g.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE};if(!(yield this.isValidJwt(a.accessToken)))return{authenticated:!1,reason:g.AuthenticateWithSessionCookieFailureReason.INVALID_JWT};let{sid:b,org_id:c,role:d,roles:f,permissions:h,entitlements:i,feature_flags:j}=(0,e.decodeJwt)(a.accessToken);return{authenticated:!0,sessionId:b,organizationId:c,role:d,roles:f,permissions:h,entitlements:i,featureFlags:j,user:a.user,authenticationMethod:a.authenticationMethod,impersonator:a.impersonator,accessToken:a.accessToken}})}refresh(a={}){var b,c;return d(this,void 0,void 0,function*(){let d=yield this.ironSessionProvider.unsealData(this.sessionData,{password:this.cookiePassword});if(!d.refreshToken||!d.user)return{authenticated:!1,reason:g.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};let{org_id:h}=(0,e.decodeJwt)(d.accessToken);try{let f=null!=(b=a.cookiePassword)?b:this.cookiePassword,g=yield this.userManagement.authenticateWithRefreshToken({clientId:this.userManagement.clientId,refreshToken:d.refreshToken,organizationId:null!=(c=a.organizationId)?c:h,session:{sealSession:!0,cookiePassword:f}});a.cookiePassword&&(this.cookiePassword=a.cookiePassword),this.sessionData=g.sealedSession;let{sid:i,org_id:j,role:k,roles:l,permissions:m,entitlements:n,feature_flags:o}=(0,e.decodeJwt)(g.accessToken);return{authenticated:!0,sealedSession:g.sealedSession,session:g,authenticationMethod:g.authenticationMethod,sessionId:i,organizationId:j,role:k,roles:l,permissions:m,entitlements:n,featureFlags:o,user:d.user,impersonator:d.impersonator}}catch(a){if(a instanceof f.OauthException&&(a.error===g.RefreshAndSealSessionDataFailureReason.INVALID_GRANT||a.error===g.RefreshAndSealSessionDataFailureReason.MFA_ENROLLMENT||a.error===g.RefreshAndSealSessionDataFailureReason.SSO_REQUIRED))return{authenticated:!1,reason:a.error};throw a}})}getLogoutUrl({returnTo:a}={}){return d(this,void 0,void 0,function*(){let b=yield this.authenticate();if(!b.authenticated){let{reason:a}=b;throw Error(`Failed to extract session ID for logout URL: ${a}`)}return this.userManagement.getLogoutUrl({sessionId:b.sessionId,returnTo:a})})}isValidJwt(a){return d(this,void 0,void 0,function*(){if(!this.jwks)throw Error("Missing client ID. Did you provide it when initializing WorkOS?");try{return yield(0,e.jwtVerify)(a,this.jwks),!0}catch(a){return!1}})}}},9664,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})},e=a.e&&a.e.__rest||function(a,b){var c={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"==typeof Object.getOwnPropertySymbols)for(var e=0,d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&Object.prototype.propertyIsEnumerable.call(a,d[e])&&(c[d[e]]=a[d[e]]);return c},f=a.e&&a.e.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(c,"__esModule",{value:!0}),c.UserManagement=void 0;let g=a.r(30908),h=f(a.r(7513)),i=a.r(12989),j=a.r(71833),k=a.r(83983),l=a.r(96972),m=a.r(43728),n=a.r(51144),o=a.r(64644),p=a.r(17549),q=a.r(49472),r=a.r(44363),s=a.r(21694),t=a.r(85318),u=a.r(59066),v=a.r(17342),w=a.r(3086),x=a.r(19),y=a.r(26147),z=a.r(72779),A=a.r(61829),B=a.r(58911),C=a.r(40822),D=a.r(35575);c.UserManagement=class{constructor(a,b){this.workos=a;const{clientId:c}=a.options;this.clientId=c,this.ironSessionProvider=b}get jwks(){if(this.clientId)return null!=this._jwks||(this._jwks=(0,g.createRemoteJWKSet)(new URL(this.getJwksUrl(this.clientId)),{cooldownDuration:3e5})),this._jwks}loadSealedSession(a){return new D.CookieSession(this,a.sessionData,a.cookiePassword)}getUser(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/users/${a}`);return(0,q.deserializeUser)(b)})}getUserByExternalId(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/users/external_id/${a}`);return(0,q.deserializeUser)(b)})}listUsers(a){return d(this,void 0,void 0,function*(){return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,"/user_management/users",q.deserializeUser,a?(0,z.serializeListUsersOptions)(a):void 0)),a=>(0,j.fetchAndDeserialize)(this.workos,"/user_management/users",q.deserializeUser,a),a?(0,z.serializeListUsersOptions)(a):void 0)})}createUser(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/users",(0,q.serializeCreateUserOptions)(a));return(0,q.deserializeUser)(b)})}authenticateWithMagicAuth(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,q.serializeAuthenticateWithMagicAuthOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,q.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithPassword(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,q.serializeAuthenticateWithPasswordOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,q.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithCode(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,q.serializeAuthenticateWithCodeOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,q.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithCodeAndVerifier(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,q.serializeAuthenticateWithCodeAndVerifierOptions)(c));return this.prepareAuthenticationResponse({authenticationResponse:(0,q.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithRefreshToken(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,q.serializeAuthenticateWithRefreshTokenOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,q.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithTotp(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,q.serializeAuthenticateWithTotpOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,q.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithEmailVerification(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,r.serializeAuthenticateWithEmailVerificationOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,q.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithOrganizationSelection(a){return d(this,void 0,void 0,function*(){let{session:b}=a,c=e(a,["session"]),{data:d}=yield this.workos.post("/user_management/authenticate",(0,s.serializeAuthenticateWithOrganizationSelectionOptions)(Object.assign(Object.assign({},c),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,q.deserializeAuthenticationResponse)(d),session:b})})}authenticateWithSessionCookie({sessionData:a,cookiePassword:b=process.env.WORKOS_COOKIE_PASSWORD}){return d(this,void 0,void 0,function*(){if(!b)throw Error("Cookie password is required");if(!this.jwks)throw Error("Must provide clientId to initialize JWKS");if(!a)return{authenticated:!1,reason:n.AuthenticateWithSessionCookieFailureReason.NO_SESSION_COOKIE_PROVIDED};let c=yield this.ironSessionProvider.unsealData(a,{password:b});if(!c.accessToken)return{authenticated:!1,reason:n.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE};if(!(yield this.isValidJwt(c.accessToken)))return{authenticated:!1,reason:n.AuthenticateWithSessionCookieFailureReason.INVALID_JWT};let{sid:d,org_id:e,role:f,roles:h,permissions:i,entitlements:j,feature_flags:k}=(0,g.decodeJwt)(c.accessToken);return{authenticated:!0,sessionId:d,organizationId:e,role:f,roles:h,user:c.user,permissions:i,entitlements:j,featureFlags:k,accessToken:c.accessToken,authenticationMethod:c.authenticationMethod}})}isValidJwt(a){return d(this,void 0,void 0,function*(){if(!this.jwks)throw Error("Must provide clientId to initialize JWKS");try{return yield(0,g.jwtVerify)(a,this.jwks),!0}catch(a){return!1}})}refreshAndSealSessionData({sessionData:a,organizationId:b,cookiePassword:c=process.env.WORKOS_COOKIE_PASSWORD}){return d(this,void 0,void 0,function*(){if(!c)throw Error("Cookie password is required");if(!a)return{authenticated:!1,reason:o.RefreshAndSealSessionDataFailureReason.NO_SESSION_COOKIE_PROVIDED};let d=yield this.ironSessionProvider.unsealData(a,{password:c});if(!d.refreshToken||!d.user)return{authenticated:!1,reason:o.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};let{org_id:e}=(0,g.decodeJwt)(d.accessToken);try{let{sealedSession:a}=yield this.authenticateWithRefreshToken({clientId:this.workos.clientId,refreshToken:d.refreshToken,organizationId:null!=b?b:e,session:{sealSession:!0,cookiePassword:c}});if(!a)return{authenticated:!1,reason:o.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};return{authenticated:!0,sealedSession:a}}catch(a){if(a instanceof i.OauthException&&(a.error===o.RefreshAndSealSessionDataFailureReason.INVALID_GRANT||a.error===o.RefreshAndSealSessionDataFailureReason.MFA_ENROLLMENT||a.error===o.RefreshAndSealSessionDataFailureReason.SSO_REQUIRED))return{authenticated:!1,reason:a.error};throw a}})}prepareAuthenticationResponse({authenticationResponse:a,session:b}){return d(this,void 0,void 0,function*(){return(null==b?void 0:b.sealSession)?Object.assign(Object.assign({},a),{sealedSession:yield this.sealSessionDataFromAuthenticationResponse({authenticationResponse:a,cookiePassword:b.cookiePassword})}):a})}sealSessionDataFromAuthenticationResponse({authenticationResponse:a,cookiePassword:b}){return d(this,void 0,void 0,function*(){if(!b)throw Error("Cookie password is required");let{org_id:c}=(0,g.decodeJwt)(a.accessToken),d={organizationId:c,user:a.user,accessToken:a.accessToken,refreshToken:a.refreshToken,authenticationMethod:a.authenticationMethod,impersonator:a.impersonator};return this.ironSessionProvider.sealData(d,{password:b})})}getSessionFromCookie({sessionData:a,cookiePassword:b=process.env.WORKOS_COOKIE_PASSWORD}){return d(this,void 0,void 0,function*(){if(!b)throw Error("Cookie password is required");if(a)return this.ironSessionProvider.unsealData(a,{password:b})})}getEmailVerification(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/email_verification/${a}`);return(0,q.deserializeEmailVerification)(b)})}sendVerificationEmail({userId:a}){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/user_management/users/${a}/email_verification/send`,{});return{user:(0,q.deserializeUser)(b.user)}})}getMagicAuth(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/magic_auth/${a}`);return(0,q.deserializeMagicAuth)(b)})}createMagicAuth(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/magic_auth",(0,q.serializeCreateMagicAuthOptions)(Object.assign({},a)));return(0,q.deserializeMagicAuth)(b)})}sendMagicAuthCode(a){return d(this,void 0,void 0,function*(){yield this.workos.post("/user_management/magic_auth/send",(0,q.serializeSendMagicAuthCodeOptions)(a))})}verifyEmail({code:a,userId:b}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post(`/user_management/users/${b}/email_verification/confirm`,{code:a});return{user:(0,q.deserializeUser)(c.user)}})}getPasswordReset(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/password_reset/${a}`);return(0,q.deserializePasswordReset)(b)})}createPasswordReset(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/password_reset",(0,q.serializeCreatePasswordResetOptions)(Object.assign({},a)));return(0,q.deserializePasswordReset)(b)})}sendPasswordResetEmail(a){return d(this,void 0,void 0,function*(){yield this.workos.post("/user_management/password_reset/send",(0,q.serializeSendPasswordResetEmailOptions)(a))})}resetPassword(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/password_reset/confirm",(0,q.serializeResetPasswordOptions)(a));return{user:(0,q.deserializeUser)(b.user)}})}updateUser(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/user_management/users/${a.userId}`,(0,q.serializeUpdateUserOptions)(a));return(0,q.deserializeUser)(b)})}enrollAuthFactor(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/user_management/users/${a.userId}/auth_factors`,(0,q.serializeEnrollAuthFactorOptions)(a));return{authenticationFactor:(0,q.deserializeFactorWithSecrets)(b.authentication_factor),authenticationChallenge:(0,l.deserializeChallenge)(b.authentication_challenge)}})}listAuthFactors(a){return d(this,void 0,void 0,function*(){let{userId:b}=a,c=e(a,["userId"]);return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${b}/auth_factors`,u.deserializeFactor,c)),a=>(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${b}/auth_factors`,u.deserializeFactor,a),c)})}listUserFeatureFlags(a){return d(this,void 0,void 0,function*(){let{userId:b}=a,c=e(a,["userId"]);return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${b}/feature-flags`,m.deserializeFeatureFlag,c)),a=>(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${b}/feature-flags`,m.deserializeFeatureFlag,a),c)})}listSessions(a,b){return d(this,void 0,void 0,function*(){return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${a}/sessions`,q.deserializeSession,b?(0,q.serializeListSessionsOptions)(b):void 0)),b=>(0,j.fetchAndDeserialize)(this.workos,`/user_management/users/${a}/sessions`,q.deserializeSession,b),b?(0,q.serializeListSessionsOptions)(b):void 0)})}deleteUser(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/user_management/users/${a}`)})}getUserIdentities(a){return d(this,void 0,void 0,function*(){if(!a)throw TypeError("Incomplete arguments. Need to specify 'userId'.");let{data:b}=yield this.workos.get(`/user_management/users/${a}/identities`);return(0,v.deserializeIdentities)(b)})}getOrganizationMembership(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/organization_memberships/${a}`);return(0,A.deserializeOrganizationMembership)(b)})}listOrganizationMemberships(a){return d(this,void 0,void 0,function*(){return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,"/user_management/organization_memberships",A.deserializeOrganizationMembership,a?(0,y.serializeListOrganizationMembershipsOptions)(a):void 0)),a=>(0,j.fetchAndDeserialize)(this.workos,"/user_management/organization_memberships",A.deserializeOrganizationMembership,a),a?(0,y.serializeListOrganizationMembershipsOptions)(a):void 0)})}createOrganizationMembership(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/organization_memberships",(0,t.serializeCreateOrganizationMembershipOptions)(a));return(0,A.deserializeOrganizationMembership)(b)})}updateOrganizationMembership(a,b){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.put(`/user_management/organization_memberships/${a}`,(0,C.serializeUpdateOrganizationMembershipOptions)(b));return(0,A.deserializeOrganizationMembership)(c)})}deleteOrganizationMembership(a){return d(this,void 0,void 0,function*(){yield this.workos.delete(`/user_management/organization_memberships/${a}`)})}deactivateOrganizationMembership(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/user_management/organization_memberships/${a}/deactivate`,{});return(0,A.deserializeOrganizationMembership)(b)})}reactivateOrganizationMembership(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/user_management/organization_memberships/${a}/reactivate`,{});return(0,A.deserializeOrganizationMembership)(b)})}getInvitation(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/invitations/${a}`);return(0,w.deserializeInvitation)(b)})}findInvitationByToken(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/user_management/invitations/by_token/${a}`);return(0,w.deserializeInvitation)(b)})}listInvitations(a){return d(this,void 0,void 0,function*(){return new k.AutoPaginatable((yield(0,j.fetchAndDeserialize)(this.workos,"/user_management/invitations",w.deserializeInvitation,a?(0,x.serializeListInvitationsOptions)(a):void 0)),a=>(0,j.fetchAndDeserialize)(this.workos,"/user_management/invitations",w.deserializeInvitation,a),a?(0,x.serializeListInvitationsOptions)(a):void 0)})}sendInvitation(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/user_management/invitations",(0,B.serializeSendInvitationOptions)(Object.assign({},a)));return(0,w.deserializeInvitation)(b)})}acceptInvitation(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/user_management/invitations/${a}/accept`,null);return(0,w.deserializeInvitation)(b)})}revokeInvitation(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/user_management/invitations/${a}/revoke`,null);return(0,w.deserializeInvitation)(b)})}resendInvitation(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post(`/user_management/invitations/${a}/resend`,null);return(0,w.deserializeInvitation)(b)})}revokeSession(a){return d(this,void 0,void 0,function*(){yield this.workos.post("/user_management/sessions/revoke",(0,p.serializeRevokeSessionOptions)(a))})}getAuthorizationUrl({connectionId:a,codeChallenge:b,codeChallengeMethod:c,context:d,clientId:e,domainHint:f,loginHint:g,organizationId:i,provider:j,providerQueryParams:k,providerScopes:l,prompt:m,redirectUri:n,state:o,screenHint:p}){let q;if(!j&&!a&&!i)throw TypeError("Incomplete arguments. Need to specify either a 'connectionId', 'organizationId', or 'provider'.");if("authkit"!==j&&p)throw TypeError("'screenHint' is only supported for 'authkit' provider");d&&this.workos.emitWarning(`\`context\` is deprecated. We previously required initiate login endpoints to return the
\`context\` query parameter when getting the authorization URL. This is no longer necessary.`);let r=(q={connection_id:a,code_challenge:b,code_challenge_method:c,context:d,organization_id:i,domain_hint:f,login_hint:g,provider:j,provider_query_params:k,provider_scopes:l,prompt:m,client_id:e,redirect_uri:n,response_type:"code",state:o,screen_hint:p},h.default.stringify(q,{arrayFormat:"repeat",sort:(a,b)=>a.localeCompare(b),format:"RFC1738"}));return`${this.workos.baseURL}/user_management/authorize?${r}`}getLogoutUrl({sessionId:a,returnTo:b}){if(!a)throw TypeError("Incomplete arguments. Need to specify 'sessionId'.");let c=new URL("/user_management/sessions/logout",this.workos.baseURL);return c.searchParams.set("session_id",a),b&&c.searchParams.set("return_to",b),c.toString()}getLogoutUrlFromSessionCookie({sessionData:a,cookiePassword:b=process.env.WORKOS_COOKIE_PASSWORD}){return d(this,void 0,void 0,function*(){let c=yield this.authenticateWithSessionCookie({sessionData:a,cookiePassword:b});if(!c.authenticated){let{reason:a}=c;throw Error(`Failed to extract session ID for logout URL: ${a}`)}return this.getLogoutUrl({sessionId:c.sessionId})})}getJwksUrl(a){if(!a)throw TypeError("clientId must be a valid clientId");return`${this.workos.baseURL}/sso/jwks/${a}`}}},73465,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.CheckOp=void 0,(e=d||(c.CheckOp=d={})).AllOf="all_of",e.AnyOf="any_of"},27582,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.isResourceInterface=c.isSubject=void 0,c.isSubject=function(a){return Object.prototype.hasOwnProperty.call(a,"resourceType")&&Object.prototype.hasOwnProperty.call(a,"resourceId")},c.isResourceInterface=function(a){return!!a&&"object"==typeof a&&"getResouceType"in a&&"getResourceId"in a}},86830,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeDecisionTreeNode=c.serializeCheckBatchOptions=c.serializeCheckOptions=void 0;let d=a.r(27582);c.serializeCheckOptions=a=>({op:a.op,checks:a.checks.map(e),debug:a.debug}),c.serializeCheckBatchOptions=a=>({op:"batch",checks:a.checks.map(e),debug:a.debug});let e=a=>{var b;return{resource_type:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceType():a.resource.resourceType,resource_id:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceId():a.resource.resourceId?a.resource.resourceId:"",relation:a.relation,subject:(0,d.isSubject)(a.subject)?{resource_type:a.subject.resourceType,resource_id:a.subject.resourceId}:{resource_type:a.subject.getResourceType(),resource_id:a.subject.getResourceId()},context:null!=(b=a.context)?b:{}}};c.deserializeDecisionTreeNode=a=>({check:{resource:{resourceType:a.check.resource_type,resourceId:a.check.resource_id},relation:a.check.relation,subject:{resourceType:a.check.subject.resource_type,resourceId:a.check.subject.resource_id},context:a.check.context},policy:a.policy,decision:a.decision,processingTime:a.processing_time,children:a.children.map(c.deserializeDecisionTreeNode)})},85474,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.CheckResult=void 0;let d=a.r(86830);c.CheckResult=class{constructor(a){this.result=a.result,this.isImplicit=a.is_implicit,this.warrantToken=a.warrant_token,this.debugInfo=a.debug_info?{processingTime:a.debug_info.processing_time,decisionTree:(0,d.deserializeDecisionTreeNode)(a.debug_info.decision_tree)}:void 0,this.warnings=a.warnings}isAuthorized(){return"authorized"===this.result}}},27191,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},4834,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.ResourceOp=void 0,(e=d||(c.ResourceOp=d={})).Create="create",e.Delete="delete"},80160,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},25025,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.WarrantOp=void 0,(e=d||(c.WarrantOp=d={})).Create="create",e.Delete="delete"},19174,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},28991,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},91575,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(73465),c),e(a.r(85474),c),e(a.r(27191),c),e(a.r(4834),c),e(a.r(80160),c),e(a.r(25025),c),e(a.r(19174),c),e(a.r(28991),c)},24320,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeCreateResourceOptions=void 0;let d=a.r(27582);c.serializeCreateResourceOptions=a=>({resource_type:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceType():a.resource.resourceType,resource_id:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceId():a.resource.resourceId?a.resource.resourceId:"",meta:a.meta})},40425,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeDeleteResourceOptions=void 0;let d=a.r(27582);c.serializeDeleteResourceOptions=a=>({resource_type:(0,d.isResourceInterface)(a)?a.getResourceType():a.resourceType,resource_id:(0,d.isResourceInterface)(a)?a.getResourceId():a.resourceId?a.resourceId:""})},16052,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeBatchWriteResourcesOptions=void 0;let d=a.r(91575),e=a.r(24320),f=a.r(40425);c.serializeBatchWriteResourcesOptions=a=>{let b=[];return a.op===d.ResourceOp.Create?b=a.resources.map(a=>(0,e.serializeCreateResourceOptions)(a)):a.op===d.ResourceOp.Delete&&(b=a.resources.map(a=>(0,f.serializeDeleteResourceOptions)(a))),{op:a.op,resources:b}}},32727,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeListResourceOptions=void 0,c.serializeListResourceOptions=a=>({resource_type:a.resourceType,search:a.search,limit:a.limit,before:a.before,after:a.after,order:a.order})},23016,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeListWarrantsOptions=void 0,c.serializeListWarrantsOptions=a=>({resource_type:a.resourceType,resource_id:a.resourceId,relation:a.relation,subject_type:a.subjectType,subject_id:a.subjectId,subject_relation:a.subjectRelation,limit:a.limit,after:a.after})},24010,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeQueryOptions=void 0,c.serializeQueryOptions=a=>({q:a.q,context:JSON.stringify(a.context),limit:a.limit,before:a.before,after:a.after,order:a.order})},47053,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeQueryResult=void 0,c.deserializeQueryResult=a=>({resourceType:a.resource_type,resourceId:a.resource_id,relation:a.relation,warrant:{resourceType:a.warrant.resource_type,resourceId:a.warrant.resource_id,relation:a.warrant.relation,subject:{resourceType:a.warrant.subject.resource_type,resourceId:a.warrant.subject.resource_id,relation:a.warrant.subject.relation}},isImplicit:a.is_implicit,meta:a.meta})},59001,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeBatchWriteResourcesResponse=c.deserializeResource=void 0,c.deserializeResource=a=>({resourceType:a.resource_type,resourceId:a.resource_id,meta:a.meta}),c.deserializeBatchWriteResourcesResponse=a=>a.data.map(a=>(0,c.deserializeResource)(a))},29739,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeWarrantToken=void 0,c.deserializeWarrantToken=a=>({warrantToken:a.warrant_token})},87304,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeWarrant=void 0,c.deserializeWarrant=a=>({resourceType:a.resource_type,resourceId:a.resource_id,relation:a.relation,subject:{resourceType:a.subject.resource_type,resourceId:a.subject.resource_id,relation:a.subject.relation},policy:a.policy})},61132,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeWriteWarrantOptions=void 0;let d=a.r(27582);c.serializeWriteWarrantOptions=a=>({op:a.op,resource_type:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceType():a.resource.resourceType,resource_id:(0,d.isResourceInterface)(a.resource)?a.resource.getResourceId():a.resource.resourceId?a.resource.resourceId:"",relation:a.relation,subject:(0,d.isSubject)(a.subject)?{resource_type:a.subject.resourceType,resource_id:a.subject.resourceId}:{resource_type:a.subject.getResourceType(),resource_id:a.subject.getResourceId()},policy:a.policy})},68803,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeFGAList=void 0,c.deserializeFGAList=(a,b)=>({object:"list",data:a.data.map(b),listMetadata:a.list_metadata,warnings:a.warnings})},78705,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(86830),c),e(a.r(16052),c),e(a.r(24320),c),e(a.r(40425),c),e(a.r(32727),c),e(a.r(23016),c),e(a.r(24010),c),e(a.r(47053),c),e(a.r(59001),c),e(a.r(29739),c),e(a.r(87304),c),e(a.r(61132),c),e(a.r(68803),c)},17707,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.FgaPaginatable=void 0;let d=a.r(83983);class e extends d.AutoPaginatable{constructor(a,b,c){super(a,b,c)}get warnings(){return this.list.warnings}}c.FgaPaginatable=e},74196,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.fetchAndDeserializeFGAList=void 0;let e=a.r(68803);c.fetchAndDeserializeFGAList=(a,b,c,f,g)=>d(void 0,void 0,void 0,function*(){let{data:d}=yield a.get(b,Object.assign({query:f},g));return(0,e.deserializeFGAList)(d,c)})},49790,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.FGA=void 0;let e=a.r(91575),f=a.r(78705),g=a.r(27582),h=a.r(83983),i=a.r(71833),j=a.r(17707),k=a.r(74196);c.FGA=class{constructor(a){this.workos=a}check(a,b={}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post("/fga/v1/check",(0,f.serializeCheckOptions)(a),b);return new e.CheckResult(c)})}checkBatch(a,b={}){return d(this,void 0,void 0,function*(){let{data:c}=yield this.workos.post("/fga/v1/check",(0,f.serializeCheckBatchOptions)(a),b);return c.map(a=>new e.CheckResult(a))})}createResource(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/fga/v1/resources",(0,f.serializeCreateResourceOptions)(a));return(0,f.deserializeResource)(b)})}getResource(a){return d(this,void 0,void 0,function*(){let b=(0,g.isResourceInterface)(a)?a.getResourceType():a.resourceType,c=(0,g.isResourceInterface)(a)?a.getResourceId():a.resourceId,{data:d}=yield this.workos.get(`/fga/v1/resources/${b}/${c}`);return(0,f.deserializeResource)(d)})}listResources(a){return d(this,void 0,void 0,function*(){return new h.AutoPaginatable((yield(0,i.fetchAndDeserialize)(this.workos,"/fga/v1/resources",f.deserializeResource,a?(0,f.serializeListResourceOptions)(a):void 0)),a=>(0,i.fetchAndDeserialize)(this.workos,"/fga/v1/resources",f.deserializeResource,a),a?(0,f.serializeListResourceOptions)(a):void 0)})}updateResource(a){return d(this,void 0,void 0,function*(){let b=(0,g.isResourceInterface)(a.resource)?a.resource.getResourceType():a.resource.resourceType,c=(0,g.isResourceInterface)(a.resource)?a.resource.getResourceId():a.resource.resourceId,{data:d}=yield this.workos.put(`/fga/v1/resources/${b}/${c}`,{meta:a.meta});return(0,f.deserializeResource)(d)})}deleteResource(a){return d(this,void 0,void 0,function*(){let b=(0,g.isResourceInterface)(a)?a.getResourceType():a.resourceType,c=(0,g.isResourceInterface)(a)?a.getResourceId():a.resourceId;yield this.workos.delete(`/fga/v1/resources/${b}/${c}`)})}batchWriteResources(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/fga/v1/resources/batch",(0,f.serializeBatchWriteResourcesOptions)(a));return(0,f.deserializeBatchWriteResourcesResponse)(b)})}writeWarrant(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/fga/v1/warrants",(0,f.serializeWriteWarrantOptions)(a));return(0,f.deserializeWarrantToken)(b)})}batchWriteWarrants(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/fga/v1/warrants",a.map(f.serializeWriteWarrantOptions));return(0,f.deserializeWarrantToken)(b)})}listWarrants(a,b){return d(this,void 0,void 0,function*(){return new h.AutoPaginatable((yield(0,i.fetchAndDeserialize)(this.workos,"/fga/v1/warrants",f.deserializeWarrant,a?(0,f.serializeListWarrantsOptions)(a):void 0,b)),a=>(0,i.fetchAndDeserialize)(this.workos,"/fga/v1/warrants",f.deserializeWarrant,a,b),a?(0,f.serializeListWarrantsOptions)(a):void 0)})}query(a,b={}){return d(this,void 0,void 0,function*(){return new j.FgaPaginatable((yield(0,k.fetchAndDeserializeFGAList)(this.workos,"/fga/v1/query",f.deserializeQueryResult,(0,f.serializeQueryOptions)(a),b)),a=>(0,k.fetchAndDeserializeFGAList)(this.workos,"/fga/v1/query",f.deserializeQueryResult,a,b),(0,f.serializeQueryOptions)(a))})}}},6054,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.FeatureFlags=void 0;let e=a.r(83983),f=a.r(43728),g=a.r(71833);c.FeatureFlags=class{constructor(a){this.workos=a}listFeatureFlags(a){return d(this,void 0,void 0,function*(){return new e.AutoPaginatable((yield(0,g.fetchAndDeserialize)(this.workos,"/feature-flags",f.deserializeFeatureFlag,a)),a=>(0,g.fetchAndDeserialize)(this.workos,"/feature-flags",f.deserializeFeatureFlag,a),a)})}getFeatureFlag(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/feature-flags/${a}`);return(0,f.deserializeFeatureFlag)(b)})}enableFeatureFlag(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/feature-flags/${a}/enable`,{});return(0,f.deserializeFeatureFlag)(b)})}disableFeatureFlag(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/feature-flags/${a}/disable`,{});return(0,f.deserializeFeatureFlag)(b)})}addFlagTarget(a){return d(this,void 0,void 0,function*(){let{slug:b,targetId:c}=a;yield this.workos.post(`/feature-flags/${b}/targets/${c}`,{})})}removeFlagTarget(a){return d(this,void 0,void 0,function*(){let{slug:b,targetId:c}=a;yield this.workos.delete(`/feature-flags/${b}/targets/${c}`)})}}},29090,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeGetTokenResponse=c.serializeGetTokenOptions=void 0,c.serializeGetTokenOptions=a=>({organization_id:a.organizationId,user_id:a.userId,scopes:a.scopes}),c.deserializeGetTokenResponse=a=>({token:a.token})},38491,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.Widgets=void 0;let e=a.r(29090);c.Widgets=class{constructor(a){this.workos=a}getToken(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/widgets/token",(0,e.serializeGetTokenOptions)(a));return(0,e.deserializeGetTokenResponse)(b).token})}}},43437,(a,b,c)=>{"use strict";b.exports={extract:function(a,b,c,d){if(c<0||c>32)throw Error("Bad value for bitLength.");if(void 0===d)d=0;else if(0!==d&&1!==d)throw Error("Bad value for defaultBit.");var e=255*d,f=0,g=b+c,h=Math.floor(b/8),i=Math.floor(g/8),j=g%8;for(0!==j&&(f=k(i)&(1<<j)-1);i>h;)f=f<<8|k(--i);return f>>>b%8;function k(b){var c=a[b];return void 0===c?e:c}},inject:function(a,b,c,d){if(c<0||c>32)throw Error("Bad value for bitLength.");var e=Math.floor((b+c-1)/8);if(b<0||e>=a.length)throw Error("Index out of range.");for(var f=Math.floor(b/8),g=b%8;c>0;)1&d?a[f]|=1<<g:a[f]&=~(1<<g),d>>=1,c--,0==(g=(g+1)%8)&&f++},getSign:function(a){return a[a.length-1]>>>7},highOrder:function(a,b){for(var c=b.length,d=(1^a)*255;c>0&&b[c-1]===d;)c--;if(0===c)return -1;for(var e=b[c-1],f=8*c-1,g=7;g>0&&(e>>g&1)!==a;g--)f--;return f}}},95924,(a,b,c)=>{"use strict";var d=[];function e(a,b){if(0===b)return!1;var c=b&-b,d=a+c;return d===a||d-c!==a}function f(a){var b=d[a];return b?d[a]=void 0:b=Buffer.alloc(a),b.fill(0),b}function g(a){var b=a.length;b<20&&(d[b]=a)}function h(a,b){if(a<0||a>0xfffffffffffff800)throw Error("Value out of range.");var c=Math.floor(a/0x100000000);b.writeUInt32LE(a%0x100000000,0),b.writeUInt32LE(c,4)}b.exports={alloc:f,free:g,readInt:function(a){var b=a.length,c=a[b-1]<128?0:-1,d=!1;if(b<7)for(var f=b-1;f>=0;f--)c=256*c+a[f];else for(var f=b-1;f>=0;f--){var g=a[f];e(c*=256,g)&&(d=!0),c+=g}return{value:c,lossy:d}},readUInt:function(a){var b=a.length,c=0,d=!1;if(b<7)for(var f=b-1;f>=0;f--)c=256*c+a[f];else for(var f=b-1;f>=0;f--){var g=a[f];e(c*=256,g)&&(d=!0),c+=g}return{value:c,lossy:d}},resize:function(a,b){if(b===a.length)return a;var c=f(b);return a.copy(c),g(a),c},writeInt64:function(a,b){if(a<-0x8000000000000000||a>0x7ffffffffffffc00)throw Error("Value out of range.");a<0&&(a+=0xffffffffffffffff),h(a,b)},writeUInt64:h}},40898,(a,b,c)=>{"use strict";var d=a.r(43437),e=a.r(95924);function f(a,b){b?(f=d.getSign(a),g=d.highOrder(1^d.getSign(a),a)+2):(f=0,g=d.highOrder(1,a)+1||1);for(var c,f,g,h=Math.ceil(g/7),i=e.alloc(h),j=0;j<h;j++){var k=d.extract(a,7*j,7,f);i[j]=128|k}return i[h-1]&=127,i}function g(a,b,c){for(var f,g,h=function(a,b){for(var c=0;a[b+c]>=128;)c++;if(b+ ++c>a.length)throw Error("Bogus encoding");return c}(a,b=void 0===b?0:b),i=Math.ceil(7*h/8),j=e.alloc(i),k=0;h>0;)d.inject(j,k,7,a[b]),k+=7,b++,h--;if(c){var l=j[i-1],m=k%8;if(0!==m){var n=32-m;l=j[i-1]=l<<n>>n&255}g=255*(f=l>>7)}else f=0,g=0;for(;i>1&&j[i-1]===g&&(!c||j[i-2]>>7===f);)i--;return{value:j=e.resize(j,i),nextIndex:b}}function h(a){return f(a,!0)}function i(a,b){return g(a,b,!0)}function j(a){return f(a,!1)}function k(a,b){return g(a,b,!1)}b.exports={decodeInt32:function(a,b){var c=i(a,b),d=e.readInt(c.value).value;if(e.free(c.value),d<-0x80000000||d>0x7fffffff)throw Error("Result out of range");return{value:d,nextIndex:c.nextIndex}},decodeInt64:function(a,b){var c=i(a,b),d=e.readInt(c.value),f=d.value;if(e.free(c.value),f<-0x8000000000000000||f>0x7ffffffffffffc00)throw Error("Result out of range");return{value:f,nextIndex:c.nextIndex,lossy:d.lossy}},decodeIntBuffer:i,decodeUInt32:function(a,b){var c=k(a,b),d=e.readUInt(c.value).value;if(e.free(c.value),d>0xffffffff)throw Error("Result out of range");return{value:d,nextIndex:c.nextIndex}},decodeUInt64:function(a,b){var c=k(a,b),d=e.readUInt(c.value),f=d.value;if(e.free(c.value),f>0xfffffffffffff800)throw Error("Result out of range");return{value:f,nextIndex:c.nextIndex,lossy:d.lossy}},decodeUIntBuffer:k,encodeInt32:function(a){var b=e.alloc(4);b.writeInt32LE(a,0);var c=h(b);return e.free(b),c},encodeInt64:function(a){var b=e.alloc(8);e.writeInt64(a,b);var c=h(b);return e.free(b),c},encodeIntBuffer:h,encodeUInt32:function(a){var b=e.alloc(4);b.writeUInt32LE(a,0);var c=j(b);return e.free(b),c},encodeUInt64:function(a){var b=e.alloc(8);e.writeUInt64(a,b);var c=j(b);return e.free(b),c},encodeUIntBuffer:j}},22451,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.uint8ArrayToBase64=c.base64ToUint8Array=void 0,c.base64ToUint8Array=function(a){if("function"==typeof atob){let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}if("u">typeof Buffer)return new Uint8Array(Buffer.from(a,"base64"));throw Error("No base64 decoding implementation available")},c.uint8ArrayToBase64=function(a){if("function"==typeof btoa){let b="";for(let c=0;c<a.byteLength;c++)b+=String.fromCharCode(a[c]);return btoa(b)}if("u">typeof Buffer)return Buffer.from(a).toString("base64");throw Error("No base64 encoding implementation available")}},67580,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.deserializeDecryptDataKeyResponse=c.deserializeCreateDataKeyResponse=void 0,c.deserializeCreateDataKeyResponse=a=>({context:a.context,dataKey:{key:a.data_key,id:a.id},encryptedKeys:a.encrypted_keys}),c.deserializeDecryptDataKeyResponse=a=>({key:a.data_key,id:a.id})},32343,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.serializeUpdateObjectEntity=c.serializeCreateObjectEntity=c.desrializeListObjectVersions=c.deserializeListObjects=c.deserializeObject=c.deserializeObjectMetadata=void 0,c.deserializeObjectMetadata=a=>({context:a.context,environmentId:a.environment_id,id:a.id,keyId:a.key_id,updatedAt:new Date(Date.parse(a.updated_at)),updatedBy:a.updated_by,versionId:a.version_id}),c.deserializeObject=a=>({id:a.id,name:a.name,value:a.value,metadata:(0,c.deserializeObjectMetadata)(a.metadata)});let d=a=>({id:a.id,name:a.name,updatedAt:new Date(Date.parse(a.updated_at))});c.deserializeListObjects=a=>{var b,c;return{object:"list",data:a.data.map(d),listMetadata:{after:null!=(b=a.list_metadata.after)?b:void 0,before:null!=(c=a.list_metadata.before)?c:void 0}}},c.desrializeListObjectVersions=a=>a.data.map(e);let e=a=>({createdAt:new Date(Date.parse(a.created_at)),currentVersion:a.current_version,id:a.id});c.serializeCreateObjectEntity=a=>({name:a.name,value:a.value,key_context:a.context}),c.serializeUpdateObjectEntity=a=>({value:a.value,version_check:a.versionCheck})},16575,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.Vault=void 0;let e=a.r(40898),f=a.r(22451),g=a.r(67580),h=a.r(32343);c.Vault=class{constructor(a){this.workos=a,this.createSecret=this.createObject,this.listSecrets=this.listObjects,this.listSecretVersions=this.listObjectVersions,this.readSecret=this.readObject,this.describeSecret=this.describeObject,this.updateSecret=this.updateObject,this.deleteSecret=this.deleteObject,this.cryptoProvider=a.getCryptoProvider()}decode(a){let b=(0,f.base64ToUint8Array)(a),c=new Uint8Array(b.subarray(0,12)),d=new Uint8Array(b.subarray(12,28)),{value:g,nextIndex:h}=(0,e.decodeUInt32)(b,28),i=b.subarray(h,h+g);return{iv:c,tag:d,keys:(0,f.uint8ArrayToBase64)(i),ciphertext:new Uint8Array(b.subarray(h+g))}}createObject(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/vault/v1/kv",(0,h.serializeCreateObjectEntity)(a));return(0,h.deserializeObjectMetadata)(b)})}listObjects(a){return d(this,void 0,void 0,function*(){let b=new URL("/vault/v1/kv",this.workos.baseURL);(null==a?void 0:a.after)&&b.searchParams.set("after",a.after),(null==a?void 0:a.limit)&&b.searchParams.set("limit",a.limit.toString());let{data:c}=yield this.workos.get(b.toString());return(0,h.deserializeListObjects)(c)})}listObjectVersions(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/vault/v1/kv/${encodeURIComponent(a.id)}/versions`);return(0,h.desrializeListObjectVersions)(b)})}readObject(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/vault/v1/kv/${encodeURIComponent(a.id)}`);return(0,h.deserializeObject)(b)})}readObjectByName(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/vault/v1/kv/name/${encodeURIComponent(a)}`);return(0,h.deserializeObject)(b)})}describeObject(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.get(`/vault/v1/kv/${encodeURIComponent(a.id)}/metadata`);return(0,h.deserializeObject)(b)})}updateObject(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.put(`/vault/v1/kv/${encodeURIComponent(a.id)}`,(0,h.serializeUpdateObjectEntity)(a));return(0,h.deserializeObject)(b)})}deleteObject(a){return d(this,void 0,void 0,function*(){return this.workos.delete(`/vault/v1/kv/${encodeURIComponent(a.id)}`)})}createDataKey(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/vault/v1/keys/data-key",a);return(0,g.deserializeCreateDataKeyResponse)(b)})}decryptDataKey(a){return d(this,void 0,void 0,function*(){let{data:b}=yield this.workos.post("/vault/v1/keys/decrypt",a);return(0,g.deserializeDecryptDataKeyResponse)(b)})}encrypt(a,b,c){return d(this,void 0,void 0,function*(){let d=yield this.createDataKey({context:b}),g=new TextEncoder,h=(0,f.base64ToUint8Array)(d.dataKey.key),i=(0,f.base64ToUint8Array)(d.encryptedKeys),j=(0,e.encodeUInt32)(i.length),k=c?g.encode(c):void 0,l=this.cryptoProvider.randomBytes(12),{ciphertext:m,iv:n,tag:o}=yield this.cryptoProvider.encrypt(g.encode(a),h,l,k),p=new Uint8Array(n.length+o.length+j.length+i.length+m.length),q=0;return p.set(n,q),q+=n.length,p.set(o,q),q+=o.length,p.set(new Uint8Array(j),q),q+=j.length,p.set(i,q),q+=i.length,p.set(m,q),(0,f.uint8ArrayToBase64)(p)})}decrypt(a,b){return d(this,void 0,void 0,function*(){let c=this.decode(a),d=yield this.decryptDataKey({keys:c.keys}),e=(0,f.base64ToUint8Array)(d.key),g=new TextEncoder,h=b?g.encode(b):void 0,i=yield this.cryptoProvider.decrypt(c.ciphertext,e,c.iv,c.tag,h);return new TextDecoder().decode(i)})}}},32648,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.ConflictException=void 0,c.ConflictException=class extends Error{constructor({error:a,message:b,requestID:c}){super(),this.status=409,this.name="ConflictException",this.requestID=c,b?this.message=b:a?this.message=`Error: ${a}`:this.message="An conflict has occurred on the server."}}},60677,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.WorkOS=void 0;let e=a.r(77771),f=a.r(11904),g=a.r(65944),h=a.r(35928),i=a.r(52077),j=a.r(63636),k=a.r(28997),l=a.r(68415),m=a.r(59432),n=a.r(49197),o=a.r(25413),p=a.r(51248),q=a.r(67),r=a.r(9664),s=a.r(49790),t=a.r(57965),u=a.r(6054),v=a.r(88483),w=a.r(48571),x=a.r(50717),y=a.r(38491),z=a.r(69848),A=a.r(16575),B=a.r(32648),C=a.r(39361),D="7.82.0",E="Idempotency-Key",F="Warrant-Token";c.WorkOS=class{constructor(a,b={}){if(this.key=a,this.options=b,this.apiKeys=new f.ApiKeys(this),this.auditLogs=new q.AuditLogs(this),this.directorySync=new g.DirectorySync(this),this.events=new h.Events(this),this.featureFlags=new u.FeatureFlags(this),this.fga=new s.FGA(this),this.mfa=new p.Mfa(this),this.organizations=new i.Organizations(this),this.organizationDomains=new j.OrganizationDomains(this),this.passwordless=new k.Passwordless(this),this.pipes=new l.Pipes(this),this.portal=new m.Portal(this),this.sso=new n.SSO(this),this.vault=new A.Vault(this),this.widgets=new y.Widgets(this),!a&&(this.key="u">typeof process?null==process?void 0:process.env.WORKOS_API_KEY:void 0,!this.key))throw new e.NoApiKeyProvidedException;void 0===this.options.https&&(this.options.https=!0),this.clientId=this.options.clientId,!this.clientId&&"u">typeof process&&(this.clientId=null==process?void 0:process.env.WORKOS_CLIENT_ID);const c=this.options.https?"https":"http",d=this.options.apiHostname||"api.workos.com",o=this.options.port;this.baseURL=`${c}://${d}`,o&&(this.baseURL=this.baseURL+`:${o}`);let t=`workos-node/${D}`;if(b.appInfo){const{name:a,version:c}=b.appInfo;t+=` ${a}: ${c}`}this.webhooks=this.createWebhookClient(),this.actions=this.createActionsClient(),this.userManagement=new r.UserManagement(this,this.createIronSessionProvider()),this.client=this.createHttpClient(b,t)}createWebhookClient(){return new o.Webhooks(this.getCryptoProvider())}createActionsClient(){return new z.Actions(this.getCryptoProvider())}getCryptoProvider(){return new w.SubtleCryptoProvider}createHttpClient(a,b){var c;return new x.FetchHttpClient(this.baseURL,Object.assign(Object.assign({},a.config),{timeout:a.timeout,headers:Object.assign(Object.assign({},null==(c=a.config)?void 0:c.headers),{Authorization:`Bearer ${this.key}`,"User-Agent":b})}))}createIronSessionProvider(){throw Error("IronSessionProvider not implemented. Use WorkOSNode or WorkOSWorker instead.")}get version(){return D}post(a,b,c={}){return d(this,void 0,void 0,function*(){let d,e={};c.idempotencyKey&&(e[E]=c.idempotencyKey),c.warrantToken&&(e[F]=c.warrantToken);try{d=yield this.client.post(a,b,{params:c.query,headers:e})}catch(b){throw this.handleHttpError({path:a,error:b}),b}try{return{data:yield d.toJSON()}}catch(a){throw yield this.handleParseError(a,d),a}})}get(a,b={}){return d(this,void 0,void 0,function*(){let c,d={};b.accessToken&&(d.Authorization=`Bearer ${b.accessToken}`),b.warrantToken&&(d[F]=b.warrantToken);try{c=yield this.client.get(a,{params:b.query,headers:d})}catch(b){throw this.handleHttpError({path:a,error:b}),b}try{return{data:yield c.toJSON()}}catch(a){throw yield this.handleParseError(a,c),a}})}put(a,b,c={}){return d(this,void 0,void 0,function*(){let d,e={};c.idempotencyKey&&(e[E]=c.idempotencyKey);try{d=yield this.client.put(a,b,{params:c.query,headers:e})}catch(b){throw this.handleHttpError({path:a,error:b}),b}try{return{data:yield d.toJSON()}}catch(a){throw yield this.handleParseError(a,d),a}})}delete(a,b){return d(this,void 0,void 0,function*(){try{yield this.client.delete(a,{params:b})}catch(b){throw this.handleHttpError({path:a,error:b}),b}})}emitWarning(a){console.warn(`WorkOS: ${a}`)}handleParseError(a,b){var c;return d(this,void 0,void 0,function*(){if(a instanceof SyntaxError){let d=b.getRawResponse(),e=null!=(c=d.headers.get("X-Request-ID"))?c:"",f=d.status,g=yield d.text();throw new C.ParseError({message:a.message,rawBody:g,rawStatus:f,requestID:e})}})}handleHttpError({path:a,error:b}){var c;if(!(b instanceof v.HttpClientError))throw Error(`Unexpected error: ${b}`,{cause:b});let{response:d}=b;if(d){let{status:b,data:f,headers:g}=d,h=null!=(c=g["X-Request-ID"])?c:"",{code:i,error_description:j,error:k,errors:l,message:m}=f;switch(b){case 401:throw new e.UnauthorizedException(h);case 409:throw new B.ConflictException({requestID:h,message:m,error:k});case 422:throw new e.UnprocessableEntityException({code:i,errors:l,message:m,requestID:h});case 404:throw new e.NotFoundException({code:i,message:m,path:a,requestID:h});case 429:{let a=g.get("Retry-After");throw new e.RateLimitExceededException(f.message,h,a?Number(a):null)}default:if(k||j)throw new e.OauthException(b,h,k,j,f);if(i&&l)throw new t.BadRequestException({code:i,errors:l,message:m,requestID:h});throw new e.GenericServerException(b,f.message,f,h)}}}}},72612,a=>{"use strict";class b{static isArrayBuffer(a){return"[object ArrayBuffer]"===Object.prototype.toString.call(a)}static toArrayBuffer(a){return this.isArrayBuffer(a)?a:a.byteLength===a.buffer.byteLength||0===a.byteOffset&&a.byteLength===a.buffer.byteLength?a.buffer:this.toUint8Array(a.buffer).slice(a.byteOffset,a.byteOffset+a.byteLength).buffer}static toUint8Array(a){return this.toView(a,Uint8Array)}static toView(a,b){if(a.constructor===b)return a;if(this.isArrayBuffer(a))return new b(a);if(this.isArrayBufferView(a))return new b(a.buffer,a.byteOffset,a.byteLength);throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(a){return this.isArrayBufferView(a)||this.isArrayBuffer(a)}static isArrayBufferView(a){return ArrayBuffer.isView(a)||a&&this.isArrayBuffer(a.buffer)}static isEqual(a,c){let d=b.toUint8Array(a),e=b.toUint8Array(c);if(d.length!==e.byteLength)return!1;for(let a=0;a<d.length;a++)if(d[a]!==e[a])return!1;return!0}static concat(...a){let b;b=!Array.isArray(a[0])||a[1]instanceof Function?Array.isArray(a[0])&&a[1]instanceof Function?a[0]:a[a.length-1]instanceof Function?a.slice(0,a.length-1):a:a[0];let c=0;for(let a of b)c+=a.byteLength;let d=new Uint8Array(c),e=0;for(let a of b){let b=this.toUint8Array(a);d.set(b,e),e+=b.length}return a[a.length-1]instanceof Function?this.toView(d,a[a.length-1]):d.buffer}}let c="string",d=/^[0-9a-f\s]+$/i,e=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,f=/^[a-zA-Z0-9-_]+$/;class g{static fromString(a){let b=unescape(encodeURIComponent(a)),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c.buffer}static toString(a){let c=b.toUint8Array(a),d="";for(let a=0;a<c.length;a++)d+=String.fromCharCode(c[a]);return decodeURIComponent(escape(d))}}class h{static toString(a,c=!1){let d=b.toArrayBuffer(a),e=new DataView(d),f="";for(let a=0;a<d.byteLength;a+=2)f+=String.fromCharCode(e.getUint16(a,c));return f}static fromString(a,b=!1){let c=new ArrayBuffer(2*a.length),d=new DataView(c);for(let c=0;c<a.length;c++)d.setUint16(2*c,a.charCodeAt(c),b);return c}}class i{static isHex(a){return typeof a===c&&d.test(a)}static isBase64(a){return typeof a===c&&e.test(a)}static isBase64Url(a){return typeof a===c&&f.test(a)}static ToString(a,c="utf8"){let d=b.toUint8Array(a);switch(c.toLowerCase()){case"utf8":return this.ToUtf8String(d);case"binary":return this.ToBinary(d);case"hex":return this.ToHex(d);case"base64":return this.ToBase64(d);case"base64url":return this.ToBase64Url(d);case"utf16le":return h.toString(d,!0);case"utf16":case"utf16be":return h.toString(d);default:throw Error(`Unknown type of encoding '${c}'`)}}static FromString(a,b="utf8"){if(!a)return new ArrayBuffer(0);switch(b.toLowerCase()){case"utf8":return this.FromUtf8String(a);case"binary":return this.FromBinary(a);case"hex":return this.FromHex(a);case"base64":return this.FromBase64(a);case"base64url":return this.FromBase64Url(a);case"utf16le":return h.fromString(a,!0);case"utf16":case"utf16be":return h.fromString(a);default:throw Error(`Unknown type of encoding '${b}'`)}}static ToBase64(a){let c=b.toUint8Array(a);return"u">typeof btoa?btoa(this.ToString(c,"binary")):Buffer.from(c).toString("base64")}static FromBase64(a){let b=this.formatString(a);if(!b)return new ArrayBuffer(0);if(!i.isBase64(b))throw TypeError("Argument 'base64Text' is not Base64 encoded");return"u">typeof atob?this.FromBinary(atob(b)):new Uint8Array(Buffer.from(b,"base64")).buffer}static FromBase64Url(a){let b=this.formatString(a);if(!b)return new ArrayBuffer(0);if(!i.isBase64Url(b))throw TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(b.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(a){return this.ToBase64(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(a,b=i.DEFAULT_UTF8_ENCODING){switch(b){case"ascii":return this.FromBinary(a);case"utf8":return g.fromString(a);case"utf16":case"utf16be":return h.fromString(a);case"utf16le":case"usc2":return h.fromString(a,!0);default:throw Error(`Unknown type of encoding '${b}'`)}}static ToUtf8String(a,b=i.DEFAULT_UTF8_ENCODING){switch(b){case"ascii":return this.ToBinary(a);case"utf8":return g.toString(a);case"utf16":case"utf16be":return h.toString(a);case"utf16le":case"usc2":return h.toString(a,!0);default:throw Error(`Unknown type of encoding '${b}'`)}}static FromBinary(a){let b=a.length,c=new Uint8Array(b);for(let d=0;d<b;d++)c[d]=a.charCodeAt(d);return c.buffer}static ToBinary(a){let c=b.toUint8Array(a),d="";for(let a=0;a<c.length;a++)d+=String.fromCharCode(c[a]);return d}static ToHex(a){let c=b.toUint8Array(a),d="",e=c.length;for(let a=0;a<e;a++){let b=c[a];b<16&&(d+="0"),d+=b.toString(16)}return d}static FromHex(a){let b=this.formatString(a);if(!b)return new ArrayBuffer(0);if(!i.isHex(b))throw TypeError("Argument 'hexString' is not HEX encoded");b.length%2&&(b=`0${b}`);let c=new Uint8Array(b.length/2);for(let a=0;a<b.length;a+=2){let d=b.slice(a,a+2);c[a/2]=parseInt(d,16)}return c.buffer}static ToUtf16String(a,b=!1){return h.toString(a,b)}static FromUtf16String(a,b=!1){return h.fromString(a,b)}static Base64Padding(a){let b=4-a.length%4;if(b<4)for(let c=0;c<b;c++)a+="=";return a}static formatString(a){return(null==a?void 0:a.replace(/[\n\r\t ]/g,""))||""}}function j(...a){let b=new Uint8Array(a.map(a=>a.byteLength).reduce((a,b)=>a+b)),c=0;return a.map(a=>new Uint8Array(a)).forEach(a=>{for(let d of a)b[c++]=d}),b.buffer}function k(a,b){let c=0;if(1===a.length)return a[0];for(let d=a.length-1;d>=0;d--)c+=a[a.length-1-d]*Math.pow(2,b*d);return c}function l(a,b,c=-1){let d=a,e=0,f=Math.pow(2,b);for(let g=1;g<8;g++){if(a<f){let a;if(c<0)a=new ArrayBuffer(g),e=g;else{if(c<g)return new ArrayBuffer(0);a=new ArrayBuffer(c),e=c}let f=new Uint8Array(a);for(let a=g-1;a>=0;a--){let c=Math.pow(2,a*b);f[e-a-1]=Math.floor(d/c),d-=f[e-a-1]*c}return a}f*=Math.pow(2,b)}return new ArrayBuffer(0)}function m(...a){let b=0,c=0;for(let c of a)b+=c.length;let d=new Uint8Array(new ArrayBuffer(b));for(let b of a)d.set(b,c),c+=b.length;return d}function n(){let a=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let b=255===a[0]&&128&a[1],c=0===a[0]&&(128&a[1])==0;(b||c)&&this.warnings.push("Needlessly long format")}let b=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let a=0;a<this.valueHex.byteLength;a++)b[a]=0;b[0]=128&a[0];let c=k(b,8),d=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let b=0;b<this.valueHex.byteLength;b++)d[b]=a[b];return d[0]&=127,k(d,8)-c}function o(a,b){let c=a.toString(10);if(b<c.length)return"";let d=b-c.length,e=Array(d);for(let a=0;a<d;a++)e[a]="0";return e.join("").concat(c)}function p(){if("u"<typeof BigInt)throw Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function q(a){let b=0,c=0;for(let c=0;c<a.length;c++)b+=a[c].byteLength;let d=new Uint8Array(b);for(let b=0;b<a.length;b++){let e=a[b];d.set(new Uint8Array(e),c),c+=e.byteLength}return d.buffer}function r(a,b,c,d){return b instanceof Uint8Array?b.byteLength?c<0?(a.error="Wrong parameter: inputOffset less than zero",!1):d<0?(a.error="Wrong parameter: inputLength less than zero",!1):!(b.byteLength-c-d<0)||(a.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(a.error="Wrong parameter: inputBuffer has zero length",!1):(a.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}i.DEFAULT_UTF8_ENCODING="utf8";class s{constructor(){this.items=[]}write(a){this.items.push(a)}final(){return q(this.items)}}let t=[new Uint8Array([1])],u="0123456789",v="name",w="valueHexView",x=new ArrayBuffer(0),y=new Uint8Array(0),z="EndOfContent",A="OCTET STRING",B="BIT STRING";function C(a){var c;return(c=class extends a{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(a){this.valueHexView=new Uint8Array(a)}constructor(...a){var c;super(...a);const d=a[0]||{};this.isHexOnly=null!=(c=d.isHexOnly)&&c,this.valueHexView=d.valueHex?b.toUint8Array(d.valueHex):y}fromBER(a,b,c){let d=a instanceof ArrayBuffer?new Uint8Array(a):a;if(!r(this,d,b,c))return -1;let e=b+c;return(this.valueHexView=d.subarray(b,e),this.valueHexView.length)?(this.blockLength=c,e):(this.warnings.push("Zero buffer length"),b)}toBER(a=!1){return this.isHexOnly?a?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",x)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:i.ToHex(this.valueHexView)}}}).NAME="hexBlock",c}class D{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(a){this.valueBeforeDecodeView=new Uint8Array(a)}constructor({blockLength:a=0,error:c="",warnings:d=[],valueBeforeDecode:e=y}={}){this.blockLength=a,this.error=c,this.warnings=d,this.valueBeforeDecodeView=b.toUint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:i.ToHex(this.valueBeforeDecodeView)}}}D.NAME="baseBlock";class E extends D{fromBER(a,b,c){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(a,b){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}E.NAME="valueBlock";class F extends C(D){constructor({idBlock:a={}}={}){var c,d,e,f;super(),a?(this.isHexOnly=null!=(c=a.isHexOnly)&&c,this.valueHexView=a.valueHex?b.toUint8Array(a.valueHex):y,this.tagClass=null!=(d=a.tagClass)?d:-1,this.tagNumber=null!=(e=a.tagNumber)?e:-1,this.isConstructed=null!=(f=a.isConstructed)&&f):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(a=!1){let b=0;switch(this.tagClass){case 1:b|=0;break;case 2:b|=64;break;case 3:b|=128;break;case 4:b|=192;break;default:return this.error="Unknown tag class",x}if(this.isConstructed&&(b|=32),this.tagNumber<31&&!this.isHexOnly){let c=new Uint8Array(1);if(!a){let a=this.tagNumber;a&=31,b|=a,c[0]=b}return c.buffer}if(!this.isHexOnly){let c=l(this.tagNumber,7),d=new Uint8Array(c),e=c.byteLength,f=new Uint8Array(e+1);if(f[0]=31|b,!a){for(let a=0;a<e-1;a++)f[a+1]=128|d[a];f[e]=d[e-1]}return f.buffer}let c=new Uint8Array(this.valueHexView.byteLength+1);if(c[0]=31|b,!a){let a=this.valueHexView;for(let b=0;b<a.length-1;b++)c[b+1]=128|a[b];c[this.valueHexView.byteLength]=a[a.length-1]}return c.buffer}fromBER(a,c,d){let e=b.toUint8Array(a);if(!r(this,e,c,d))return -1;let f=e.subarray(c,c+d);if(0===f.length)return this.error="Zero buffer length",-1;switch(192&f[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(32&f[0])==32,this.isHexOnly=!1;let g=31&f[0];if(31!==g)this.tagNumber=g,this.blockLength=1;else{let a=1,b=this.valueHexView=new Uint8Array(255),c=255;for(;128&f[a];){if(b[a-1]=127&f[a],++a>=f.length)return this.error="End of input reached before message was fully decoded",-1;if(a===c){let a=new Uint8Array(c+=255);for(let c=0;c<b.length;c++)a[c]=b[c];b=this.valueHexView=new Uint8Array(c)}}this.blockLength=a+1,b[a-1]=127&f[a];let d=new Uint8Array(a);for(let c=0;c<a;c++)d[c]=b[c];(b=this.valueHexView=new Uint8Array(a)).set(d),this.blockLength<=9?this.tagNumber=k(b,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return c+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}F.NAME="identificationBlock";class G extends D{constructor({lenBlock:a={}}={}){var b,c,d;super(),this.isIndefiniteForm=null!=(b=a.isIndefiniteForm)&&b,this.longFormUsed=null!=(c=a.longFormUsed)&&c,this.length=null!=(d=a.length)?d:0}fromBER(a,c,d){let e=b.toUint8Array(a);if(!r(this,e,c,d))return -1;let f=e.subarray(c,c+d);if(0===f.length)return this.error="Zero buffer length",-1;if(255===f[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===f[0],this.isIndefiniteForm)return this.blockLength=1,c+this.blockLength;if(this.longFormUsed=!!(128&f[0]),!1===this.longFormUsed)return this.length=f[0],this.blockLength=1,c+this.blockLength;let g=127&f[0];if(g>8)return this.error="Too big integer",-1;if(g+1>f.length)return this.error="End of input reached before message was fully decoded",-1;let h=c+1,i=e.subarray(h,h+g);return 0===i[g-1]&&this.warnings.push("Needlessly long encoded length"),this.length=k(i,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=g+1,c+this.blockLength}toBER(a=!1){let b,c;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return b=new ArrayBuffer(1),!1===a&&((c=new Uint8Array(b))[0]=128),b;if(this.longFormUsed){let d=l(this.length,8);if(d.byteLength>127)return this.error="Too big length",x;if(b=new ArrayBuffer(d.byteLength+1),a)return b;let e=new Uint8Array(d);(c=new Uint8Array(b))[0]=128|d.byteLength;for(let a=0;a<d.byteLength;a++)c[a+1]=e[a];return b}return b=new ArrayBuffer(1),!1===a&&((c=new Uint8Array(b))[0]=this.length),b}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}G.NAME="lengthBlock";let H={};class I extends D{constructor({name:a="",optional:b=!1,primitiveSchema:c,...d}={},e){super(d),this.name=a,this.optional=b,c&&(this.primitiveSchema=c),this.idBlock=new F(d),this.lenBlock=new G(d),this.valueBlock=e?new e(d):new E(d)}fromBER(a,b,c){let d=this.valueBlock.fromBER(a,b,this.lenBlock.isIndefiniteForm?c:this.lenBlock.length);return -1===d?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),d}toBER(a,b){let c=b||new s;b||function a(b){var c;if(b instanceof H.Constructed)for(let c of b.valueBlock.value)a(c)&&(b.lenBlock.isIndefiniteForm=!0);return!!(null==(c=b.lenBlock)?void 0:c.isIndefiniteForm)}(this);let d=this.idBlock.toBER(a);if(c.write(d),this.lenBlock.isIndefiniteForm)c.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(a,c),c.write(new ArrayBuffer(2));else{let b=this.valueBlock.toBER(a);this.lenBlock.length=b.byteLength;let d=this.lenBlock.toBER(a);c.write(d),c.write(b)}return b?x:c.final()}toJSON(){let a={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(a.primitiveSchema=this.primitiveSchema.toJSON()),a}toString(a="ascii"){return"ascii"===a?this.onAsciiEncoding():i.ToHex(this.toBER())}onAsciiEncoding(){let a=this.constructor.NAME,b=i.ToHex(this.valueBlock.valueBeforeDecodeView);return`${a} : ${b}`}isEqual(a){if(this===a)return!0;if(!(a instanceof this.constructor))return!1;let b=this.toBER(),c=a.toBER();if(b.byteLength!==c.byteLength)return!1;let d=new Uint8Array(b),e=new Uint8Array(c);for(let a=0;a<d.length;a++)if(d[a]!==e[a])return!1;return!0}}I.NAME="BaseBlock";class J extends I{getValue(){return this.valueBlock.value}setValue(a){this.valueBlock.value=a}constructor({value:a="",...b}={},c){super(b,c),a&&this.fromString(a)}fromBER(a,b,c){let d=this.valueBlock.fromBER(a,b,this.lenBlock.isIndefiniteForm?c:this.lenBlock.length);return -1===d?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),d}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}J.NAME="BaseStringBlock";class K extends C(E){constructor({isHexOnly:a=!0,...b}={}){super(b),this.isHexOnly=a}}K.NAME="PrimitiveValueBlock";class L extends I{constructor(a={}){super(a,K),this.idBlock.isConstructed=!1}}function M(a,b=0,c=a.length){let d=b,e=new I({},E),f=new D;if(!r(f,a,b,c))return e.error=f.error,{offset:-1,result:e};if(!a.subarray(b,b+c).length)return e.error="Zero buffer length",{offset:-1,result:e};let g=e.idBlock.fromBER(a,b,c);if(e.idBlock.warnings.length&&e.warnings.concat(e.idBlock.warnings),-1===g)return e.error=e.idBlock.error,{offset:-1,result:e};if(b=g,c-=e.idBlock.blockLength,g=e.lenBlock.fromBER(a,b,c),e.lenBlock.warnings.length&&e.warnings.concat(e.lenBlock.warnings),-1===g)return e.error=e.lenBlock.error,{offset:-1,result:e};if(b=g,c-=e.lenBlock.blockLength,!e.idBlock.isConstructed&&e.lenBlock.isIndefiniteForm)return e.error="Indefinite length form used for primitive encoding form",{offset:-1,result:e};let h=I;if(1===e.idBlock.tagClass){if(e.idBlock.tagNumber>=37&&!1===e.idBlock.isHexOnly)return e.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:e};switch(e.idBlock.tagNumber){case 0:if(e.idBlock.isConstructed&&e.lenBlock.length>0)return e.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:e};h=H.EndOfContent;break;case 1:h=H.Boolean;break;case 2:h=H.Integer;break;case 3:h=H.BitString;break;case 4:h=H.OctetString;break;case 5:h=H.Null;break;case 6:h=H.ObjectIdentifier;break;case 10:h=H.Enumerated;break;case 12:h=H.Utf8String;break;case 13:h=H.RelativeObjectIdentifier;break;case 14:h=H.TIME;break;case 15:return e.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:e};case 16:h=H.Sequence;break;case 17:h=H.Set;break;case 18:h=H.NumericString;break;case 19:h=H.PrintableString;break;case 20:h=H.TeletexString;break;case 21:h=H.VideotexString;break;case 22:h=H.IA5String;break;case 23:h=H.UTCTime;break;case 24:h=H.GeneralizedTime;break;case 25:h=H.GraphicString;break;case 26:h=H.VisibleString;break;case 27:h=H.GeneralString;break;case 28:h=H.UniversalString;break;case 29:h=H.CharacterString;break;case 30:h=H.BmpString;break;case 31:h=H.DATE;break;case 32:h=H.TimeOfDay;break;case 33:h=H.DateTime;break;case 34:h=H.Duration;break;default:{let a=e.idBlock.isConstructed?new H.Constructed:new H.Primitive;a.idBlock=e.idBlock,a.lenBlock=e.lenBlock,a.warnings=e.warnings,e=a}}}else h=e.idBlock.isConstructed?H.Constructed:H.Primitive;return g=(e=function(a,b){if(a instanceof b)return a;let c=new b;return c.idBlock=a.idBlock,c.lenBlock=a.lenBlock,c.warnings=a.warnings,c.valueBeforeDecodeView=a.valueBeforeDecodeView,c}(e,h)).fromBER(a,b,e.lenBlock.isIndefiniteForm?c:e.lenBlock.length),e.valueBeforeDecodeView=a.subarray(d,d+e.blockLength),{offset:g,result:e}}function N(a){if(!a.byteLength){let a=new I({},E);return a.error="Input buffer has zero length",{offset:-1,result:a}}return M(b.toUint8Array(a).slice(),0,a.byteLength)}H.Primitive=L,L.NAME="PRIMITIVE";class O extends E{constructor({value:a=[],isIndefiniteForm:b=!1,...c}={}){super(c),this.value=a,this.isIndefiniteForm=b}fromBER(a,c,d){var e,f;let g=b.toUint8Array(a);if(!r(this,g,c,d))return -1;if(this.valueBeforeDecodeView=g.subarray(c,c+d),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),c;let h=c;for(;e=this.isIndefiniteForm,f=d,(e?1:f)>0;){let a=M(g,h,d);if(-1===a.offset)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(h=a.offset,this.blockLength+=a.result.blockLength,d-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===z)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===z?this.value.pop():this.warnings.push("No EndOfContent block encoded")),h}toBER(a,b){let c=b||new s;for(let b=0;b<this.value.length;b++)this.value[b].toBER(a,c);return b?x:c.final()}toJSON(){let a={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let b of this.value)a.value.push(b.toJSON());return a}}O.NAME="ConstructedValueBlock";class P extends I{constructor(a={}){super(a,O),this.idBlock.isConstructed=!0}fromBER(a,b,c){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let d=this.valueBlock.fromBER(a,b,this.lenBlock.isIndefiniteForm?c:this.lenBlock.length);return -1===d?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),d}onAsciiEncoding(){let a=[];for(let b of this.valueBlock.value)a.push(b.toString("ascii").split("\n").map(a=>`  ${a}`).join("\n"));let b=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return a.length?`${b} :
${a.join("\n")}`:`${b} :`}}H.Constructed=P,P.NAME="CONSTRUCTED";class Q extends E{fromBER(a,b,c){return b}toBER(a){return x}}Q.override="EndOfContentValueBlock";class R extends I{constructor(a={}){super(a,Q),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}H.EndOfContent=R,R.NAME=z;class S extends I{constructor(a={}){super(a,E),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(a,b,c){return(this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=c,b+c>a.byteLength)?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):b+c}toBER(a,b){let c=new ArrayBuffer(2);if(!a){let a=new Uint8Array(c);a[0]=5,a[1]=0}return b&&b.write(c),c}onAsciiEncoding(){return`${this.constructor.NAME}`}}H.Null=S,S.NAME="NULL";class T extends C(E){get value(){for(let a of this.valueHexView)if(a>0)return!0;return!1}set value(a){this.valueHexView[0]=255*!!a}constructor({value:a,...c}={}){super(c),c.valueHex?this.valueHexView=b.toUint8Array(c.valueHex):this.valueHexView=new Uint8Array(1),a&&(this.value=a)}fromBER(a,c,d){let e=b.toUint8Array(a);return r(this,e,c,d)?(this.valueHexView=e.subarray(c,c+d),d>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,n.call(this),this.blockLength=d,c+d):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}T.NAME="BooleanValueBlock";class U extends I{getValue(){return this.valueBlock.value}setValue(a){this.valueBlock.value=a}constructor(a={}){super(a,T),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}H.Boolean=U,U.NAME="BOOLEAN";class V extends C(O){constructor({isConstructed:a=!1,...b}={}){super(b),this.isConstructed=a}fromBER(a,b,c){let d=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(d=O.prototype.fromBER.call(this,a,b,c)))return d;for(let a=0;a<this.value.length;a++){let b=this.value[a].constructor.NAME;if(b===z)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1;else break;if(b!==A)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,d=super.fromBER(a,b,c),this.blockLength=c;return d}toBER(a,b){return this.isConstructed?O.prototype.toBER.call(this,a,b):a?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}V.NAME="OctetStringValueBlock";class W extends I{constructor({idBlock:a={},lenBlock:b={},...c}={}){var d;null!=c.isConstructed||(c.isConstructed=!!(null==(d=c.value)?void 0:d.length)),super({idBlock:{isConstructed:c.isConstructed,...a},lenBlock:{...b,isIndefiniteForm:!!c.isIndefiniteForm},...c},V),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(a,b,c){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===c)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),b;if(!this.valueBlock.isConstructed){let d=(a instanceof ArrayBuffer?new Uint8Array(a):a).subarray(b,b+c);try{if(d.byteLength){let a=M(d,0,d.byteLength);-1!==a.offset&&a.offset===c&&(this.valueBlock.value=[a.result])}}catch{}}return super.fromBER(a,b,c)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return P.prototype.onAsciiEncoding.call(this);let a=this.constructor.NAME,b=i.ToHex(this.valueBlock.valueHexView);return`${a} : ${b}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let a=[];for(let b of this.valueBlock.value)b instanceof bd&&a.push(b.valueBlock.valueHexView);return b.concat(a)}}H.OctetString=bd=W,W.NAME=A;class X extends C(O){constructor({unusedBits:a=0,isConstructed:b=!1,...c}={}){super(c),this.unusedBits=a,this.isConstructed=b,this.blockLength=this.valueHexView.byteLength}fromBER(a,c,d){if(!d)return c;let e=-1;if(this.isConstructed){if(-1===(e=O.prototype.fromBER.call(this,a,c,d)))return e;for(let a of this.value){let b=a.constructor.NAME;if(b===z)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1;else break;if(b!==B)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let c=a.valueBlock;if(this.unusedBits>0&&c.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=c.unusedBits}return e}let f=b.toUint8Array(a);if(!r(this,f,c,d))return -1;let g=f.subarray(c,c+d);if(this.unusedBits=g[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let a=g.subarray(1);try{if(a.byteLength){let b=M(a,0,a.byteLength);-1!==b.offset&&b.offset===d-1&&(this.value=[b.result])}}catch{}}return this.valueHexView=g.subarray(1),this.blockLength=g.length,c+d}toBER(a,b){if(this.isConstructed)return O.prototype.toBER.call(this,a,b);if(a)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength){let a=new Uint8Array(1);return a[0]=0,a.buffer}let c=new Uint8Array(this.valueHexView.length+1);return c[0]=this.unusedBits,c.set(this.valueHexView,1),c.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}X.NAME="BitStringValueBlock";class Y extends I{constructor({idBlock:a={},lenBlock:b={},...c}={}){var d;null!=c.isConstructed||(c.isConstructed=!!(null==(d=c.value)?void 0:d.length)),super({idBlock:{isConstructed:c.isConstructed,...a},lenBlock:{...b,isIndefiniteForm:!!c.isIndefiniteForm},...c},X),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(a,b,c){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(a,b,c)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return P.prototype.onAsciiEncoding.call(this);{let a=[];for(let b of this.valueBlock.valueHexView)a.push(b.toString(2).padStart(8,"0"));let b=a.join(""),c=this.constructor.NAME,d=b.substring(0,b.length-this.valueBlock.unusedBits);return`${c} : ${d}`}}}function Z(a){if(a>=t.length)for(let b=t.length;b<=a;b++){let a=new Uint8Array([0]),c=t[b-1].slice(0);for(let b=c.length-1;b>=0;b--){let d=new Uint8Array([(c[b]<<1)+a[0]]);a[0]=d[0]/10,c[b]=d[0]%10}a[0]>0&&(c=m(a,c)),t.push(c)}return t[a]}H.BitString=Y,Y.NAME=B;class $ extends C(E){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=n.call(this)))}constructor({value:a,...b}={}){super(b),this._valueDec=0,b.valueHex&&this.setValueHex(),void 0!==a&&(this.valueDec=a)}set valueDec(a){this._valueDec=a,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function(a){let b=a<0?-1*a:a,c=128;for(let d=1;d<8;d++){if(b<=c){if(a<0){let a=l(c-b,8,d),e=new Uint8Array(a);return e[0]|=128,a}let e=l(b,8,d),f=new Uint8Array(e);if(128&f[0]){let a=e.slice(0),b=new Uint8Array(a);f=new Uint8Array(e=new ArrayBuffer(e.byteLength+1));for(let c=0;c<a.byteLength;c++)f[c+1]=b[c];f[0]=0}return e}c*=256}return new ArrayBuffer(0)}(a))}get valueDec(){return this._valueDec}fromDER(a,b,c,d=0){let e=this.fromBER(a,b,c);if(-1===e)return e;let f=this.valueHexView;return 0===f[0]&&(128&f[1])!=0?this.valueHexView=f.subarray(1):0!==d&&f.length<d&&(d-f.length>1&&(d=f.length+1),this.valueHexView=f.subarray(d-f.length)),e}toDER(a=!1){let b=this.valueHexView;switch(!0){case(128&b[0])!=0:{let a=new Uint8Array(this.valueHexView.length+1);a[0]=0,a.set(b,1),this.valueHexView=a}break;case 0===b[0]&&(128&b[1])==0:this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(a)}fromBER(a,b,c){let d=super.fromBER(a,b,c);return -1===d||this.setValueHex(),d}toBER(a){return a?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let a,b=8*this.valueHexView.length-1,c=new Uint8Array(8*this.valueHexView.length/3),d=0,e=this.valueHexView,f="",g=!1;for(let g=e.byteLength-1;g>=0;g--){a=e[g];for(let e=0;e<8;e++)(1&a)==1&&(d===b?(c=function(a,b){let c,d=0,e=new Uint8Array(a),f=new Uint8Array(b),g=e.slice(0),h=g.length-1,i=f.slice(0),j=i.length-1,k=0;for(let a=j;a>=0;a--,k++)!0==(c=g[h-k]-i[j-k]-d)<0?(d=1,g[h-k]=c+10):(d=0,g[h-k]=c);if(d>0)for(let a=h-j+1;a>=0;a--,k++)if((c=g[h-k]-d)<0)d=1,g[h-k]=c+10;else{d=0,g[h-k]=c;break}return g.slice()}(Z(d),c),f="-"):c=function(a,b){let c=new Uint8Array([0]),d=new Uint8Array(a),e=new Uint8Array(b),f=d.slice(0),g=f.length-1,h=e.slice(0),i=h.length-1,j=0,k=i<g?g:i,l=0;for(let a=k;a>=0;a--,l++)j=!0==l<h.length?f[g-l]+h[i-l]+c[0]:f[g-l]+c[0],c[0]=j/10,!0==l>=f.length?f=m(new Uint8Array([j%10]),f):f[g-l]=j%10;return c[0]>0&&(f=m(c,f)),f}(c,Z(d))),d++,a>>=1}for(let a=0;a<c.length;a++)c[a]&&(g=!0),g&&(f+=u.charAt(c[a]));return!1===g&&(f+=u.charAt(0)),f}}$.NAME="IntegerValueBlock",Object.defineProperty($.prototype,"valueHex",{set:function(a){this.valueHexView=new Uint8Array(a),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class _ extends I{constructor(a={}){super(a,$),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return p(),BigInt(this.valueBlock.toString())}static fromBigInt(a){p();let c=BigInt(a),d=new s,e=c.toString(16).replace(/^-/,""),f=new Uint8Array(i.FromHex(e));if(c<0){let a=new Uint8Array(f.length+(128&f[0]?1:0));a[0]|=128;let e=BigInt(`0x${i.ToHex(a)}`)+c,g=b.toUint8Array(i.FromHex(e.toString(16)));g[0]|=128,d.write(g)}else 128&f[0]&&d.write(new Uint8Array([0])),d.write(f);return new be({valueHex:d.final()})}convertToDER(){let a=new be({valueHex:this.valueBlock.valueHexView});return a.valueBlock.toDER(),a}convertFromDER(){return new be({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}H.Integer=be=_,_.NAME="INTEGER";class aa extends _{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}H.Enumerated=aa,aa.NAME="ENUMERATED";class ab extends C(E){constructor({valueDec:a=-1,isFirstSid:b=!1,...c}={}){super(c),this.valueDec=a,this.isFirstSid=b}fromBER(a,c,d){if(!d)return c;let e=b.toUint8Array(a);if(!r(this,e,c,d))return -1;let f=e.subarray(c,c+d);this.valueHexView=new Uint8Array(d);for(let a=0;a<d&&(this.valueHexView[a]=127&f[a],this.blockLength++,(128&f[a])!=0);a++);let g=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)g[a]=this.valueHexView[a];return(this.valueHexView=g,(128&f[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=k(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),c+this.blockLength)}set valueBigInt(a){p();let b=BigInt(a).toString(2);for(;b.length%7;)b="0"+b;let c=new Uint8Array(b.length/7);for(let a=0;a<c.length;a++)c[a]=parseInt(b.slice(7*a,7*a+7),2)+128*(a+1<c.length);this.fromBER(c.buffer,0,c.length)}toBER(a){if(this.isHexOnly){if(a)return new ArrayBuffer(this.valueHexView.byteLength);let b=this.valueHexView,c=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)c[a]=128|b[a];return c[this.blockLength-1]=b[this.blockLength-1],c.buffer}let b=l(this.valueDec,7);if(0===b.byteLength)return this.error="Error during encoding SID value",x;let c=new Uint8Array(b.byteLength);if(!a){let a=new Uint8Array(b),d=b.byteLength-1;for(let b=0;b<d;b++)c[b]=128|a[b];c[d]=a[d]}return c}toString(){let a="";if(this.isHexOnly)a=i.ToHex(this.valueHexView);else if(this.isFirstSid){let b=this.valueDec;this.valueDec<=39?a="0.":this.valueDec<=79?(a="1.",b-=40):(a="2.",b-=80),a+=b.toString()}else a=this.valueDec.toString();return a}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}ab.NAME="sidBlock";class ac extends E{constructor({value:a="",...b}={}){super(b),this.value=[],a&&this.fromString(a)}fromBER(a,b,c){let d=b;for(;c>0;){let b=new ab;if(-1===(d=b.fromBER(a,d,c))){this.blockLength=0,this.error=b.error;break}0===this.value.length&&(b.isFirstSid=!0),this.blockLength+=b.blockLength,c-=b.blockLength,this.value.push(b)}return d}toBER(a){let b=[];for(let c=0;c<this.value.length;c++){let d=this.value[c].toBER(a);if(0===d.byteLength)return this.error=this.value[c].error,x;b.push(d)}return q(b)}fromString(a){this.value=[];let b=0,c=0,d="",e=!1;do if(d=-1===(c=a.indexOf(".",b))?a.substring(b):a.substring(b,c),b=c+1,e){let a=this.value[0],b=0;switch(a.valueDec){case 0:break;case 1:b=40;break;case 2:b=80;break;default:this.value=[];return}let c=parseInt(d,10);if(isNaN(c))return;a.valueDec=c+b,e=!1}else{let a=new ab;if(d>Number.MAX_SAFE_INTEGER)p(),a.valueBigInt=BigInt(d);else if(a.valueDec=parseInt(d,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,e=!0),this.value.push(a)}while(-1!==c)}toString(){let a="",b=!1;for(let c=0;c<this.value.length;c++){b=this.value[c].isHexOnly;let d=this.value[c].toString();0!==c&&(a=`${a}.`),b?(d=`{${d}}`,this.value[c].isFirstSid?a=`2.{${d} - 80}`:a+=d):a+=d}return a}toJSON(){let a={...super.toJSON(),value:this.toString(),sidArray:[]};for(let b=0;b<this.value.length;b++)a.sidArray.push(this.value[b].toJSON());return a}}ac.NAME="ObjectIdentifierValueBlock";class ad extends I{getValue(){return this.valueBlock.toString()}setValue(a){this.valueBlock.fromString(a)}constructor(a={}){super(a,ac),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}H.ObjectIdentifier=ad,ad.NAME="OBJECT IDENTIFIER";class ae extends C(D){constructor({valueDec:a=0,...b}={}){super(b),this.valueDec=a}fromBER(a,c,d){if(0===d)return c;let e=b.toUint8Array(a);if(!r(this,e,c,d))return -1;let f=e.subarray(c,c+d);this.valueHexView=new Uint8Array(d);for(let a=0;a<d&&(this.valueHexView[a]=127&f[a],this.blockLength++,(128&f[a])!=0);a++);let g=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)g[a]=this.valueHexView[a];return(this.valueHexView=g,(128&f[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=k(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),c+this.blockLength)}toBER(a){if(this.isHexOnly){if(a)return new ArrayBuffer(this.valueHexView.byteLength);let b=this.valueHexView,c=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)c[a]=128|b[a];return c[this.blockLength-1]=b[this.blockLength-1],c.buffer}let b=l(this.valueDec,7);if(0===b.byteLength)return this.error="Error during encoding SID value",x;let c=new Uint8Array(b.byteLength);if(!a){let a=new Uint8Array(b),d=b.byteLength-1;for(let b=0;b<d;b++)c[b]=128|a[b];c[d]=a[d]}return c.buffer}toString(){return this.isHexOnly?i.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}ae.NAME="relativeSidBlock";class af extends E{constructor({value:a="",...b}={}){super(b),this.value=[],a&&this.fromString(a)}fromBER(a,b,c){let d=b;for(;c>0;){let b=new ae;if(-1===(d=b.fromBER(a,d,c))){this.blockLength=0,this.error=b.error;break}this.blockLength+=b.blockLength,c-=b.blockLength,this.value.push(b)}return d}toBER(a,b){let c=[];for(let b=0;b<this.value.length;b++){let d=this.value[b].toBER(a);if(0===d.byteLength)return this.error=this.value[b].error,x;c.push(d)}return q(c)}fromString(a){this.value=[];let b=0,c=0,d="";do{d=-1===(c=a.indexOf(".",b))?a.substring(b):a.substring(b,c),b=c+1;let e=new ae;if(e.valueDec=parseInt(d,10),isNaN(e.valueDec))break;this.value.push(e)}while(-1!==c)return!0}toString(){let a="",b=!1;for(let c=0;c<this.value.length;c++){b=this.value[c].isHexOnly;let d=this.value[c].toString();0!==c&&(a=`${a}.`),b?a+=d=`{${d}}`:a+=d}return a}toJSON(){let a={...super.toJSON(),value:this.toString(),sidArray:[]};for(let b=0;b<this.value.length;b++)a.sidArray.push(this.value[b].toJSON());return a}}af.NAME="RelativeObjectIdentifierValueBlock";class ag extends I{getValue(){return this.valueBlock.toString()}setValue(a){this.valueBlock.fromString(a)}constructor(a={}){super(a,af),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}H.RelativeObjectIdentifier=ag,ag.NAME="RelativeObjectIdentifier";class ah extends P{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}H.Sequence=ah,ah.NAME="SEQUENCE";class ai extends P{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}H.Set=ai,ai.NAME="SET";class aj extends C(E){constructor({...a}={}){super(a),this.isHexOnly=!0,this.value=""}toJSON(){return{...super.toJSON(),value:this.value}}}aj.NAME="StringValueBlock";class ak extends aj{}ak.NAME="SimpleStringValueBlock";class al extends J{constructor({...a}={}){super(a,ak)}fromBuffer(a){this.valueBlock.value=String.fromCharCode.apply(null,b.toUint8Array(a))}fromString(a){let b=a.length,c=this.valueBlock.valueHexView=new Uint8Array(b);for(let d=0;d<b;d++)c[d]=a.charCodeAt(d);this.valueBlock.value=a}}al.NAME="SIMPLE STRING";class am extends al{fromBuffer(a){this.valueBlock.valueHexView=b.toUint8Array(a);try{this.valueBlock.value=i.ToUtf8String(a)}catch(b){this.warnings.push(`Error during "decodeURIComponent": ${b}, using raw string`),this.valueBlock.value=i.ToBinary(a)}}fromString(a){this.valueBlock.valueHexView=new Uint8Array(i.FromUtf8String(a)),this.valueBlock.value=a}}am.NAME="Utf8StringValueBlock";class an extends am{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}H.Utf8String=an,an.NAME="UTF8String";class ao extends al{fromBuffer(a){this.valueBlock.value=i.ToUtf16String(a),this.valueBlock.valueHexView=b.toUint8Array(a)}fromString(a){this.valueBlock.value=a,this.valueBlock.valueHexView=new Uint8Array(i.FromUtf16String(a))}}ao.NAME="BmpStringValueBlock";class ap extends ao{constructor({...a}={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}H.BmpString=ap,ap.NAME="BMPString";class aq extends al{fromBuffer(a){let b=ArrayBuffer.isView(a)?a.slice().buffer:a.slice(0),c=new Uint8Array(b);for(let a=0;a<c.length;a+=4)c[a]=c[a+3],c[a+1]=c[a+2],c[a+2]=0,c[a+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(b))}fromString(a){let b=a.length,c=this.valueBlock.valueHexView=new Uint8Array(4*b);for(let d=0;d<b;d++){let b=new Uint8Array(l(a.charCodeAt(d),8));if(b.length>4)continue;let e=4-b.length;for(let a=b.length-1;a>=0;a--)c[4*d+a+e]=b[a]}this.valueBlock.value=a}}aq.NAME="UniversalStringValueBlock";class ar extends aq{constructor({...a}={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}H.UniversalString=ar,ar.NAME="UniversalString";class as extends al{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}H.NumericString=as,as.NAME="NumericString";class at extends al{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}H.PrintableString=at,at.NAME="PrintableString";class au extends al{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}H.TeletexString=au,au.NAME="TeletexString";class av extends al{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}H.VideotexString=av,av.NAME="VideotexString";class aw extends al{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}H.IA5String=aw,aw.NAME="IA5String";class ax extends al{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}H.GraphicString=ax,ax.NAME="GraphicString";class ay extends al{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}H.VisibleString=ay,ay.NAME="VisibleString";class az extends al{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}H.GeneralString=az,az.NAME="GeneralString";class aA extends al{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}H.CharacterString=aA,aA.NAME="CharacterString";class aB extends ay{constructor({value:a,valueDate:b,...c}={}){if(super(c),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,a){this.fromString(a),this.valueBlock.valueHexView=new Uint8Array(a.length);for(let b=0;b<a.length;b++)this.valueBlock.valueHexView[b]=a.charCodeAt(b)}b&&(this.fromDate(b),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(a){this.fromString(String.fromCharCode.apply(null,b.toUint8Array(a)))}toBuffer(){let a=this.toString(),b=new ArrayBuffer(a.length),c=new Uint8Array(b);for(let b=0;b<a.length;b++)c[b]=a.charCodeAt(b);return b}fromDate(a){this.year=a.getUTCFullYear(),this.month=a.getUTCMonth()+1,this.day=a.getUTCDate(),this.hour=a.getUTCHours(),this.minute=a.getUTCMinutes(),this.second=a.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(a){let b=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(a);if(null===b){this.error="Wrong input string for conversion";return}let c=parseInt(b[1],10);c>=50?this.year=1900+c:this.year=2e3+c,this.month=parseInt(b[2],10),this.day=parseInt(b[3],10),this.hour=parseInt(b[4],10),this.minute=parseInt(b[5],10),this.second=parseInt(b[6],10)}toString(a="iso"){if("iso"===a){let a=Array(7);return a[0]=o(this.year<2e3?this.year-1900:this.year-2e3,2),a[1]=o(this.month,2),a[2]=o(this.day,2),a[3]=o(this.hour,2),a[4]=o(this.minute,2),a[5]=o(this.second,2),a[6]="Z",a.join("")}return super.toString(a)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}H.UTCTime=aB,aB.NAME="UTCTime";class aC extends aB{constructor(a={}){super(a),null!=this.millisecond||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(a){super.fromDate(a),this.millisecond=a.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(a){let b,c=!1,d="",e="",f=0,g=0,h=0;if("Z"===a[a.length-1])d=a.substring(0,a.length-1),c=!0;else{if(isNaN(new Number(a[a.length-1]).valueOf()))throw Error("Wrong input string for conversion");d=a}if(c){if(-1!==d.indexOf("+")||-1!==d.indexOf("-"))throw Error("Wrong input string for conversion")}else{let a=1,b=d.indexOf("+"),c="";if(-1===b&&(b=d.indexOf("-"),a=-1),-1!==b){if(c=d.substring(b+1),d=d.substring(0,b),2!==c.length&&4!==c.length)throw Error("Wrong input string for conversion");let e=parseInt(c.substring(0,2),10);if(isNaN(e.valueOf()))throw Error("Wrong input string for conversion");if(g=a*e,4===c.length){if(isNaN((e=parseInt(c.substring(2,4),10)).valueOf()))throw Error("Wrong input string for conversion");h=a*e}}}let i=d.indexOf(".");if(-1===i&&(i=d.indexOf(",")),-1!==i){let a=new Number(`0${d.substring(i)}`);if(isNaN(a.valueOf()))throw Error("Wrong input string for conversion");f=a.valueOf(),e=d.substring(0,i)}else e=d;switch(!0){case 8===e.length:if(b=/(\d{4})(\d{2})(\d{2})/ig,-1!==i)throw Error("Wrong input string for conversion");break;case 10===e.length:if(b=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,-1!==i){let a=60*f;this.minute=Math.floor(a),a=60*(a-this.minute),this.second=Math.floor(a),a=1e3*(a-this.second),this.millisecond=Math.floor(a)}break;case 12===e.length:if(b=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==i){let a=60*f;this.second=Math.floor(a),a=1e3*(a-this.second),this.millisecond=Math.floor(a)}break;case 14===e.length:if(b=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==i){let a=1e3*f;this.millisecond=Math.floor(a)}break;default:throw Error("Wrong input string for conversion")}let j=b.exec(e);if(null===j)throw Error("Wrong input string for conversion");for(let a=1;a<j.length;a++)switch(a){case 1:this.year=parseInt(j[a],10);break;case 2:this.month=parseInt(j[a],10);break;case 3:this.day=parseInt(j[a],10);break;case 4:this.hour=parseInt(j[a],10)+g;break;case 5:this.minute=parseInt(j[a],10)+h;break;case 6:this.second=parseInt(j[a],10);break;default:throw Error("Wrong input string for conversion")}if(!1===c){let a=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=a.getUTCFullYear(),this.month=a.getUTCMonth(),this.day=a.getUTCDay(),this.hour=a.getUTCHours(),this.minute=a.getUTCMinutes(),this.second=a.getUTCSeconds(),this.millisecond=a.getUTCMilliseconds()}}toString(a="iso"){if("iso"===a){let a=[];return a.push(o(this.year,4)),a.push(o(this.month,2)),a.push(o(this.day,2)),a.push(o(this.hour,2)),a.push(o(this.minute,2)),a.push(o(this.second,2)),0!==this.millisecond&&(a.push("."),a.push(o(this.millisecond,3))),a.push("Z"),a.join("")}return super.toString(a)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}H.GeneralizedTime=aC,aC.NAME="GeneralizedTime";class aD extends an{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}H.DATE=aD,aD.NAME="DATE";class aE extends an{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}H.TimeOfDay=aE,aE.NAME="TimeOfDay";class aF extends an{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}H.DateTime=aF,aF.NAME="DateTime";class aG extends an{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}H.Duration=aG,aG.NAME="Duration";class aH extends an{constructor(a={}){super(a),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}H.TIME=aH,aH.NAME="TIME";class aI{constructor({name:a="",optional:b=!1}={}){this.name=a,this.optional=b}}class aJ extends aI{constructor({value:a=[],...b}={}){super(b),this.value=a}}class aK extends aI{constructor({value:a=new aI,local:b=!1,...c}={}){super(c),this.value=a,this.local=b}}class aL{get data(){return this.dataView.slice().buffer}set data(a){this.dataView=b.toUint8Array(a)}constructor({data:a=y}={}){this.dataView=b.toUint8Array(a)}fromBER(a,c,d){let e=c+d;return this.dataView=b.toUint8Array(a).subarray(c,e),e}toBER(a){return this.dataView.slice().buffer}}function aM(a,b,c){if(c instanceof aJ){for(let d of c.value)if(aM(a,b,d).verified)return{verified:!0,result:a};{let a={verified:!1,result:{error:"Wrong values for Choice type"}};return c.hasOwnProperty(v)&&(a.name=c.name),a}}if(c instanceof aI)return c.hasOwnProperty(v)&&(a[c.name]=b),{verified:!0,result:a};if(a instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(b instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(c instanceof Object==!1||"idBlock"in c==!1||"fromBER"in c.idBlock==!1||"toBER"in c.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let d=c.idBlock.toBER(!1);if(0===d.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===c.idBlock.fromBER(d,0,d.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===c.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(c.idBlock.tagClass!==b.idBlock.tagClass)return{verified:!1,result:a};if(!1===c.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(c.idBlock.tagNumber!==b.idBlock.tagNumber)return{verified:!1,result:a};if(!1===c.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(c.idBlock.isConstructed!==b.idBlock.isConstructed)return{verified:!1,result:a};if(!("isHexOnly"in c.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(c.idBlock.isHexOnly!==b.idBlock.isHexOnly)return{verified:!1,result:a};if(c.idBlock.isHexOnly){if(w in c.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let d=c.idBlock.valueHexView,e=b.idBlock.valueHexView;if(d.length!==e.length)return{verified:!1,result:a};for(let b=0;b<d.length;b++)if(d[b]!==e[1])return{verified:!1,result:a}}if(c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&(a[c.name]=b)),c instanceof H.Constructed){let d=0,e={verified:!1,result:{error:"Unknown error"}},f=c.valueBlock.value.length;if(f>0&&c.valueBlock.value[0]instanceof aK&&(f=b.valueBlock.value.length),0===f)return{verified:!0,result:a};if(0===b.valueBlock.value.length&&0!==c.valueBlock.value.length){let b=!0;for(let a=0;a<c.valueBlock.value.length;a++)b=b&&(c.valueBlock.value[a].optional||!1);return b?{verified:!0,result:a}:(c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&delete a[c.name]),a.error="Inconsistent object length",{verified:!1,result:a})}for(let g=0;g<f;g++)if(g-d>=b.valueBlock.value.length){if(!1===c.valueBlock.value[g].optional){let b={verified:!1,result:a};return a.error="Inconsistent length between ASN.1 data and schema",c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&(delete a[c.name],b.name=c.name)),b}}else if(c.valueBlock.value[0]instanceof aK){if(!1===(e=aM(a,b.valueBlock.value[g],c.valueBlock.value[0].value)).verified)if(!c.valueBlock.value[0].optional)return c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&delete a[c.name]),e;else d++;if(v in c.valueBlock.value[0]&&c.valueBlock.value[0].name.length>0){let d={};void 0===(d="local"in c.valueBlock.value[0]&&c.valueBlock.value[0].local?b:a)[c.valueBlock.value[0].name]&&(d[c.valueBlock.value[0].name]=[]),d[c.valueBlock.value[0].name].push(b.valueBlock.value[g])}}else if(!1===(e=aM(a,b.valueBlock.value[g-d],c.valueBlock.value[g])).verified)if(!c.valueBlock.value[g].optional)return c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&delete a[c.name]),e;else d++;if(!1===e.verified){let b={verified:!1,result:a};return c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&(delete a[c.name],b.name=c.name)),b}return{verified:!0,result:a}}if(c.primitiveSchema&&w in b.valueBlock){let d=M(b.valueBlock.valueHexView);if(-1===d.offset){let b={verified:!1,result:d.result};return c.name&&(c.name=c.name.replace(/^\s+|\s+$/g,""),c.name&&(delete a[c.name],b.name=c.name)),b}return aM(a,d.result,c.primitiveSchema)}return{verified:!0,result:a}}function aN(a,c){if(c instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let d=M(b.toUint8Array(a));return -1===d.offset?{verified:!1,result:d.result}:aM(d.result,d.result,c)}a.s(["Any",()=>aI,"BaseBlock",()=>I,"BaseStringBlock",()=>J,"BitString",()=>Y,"BmpString",()=>ap,"Boolean",()=>U,"CharacterString",()=>aA,"Choice",()=>aJ,"Constructed",()=>P,"DATE",()=>aD,"DateTime",()=>aF,"Duration",()=>aG,"EndOfContent",()=>R,"Enumerated",()=>aa,"GeneralString",()=>az,"GeneralizedTime",()=>aC,"GraphicString",()=>ax,"HexBlock",()=>C,"IA5String",()=>aw,"Integer",()=>_,"Null",()=>S,"NumericString",()=>as,"ObjectIdentifier",()=>ad,"OctetString",()=>W,"Primitive",()=>L,"PrintableString",()=>at,"RawData",()=>aL,"RelativeObjectIdentifier",()=>ag,"Repeated",()=>aK,"Sequence",()=>ah,"Set",()=>ai,"TIME",()=>aH,"TeletexString",()=>au,"TimeOfDay",()=>aE,"UTCTime",()=>aB,"UniversalString",()=>ar,"Utf8String",()=>an,"ValueBlock",()=>E,"VideotexString",()=>av,"ViewWriter",()=>s,"VisibleString",()=>ay,"compareSchema",()=>aM,"fromBER",()=>N,"verifySchema",()=>aN],53194),(bb=bf||(bf={}))[bb.Sequence=0]="Sequence",bb[bb.Set=1]="Set",bb[bb.Choice=2]="Choice",(bc=bg||(bg={}))[bc.Any=1]="Any",bc[bc.Boolean=2]="Boolean",bc[bc.OctetString=3]="OctetString",bc[bc.BitString=4]="BitString",bc[bc.Integer=5]="Integer",bc[bc.Enumerated=6]="Enumerated",bc[bc.ObjectIdentifier=7]="ObjectIdentifier",bc[bc.Utf8String=8]="Utf8String",bc[bc.BmpString=9]="BmpString",bc[bc.UniversalString=10]="UniversalString",bc[bc.NumericString=11]="NumericString",bc[bc.PrintableString=12]="PrintableString",bc[bc.TeletexString=13]="TeletexString",bc[bc.VideotexString=14]="VideotexString",bc[bc.IA5String=15]="IA5String",bc[bc.GraphicString=16]="GraphicString",bc[bc.VisibleString=17]="VisibleString",bc[bc.GeneralString=18]="GeneralString",bc[bc.CharacterString=19]="CharacterString",bc[bc.UTCTime=20]="UTCTime",bc[bc.GeneralizedTime=21]="GeneralizedTime",bc[bc.DATE=22]="DATE",bc[bc.TimeOfDay=23]="TimeOfDay",bc[bc.DateTime=24]="DateTime",bc[bc.Duration=25]="Duration",bc[bc.TIME=26]="TIME",bc[bc.Null=27]="Null";let aO={fromASN:a=>a instanceof S?null:a.valueBeforeDecodeView,toASN:a=>{if(null===a)return new S;let b=N(a);if(b.result.error)throw Error(b.result.error);return b.result}},aP={fromASN:a=>a.valueBlock.valueHexView.byteLength>=4?a.valueBlock.toString():a.valueBlock.valueDec,toASN:a=>new _({value:+a})},aQ={fromASN:a=>a.valueBlock.valueDec,toASN:a=>new aa({value:a})},aR={fromASN:a=>a.valueBlock.valueHexView,toASN:a=>new Y({valueHex:a})},aS={fromASN:a=>a.valueBlock.toString(),toASN:a=>new ad({value:a})},aT={fromASN:a=>a.valueBlock.value,toASN:a=>new U({value:a})},aU={fromASN:a=>a.valueBlock.valueHexView,toASN:a=>new W({valueHex:a})};function aV(a){return{fromASN:a=>a.valueBlock.value,toASN:b=>new a({value:b})}}let aW=aV(an),aX=aV(ap),aY=aV(ar),aZ=aV(as),a$=aV(at),a_=aV(au),a0=aV(av),a1=aV(aw),a2=aV(ax),a3=aV(ay),a4=aV(az),a5=aV(aA),a6={fromASN:a=>a.toDate(),toASN:a=>new aB({valueDate:a})},a7={fromASN:a=>a.toDate(),toASN:a=>new aC({valueDate:a})},a8={fromASN:()=>null,toASN:()=>new S};function a9(a){switch(a){case bg.Any:return aO;case bg.BitString:return aR;case bg.BmpString:return aX;case bg.Boolean:return aT;case bg.CharacterString:return a5;case bg.Enumerated:return aQ;case bg.GeneralString:return a4;case bg.GeneralizedTime:return a7;case bg.GraphicString:return a2;case bg.IA5String:return a1;case bg.Integer:return aP;case bg.Null:return a8;case bg.NumericString:return aZ;case bg.ObjectIdentifier:return aS;case bg.OctetString:return aU;case bg.PrintableString:return a$;case bg.TeletexString:return a_;case bg.UTCTime:return a6;case bg.UniversalString:return aY;case bg.Utf8String:return aW;case bg.VideotexString:return a0;case bg.VisibleString:return a3;default:return null}}var ba,bb,bc,bd,be,bf,bg,bh,bi=a.i(53194);function bj(a){return"function"==typeof a&&a.prototype?!!a.prototype.toASN&&!!a.prototype.fromASN||bj(a.prototype):!!(a&&"object"==typeof a&&"toASN"in a&&"fromASN"in a)}let bk=new class{constructor(){this.items=new WeakMap}has(a){return this.items.has(a)}get(a,b=!1){let c=this.items.get(a);if(!c)throw Error(`Cannot get schema for '${a.prototype.constructor.name}' target`);if(b&&!c.schema)throw Error(`Schema '${a.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return c}cache(a){let b=this.get(a);b.schema||(b.schema=this.create(a,!0))}createDefault(a){let b={type:bf.Sequence,items:{}},c=this.findParentSchema(a);return c&&(Object.assign(b,c),b.items=Object.assign({},b.items,c.items)),b}create(a,b){let c=this.items.get(a)||this.createDefault(a),d=[];for(let a in c.items){let e,f=c.items[a],g=b?a:"";if("number"==typeof f.type){let a=bg[f.type],b=bi[a];if(!b)throw Error(`Cannot get ASN1 class by name '${a}'`);e=new b({name:g})}else bj(f.type)?e=new f.type().toSchema(g):f.optional?this.get(f.type).type===bf.Choice?e=new bi.Any({name:g}):(e=this.create(f.type,!1)).name=g:e=new bi.Any({name:g});let h=!!f.optional||void 0!==f.defaultValue;if(f.repeated&&(e.name="",e=new("set"===f.repeated?bi.Set:bi.Sequence)({name:"",value:[new bi.Repeated({name:g,value:e})]})),null!==f.context&&void 0!==f.context)if(f.implicit)if("number"==typeof f.type||bj(f.type)){let a=f.repeated?bi.Constructed:bi.Primitive;d.push(new a({name:g,optional:h,idBlock:{tagClass:3,tagNumber:f.context}}))}else{this.cache(f.type);let a=!!f.repeated,b=a?e:this.get(f.type,!0).schema;b="valueBlock"in b?b.valueBlock.value:b.value,d.push(new bi.Constructed({name:a?"":g,optional:h,idBlock:{tagClass:3,tagNumber:f.context},value:b}))}else d.push(new bi.Constructed({optional:h,idBlock:{tagClass:3,tagNumber:f.context},value:[e]}));else e.optional=h,d.push(e)}switch(c.type){case bf.Sequence:return new bi.Sequence({value:d,name:""});case bf.Set:return new bi.Set({value:d,name:""});case bf.Choice:return new bi.Choice({value:d,name:""});default:throw Error("Unsupported ASN1 type in use")}}set(a,b){return this.items.set(a,b),this}findParentSchema(a){let b=Object.getPrototypeOf(a);return b?this.items.get(b)||this.findParentSchema(b):null}},bl=a=>b=>{let c;bk.has(b)?c=bk.get(b):(c=bk.createDefault(b),bk.set(b,c)),Object.assign(c,a)},bm=a=>(b,c)=>{let d;bk.has(b.constructor)?d=bk.get(b.constructor):(d=bk.createDefault(b.constructor),bk.set(b.constructor,d));let e=Object.assign({},a);if("number"==typeof e.type&&!e.converter){let d=a9(a.type);if(!d)throw Error(`Cannot get default converter for property '${c}' of ${b.constructor.name}`);e.converter=d}e.raw=a.raw,d.items[c]=e};class bn extends Error{constructor(){super(...arguments),this.schemas=[]}}class bo{static parse(a,b){let c=bi.fromBER(a);if(c.result.error)throw Error(c.result.error);return this.fromASN(c.result,b)}static fromASN(a,b){try{if(bj(b))return new b().fromASN(a);let c=bk.get(b);bk.cache(b);let d=c.schema,e=this.handleChoiceTypes(a,c,b,d);if(null==e?void 0:e.result)return e.result;(null==e?void 0:e.targetSchema)&&(d=e.targetSchema);let f=this.handleSequenceTypes(a,c,b,d),g=new b;if(function a(b){var c;if(b){let d=Object.getPrototypeOf(b);return(null==(c=null==d?void 0:d.prototype)?void 0:c.constructor)===Array||a(d)}return!1}(b))return this.handleArrayTypes(a,c,b);return this.processSchemaItems(c,f,g),g}catch(a){throw a instanceof bn&&a.schemas.push(b.name),a}}static handleChoiceTypes(a,b,c,d){if(a.constructor===bi.Constructed&&b.type===bf.Choice&&3===a.idBlock.tagClass)for(let d in b.items){let e=b.items[d];if(e.context===a.idBlock.tagNumber&&e.implicit&&"function"==typeof e.type&&bk.has(e.type)){let b=bk.get(e.type);if(b&&b.type===bf.Sequence){let b=new bi.Sequence;if("value"in a.valueBlock&&Array.isArray(a.valueBlock.value)&&"value"in b.valueBlock){b.valueBlock.value=a.valueBlock.value;let f=this.fromASN(b,e.type),g=new c;return g[d]=f,{result:g}}}}}else if(a.constructor===bi.Constructed&&b.type!==bf.Choice){let c=new bi.Constructed({idBlock:{tagClass:3,tagNumber:a.idBlock.tagNumber},value:b.schema.valueBlock.value});for(let c in b.items)delete a[c];return{targetSchema:c}}return null}static handleSequenceTypes(a,b,c,d){if(b.type===bf.Sequence){let b=bi.compareSchema({},a,d);if(!b.verified)throw new bn(`Data does not match to ${c.name} ASN1 schema.${b.result.error?` ${b.result.error}`:""}`);return b}{let b=bi.compareSchema({},a,d);if(!b.verified)throw new bn(`Data does not match to ${c.name} ASN1 schema.${b.result.error?` ${b.result.error}`:""}`);return b}}static processRepeatedField(a,b,c){let d=a.slice(b);if(1===d.length&&"Sequence"===d[0].constructor.name){let a=d[0];a.valueBlock&&a.valueBlock.value&&Array.isArray(a.valueBlock.value)&&(d=a.valueBlock.value)}if("number"!=typeof c.type)return d.filter(a=>a&&a.valueBlock).map(a=>{try{return this.fromASN(a,c.type)}catch{return}}).filter(a=>void 0!==a);{let a=a9(c.type);if(!a)throw Error(`No converter for ASN.1 type ${c.type}`);return d.filter(a=>a&&a.valueBlock).map(b=>{try{return a.fromASN(b)}catch{return}}).filter(a=>void 0!==a)}}static processPrimitiveField(a,b){let c=a9(b.type);if(!c)throw Error(`No converter for ASN.1 type ${b.type}`);return c.fromASN(a)}static isOptionalChoiceField(a){return a.optional&&"function"==typeof a.type&&bk.has(a.type)&&bk.get(a.type).type===bf.Choice}static processOptionalChoiceField(a,b){try{let c=this.fromASN(a,b.type);return{processed:!0,value:c}}catch(a){if(a instanceof bn&&/Wrong values for Choice type/.test(a.message))return{processed:!1};throw a}}static handleArrayTypes(a,b,c){if(!("value"in a.valueBlock&&Array.isArray(a.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let d=b.itemType;if("number"!=typeof d)return c.from(a.valueBlock.value,a=>this.fromASN(a,d));{let b=a9(d);if(!b)throw Error(`Cannot get default converter for array item of ${c.name} ASN1 schema`);return c.from(a.valueBlock.value,a=>b.fromASN(a))}}static processSchemaItems(a,b,c){for(let d in a.items){let e,f=b.result[d];if(!f)continue;let g=a.items[d],h=g.type;(e="number"==typeof h||bj(h)?this.processPrimitiveSchemaItem(f,g,h):this.processComplexSchemaItem(f,g,h))&&"object"==typeof e&&"value"in e&&"raw"in e?(c[d]=e.value,c[`${d}Raw`]=e.raw):c[d]=e}}static processPrimitiveSchemaItem(a,b,c){var d;let e=null!=(d=b.converter)?d:bj(c)?new c:null;if(!e)throw Error("Converter is empty");return b.repeated?this.processRepeatedPrimitiveItem(a,b,e):this.processSinglePrimitiveItem(a,b,c,e)}static processRepeatedPrimitiveItem(a,b,c){if(!b.implicit)return Array.from(a,a=>c.fromASN(a));{let d=new("sequence"===b.repeated?bi.Sequence:bi.Set);d.valueBlock=a.valueBlock;let e=bi.fromBER(d.toBER(!1));if(-1===e.offset)throw Error(`Cannot parse the child item. ${e.result.error}`);if(!("value"in e.result.valueBlock&&Array.isArray(e.result.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");return Array.from(e.result.valueBlock.value,a=>c.fromASN(a))}}static processSinglePrimitiveItem(a,b,c,d){let e=a;if(b.implicit){let a;if(bj(c))a=new c().toSchema("");else{let b=bg[c],d=bi[b];if(!d)throw Error(`Cannot get '${b}' class from asn1js module`);a=new d}a.valueBlock=e.valueBlock,e=bi.fromBER(a.toBER(!1)).result}return d.fromASN(e)}static processComplexSchemaItem(a,b,c){if(b.repeated){if(!Array.isArray(a))throw Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");return Array.from(a,a=>this.fromASN(a,c))}{let d=this.handleImplicitTagging(a,b,c);if(this.isOptionalChoiceField(b))try{return this.fromASN(d,c)}catch(a){if(a instanceof bn&&/Wrong values for Choice type/.test(a.message))return;throw a}{let e=this.fromASN(d,c);return b.raw?{value:e,raw:a.valueBeforeDecodeView}:e}}}static handleImplicitTagging(a,b,c){if(b.implicit&&"number"==typeof b.context){let b=bk.get(c);if(b.type===bf.Sequence){let b=new bi.Sequence;if("value"in a.valueBlock&&Array.isArray(a.valueBlock.value)&&"value"in b.valueBlock)return b.valueBlock.value=a.valueBlock.value,b}else if(b.type===bf.Set){let b=new bi.Set;if("value"in a.valueBlock&&Array.isArray(a.valueBlock.value)&&"value"in b.valueBlock)return b.valueBlock.value=a.valueBlock.value,b}}return a}}class bp{static serialize(a){return a instanceof I?a.toBER(!1):this.toASN(a).toBER(!1)}static toASN(a){let b;if(a&&"object"==typeof a&&bj(a))return a.toASN();if(!(a&&"object"==typeof a))throw TypeError("Parameter 1 should be type of Object.");let c=a.constructor,d=bk.get(c);bk.cache(c);let e=[];if(d.itemType){if(!Array.isArray(a))throw TypeError("Parameter 1 should be type of Array.");if("number"==typeof d.itemType){let b=a9(d.itemType);if(!b)throw Error(`Cannot get default converter for array item of ${c.name} ASN1 schema`);e=a.map(a=>b.toASN(a))}else e=a.map(a=>this.toAsnItem({type:d.itemType},"[]",c,a))}else for(let b in d.items){let f=d.items[b],g=a[b];if(void 0===g||f.defaultValue===g||"object"==typeof f.defaultValue&&"object"==typeof g&&function(a,b){if(!(a&&b)||a.byteLength!==b.byteLength)return!1;let c=new Uint8Array(a),d=new Uint8Array(b);for(let b=0;b<a.byteLength;b++)if(c[b]!==d[b])return!1;return!0}(this.serialize(f.defaultValue),this.serialize(g)))continue;let h=bp.toAsnItem(f,b,c,g);if("number"==typeof f.context)if(f.implicit)if(!f.repeated&&("number"==typeof f.type||bj(f.type))){let a={};a.valueHex=h instanceof S?h.valueBeforeDecodeView:h.valueBlock.toBER(),e.push(new L({optional:f.optional,idBlock:{tagClass:3,tagNumber:f.context},...a}))}else e.push(new P({optional:f.optional,idBlock:{tagClass:3,tagNumber:f.context},value:h.valueBlock.value}));else e.push(new P({optional:f.optional,idBlock:{tagClass:3,tagNumber:f.context},value:[h]}));else f.repeated?e=e.concat(h):e.push(h)}switch(d.type){case bf.Sequence:b=new ah({value:e});break;case bf.Set:b=new ai({value:e});break;case bf.Choice:if(!e[0])throw Error(`Schema '${c.name}' has wrong data. Choice cannot be empty.`);b=e[0]}return b}static toAsnItem(a,b,c,d){let e;if("number"==typeof a.type){let f=a.converter;if(!f)throw Error(`Property '${b}' doesn't have converter for type ${bg[a.type]} in schema '${c.name}'`);if(a.repeated){if(!Array.isArray(d))throw TypeError("Parameter 'objProp' should be type of Array.");let b=Array.from(d,a=>f.toASN(a));e=new("sequence"===a.repeated?ah:ai)({value:b})}else e=f.toASN(d)}else if(a.repeated){if(!Array.isArray(d))throw TypeError("Parameter 'objProp' should be type of Array.");let b=Array.from(d,a=>this.toASN(a));e=new("sequence"===a.repeated?ah:ai)({value:b})}else e=this.toASN(d);return e}}class bq{static serialize(a){return bp.serialize(a)}static parse(a,b){return bo.parse(a,b)}static toString(a){let c=N(b.isBufferSource(a)?b.toArrayBuffer(a):bq.serialize(a));if(-1===c.offset)throw Error(`Cannot decode ASN.1 data. ${c.result.error}`);return c.result.toString()}}function br(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}"function"==typeof SuppressedError&&SuppressedError;class bs extends Error{constructor(a,b){super(b?`${a}. See the inner exception for more details.`:a),this.message=a,this.innerError=b}}class bt extends bs{constructor(a,b,c){super(b,c),this.schema=a}}class bu extends bt{constructor(a,b,c){super(a,`JSON doesn't match to '${a.target.name}' schema. ${b}`,c)}}class bv extends bs{}class bw extends bs{constructor(a,b,c){super(`Cannot serialize by '${a}' schema. ${b}`,c),this.schemaName=a}}class bx extends bu{constructor(a,b,c={}){super(a,"Some keys doesn't match to schema"),this.keys=b,this.errors=c}}function by(a,b){if(!function(a,b){switch(b){case bh.Boolean:return"boolean"==typeof a;case bh.Number:return"number"==typeof a;case bh.String:return"string"==typeof a}return!0}(a,b))throw TypeError(`Value must be ${bh[b]}`)}function bz(a){return a&&a.prototype?!!a.prototype.toJSON&&!!a.prototype.fromJSON||bz(a.prototype):!!(a&&a.toJSON&&a.fromJSON)}(ba=bh||(bh={}))[ba.Any=0]="Any",ba[ba.Boolean=1]="Boolean",ba[ba.Number=2]="Number",ba[ba.String=3]="String";let bA="default",bB=new class{constructor(){this.items=new Map}has(a){return this.items.has(a)||!!this.findParentSchema(a)}get(a){let b=this.items.get(a)||this.findParentSchema(a);if(!b)throw Error("Cannot get schema for current target");return b}create(a){let b={names:{}},c=this.findParentSchema(a);if(c)for(let a in Object.assign(b,c),b.names={},c.names)b.names[a]=Object.assign({},c.names[a]);return b.target=a,b}set(a,b){return this.items.set(a,b),this}findParentSchema(a){let b=a.__proto__;return b?this.items.get(b)||this.findParentSchema(b):null}};class bC{constructor(a){this.pattern=new RegExp(a)}validate(a){let b=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof a)throw new bv("Incoming value must be string");if(!b.exec(a))throw new bv(`Value doesn't match to pattern '${b.toString()}'`)}}class bD{constructor(a=5e-324,b=Number.MAX_VALUE){this.min=a,this.max=b}validate(a){if(by(a,bh.Number),!(this.min<=a&&a<=this.max)){let a=5e-324===this.min?"MIN":this.min,b=this.max===Number.MAX_VALUE?"MAX":this.max;throw new bv(`Value doesn't match to diapason [${a},${b}]`)}}}class bE{constructor(a=5e-324,b=Number.MAX_VALUE){this.min=a,this.max=b}validate(a){if(by(a,bh.Number),!(this.min<a&&a<this.max)){let a=5e-324===this.min?"MIN":this.min,b=this.max===Number.MAX_VALUE?"MAX":this.max;throw new bv(`Value doesn't match to diapason (${a},${b})`)}}}class bF{constructor(a,b,c){this.length=a,this.minLength=b,this.maxLength=c}validate(a){if(void 0!==this.length){if(a.length!==this.length)throw new bv(`Value length must be exactly ${this.length}.`);return}if(void 0!==this.minLength&&a.length<this.minLength)throw new bv(`Value length must be more than ${this.minLength}.`);if(void 0!==this.maxLength&&a.length>this.maxLength)throw new bv(`Value length must be less than ${this.maxLength}.`)}}class bG{constructor(a){this.enumeration=a}validate(a){if(by(a,bh.String),!this.enumeration.includes(a))throw new bv(`Value must be one of ${this.enumeration.map(a=>`'${a}'`).join(", ")}`)}}class bH{static checkValues(a,b){for(let c of Array.isArray(a)?a:[a])for(let d of b.validations)d instanceof bF&&b.repeated?d.validate(a):d.validate(c)}static checkTypes(a,b){if(b.repeated&&!Array.isArray(a))throw TypeError("Value must be Array");if("number"==typeof b.type)for(let c of Array.isArray(a)?a:[a])by(c,b.type)}static getSchemaByName(a,b=bA){return{...a.names[bA],...a.names[b]}}}class bI extends bH{static serialize(a,b,c,d){return JSON.stringify(this.toJSON(a,b),c,d)}static toJSON(a,b={}){let c,d=b.targetSchema,e=b.schemaName||bA;if(bz(a))return a.toJSON();if(Array.isArray(a))for(let d of(c=[],a))c.push(this.toJSON(d,b));else if("object"==typeof a){if(d&&!bB.has(d))throw new bs("Cannot get schema for `targetSchema` param");if(d=d||a.constructor,bB.has(d)){let b=bB.get(d);c={};let f=this.getSchemaByName(b,e);for(let g in f)try{let b,h=f[g],i=a[g];if(h.optional&&void 0===i||void 0!==h.defaultValue&&i===h.defaultValue)continue;if(!h.optional&&void 0===i)throw new bw(d.name,`Property '${g}' is required.`);b="number"==typeof h.type?h.converter?h.repeated?i.map(b=>h.converter.toJSON(b,a)):h.converter.toJSON(i,a):i:h.repeated?i.map(a=>this.toJSON(a,{schemaName:e})):this.toJSON(i,{schemaName:e}),this.checkTypes(b,h),this.checkValues(b,h),c[h.name||g]=b}catch(a){if(a instanceof bw)throw a;throw new bw(b.target.name,`Property '${g}' is wrong. ${a.message}`,a)}}else for(let b in c={},a)c[b]=this.toJSON(a[b],{schemaName:e})}else c=a;return c}}class bJ extends bH{static parse(a,b){let c=JSON.parse(a);return this.fromJSON(c,b)}static fromJSON(a,b){let c=b.targetSchema,d=b.schemaName||bA,e=new c;if(bz(e))return e.fromJSON(a);let f=bB.get(c),g=this.getSchemaByName(f,d),h={};for(let c in b.strictProperty&&!Array.isArray(a)&&bJ.checkStrictProperty(a,g,f),g)try{let h=g[c],i=h.name||c,j=a[i];if(void 0===j&&(h.optional||void 0!==h.defaultValue))continue;if(!h.optional&&void 0===j)throw new bu(f,`Property '${i}' is required.`);if(this.checkTypes(j,h),this.checkValues(j,h),"number"==typeof h.type)h.converter?h.repeated?e[c]=j.map(a=>h.converter.fromJSON(a,e)):e[c]=h.converter.fromJSON(j,e):e[c]=j;else{let a={...b,targetSchema:h.type,schemaName:d};h.repeated?e[c]=j.map(b=>this.fromJSON(b,a)):e[c]=this.fromJSON(j,a)}}catch(a){if(a instanceof bu||(a=new bu(f,`Property '${c}' is wrong. ${a.message}`,a)),b.strictAllKeys)h[c]=a;else throw a}let i=Object.keys(h);if(i.length)throw new bx(f,i,h);return e}static checkStrictProperty(a,b,c){let d=Object.keys(a),e=Object.keys(b),f=[];for(let a of d)-1===e.indexOf(a)&&f.push(a);if(f.length)throw new bx(c,f)}}let bK=(a={})=>(b,c)=>{let d,e,f=`Cannot set type for ${c} property of ${b.constructor.name} schema`;bB.has(b.constructor)?(d=bB.get(b.constructor)).target!==b.constructor&&(d=bB.create(b.constructor),bB.set(b.constructor,d)):(d=bB.create(b.constructor),bB.set(b.constructor,d));let g=Object.assign({type:bh.Any,validations:[]},a);if(e=[],g.pattern&&e.push(new bC(g.pattern)),(g.type===bh.Number||g.type===bh.Any)&&((void 0!==g.minInclusive||void 0!==g.maxInclusive)&&e.push(new bD(g.minInclusive,g.maxInclusive)),(void 0!==g.minExclusive||void 0!==g.maxExclusive)&&e.push(new bE(g.minExclusive,g.maxExclusive)),void 0!==g.enumeration&&e.push(new bG(g.enumeration))),(g.type===bh.String||g.repeated||g.type===bh.Any)&&(void 0!==g.length||void 0!==g.minLength||void 0!==g.maxLength)&&e.push(new bF(g.length,g.minLength,g.maxLength)),g.validations=e,"number"!=typeof g.type&&!bB.has(g.type)&&!bz(g.type))throw Error(`${f}. Assigning type doesn't have schema.`);for(let b of Array.isArray(a.schema)?a.schema:[a.schema||bA])d.names[b]||(d.names[b]={}),d.names[b][c]=g};class bL extends Error{}class bM extends bL{}class bN extends bL{constructor(a){super(`Unsupported operation: ${a?`${a}`:""}`)}}class bO extends bL{}class bP extends bL{constructor(a){super(`${a}: Missing required property`)}}class bQ{static toArrayBuffer(a){let b=a.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return i.FromBase64(b)}static toUint8Array(a){return new Uint8Array(this.toArrayBuffer(a))}static fromBufferSource(a,b){let c,d=i.ToBase64(a),e=0,f=[];for(;e<d.length&&(c=d.slice(e,e+64)).length;)f.push(c),e+=64;let g=b.toUpperCase();return`-----BEGIN ${g}-----
${f.join("\n")}
-----END ${g}-----`}static isPEM(a){return/-----BEGIN .+-----[A-Za-z0-9+/+=\s\n]+-----END .+-----/i.test(a)}static getTagName(a){if(!this.isPEM(a))throw Error("Bad parameter. Incoming data is not right PEM");let b=/-----BEGIN (.+)-----/.exec(a);if(!b)throw Error("Cannot get tag from PEM");return b[1]}static hasTagName(a,b){let c=this.getTagName(a);return b.toLowerCase()===c.toLowerCase()}static isCertificate(a){return this.hasTagName(a,"certificate")}static isCertificateRequest(a){return this.hasTagName(a,"certificate request")}static isCRL(a){return this.hasTagName(a,"x509 crl")}static isPublicKey(a){return this.hasTagName(a,"public key")}}class bR{async digest(...a){return this.checkDigest.apply(this,a),this.onDigest.apply(this,a)}checkDigest(a,b){this.checkAlgorithmName(a)}async onDigest(a,b){throw new bN("digest")}async generateKey(...a){return this.checkGenerateKey.apply(this,a),this.onGenerateKey.apply(this,a)}checkGenerateKey(a,b,c){let d;if(this.checkAlgorithmName(a),this.checkGenerateKeyParams(a),!(c&&c.length))throw TypeError("Usages cannot be empty when creating a key.");d=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(c,d)}checkGenerateKeyParams(a){}async onGenerateKey(a,b,c){throw new bN("generateKey")}async sign(...a){return this.checkSign.apply(this,a),this.onSign.apply(this,a)}checkSign(a,b,c){this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,"sign")}async onSign(a,b,c){throw new bN("sign")}async verify(...a){return this.checkVerify.apply(this,a),this.onVerify.apply(this,a)}checkVerify(a,b,c,d){this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,"verify")}async onVerify(a,b,c,d){throw new bN("verify")}async encrypt(...a){return this.checkEncrypt.apply(this,a),this.onEncrypt.apply(this,a)}checkEncrypt(a,b,c,d={}){this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,d.keyUsage?"encrypt":void 0)}async onEncrypt(a,b,c){throw new bN("encrypt")}async decrypt(...a){return this.checkDecrypt.apply(this,a),this.onDecrypt.apply(this,a)}checkDecrypt(a,b,c,d={}){this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,d.keyUsage?"decrypt":void 0)}async onDecrypt(a,b,c){throw new bN("decrypt")}async deriveBits(...a){return this.checkDeriveBits.apply(this,a),this.onDeriveBits.apply(this,a)}checkDeriveBits(a,b,c,d={}){if(this.checkAlgorithmName(a),this.checkAlgorithmParams(a),this.checkCryptoKey(b,d.keyUsage?"deriveBits":void 0),c%8!=0)throw new bO("length: Is not multiple of 8")}async onDeriveBits(a,b,c){throw new bN("deriveBits")}async exportKey(...a){return this.checkExportKey.apply(this,a),this.onExportKey.apply(this,a)}checkExportKey(a,b){if(this.checkKeyFormat(a),this.checkCryptoKey(b),!b.extractable)throw new bL("key: Is not extractable")}async onExportKey(a,b){throw new bN("exportKey")}async importKey(...a){return this.checkImportKey.apply(this,a),this.onImportKey.apply(this,a)}checkImportKey(a,b,c,d,e){this.checkKeyFormat(a),this.checkKeyData(a,b),this.checkAlgorithmName(c),this.checkImportParams(c),Array.isArray(this.usages)&&this.checkKeyUsages(e,this.usages)}async onImportKey(a,b,c,d,e){throw new bN("importKey")}checkAlgorithmName(a){if(a.name.toLowerCase()!==this.name.toLowerCase())throw new bM("Unrecognized name")}checkAlgorithmParams(a){}checkDerivedKeyParams(a){}checkKeyUsages(a,b){for(let c of a)if(-1===b.indexOf(c))throw TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(a,b){if(this.checkAlgorithmName(a.algorithm),b&&-1===a.usages.indexOf(b))throw new bL("key does not match that of operation")}checkRequiredProperty(a,b){if(!(b in a))throw new bP(b)}checkHashAlgorithm(a,b){for(let c of b)if(c.toLowerCase()===a.name.toLowerCase())return;throw new bO(`hash: Must be one of ${b.join(", ")}`)}checkImportParams(a){}checkKeyFormat(a){switch(a){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(a,c){if(!c)throw TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===a){if(!("object"==typeof c&&"kty"in c))throw TypeError("keyData: Is not JsonWebToken")}else if(!b.isBufferSource(c))throw TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(a){return b.toArrayBuffer(a)}}class bS extends bR{checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"length"),"number"!=typeof a.length)throw TypeError("length: Is not of type Number");switch(a.length){case 128:case 192:case 256:break;default:throw TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(a){this.checkGenerateKeyParams(a)}}class bT extends bS{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"iv"),!(a.iv instanceof ArrayBuffer||ArrayBuffer.isView(a.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==a.iv.byteLength)throw TypeError("iv: Must have length 16 bytes")}}class bU extends bS{constructor(){super(...arguments),this.name="AES-CMAC",this.usages=["sign","verify"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"length"),"number"!=typeof a.length)throw TypeError("length: Is not a Number");if(a.length<1)throw new bO("length: Must be more than 0")}}class bV extends bS{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"counter"),!(a.counter instanceof ArrayBuffer||ArrayBuffer.isView(a.counter)))throw TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==a.counter.byteLength)throw TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(a,"length"),"number"!=typeof a.length)throw TypeError("length: Is not a Number");if(a.length<1)throw new bO("length: Must be more than 0")}}class bW extends bS{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class bX extends bS{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"iv"),!(a.iv instanceof ArrayBuffer||ArrayBuffer.isView(a.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(a.iv.byteLength<1)throw new bO("iv: Must have length more than 0 and less than 2^64 - 1");switch(null!=a.tagLength||(a.tagLength=128),a.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new bO("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class bY extends bS{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}}class bZ extends bR{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(a){if(this.ivSize){if(this.checkRequiredProperty(a,"iv"),!(a.iv instanceof ArrayBuffer||ArrayBuffer.isView(a.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(a.iv.byteLength!==this.ivSize)throw TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"length"),"number"!=typeof a.length)throw TypeError("length: Is not of type Number");if(a.length!==this.keySizeBits)throw new bO(`algorithm.length: Must be ${this.keySizeBits}`)}checkDerivedKeyParams(a){this.checkGenerateKeyParams(a)}}class b$ extends bR{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms),this.checkRequiredProperty(a,"publicExponent"),!(a.publicExponent&&a.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let b=i.ToBase64(a.publicExponent);if("Aw=="!==b&&"AQAB"!==b)throw TypeError("publicExponent: Must be [3] or [1,0,1]");if(this.checkRequiredProperty(a,"modulusLength"),a.modulusLength%8||a.modulusLength<256||a.modulusLength>16384)throw TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}checkImportParams(a){this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms)}}class b_ extends b${constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class b0 extends b${constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"saltLength"),"number"!=typeof a.saltLength)throw TypeError("saltLength: Is not a Number");if(a.saltLength<0)throw RangeError("saltLength: Must be positive number")}}class b1 extends b${constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(a){if(a.label&&!(a.label instanceof ArrayBuffer||ArrayBuffer.isView(a.label)))throw TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}class b2 extends bR{checkGenerateKeyParams(a){this.checkRequiredProperty(a,"namedCurve"),this.checkNamedCurve(a.namedCurve)}checkNamedCurve(a){for(let b of this.namedCurves)if(b.toLowerCase()===a.toLowerCase())return;throw new bO(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}class b3 extends b2{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(a){this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms)}}let b4=["secret","private","public"];class b5{static create(a,b,c,d){let e=new this;return e.algorithm=a,e.type=b,e.extractable=c,e.usages=d,e}static isKeyType(a){return -1!==b4.indexOf(a)}get[Symbol.toStringTag](){return"CryptoKey"}}class b6 extends b2{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"public"),!(a.public instanceof b5))throw TypeError("public: Is not a CryptoKey");if("public"!==a.public.type)throw new bO("public: Is not a public key");if(a.public.algorithm.name!==this.name)throw new bO(`public: Is not ${this.name} key`)}}class b7 extends b6{constructor(){super(...arguments),this.name="ECDH-ES",this.namedCurves=["X25519","X448"]}}class b8 extends b2{constructor(){super(...arguments),this.name="EdDSA",this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["Ed25519","Ed448"]}}let b9=class{constructor(a){a&&(this.value=a)}};br([bm({type:bg.ObjectIdentifier})],b9.prototype,"value",void 0),b9=br([bl({type:bf.Choice})],b9);class ca{constructor(a){Object.assign(this,a)}}br([bm({type:bg.ObjectIdentifier})],ca.prototype,"algorithm",void 0),br([bm({type:bg.Any,optional:!0})],ca.prototype,"parameters",void 0);class cb{constructor(){this.version=0,this.privateKeyAlgorithm=new ca,this.privateKey=new ArrayBuffer(0)}}br([bm({type:bg.Integer})],cb.prototype,"version",void 0),br([bm({type:ca})],cb.prototype,"privateKeyAlgorithm",void 0),br([bm({type:bg.OctetString})],cb.prototype,"privateKey",void 0),br([bm({type:bg.Any,optional:!0})],cb.prototype,"attributes",void 0);class cc{constructor(){this.publicKeyAlgorithm=new ca,this.publicKey=new ArrayBuffer(0)}}br([bm({type:ca})],cc.prototype,"publicKeyAlgorithm",void 0),br([bm({type:bg.BitString})],cc.prototype,"publicKey",void 0);let cd={fromJSON:a=>i.FromBase64Url(a),toJSON:a=>i.ToBase64Url(new Uint8Array(a))},ce={fromASN:a=>new Uint8Array(a.valueBlock.valueHex)[0]?a.valueBlock.valueHex:a.valueBlock.valueHex.slice(1),toASN:a=>new _({valueHex:new Uint8Array(a)[0]>127?j(new Uint8Array([0]).buffer,a):a})};class cf{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}}br([bm({type:bg.Integer,converter:aP})],cf.prototype,"version",void 0),br([bm({type:bg.Integer,converter:ce}),bK({name:"n",converter:cd})],cf.prototype,"modulus",void 0),br([bm({type:bg.Integer,converter:ce}),bK({name:"e",converter:cd})],cf.prototype,"publicExponent",void 0),br([bm({type:bg.Integer,converter:ce}),bK({name:"d",converter:cd})],cf.prototype,"privateExponent",void 0),br([bm({type:bg.Integer,converter:ce}),bK({name:"p",converter:cd})],cf.prototype,"prime1",void 0),br([bm({type:bg.Integer,converter:ce}),bK({name:"q",converter:cd})],cf.prototype,"prime2",void 0),br([bm({type:bg.Integer,converter:ce}),bK({name:"dp",converter:cd})],cf.prototype,"exponent1",void 0),br([bm({type:bg.Integer,converter:ce}),bK({name:"dq",converter:cd})],cf.prototype,"exponent2",void 0),br([bm({type:bg.Integer,converter:ce}),bK({name:"qi",converter:cd})],cf.prototype,"coefficient",void 0),br([bm({type:bg.Any,optional:!0})],cf.prototype,"otherPrimeInfos",void 0);class cg{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}}br([bm({type:bg.Integer,converter:ce}),bK({name:"n",converter:cd})],cg.prototype,"modulus",void 0),br([bm({type:bg.Integer,converter:ce}),bK({name:"e",converter:cd})],cg.prototype,"publicExponent",void 0);let ch=class{constructor(a){this.value=new ArrayBuffer(0),a&&(this.value=a)}toJSON(){let a=new Uint8Array(this.value);if(4!==a[0])throw new bL("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");let b=(a=new Uint8Array(this.value.slice(1))).length/2;return{x:i.ToBase64Url(a.buffer.slice(0,0+b)),y:i.ToBase64Url(a.buffer.slice(0+b,0+b+b))}}fromJSON(a){if(!("x"in a))throw Error("x: Missing required property");if(!("y"in a))throw Error("y: Missing required property");let b=i.FromBase64Url(a.x),c=i.FromBase64Url(a.y),d=j(new Uint8Array([4]).buffer,b,c);return this.value=new Uint8Array(d).buffer,this}};br([bm({type:bg.OctetString})],ch.prototype,"value",void 0),ch=br([bl({type:bf.Choice})],ch);class ci{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(a){if(!("d"in a))throw Error("d: Missing required property");if(this.privateKey=i.FromBase64Url(a.d),"x"in a){let b=new ch;b.fromJSON(a);let c=bp.toASN(b);"valueHex"in c.valueBlock&&(this.publicKey=c.valueBlock.valueHex)}return this}toJSON(){let a={};return a.d=i.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(a,new ch(this.publicKey).toJSON()),a}}br([bm({type:bg.Integer,converter:aP})],ci.prototype,"version",void 0),br([bm({type:bg.OctetString})],ci.prototype,"privateKey",void 0),br([bm({context:0,type:bg.Any,optional:!0})],ci.prototype,"parameters",void 0),br([bm({context:1,type:bg.BitString,optional:!0})],ci.prototype,"publicKey",void 0);let cj={fromASN:a=>{let b=new Uint8Array(a.valueBlock.valueHex);return 0===b[0]?b.buffer.slice(1):b.buffer},toASN:a=>{let b=new Uint8Array(a);if(b[0]>127){let a=new Uint8Array(b.length+1);return a.set(b,1),new _({valueHex:a.buffer})}return new _({valueHex:a})}};var ck=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:cj});class cl{static decodePoint(a,c){let d=b.toUint8Array(a);if(0===d.length||4!==d[0])throw Error("Only uncompressed point format supported");let e=(d.length-1)/2;if(e!==Math.ceil(c/8))throw Error("Point does not match field size");return{x:d.slice(1,e+1),y:d.slice(e+1,e+1+e)}}static encodePoint(a,c){let d=Math.ceil(c/8);if(a.x.byteLength!==d||a.y.byteLength!==d)throw Error("X,Y coordinates don't match point size criteria");let e=b.toUint8Array(a.x),f=b.toUint8Array(a.y),g=new Uint8Array(2*d+1);return g[0]=4,g.set(e,1),g.set(f,d+1),g}static getSize(a){return Math.ceil(a/8)}static encodeSignature(a,c){let d=this.getSize(c),e=b.toUint8Array(a.r),f=b.toUint8Array(a.s),g=new Uint8Array(2*d);return g.set(this.padStart(e,d)),g.set(this.padStart(f,d),d),g}static decodeSignature(a,c){let d=this.getSize(c),e=b.toUint8Array(a);if(e.length!==2*d)throw Error("Incorrect size of the signature");let f=e.slice(0,d),g=e.slice(d);return{r:this.trimStart(f),s:this.trimStart(g)}}static trimStart(a){let b=0;for(;b<a.length-1&&0===a[b];)b++;return 0===b?a:a.slice(b,a.length)}static padStart(a,b){if(b===a.length)return a;let c=new Uint8Array(b);return c.set(a,b-a.length),c}}class cm{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(a){let c=a.byteLength/2,d=cl.decodeSignature(a,8*c),e=new cm;return e.r=b.toArrayBuffer(d.r),e.s=b.toArrayBuffer(d.s),e}toWebCryptoSignature(a){if(!a){let b=Math.max(this.r.byteLength,this.s.byteLength);a=b<=32?256:b<=48?384:521}return cl.encodeSignature(this,a).buffer}}br([bm({type:bg.Integer,converter:cj})],cm.prototype,"r",void 0),br([bm({type:bg.Integer,converter:cj})],cm.prototype,"s",void 0);class cn extends cb{}br([bm({context:1,implicit:!0,type:bg.BitString,optional:!0})],cn.prototype,"publicKey",void 0);let co=class{constructor(){this.value=new ArrayBuffer(0)}fromJSON(a){if(!a.d)throw Error("d: Missing required property");return this.value=i.FromBase64Url(a.d),this}toJSON(){return{d:i.ToBase64Url(this.value)}}};br([bm({type:bg.OctetString})],co.prototype,"value",void 0),co=br([bl({type:bf.Choice})],co);let cp=class{constructor(a){this.value=new ArrayBuffer(0),a&&(this.value=a)}toJSON(){return{x:i.ToBase64Url(this.value)}}fromJSON(a){if(!("x"in a))throw Error("x: Missing required property");return this.value=i.FromBase64Url(a.x),this}};br([bm({type:bg.BitString})],cp.prototype,"value",void 0),cp=br([bl({type:bf.Choice})],cp);let cq=class{};br([bm({type:bg.OctetString}),bK({type:bh.String,converter:cd})],cq.prototype,"d",void 0),cq=br([bl({type:bf.Choice})],cq);let cr="1.2.840.10045.3.1.7",cs="1.3.132.0",ct=`${cs}.34`,cu=`${cs}.35`,cv=`${cs}.10`,cw="1.3.36.3.3.2.8.1.1",cx=`${cw}.1`,cy=`${cw}.2`,cz=`${cw}.3`,cA=`${cw}.4`,cB=`${cw}.5`,cC=`${cw}.6`,cD=`${cw}.7`,cE=`${cw}.8`,cF=`${cw}.9`,cG=`${cw}.10`,cH=`${cw}.11`,cI=`${cw}.12`,cJ=`${cw}.13`,cK=`${cw}.14`;var cL=Object.freeze({__proto__:null,AlgorithmIdentifier:ca,get CurvePrivateKey(){return cq},EcDsaSignature:cm,EcPrivateKey:ci,get EcPublicKey(){return ch},get EdPrivateKey(){return co},get EdPublicKey(){return cp},get ObjectIdentifier(){return b9},OneAsymmetricKey:cn,PrivateKeyInfo:cb,PublicKeyInfo:cc,RsaPrivateKey:cf,RsaPublicKey:cg,converters:ck,idBrainpoolP160r1:cx,idBrainpoolP160t1:cy,idBrainpoolP192r1:cz,idBrainpoolP192t1:cA,idBrainpoolP224r1:cB,idBrainpoolP224t1:cC,idBrainpoolP256r1:cD,idBrainpoolP256t1:cE,idBrainpoolP320r1:cF,idBrainpoolP320t1:cG,idBrainpoolP384r1:cH,idBrainpoolP384t1:cI,idBrainpoolP512r1:cJ,idBrainpoolP512t1:cK,idEd25519:"1.3.101.112",idEd448:"1.3.101.113",idEllipticCurve:cs,idSecp256k1:cv,idSecp256r1:cr,idSecp384r1:ct,idSecp521r1:cu,idVersionOne:cw,idX25519:"1.3.101.110",idX448:"1.3.101.111"});class cM{static register(a){let b=new b9;b.value=a.id;let c=bq.serialize(b);this.items.push({...a,raw:c}),this.names.push(a.name)}static find(a){for(let b of(a=a.toUpperCase(),this.items))if(b.name.toUpperCase()===a||b.id.toUpperCase()===a)return b;return null}static get(a){let b=this.find(a);if(!b)throw Error(`Unsupported EC named curve '${a}'`);return b}}cM.items=[],cM.names=[],cM.register({name:"P-256",id:cr,size:256}),cM.register({name:"P-384",id:ct,size:384}),cM.register({name:"P-521",id:cu,size:521}),cM.register({name:"K-256",id:cv,size:256}),cM.register({name:"brainpoolP160r1",id:cx,size:160}),cM.register({name:"brainpoolP160t1",id:cy,size:160}),cM.register({name:"brainpoolP192r1",id:cz,size:192}),cM.register({name:"brainpoolP192t1",id:cA,size:192}),cM.register({name:"brainpoolP224r1",id:cB,size:224}),cM.register({name:"brainpoolP224t1",id:cC,size:224}),cM.register({name:"brainpoolP256r1",id:cD,size:256}),cM.register({name:"brainpoolP256t1",id:cE,size:256}),cM.register({name:"brainpoolP320r1",id:cF,size:320}),cM.register({name:"brainpoolP320t1",id:cG,size:320}),cM.register({name:"brainpoolP384r1",id:cH,size:384}),cM.register({name:"brainpoolP384t1",id:cI,size:384}),cM.register({name:"brainpoolP512r1",id:cJ,size:512}),cM.register({name:"brainpoolP512t1",id:cK,size:512});class cN extends bR{constructor(){super(...arguments),this.name="X25519",this.usages={privateKey:["deriveKey","deriveBits"],publicKey:[]}}checkAlgorithmParams(a){this.checkRequiredProperty(a,"public")}}class cO extends bR{constructor(){super(...arguments),this.name="Ed25519",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class cP extends bR{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(a){switch(a.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw Error(`Unknown algorithm name '${a}'`)}}checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms),"length"in a){if("number"!=typeof a.length)throw TypeError("length: Is not a Number");if(a.length<1)throw RangeError("length: Number is out of range")}}checkImportParams(a){this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms)}}class cQ extends bR{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms),this.checkRequiredProperty(a,"salt"),!(a.salt instanceof ArrayBuffer||ArrayBuffer.isView(a.salt)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(a,"iterations"),"number"!=typeof a.iterations)throw TypeError("iterations: Is not a Number");if(a.iterations<1)throw TypeError("iterations: Is less than 1")}checkImportKey(a,b,c,d,e,...f){if(super.checkImportKey(a,b,c,d,e,...f),d)throw SyntaxError("extractable: Must be 'false'")}}class cR extends bR{constructor(){super(...arguments),this.name="HKDF",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(a){if(this.checkRequiredProperty(a,"hash"),this.checkHashAlgorithm(a.hash,this.hashAlgorithms),this.checkRequiredProperty(a,"salt"),!b.isBufferSource(a.salt)||(this.checkRequiredProperty(a,"info"),!b.isBufferSource(a.info)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}checkImportKey(a,b,c,d,e,...f){if(super.checkImportKey(a,b,c,d,e,...f),d)throw SyntaxError("extractable: Must be 'false'")}}class cS extends bR{constructor(){super(...arguments),this.usages=[],this.defaultLength=0}digest(...a){return a[0]={length:this.defaultLength,...a[0]},super.digest.apply(this,a)}checkDigest(a,b){super.checkDigest(a,b);let c=a.length||0;if("number"!=typeof c)throw TypeError("length: Is not a Number");if(c<0)throw TypeError("length: Is negative")}}class cT extends cS{constructor(){super(...arguments),this.name="shake128",this.defaultLength=16}}class cU extends cS{constructor(){super(...arguments),this.name="shake256",this.defaultLength=32}}class cV{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){let a=this.getRandomValues(new Uint8Array(16));a[6]=15&a[6]|64,a[8]=63&a[8]|128;let b=i.ToHex(a).toLowerCase();return`${b.substring(0,8)}-${b.substring(8,12)}-${b.substring(12,16)}-${b.substring(16,20)}-${b.substring(20)}`}}class cW{constructor(){this.items={}}get(a){return this.items[a.toLowerCase()]||null}set(a){this.items[a.name.toLowerCase()]=a}removeAt(a){let b=this.get(a.toLowerCase());return b&&delete this.items[a],b}has(a){return!!this.get(a)}get length(){return Object.keys(this.items).length}get algorithms(){let a=[];for(let b in this.items){let c=this.items[b];a.push(c.name)}return a.sort()}}let cX={jwk:["private","public","secret"],pkcs8:["private"],spki:["public"],raw:["secret","public"]},cY=["pkcs8","spki","raw"];class cZ{constructor(){this.providers=new cW}static isHashedAlgorithm(a){return!!a&&"object"==typeof a&&"name"in a&&"hash"in a}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...a){this.checkRequiredArguments(a,2,"digest");let[c,d,...e]=a,f=this.prepareAlgorithm(c),g=b.toArrayBuffer(d),h=this.getProvider(f.name);return await h.digest(f,g,...e)}async generateKey(...a){this.checkRequiredArguments(a,3,"generateKey");let[b,c,d,...e]=a,f=this.prepareAlgorithm(b),g=this.getProvider(f.name);return await g.generateKey({...f,name:g.name},c,d,...e)}async sign(...a){this.checkRequiredArguments(a,3,"sign");let[c,d,e,...f]=a;this.checkCryptoKey(d);let g=this.prepareAlgorithm(c),h=b.toArrayBuffer(e),i=this.getProvider(g.name);return await i.sign({...g,name:i.name},d,h,...f)}async verify(...a){this.checkRequiredArguments(a,4,"verify");let[c,d,e,f,...g]=a;this.checkCryptoKey(d);let h=this.prepareAlgorithm(c),i=b.toArrayBuffer(f),j=b.toArrayBuffer(e),k=this.getProvider(h.name);return await k.verify({...h,name:k.name},d,j,i,...g)}async encrypt(...a){this.checkRequiredArguments(a,3,"encrypt");let[c,d,e,...f]=a;this.checkCryptoKey(d);let g=this.prepareAlgorithm(c),h=b.toArrayBuffer(e),i=this.getProvider(g.name);return await i.encrypt({...g,name:i.name},d,h,{keyUsage:!0},...f)}async decrypt(...a){this.checkRequiredArguments(a,3,"decrypt");let[c,d,e,...f]=a;this.checkCryptoKey(d);let g=this.prepareAlgorithm(c),h=b.toArrayBuffer(e),i=this.getProvider(g.name);return await i.decrypt({...g,name:i.name},d,h,{keyUsage:!0},...f)}async deriveBits(...a){this.checkRequiredArguments(a,3,"deriveBits");let[b,c,d,...e]=a;this.checkCryptoKey(c);let f=this.prepareAlgorithm(b),g=this.getProvider(f.name);return await g.deriveBits({...f,name:g.name},c,d,{keyUsage:!0},...e)}async deriveKey(...a){this.checkRequiredArguments(a,5,"deriveKey");let[b,c,d,e,f,...g]=a,h=this.prepareAlgorithm(d);this.getProvider(h.name).checkDerivedKeyParams(h);let i=this.prepareAlgorithm(b),j=this.getProvider(i.name);j.checkCryptoKey(c,"deriveKey");let k=await j.deriveBits({...i,name:j.name},c,d.length||512,{keyUsage:!1},...g);return this.importKey("raw",k,d,e,f,...g)}async exportKey(...a){this.checkRequiredArguments(a,2,"exportKey");let[b,c,...d]=a;if(this.checkCryptoKey(c),!cX[b])throw TypeError("Invalid keyFormat argument");if(!cX[b].includes(c.type))throw new DOMException("The key is not of the expected type");let e=this.getProvider(c.algorithm.name);return await e.exportKey(b,c,...d)}async importKey(...a){this.checkRequiredArguments(a,5,"importKey");let[c,d,e,f,g,...h]=a,i=this.prepareAlgorithm(e),j=this.getProvider(i.name);if("jwk"===c){if("object"!=typeof d||!d.kty)throw TypeError("Key data must be an object for JWK import")}else if(cY.includes(c)){if(!b.isBufferSource(d))throw TypeError("Key data must be a BufferSource for non-JWK formats")}else throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView or JsonWebKey)'");return j.importKey(c,d,{...i,name:j.name},f,g,...h)}async wrapKey(a,c,d,e,...f){let g=await this.exportKey(a,c,...f);if("jwk"===a){let a=JSON.stringify(g);g=i.FromUtf8String(a)}let h=this.prepareAlgorithm(e),j=b.toArrayBuffer(g),k=this.getProvider(h.name);return k.encrypt({...h,name:k.name},d,j,{keyUsage:!1},...f)}async unwrapKey(a,c,d,e,f,g,h,...j){let k=this.prepareAlgorithm(e),l=b.toArrayBuffer(c),m=this.getProvider(k.name),n=await m.decrypt({...k,name:m.name},d,l,{keyUsage:!1},...j);if("jwk"===a)try{n=JSON.parse(i.ToUtf8String(n))}catch(b){let a=TypeError("wrappedKey: Is not a JSON");throw a.internal=b,a}return this.importKey(a,n,f,g,h,...j)}checkRequiredArguments(a,b,c){if(a.length<b)throw TypeError(`Failed to execute '${c}' on 'SubtleCrypto': ${b} arguments required, but only ${a.length} present`)}prepareAlgorithm(a){if("string"==typeof a)return{name:a};if(cZ.isHashedAlgorithm(a)){let b={...a};return b.hash=this.prepareAlgorithm(a.hash),b}return{...a}}getProvider(a){let b=this.providers.get(a);if(!b)throw new bM("Unrecognized name");return b}checkCryptoKey(a){if(!(a instanceof b5))throw TypeError("Key is not of type 'CryptoKey'")}}var c$=a.i(874),c_=a.i(54799),c0=a.i(5365);let c1={fromJSON:a=>c$.Buffer.from(i.FromBase64Url(a)),toJSON:a=>i.ToBase64Url(a)};class c2 extends b5{constructor(){super(...arguments),this.data=c$.Buffer.alloc(0),this.algorithm={name:""},this.extractable=!1,this.type="secret",this.usages=[],this.kty="oct",this.alg=""}}br([bK({name:"ext",type:bh.Boolean,optional:!0})],c2.prototype,"extractable",void 0),br([bK({name:"key_ops",type:bh.String,repeated:!0,optional:!0})],c2.prototype,"usages",void 0),br([bK({type:bh.String})],c2.prototype,"kty",void 0),br([bK({type:bh.String,optional:!0})],c2.prototype,"alg",void 0);class c3 extends c2{constructor(){super(...arguments),this.kty="oct",this.type="secret"}}class c4 extends c2{}class c5 extends c3{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new bM("Unsupported algorithm name")}}set alg(a){}}br([bK({name:"k",converter:c1})],c5.prototype,"data",void 0);class c6{static async generateKey(a,b,c){let d=new c5;return d.algorithm=a,d.extractable=b,d.usages=c,d.data=c_.default.randomBytes(a.length>>3),d}static async exportKey(a,b){if(!(b instanceof c5))throw Error("key: Is not AesCryptoKey");switch(a.toLowerCase()){case"jwk":return bI.toJSON(b);case"raw":return new Uint8Array(b.data).buffer;default:throw new bO("format: Must be 'jwk' or 'raw'")}}static async importKey(a,b,c,d,e){let f;switch(a.toLowerCase()){case"jwk":f=bJ.fromJSON(b,{targetSchema:c5});break;case"raw":(f=new c5).data=c$.Buffer.from(b);break;default:throw new bO("format: Must be 'jwk' or 'raw'")}switch(f.algorithm=c,f.algorithm.length=f.data.length<<3,f.extractable=d,f.usages=e,f.algorithm.length){case 128:case 192:case 256:break;default:throw new bO("keyData: Is wrong key length")}return f}static async encrypt(a,b,c){switch(a.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(a,b,c$.Buffer.from(c));case"AES-CTR":return this.encryptAesCTR(a,b,c$.Buffer.from(c));case"AES-GCM":return this.encryptAesGCM(a,b,c$.Buffer.from(c));case"AES-KW":return this.encryptAesKW(a,b,c$.Buffer.from(c));case"AES-ECB":return this.encryptAesECB(a,b,c$.Buffer.from(c));default:throw new bO("algorithm: Is not recognized")}}static async decrypt(a,b,c){if(!(b instanceof c5))throw Error("key: Is not AesCryptoKey");switch(a.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(a,b,c$.Buffer.from(c));case"AES-CTR":return this.decryptAesCTR(a,b,c$.Buffer.from(c));case"AES-GCM":return this.decryptAesGCM(a,b,c$.Buffer.from(c));case"AES-KW":return this.decryptAesKW(a,b,c$.Buffer.from(c));case"AES-ECB":return this.decryptAesECB(a,b,c$.Buffer.from(c));default:throw new bO("algorithm: Is not recognized")}}static async encryptAesCBC(a,b,c){let d=c_.default.createCipheriv(`aes-${b.algorithm.length}-cbc`,b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async decryptAesCBC(a,b,c){let d=c_.default.createDecipheriv(`aes-${b.algorithm.length}-cbc`,b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async encryptAesCTR(a,b,c){let d=c_.default.createCipheriv(`aes-${b.algorithm.length}-ctr`,b.data,c$.Buffer.from(a.counter)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async decryptAesCTR(a,b,c){let d=c_.default.createDecipheriv(`aes-${b.algorithm.length}-ctr`,b.data,new Uint8Array(a.counter)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async encryptAesGCM(a,b,c){let d=c_.default.createCipheriv(`aes-${b.algorithm.length}-gcm`,b.data,c$.Buffer.from(a.iv),{authTagLength:(a.tagLength||128)>>3});a.additionalData&&d.setAAD(c$.Buffer.from(a.additionalData));let e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final(),d.getAuthTag()])).buffer}static async decryptAesGCM(a,b,c){let d=(a.tagLength||128)>>3,e=c_.default.createDecipheriv(`aes-${b.algorithm.length}-gcm`,b.data,new Uint8Array(a.iv),{authTagLength:d}),f=c.slice(0,c.length-d),g=c.slice(c.length-d);a.additionalData&&e.setAAD(c$.Buffer.from(a.additionalData)),e.setAuthTag(g);let h=e.update(f);return new Uint8Array(h=c$.Buffer.concat([h,e.final()])).buffer}static async encryptAesKW(a,b,c){let d=c_.default.createCipheriv(`id-aes${b.algorithm.length}-wrap`,b.data,this.AES_KW_IV),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async decryptAesKW(a,b,c){let d=c_.default.createDecipheriv(`id-aes${b.algorithm.length}-wrap`,b.data,this.AES_KW_IV),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async encryptAesECB(a,b,c){let d=c_.default.createCipheriv(`aes-${b.algorithm.length}-ecb`,b.data,new Uint8Array(0)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async decryptAesECB(a,b,c){let d=c_.default.createDecipheriv(`aes-${b.algorithm.length}-ecb`,b.data,new Uint8Array(0)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}}c6.AES_KW_IV=c$.Buffer.from("A6A6A6A6A6A6A6A6","hex");let c7=new WeakMap;function c8(a){let b=c7.get(a);if(!b)throw new bO("Cannot get CryptoKey from secure storage");return b}function c9(a){let b=b5.create(a.algorithm,a.type,a.extractable,a.usages);return Object.freeze(b),c7.set(b,a),b}class da extends bT{async onGenerateKey(a,b,c){return c9(await c6.generateKey({name:this.name,length:a.length},b,c))}async onEncrypt(a,b,c){return c6.encrypt(a,c8(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c6.decrypt(a,c8(b),new Uint8Array(c))}async onExportKey(a,b){return c6.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await c6.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof c5))throw TypeError("key: Is not a AesCryptoKey")}}let db=c$.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),dc=c$.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]);function dd(a){let b=c$.Buffer.alloc(a.length),c=a.length-1;for(let d=0;d<c;d++)b[d]=a[d]<<1,128&a[d+1]&&(b[d]+=1);return b[c]=a[c]<<1,b}function de(a,b){let c=Math.min(a.length,b.length),d=c$.Buffer.alloc(c);for(let e=0;e<c;e++)d[e]=a[e]^b[e];return d}function df(a,b){let c=c_.default.createCipheriv(`aes${a.length<<3}`,a,db),d=c.update(b);return c.final(),d}function dg(a,b){let c=c$.Buffer.alloc(16),d=16*b;return a.copy(c,0,d,d+16),c}class dh extends bU{async onGenerateKey(a,b,c){return c9(await c6.generateKey({name:this.name,length:a.length},b,c))}async onSign(a,b,c){return new Uint8Array(function(a,b){let c,d,e,f,g,h=(f=dd(e=df(a,db)),128&e[0]&&(f=de(f,dc)),g=dd(f),128&f[0]&&(g=de(g,dc)),{subkey1:f,subkey2:g}),i=Math.ceil(b.length/16);0===i?(i=1,c=!1):c=b.length%16==0;let j=i-1;if(c)d=de(dg(b,j),h.subkey1);else{let a,c,e;d=de((a=c$.Buffer.alloc(16),c=16*j,e=b.length,a.fill(0),b.copy(a,0,c,e),a[e-c]=128,a),h.subkey2)}let k=db;for(let c=0;c<j;c++)k=df(a,de(k,dg(b,c)));return df(a,de(d,k))}(c8(b).data,c$.Buffer.from(c))).buffer}async onVerify(a,b,c,d){let e=await this.sign(a,b,d);return 0===c$.Buffer.from(c).compare(c$.Buffer.from(e))}async onExportKey(a,b){return c6.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await c6.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof c5))throw TypeError("key: Is not a AesCryptoKey")}}class di extends bV{async onGenerateKey(a,b,c){return c9(await c6.generateKey({name:this.name,length:a.length},b,c))}async onEncrypt(a,b,c){return c6.encrypt(a,c8(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c6.decrypt(a,c8(b),new Uint8Array(c))}async onExportKey(a,b){return c6.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await c6.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof c5))throw TypeError("key: Is not a AesCryptoKey")}}class dj extends bX{async onGenerateKey(a,b,c){return c9(await c6.generateKey({name:this.name,length:a.length},b,c))}async onEncrypt(a,b,c){return c6.encrypt(a,c8(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c6.decrypt(a,c8(b),new Uint8Array(c))}async onExportKey(a,b){return c6.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await c6.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof c5))throw TypeError("key: Is not a AesCryptoKey")}}class dk extends bY{async onGenerateKey(a,b,c){return c9(await c6.generateKey({name:this.name,length:a.length},b,c))}async onExportKey(a,b){return c6.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await c6.importKey(a,b,{name:c.name},d,e))}async onEncrypt(a,b,c){return c6.encrypt(a,c8(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c6.decrypt(a,c8(b),new Uint8Array(c))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof c5))throw TypeError("key: Is not a AesCryptoKey")}}class dl extends bW{async onGenerateKey(a,b,c){return c9(await c6.generateKey({name:this.name,length:a.length},b,c))}async onEncrypt(a,b,c){return c6.encrypt(a,c8(b),new Uint8Array(c))}async onDecrypt(a,b,c){return c6.decrypt(a,c8(b),new Uint8Array(c))}async onExportKey(a,b){return c6.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await c6.importKey(a,b,{name:c.name},d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof c5))throw TypeError("key: Is not a AesCryptoKey")}}class dm extends c3{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new bM("Unsupported algorithm name")}}set alg(a){}}br([bK({name:"k",converter:c1})],dm.prototype,"data",void 0);class dn{static async generateKey(a,b,c){let d=new dm;return d.algorithm=a,d.extractable=b,d.usages=c,d.data=c_.default.randomBytes(a.length>>3),d}static async exportKey(a,b){switch(a.toLowerCase()){case"jwk":return bI.toJSON(b);case"raw":return new Uint8Array(b.data).buffer;default:throw new bO("format: Must be 'jwk' or 'raw'")}}static async importKey(a,b,c,d,e){let f;switch(a.toLowerCase()){case"jwk":f=bJ.fromJSON(b,{targetSchema:dm});break;case"raw":(f=new dm).data=c$.Buffer.from(b);break;default:throw new bO("format: Must be 'jwk' or 'raw'")}return f.algorithm=c,f.extractable=d,f.usages=e,f}static async encrypt(a,b,c){switch(a.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(a,b,c$.Buffer.from(c));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(a,b,c$.Buffer.from(c));default:throw new bO("algorithm: Is not recognized")}}static async decrypt(a,b,c){if(!(b instanceof dm))throw Error("key: Is not DesCryptoKey");switch(a.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(a,b,c$.Buffer.from(c));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(a,b,c$.Buffer.from(c));default:throw new bO("algorithm: Is not recognized")}}static async encryptDesCBC(a,b,c){let d=c_.default.createCipheriv("des-cbc",b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async decryptDesCBC(a,b,c){let d=c_.default.createDecipheriv("des-cbc",b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async encryptDesEDE3CBC(a,b,c){let d=c_.default.createCipheriv("des-ede3-cbc",b.data,c$.Buffer.from(a.iv)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}static async decryptDesEDE3CBC(a,b,c){let d=c_.default.createDecipheriv("des-ede3-cbc",b.data,new Uint8Array(a.iv)),e=d.update(c);return new Uint8Array(e=c$.Buffer.concat([e,d.final()])).buffer}}class dp extends bZ{constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}async onGenerateKey(a,b,c){return c9(await dn.generateKey({name:this.name,length:this.keySizeBits},b,c))}async onEncrypt(a,b,c){return dn.encrypt(a,c8(b),new Uint8Array(c))}async onDecrypt(a,b,c){return dn.decrypt(a,c8(b),new Uint8Array(c))}async onExportKey(a,b){return dn.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){let f=await dn.importKey(a,b,{name:this.name,length:this.keySizeBits},d,e);if(f.data.length!==this.keySizeBits>>3)throw new bO("keyData: Wrong key size");return c9(f)}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof dm))throw TypeError("key: Is not a DesCryptoKey")}}class dq extends bZ{constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}async onGenerateKey(a,b,c){return c9(await dn.generateKey({name:this.name,length:this.keySizeBits},b,c))}async onEncrypt(a,b,c){return dn.encrypt(a,c8(b),new Uint8Array(c))}async onDecrypt(a,b,c){return dn.decrypt(a,c8(b),new Uint8Array(c))}async onExportKey(a,b){return dn.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){let f=await dn.importKey(a,b,{name:this.name,length:this.keySizeBits},d,e);if(f.data.length!==this.keySizeBits>>3)throw new bO("keyData: Wrong key size");return c9(f)}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof dm))throw TypeError("key: Is not a DesCryptoKey")}}function dr(a){switch(a.name.toUpperCase()){case"RSA-OAEP":{let b=/(\d+)$/.exec(a.hash.name)[1];return`RSA-OAEP${"1"!==b?`-${b}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(a.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(a.hash.name)[1]}`;case"RSA-PKCS1":return"RS1";default:throw new bO("algorithm: Is not recognized")}}class ds extends c4{constructor(){super(...arguments),this.type="private"}getKey(){let a=bo.parse(this.data,cL.PrivateKeyInfo);return bo.parse(a.privateKey,cL.RsaPrivateKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"RSA",alg:dr(this.algorithm),key_ops:this.usages,ext:this.extractable},bI.toJSON(a))}fromJSON(a){let b=bJ.fromJSON(a,{targetSchema:cL.RsaPrivateKey}),c=new cL.PrivateKeyInfo;c.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",c.privateKeyAlgorithm.parameters=null,c.privateKey=bp.serialize(b),this.data=c$.Buffer.from(bp.serialize(c))}}class dt extends c4{constructor(){super(...arguments),this.type="public"}getKey(){let a=bo.parse(this.data,cL.PublicKeyInfo);return bo.parse(a.publicKey,cL.RsaPublicKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"RSA",alg:dr(this.algorithm),key_ops:this.usages,ext:this.extractable},bI.toJSON(a))}fromJSON(a){let b=bJ.fromJSON(a,{targetSchema:cL.RsaPublicKey}),c=new cL.PublicKeyInfo;c.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",c.publicKeyAlgorithm.parameters=null,c.publicKey=bp.serialize(b),this.data=c$.Buffer.from(bp.serialize(c))}}class du{static async generateKey(a,b,c){let d=new ds;d.algorithm=a,d.extractable=b,d.usages=c.filter(a=>-1!==this.privateKeyUsages.indexOf(a));let e=new dt;e.algorithm=a,e.extractable=!0,e.usages=c.filter(a=>-1!==this.publicKeyUsages.indexOf(a));let f=c$.Buffer.concat([c$.Buffer.alloc(4-a.publicExponent.byteLength,0),c$.Buffer.from(a.publicExponent)]).readInt32BE(0),g=c_.default.generateKeyPairSync("rsa",{modulusLength:a.modulusLength,publicExponent:f,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return d.data=g.privateKey,e.data=g.publicKey,{privateKey:d,publicKey:e}}static async exportKey(a,b){switch(a.toLowerCase()){case"jwk":return bI.toJSON(b);case"pkcs8":case"spki":return new Uint8Array(b.data).buffer;default:throw new bO("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(a,b,c,d,e){switch(a.toLowerCase()){case"jwk":if(b.d){let a=bJ.fromJSON(b,{targetSchema:cL.RsaPrivateKey});return this.importPrivateKey(a,c,d,e)}{let a=bJ.fromJSON(b,{targetSchema:cL.RsaPublicKey});return this.importPublicKey(a,c,d,e)}case"spki":{let a=bo.parse(new Uint8Array(b),cL.PublicKeyInfo),f=bo.parse(a.publicKey,cL.RsaPublicKey);return this.importPublicKey(f,c,d,e)}case"pkcs8":{let a=bo.parse(new Uint8Array(b),cL.PrivateKeyInfo),f=bo.parse(a.privateKey,cL.RsaPrivateKey);return this.importPrivateKey(f,c,d,e)}default:throw new bO("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(a,b,c){switch(a.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(a,b,c);default:throw new bO("algorithm: Is not recognized")}}static async verify(a,b,c,d){switch(a.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(a,b,d,c);default:throw new bO("algorithm: Is not recognized")}}static async encrypt(a,b,c){if("RSA-OAEP"===a.name.toUpperCase())return this.encryptOAEP(a,b,c);throw new bO("algorithm: Is not recognized")}static async decrypt(a,b,c){if("RSA-OAEP"===a.name.toUpperCase())return this.decryptOAEP(a,b,c);throw new bO("algorithm: Is not recognized")}static importPrivateKey(a,b,c,d){let e=new cL.PrivateKeyInfo;e.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",e.privateKeyAlgorithm.parameters=null,e.privateKey=bp.serialize(a);let f=new ds;return f.data=c$.Buffer.from(bp.serialize(e)),f.algorithm=Object.assign({},b),f.algorithm.publicExponent=new Uint8Array(a.publicExponent),f.algorithm.modulusLength=a.modulus.byteLength<<3,f.extractable=c,f.usages=d,f}static importPublicKey(a,b,c,d){let e=new cL.PublicKeyInfo;e.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",e.publicKeyAlgorithm.parameters=null,e.publicKey=bp.serialize(a);let f=new dt;return f.data=c$.Buffer.from(bp.serialize(e)),f.algorithm=Object.assign({},b),f.algorithm.publicExponent=new Uint8Array(a.publicExponent),f.algorithm.modulusLength=a.modulus.byteLength<<3,f.extractable=c,f.usages=d,f}static getCryptoAlgorithm(a){switch(a.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new bO("algorithm.hash: Is not recognized")}}static signRsa(a,b,c){let d=this.getCryptoAlgorithm(b.algorithm),e=c_.default.createSign(d);e.update(c$.Buffer.from(c)),b.pem||(b.pem=`-----BEGIN PRIVATE KEY-----
${b.data.toString("base64")}
-----END PRIVATE KEY-----`);let f={key:b.pem};return"RSA-PSS"===a.name.toUpperCase()&&(f.padding=c_.default.constants.RSA_PKCS1_PSS_PADDING,f.saltLength=a.saltLength),new Uint8Array(e.sign(f)).buffer}static verifySSA(a,b,c,d){let e=this.getCryptoAlgorithm(b.algorithm),f=c_.default.createVerify(e);f.update(c$.Buffer.from(c)),b.pem||(b.pem=`-----BEGIN PUBLIC KEY-----
${b.data.toString("base64")}
-----END PUBLIC KEY-----`);let g={key:b.pem};return"RSA-PSS"===a.name.toUpperCase()&&(g.padding=c_.default.constants.RSA_PKCS1_PSS_PADDING,g.saltLength=a.saltLength),f.verify(g,d)}static encryptOAEP(a,b,c){let d={key:`-----BEGIN PUBLIC KEY-----
${b.data.toString("base64")}
-----END PUBLIC KEY-----`,padding:c_.default.constants.RSA_PKCS1_OAEP_PADDING};return a.label,new Uint8Array(c_.default.publicEncrypt(d,c)).buffer}static decryptOAEP(a,b,c){let d={key:`-----BEGIN PRIVATE KEY-----
${b.data.toString("base64")}
-----END PRIVATE KEY-----`,padding:c_.default.constants.RSA_PKCS1_OAEP_PADDING};return a.label,new Uint8Array(c_.default.privateDecrypt(d,c)).buffer}}du.publicKeyUsages=["verify","encrypt","wrapKey"],du.privateKeyUsages=["sign","decrypt","unwrapKey"];class dv extends b_{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(a,b,c){let d=await du.generateKey({...a,name:this.name},b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}async onSign(a,b,c){return du.sign(a,c8(b),new Uint8Array(c))}async onVerify(a,b,c,d){return du.verify(a,c8(b),new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){return du.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await du.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=c8(a);if(!(c instanceof ds||c instanceof dt))throw TypeError("key: Is not RSA CryptoKey")}}class dw extends b0{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(a,b,c){let d=await du.generateKey({...a,name:this.name},b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}async onSign(a,b,c){return du.sign(a,c8(b),new Uint8Array(c))}async onVerify(a,b,c,d){return du.verify(a,c8(b),new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){return du.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await du.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=c8(a);if(!(c instanceof ds||c instanceof dt))throw TypeError("key: Is not RSA CryptoKey")}}class dx{static size(a){switch(a.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw Error("Unrecognized name")}}static getAlgorithmName(a){switch(a.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw Error("Unrecognized name")}}static digest(a,b){let c=this.getAlgorithmName(a);return new Uint8Array(c_.default.createHash(c).update(c$.Buffer.from(b)).digest()).buffer}}class dy extends b1{async onGenerateKey(a,b,c){let d=await du.generateKey({...a,name:this.name},b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}async onEncrypt(a,c,d){let e=c8(c),f=new Uint8Array(d),g=Math.ceil(e.algorithm.modulusLength>>3),h=dx.size(e.algorithm.hash)>>3,i=f.byteLength,j=g-i-2*h-2;if(i>g-2*h-2)throw Error("Data too large");let k=new Uint8Array(g),l=k.subarray(1,h+1),m=k.subarray(h+1);m.set(f,h+j+1);let n=c_.default.createHash(e.algorithm.hash.name.replace("-","")).update(b.toUint8Array(a.label||new Uint8Array(0))).digest();m.set(n,0),m[h+j]=1,c_.default.randomFillSync(l);let o=this.mgf1(e.algorithm.hash,l,m.length);for(let a=0;a<m.length;a++)m[a]^=o[a];let p=this.mgf1(e.algorithm.hash,m,l.length);for(let a=0;a<l.length;a++)l[a]^=p[a];return e.pem||(e.pem=`-----BEGIN PUBLIC KEY-----
${e.data.toString("base64")}
-----END PUBLIC KEY-----`),new Uint8Array(c_.default.publicEncrypt({key:e.pem,padding:c_.default.constants.RSA_NO_PADDING},c$.Buffer.from(k))).buffer}async onDecrypt(a,c,d){let e=c8(c),f=Math.ceil(e.algorithm.modulusLength>>3),g=dx.size(e.algorithm.hash)>>3;if(d.byteLength!==f)throw Error("Bad data");e.pem||(e.pem=`-----BEGIN PRIVATE KEY-----
${e.data.toString("base64")}
-----END PRIVATE KEY-----`);let h=c_.default.privateDecrypt({key:e.pem,padding:c_.default.constants.RSA_NO_PADDING},c$.Buffer.from(d)),i=h[0],j=h.subarray(1,g+1),k=h.subarray(g+1);if(0!==i)throw Error("Decryption failed");let l=this.mgf1(e.algorithm.hash,k,j.length);for(let a=0;a<j.length;a++)j[a]^=l[a];let m=this.mgf1(e.algorithm.hash,j,k.length);for(let a=0;a<k.length;a++)k[a]^=m[a];let n=c_.default.createHash(e.algorithm.hash.name.replace("-","")).update(b.toUint8Array(a.label||new Uint8Array(0))).digest();for(let a=0;a<g;a++)if(n[a]!==k[a])throw Error("Decryption failed");let o=g;for(;o<k.length;o++){let a=k[o];if(1===a)break;if(0!==a)throw Error("Decryption failed")}if(o===k.length)throw Error("Decryption failed");return new Uint8Array(h=k.subarray(o+1)).buffer}async onExportKey(a,b){return du.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await du.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=c8(a);if(!(c instanceof ds||c instanceof dt))throw TypeError("key: Is not RSA CryptoKey")}mgf1(a,b,c=0){let d=dx.size(a)>>3,e=new Uint8Array(c),f=new Uint8Array(4),g=Math.ceil(c/d);for(let c=0;c<g;c++){f[0]=c>>>24,f[1]=c>>>16&255,f[2]=c>>>8&255,f[3]=255&c;let g=e.subarray(c*d),h=c_.default.createHash(a.name.replace("-","")).update(b).update(f).digest();h.length>g.length&&(h=h.subarray(0,g.length)),g.set(h)}return e}}class dz extends bR{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(a,b,c){let d=await du.generateKey({...a,name:this.name},b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}checkGenerateKeyParams(a){if(this.checkRequiredProperty(a,"publicExponent"),!(a.publicExponent&&a.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let b=i.ToBase64(a.publicExponent);if("Aw=="!==b&&"AQAB"!==b)throw TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(a,"modulusLength"),a.modulusLength){case 1024:case 2048:case 4096:break;default:throw TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(a,b,c){let d=this.toCryptoOptions(b),e=c_.default.publicEncrypt(d,new Uint8Array(c));return new Uint8Array(e).buffer}async onDecrypt(a,b,c){let d=this.toCryptoOptions(b),e=c_.default.privateDecrypt(d,new Uint8Array(c));return new Uint8Array(e).buffer}async onExportKey(a,b){return du.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await du.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=c8(a);if(!(c instanceof ds||c instanceof dt))throw TypeError("key: Is not RSA CryptoKey")}toCryptoOptions(a){let b=a.type.toUpperCase();return{key:`-----BEGIN ${b} KEY-----
${c8(a).data.toString("base64")}
-----END ${b} KEY-----`,padding:c_.default.constants.RSA_PKCS1_PADDING}}}let dA={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function dB(a){let b=dA[a];if(!b)throw new bO(`Cannot convert WebCrypto named curve '${a}' to OID`);return b}class dC extends c4{constructor(){super(...arguments),this.type="private"}getKey(){let a=bo.parse(this.data,cL.PrivateKeyInfo);return bo.parse(a.privateKey,cL.EcPrivateKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},bI.toJSON(a))}fromJSON(a){if(!a.crv)throw new bO("Cannot get named curve from JWK. Property 'crv' is required");let b=new cL.PrivateKeyInfo;b.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",b.privateKeyAlgorithm.parameters=bp.serialize(new cL.ObjectIdentifier(dB(a.crv)));let c=bJ.fromJSON(a,{targetSchema:cL.EcPrivateKey});return b.privateKey=bp.serialize(c),this.data=c$.Buffer.from(bp.serialize(b)),this}}class dD extends c4{constructor(){super(...arguments),this.type="public"}getKey(){let a=bo.parse(this.data,cL.PublicKeyInfo);return new cL.EcPublicKey(a.publicKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},bI.toJSON(a))}fromJSON(a){if(!a.crv)throw new bO("Cannot get named curve from JWK. Property 'crv' is required");let b=bJ.fromJSON(a,{targetSchema:cL.EcPublicKey}),c=new cL.PublicKeyInfo;return c.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1",c.publicKeyAlgorithm.parameters=bp.serialize(new cL.ObjectIdentifier(dB(a.crv))),c.publicKey=bp.toASN(b).valueHex,this.data=c$.Buffer.from(bp.serialize(c)),this}}class dE extends bR{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}async onDigest(a,b){return dx.digest(a,b)}}class dF extends bR{constructor(){super(...arguments),this.name="SHA-256",this.usages=[]}async onDigest(a,b){return dx.digest(a,b)}}class dG extends bR{constructor(){super(...arguments),this.name="SHA-384",this.usages=[]}async onDigest(a,b){return dx.digest(a,b)}}class dH extends bR{constructor(){super(...arguments),this.name="SHA-512",this.usages=[]}async onDigest(a,b){return dx.digest(a,b)}}class dI extends bR{constructor(){super(...arguments),this.name="SHA3-256",this.usages=[]}async onDigest(a,b){return dx.digest(a,b)}}class dJ extends bR{constructor(){super(...arguments),this.name="SHA3-384",this.usages=[]}async onDigest(a,b){return dx.digest(a,b)}}class dK extends bR{constructor(){super(...arguments),this.name="SHA3-512",this.usages=[]}async onDigest(a,b){return dx.digest(a,b)}}class dL{static async generateKey(a,b,c){let d=new dC;d.algorithm=a,d.extractable=b,d.usages=c.filter(a=>-1!==this.privateKeyUsages.indexOf(a));let e=new dD;e.algorithm=a,e.extractable=!0,e.usages=c.filter(a=>-1!==this.publicKeyUsages.indexOf(a));let f=c_.default.generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(a.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return d.data=f.privateKey,e.data=f.publicKey,{privateKey:d,publicKey:e}}static async sign(a,b,c){let d=dx.getAlgorithmName(a.hash),e=c_.default.createSign(d);e.update(c$.Buffer.from(c)),b.pem||(b.pem=`-----BEGIN PRIVATE KEY-----
${b.data.toString("base64")}
-----END PRIVATE KEY-----`);let f={key:b.pem},g=e.sign(f),h=bo.parse(g,cL.EcDsaSignature);return cl.encodeSignature(h,cM.get(b.algorithm.namedCurve).size).buffer}static async verify(a,c,d,e){let f=dx.getAlgorithmName(a.hash),g=c_.default.createVerify(f);g.update(c$.Buffer.from(e)),c.pem||(c.pem=`-----BEGIN PUBLIC KEY-----
${c.data.toString("base64")}
-----END PUBLIC KEY-----`);let h={key:c.pem},i=new cL.EcDsaSignature,j=cM.get(c.algorithm.namedCurve),k=cl.decodeSignature(d,j.size);i.r=b.toArrayBuffer(k.r),i.s=b.toArrayBuffer(k.s);let l=c$.Buffer.from(bp.serialize(i));return g.verify(h,l)}static async deriveBits(a,b,c){let d=this.getOpenSSLNamedCurve(b.algorithm.namedCurve),e=c_.default.createECDH(d),f=bo.parse(b.data,cL.PrivateKeyInfo),g=bo.parse(f.privateKey,cL.EcPrivateKey);e.setPrivateKey(c$.Buffer.from(g.privateKey));let h=bo.parse(a.public.data,cL.PublicKeyInfo),i=e.computeSecret(c$.Buffer.from(h.publicKey));return null===c?i:new Uint8Array(i).buffer.slice(0,c>>3)}static async exportKey(a,b){switch(a.toLowerCase()){case"jwk":return bI.toJSON(b);case"pkcs8":case"spki":return new Uint8Array(b.data).buffer;case"raw":return bo.parse(b.data,cL.PublicKeyInfo).publicKey;default:throw new bO("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(a,b,c,d,e){switch(a.toLowerCase()){case"jwk":if(b.d){let a=bJ.fromJSON(b,{targetSchema:cL.EcPrivateKey});return this.importPrivateKey(a,c,d,e)}{let a=bJ.fromJSON(b,{targetSchema:cL.EcPublicKey});return this.importPublicKey(a,c,d,e)}case"raw":{let a=new cL.EcPublicKey(b);return this.importPublicKey(a,c,d,e)}case"spki":{let a=bo.parse(new Uint8Array(b),cL.PublicKeyInfo),f=new cL.EcPublicKey(a.publicKey);return this.assertKeyParameters(a.publicKeyAlgorithm.parameters,c.namedCurve),this.importPublicKey(f,c,d,e)}case"pkcs8":{let a=bo.parse(new Uint8Array(b),cL.PrivateKeyInfo),f=bo.parse(a.privateKey,cL.EcPrivateKey);return this.assertKeyParameters(a.privateKeyAlgorithm.parameters,c.namedCurve),this.importPrivateKey(f,c,d,e)}default:throw new bO("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(a,b){if(!a)throw new bL("Key info doesn't have required parameters");let c="";try{c=bo.parse(a,cL.ObjectIdentifier).value}catch(a){throw new bL("Cannot read key info parameters")}if(dB(b)!==c)throw new bL("Key info parameter doesn't match to named curve")}static async importPrivateKey(a,b,c,d){let e=new cL.PrivateKeyInfo;e.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",e.privateKeyAlgorithm.parameters=bp.serialize(new cL.ObjectIdentifier(dB(b.namedCurve))),e.privateKey=bp.serialize(a);let f=new dC;return f.data=c$.Buffer.from(bp.serialize(e)),f.algorithm=Object.assign({},b),f.extractable=c,f.usages=d,f}static async importPublicKey(a,b,c,d){let e=new cL.PublicKeyInfo;e.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";let f=dB(b.namedCurve);e.publicKeyAlgorithm.parameters=bp.serialize(new cL.ObjectIdentifier(f)),e.publicKey=a.value;let g=new dD;return g.data=c$.Buffer.from(bp.serialize(e)),g.algorithm=Object.assign({},b),g.extractable=c,g.usages=d,g}static getOpenSSLNamedCurve(a){switch(a.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return a}}}dL.publicKeyUsages=["verify"],dL.privateKeyUsages=["sign","deriveKey","deriveBits"];class dM extends b3{constructor(){super(...arguments),this.namedCurves=cM.names,this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(a,b,c){let d=await dL.generateKey({...a,name:this.name},b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}async onSign(a,b,c){return dL.sign(a,c8(b),new Uint8Array(c))}async onVerify(a,b,c,d){return dL.verify(a,c8(b),new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){return dL.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await dL.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=c8(a);if(!(c instanceof dC||c instanceof dD))throw TypeError("key: Is not EC CryptoKey")}}class dN extends b6{constructor(){super(...arguments),this.namedCurves=cM.names}async onGenerateKey(a,b,c){let d=await dL.generateKey({...a,name:this.name},b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}async onExportKey(a,b){return dL.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await dL.importKey(a,b,{...c,name:this.name},d,e))}checkCryptoKey(a,b){super.checkCryptoKey(a,b);let c=c8(a);if(!(c instanceof dC||c instanceof dD))throw TypeError("key: Is not EC CryptoKey")}async onDeriveBits(a,b,c){return await dL.deriveBits({...a,public:c8(a.public)},c8(b),c)}}let dO={[cL.idEd448]:"Ed448",ed448:cL.idEd448,[cL.idX448]:"X448",x448:cL.idX448,[cL.idEd25519]:"Ed25519",ed25519:cL.idEd25519,[cL.idX25519]:"X25519",x25519:cL.idX25519};function dP(a){let b=dO[a.toLowerCase()];if(!b)throw new bO(`Cannot convert WebCrypto named curve '${a}' to OID`);return b}class dQ extends c4{constructor(){super(...arguments),this.type="private"}getKey(){let a=bo.parse(this.data,cL.PrivateKeyInfo);return bo.parse(a.privateKey,cL.CurvePrivateKey)}toJSON(){let a=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},bI.toJSON(a))}fromJSON(a){if(!a.crv)throw new bO("Cannot get named curve from JWK. Property 'crv' is required");let b=new cL.PrivateKeyInfo;b.privateKeyAlgorithm.algorithm=dP(a.crv);let c=bJ.fromJSON(a,{targetSchema:cL.CurvePrivateKey});return b.privateKey=bp.serialize(c),this.data=c$.Buffer.from(bp.serialize(b)),this}}class dR extends c4{constructor(){super(...arguments),this.type="public"}getKey(){return bo.parse(this.data,cL.PublicKeyInfo).publicKey}toJSON(){let a=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},{x:i.ToBase64Url(a)})}fromJSON(a){if(!a.crv)throw new bO("Cannot get named curve from JWK. Property 'crv' is required");if(!a.x)throw new bO("Cannot get property from JWK. Property 'x' is required");let b=new cL.PublicKeyInfo;return b.publicKeyAlgorithm.algorithm=dP(a.crv),b.publicKey=i.FromBase64Url(a.x),this.data=c$.Buffer.from(bp.serialize(b)),this}}class dS{static async generateKey(a,b,c){let d=new dQ;d.algorithm=a,d.extractable=b,d.usages=c.filter(a=>-1!==this.privateKeyUsages.indexOf(a));let e=new dR;e.algorithm=a,e.extractable=!0,e.usages=c.filter(a=>-1!==this.publicKeyUsages.indexOf(a));let f=a.namedCurve.toLowerCase(),g=c_.default.generateKeyPairSync(f,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return d.data=g.privateKey,e.data=g.publicKey,{privateKey:d,publicKey:e}}static async sign(a,c,d){c.pem||(c.pem=`-----BEGIN PRIVATE KEY-----
${c.data.toString("base64")}
-----END PRIVATE KEY-----`);let e={key:c.pem},f=c_.default.sign(null,c$.Buffer.from(d),e);return b.toArrayBuffer(f)}static async verify(a,b,c,d){b.pem||(b.pem=`-----BEGIN PUBLIC KEY-----
${b.data.toString("base64")}
-----END PUBLIC KEY-----`);let e={key:b.pem};return c_.default.verify(null,c$.Buffer.from(d),e,c$.Buffer.from(c))}static async deriveBits(a,b,c){let d=c_.default.createPublicKey({key:a.public.data,format:"der",type:"spki"}),e=c_.default.createPrivateKey({key:b.data,format:"der",type:"pkcs8"});return new Uint8Array(c_.default.diffieHellman({publicKey:d,privateKey:e})).buffer.slice(0,c>>3)}static async exportKey(a,b){switch(a.toLowerCase()){case"jwk":return bI.toJSON(b);case"pkcs8":case"spki":return new Uint8Array(b.data).buffer;case"raw":return bo.parse(b.data,cL.PublicKeyInfo).publicKey;default:throw new bO("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(a,b,c,d,e){switch(a.toLowerCase()){case"jwk":if(b.d){let a=bJ.fromJSON(b,{targetSchema:cL.CurvePrivateKey});return this.importPrivateKey(a,c,d,e)}if(!b.x)throw TypeError("keyData: Cannot get required 'x' filed");return this.importPublicKey(i.FromBase64Url(b.x),c,d,e);case"raw":return this.importPublicKey(b,c,d,e);case"spki":{let a=bo.parse(new Uint8Array(b),cL.PublicKeyInfo);return this.importPublicKey(a.publicKey,c,d,e)}case"pkcs8":{let a=bo.parse(new Uint8Array(b),cL.PrivateKeyInfo),f=bo.parse(a.privateKey,cL.CurvePrivateKey);return this.importPrivateKey(f,c,d,e)}default:throw new bO("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(a,b,c,d){let e=new dQ;return e.fromJSON({crv:b.namedCurve,d:i.ToBase64Url(a.d)}),e.algorithm=Object.assign({},b),e.extractable=c,e.usages=d,e}static async importPublicKey(a,b,c,d){let e=new dR;return e.fromJSON({crv:b.namedCurve,x:i.ToBase64Url(a)}),e.algorithm=Object.assign({},b),e.extractable=c,e.usages=d,e}}dS.publicKeyUsages=["verify"],dS.privateKeyUsages=["sign","deriveKey","deriveBits"];class dT extends b8{async onGenerateKey(a,b,c){let d=await dS.generateKey({name:this.name,namedCurve:a.namedCurve.replace(/^ed/i,"Ed")},b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}async onSign(a,b,c){return dS.sign(a,c8(b),new Uint8Array(c))}async onVerify(a,b,c,d){return dS.verify(a,c8(b),new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){return dS.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await dS.importKey(a,b,{...c,name:this.name},d,e))}}class dU extends b7{async onGenerateKey(a,b,c){let d=await dS.generateKey({name:this.name,namedCurve:a.namedCurve.toUpperCase()},b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}async onDeriveBits(a,b,c){return await dS.deriveBits({...a,public:c8(a.public)},c8(b),c)}async onExportKey(a,b){return dS.exportKey(a,c8(b))}async onImportKey(a,b,c,d,e){return c9(await dS.importKey(a,b,{...c,name:this.name},d,e))}}class dV extends c2{constructor(a,b,c,d){super(),this.algorithm=a,this.extractable=b,this.usages=c,this.data=Buffer.from(d)}toJWK(){return{kty:"OKP",crv:this.algorithm.name,key_ops:this.usages,ext:this.extractable}}}class dW extends dV{constructor(){super(...arguments),this.type="private"}toJWK(){let a=c_.default.createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"}),b=bQ.toUint8Array(this.data.toString()),c=bq.parse(b,cL.PrivateKeyInfo),d=bq.parse(c.privateKey,cL.EdPrivateKey).value;return{...super.toJWK(),...a,d:Buffer.from(new Uint8Array(d)).toString("base64url")}}}class dX extends dV{constructor(){super(...arguments),this.type="public"}toJWK(){let a=c_.default.createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"});return{...super.toJWK(),...a}}}class dY{static async generateKey(a,b,c){let d=a.name.toLowerCase(),e=c_.default.generateKeyPairSync(d,{publicKeyEncoding:{format:"pem",type:"spki"},privateKeyEncoding:{format:"pem",type:"pkcs8"}}),f={name:"ed25519"===d?"Ed25519":"X25519"},g=c.filter(a=>this.privateKeyUsages.includes(a)),h=c.filter(a=>this.publicKeyUsages.includes(a));return{privateKey:new dW(f,b,g,e.privateKey),publicKey:new dX(f,!0,h,e.publicKey)}}static async sign(a,c,d){let e=c_.default.sign(null,Buffer.from(d),c.data);return b.toArrayBuffer(e)}static async verify(a,b,c,d){return c_.default.verify(null,Buffer.from(d),b.data,c)}static async exportKey(a,b){switch(a){case"jwk":return b.toJWK();case"pkcs8":case"spki":return bQ.toArrayBuffer(b.data.toString());case"raw":{let a=b.toJWK();return i.FromBase64Url(a.x)}default:return Promise.reject(new bO("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}static async importKey(a,c,d,e,f){switch(a){case"jwk":if(c.d){let a=new cL.EdPrivateKey;a.value=b.toArrayBuffer(Buffer.from(c.d,"base64url"));let g=new cL.PrivateKeyInfo;g.privateKeyAlgorithm.algorithm="ed25519"===d.name.toLowerCase()?cL.idEd25519:cL.idX25519,g.privateKey=bq.serialize(a);let h=bq.serialize(g);return new dW(d,e,f,bQ.fromBufferSource(h,"PRIVATE KEY"))}if(c.x)return new dX(d,e,f,c_.default.createPublicKey({format:"jwk",key:c}).export({format:"pem",type:"spki"}));throw new bO("keyData: Cannot import JWK. 'd' or 'x' must be presented");case"pkcs8":return new dW(d,e,f,bQ.fromBufferSource(c,"PRIVATE KEY"));case"spki":return new dX(d,e,f,bQ.fromBufferSource(c,"PUBLIC KEY"));case"raw":{let a=c_.default.createPublicKey({format:"jwk",key:{kty:"OKP",crv:"ed25519"===d.name.toLowerCase()?"Ed25519":"X25519",x:i.ToBase64Url(c)}}).export({format:"pem",type:"spki"});return new dX(d,e,f,a)}default:return Promise.reject(new bO("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}}dY.privateKeyUsages=["sign","deriveBits","deriveKey"],dY.publicKeyUsages=["verify"];class dZ extends cO{async onGenerateKey(a,b,c){let d=await dY.generateKey(a,b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}async onSign(a,b,c){let d=c8(b);return dY.sign(a,d,new Uint8Array(c))}onVerify(a,b,c,d){let e=c8(b);return dY.verify(a,e,new Uint8Array(c),new Uint8Array(d))}async onExportKey(a,b){let c=c8(b);return dY.exportKey(a,c)}async onImportKey(a,b,c,d,e){return c9(await dY.importKey(a,b,c,d,e))}}class d$ extends cN{async onGenerateKey(a,b,c){let d=await dY.generateKey(a,b,c);return{privateKey:c9(d.privateKey),publicKey:c9(d.publicKey)}}async onDeriveBits(a,b,c){let d=c8(b),e=c8(a.public),f=c_.default.createPublicKey({key:e.data.toString(),format:"pem",type:"spki"}),g=c_.default.createPrivateKey({key:d.data.toString(),format:"pem",type:"pkcs8"});return new Uint8Array(c_.default.diffieHellman({publicKey:f,privateKey:g})).buffer.slice(0,c>>3)}async onExportKey(a,b){let c=c8(b);return dY.exportKey(a,c)}async onImportKey(a,b,c,d,e){return c9(await dY.importKey(a,b,c,d,e))}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof dV))throw TypeError("key: Is not a Ed25519CryptoKey")}}class d_ extends c2{}class d0 extends cQ{async onDeriveBits(a,c,d){return new Promise((e,f)=>{let g=b.toArrayBuffer(a.salt),h=a.hash.name.replace("-","");c_.default.pbkdf2(c8(c).data,c$.Buffer.from(g),a.iterations,d>>3,h,(a,b)=>{a?f(a):e(new Uint8Array(b).buffer)})})}async onImportKey(a,b,c,d,e){if("raw"===a){let a=new d_;return a.data=c$.Buffer.from(b),a.algorithm={name:this.name},a.extractable=!1,a.usages=e,c9(a)}throw new bO("format: Must be 'raw'")}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof d_))throw TypeError("key: Is not PBKDF CryptoKey")}}class d1 extends c2{get alg(){let a=this.algorithm.hash.name.toUpperCase();return`HS${a.replace("SHA-","")}`}set alg(a){}}br([bK({name:"k",converter:c1})],d1.prototype,"data",void 0);class d2 extends cP{async onGenerateKey(a,b,c){let d=(a.length||this.getDefaultLength(a.hash.name))>>3<<3,e=new d1;return e.algorithm={...a,length:d,name:this.name},e.extractable=b,e.usages=c,e.data=c_.default.randomBytes(d>>3),c9(e)}async onSign(a,b,c){let d=dx.getAlgorithmName(b.algorithm.hash);return new Uint8Array(c_.default.createHmac(d,c8(b).data).update(c$.Buffer.from(c)).digest()).buffer}async onVerify(a,b,c,d){let e=dx.getAlgorithmName(b.algorithm.hash);return 0===c_.default.createHmac(e,c8(b).data).update(c$.Buffer.from(d)).digest().compare(c$.Buffer.from(c))}async onImportKey(a,b,c,d,e){let f;switch(a.toLowerCase()){case"jwk":f=bJ.fromJSON(b,{targetSchema:d1});break;case"raw":(f=new d1).data=c$.Buffer.from(b);break;default:throw new bO("format: Must be 'jwk' or 'raw'")}return f.algorithm={hash:{name:c.hash.name},name:this.name,length:f.data.length<<3},f.extractable=d,f.usages=e,c9(f)}async onExportKey(a,b){switch(a.toLowerCase()){case"jwk":return bI.toJSON(c8(b));case"raw":return new Uint8Array(c8(b).data).buffer;default:throw new bO("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof d1))throw TypeError("key: Is not HMAC CryptoKey")}}class d3 extends c2{}class d4 extends cR{async onImportKey(a,b,c,d,e){if("raw"!==a.toLowerCase())throw new bO("Operation not supported");let f=new d3;return f.data=c$.Buffer.from(b),f.algorithm={name:this.name},f.extractable=d,f.usages=e,c9(f)}async onDeriveBits(a,c,d){let e=a.hash.name.replace("-",""),f=c_.default.createHash(e).digest().length,g=d/8,h=b.toUint8Array(a.info),i=c_.default.createHmac(e,b.toUint8Array(a.salt)).update(b.toUint8Array(c8(c).data)).digest(),j=[c$.Buffer.alloc(0)],k=Math.ceil(g/f)+1;for(let a=1;a<k;++a)j.push(c_.default.createHmac(e,i).update(c$.Buffer.concat([j[a-1],h,c$.Buffer.from([a])])).digest());return c$.Buffer.concat(j).slice(0,g)}checkCryptoKey(a,b){if(super.checkCryptoKey(a,b),!(c8(a)instanceof d3))throw TypeError("key: Is not HKDF CryptoKey")}}class d5{static digest(a,b){return new Uint8Array(c_.default.createHash(a.name.toLowerCase(),{outputLength:a.length}).update(c$.Buffer.from(b)).digest()).buffer}}class d6 extends cT{async onDigest(a,b){return d5.digest(a,b)}}class d7 extends cU{async onDigest(a,b){return d5.digest(a,b)}}class d8 extends cZ{constructor(){var a;super(),this.providers.set(new da),this.providers.set(new di),this.providers.set(new dj),this.providers.set(new dh),this.providers.set(new dk),this.providers.set(new dl),c_.default.getCiphers().includes("des-cbc")&&this.providers.set(new dp),this.providers.set(new dq),this.providers.set(new dv),this.providers.set(new dw),this.providers.set(new dy),this.providers.set(new dz),this.providers.set(new dM),this.providers.set(new dN),this.providers.set(new dE),this.providers.set(new dF),this.providers.set(new dG),this.providers.set(new dH),this.providers.set(new d0),this.providers.set(new d2),this.providers.set(new d4);const b=null==(a=/^v(\d+)/.exec(c0.version))?void 0:a[1];b&&parseInt(b,10)>=12&&(this.providers.set(new d6),this.providers.set(new d7));const c=c_.default.getHashes();c.includes("sha3-256")&&this.providers.set(new dI),c.includes("sha3-384")&&this.providers.set(new dJ),c.includes("sha3-512")&&this.providers.set(new dK),b&&parseInt(b,10)>=14&&(this.providers.set(new dT),this.providers.set(new dU),this.providers.set(new dZ),this.providers.set(new d$))}}class d9 extends cV{constructor(){super(...arguments),this.subtle=new d8}getRandomValues(a){if(!ArrayBuffer.isView(a))throw TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'");let b=c$.Buffer.from(a.buffer,a.byteOffset,a.byteLength);return c_.default.randomFillSync(b),a}}a.s(["Crypto",()=>d9],40111),a.i(40111),a.s(["Crypto",()=>d9,"CryptoKey",()=>b5],72612)},61283,(a,b,c)=>{"use strict";c.byteLength=function(a){var b=j(a),c=b[0],d=b[1];return(c+d)*3/4-d},c.toByteArray=function(a){var b,c,d=j(a),g=d[0],h=d[1],i=new f((g+h)*3/4-h),k=0,l=h>0?g-4:g;for(c=0;c<l;c+=4)b=e[a.charCodeAt(c)]<<18|e[a.charCodeAt(c+1)]<<12|e[a.charCodeAt(c+2)]<<6|e[a.charCodeAt(c+3)],i[k++]=b>>16&255,i[k++]=b>>8&255,i[k++]=255&b;return 2===h&&(b=e[a.charCodeAt(c)]<<2|e[a.charCodeAt(c+1)]>>4,i[k++]=255&b),1===h&&(b=e[a.charCodeAt(c)]<<10|e[a.charCodeAt(c+1)]<<4|e[a.charCodeAt(c+2)]>>2,i[k++]=b>>8&255,i[k++]=255&b),i},c.fromByteArray=function(a){for(var b,c=a.length,e=c%3,f=[],g=0,h=c-e;g<h;g+=16383)f.push(function(a,b,c){for(var e,f=[],g=b;g<c;g+=3)e=(a[g]<<16&0xff0000)+(a[g+1]<<8&65280)+(255&a[g+2]),f.push(d[e>>18&63]+d[e>>12&63]+d[e>>6&63]+d[63&e]);return f.join("")}(a,g,g+16383>h?h:g+16383));return 1===e?f.push(d[(b=a[c-1])>>2]+d[b<<4&63]+"=="):2===e&&f.push(d[(b=(a[c-2]<<8)+a[c-1])>>10]+d[b>>4&63]+d[b<<2&63]+"="),f.join("")};for(var d=[],e=[],f="u">typeof Uint8Array?Uint8Array:Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,i=g.length;h<i;++h)d[h]=g[h],e[g.charCodeAt(h)]=h;function j(a){var b=a.length;if(b%4>0)throw Error("Invalid string. Length must be a multiple of 4");var c=a.indexOf("=");-1===c&&(c=b);var d=c===b?0:4-c%4;return[c,d]}e[45]=62,e[95]=63},3906,(a,b,c)=>{c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=5960464477539062e-23*(23===e),n=d?0:f-1,o=d?1:-1,p=+(b<0||0===b&&1/b<0);for(isNaN(b=Math.abs(b))||b===1/0?(h=+!!isNaN(b),g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),g+l>=1?b+=m/i:b+=m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},32612,(a,b,c)=>{"use strict";let d=a.r(61283),e=a.r(3906),f="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function g(a){if(a>0x7fffffff)throw RangeError('The value "'+a+'" is invalid for option "size"');let b=new Uint8Array(a);return Object.setPrototypeOf(b,h.prototype),b}function h(a,b,c){if("number"==typeof a){if("string"==typeof b)throw TypeError('The "string" argument must be of type string. Received type number');return k(a)}return i(a,b,c)}function i(a,b,c){if("string"==typeof a){var d=a,e=b;if(("string"!=typeof e||""===e)&&(e="utf8"),!h.isEncoding(e))throw TypeError("Unknown encoding: "+e);let c=0|o(d,e),f=g(c),i=f.write(d,e);return i!==c&&(f=f.slice(0,i)),f}if(ArrayBuffer.isView(a)){var f=a;if(L(f,Uint8Array)){let a=new Uint8Array(f);return m(a.buffer,a.byteOffset,a.byteLength)}return l(f)}if(null==a)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);if(L(a,ArrayBuffer)||a&&L(a.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(L(a,SharedArrayBuffer)||a&&L(a.buffer,SharedArrayBuffer)))return m(a,b,c);if("number"==typeof a)throw TypeError('The "value" argument must not be of type number. Received type number');let i=a.valueOf&&a.valueOf();if(null!=i&&i!==a)return h.from(i,b,c);let j=function(a){if(h.isBuffer(a)){let b=0|n(a.length),c=g(b);return 0===c.length||a.copy(c,0,0,b),c}return void 0!==a.length?"number"!=typeof a.length||function(a){return a!=a}(a.length)?g(0):l(a):"Buffer"===a.type&&Array.isArray(a.data)?l(a.data):void 0}(a);if(j)return j;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof a[Symbol.toPrimitive])return h.from(a[Symbol.toPrimitive]("string"),b,c);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a)}function j(a){if("number"!=typeof a)throw TypeError('"size" argument must be of type number');if(a<0)throw RangeError('The value "'+a+'" is invalid for option "size"')}function k(a){return j(a),g(a<0?0:0|n(a))}function l(a){let b=a.length<0?0:0|n(a.length),c=g(b);for(let d=0;d<b;d+=1)c[d]=255&a[d];return c}function m(a,b,c){let d;if(b<0||a.byteLength<b)throw RangeError('"offset" is outside of buffer bounds');if(a.byteLength<b+(c||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(d=void 0===b&&void 0===c?new Uint8Array(a):void 0===c?new Uint8Array(a,b):new Uint8Array(a,b,c),h.prototype),d}function n(a){if(a>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|a}function o(a,b){if(h.isBuffer(a))return a.length;if(ArrayBuffer.isView(a)||L(a,ArrayBuffer))return a.byteLength;if("string"!=typeof a)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof a);let c=a.length,d=arguments.length>2&&!0===arguments[2];if(!d&&0===c)return 0;let e=!1;for(;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return I(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return J(a).length;default:if(e)return d?-1:I(a).length;b=(""+b).toLowerCase(),e=!0}}function p(a,b,c){let e=!1;if((void 0===b||b<0)&&(b=0),b>this.length||((void 0===c||c>this.length)&&(c=this.length),c<=0||(c>>>=0)<=(b>>>=0)))return"";for(a||(a="utf8");;)switch(a){case"hex":return function(a,b,c){let d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);let e="";for(let d=b;d<c;++d)e+=M[a[d]];return e}(this,b,c);case"utf8":case"utf-8":return t(this,b,c);case"ascii":return function(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}(this,b,c);case"latin1":case"binary":return function(a,b,c){let d="";c=Math.min(a.length,c);for(let e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}(this,b,c);case"base64":var f,g,h;return f=this,g=b,h=c,0===g&&h===f.length?d.fromByteArray(f):d.fromByteArray(f.slice(g,h));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(a,b,c){let d=a.slice(b,c),e="";for(let a=0;a<d.length-1;a+=2)e+=String.fromCharCode(d[a]+256*d[a+1]);return e}(this,b,c);default:if(e)throw TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),e=!0}}function q(a,b,c){let d=a[b];a[b]=a[c],a[c]=d}function r(a,b,c,d,e){var f;if(0===a.length)return -1;if("string"==typeof c?(d=c,c=0):c>0x7fffffff?c=0x7fffffff:c<-0x80000000&&(c=-0x80000000),(f=c*=1)!=f&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length)if(e)return -1;else c=a.length-1;else if(c<0)if(!e)return -1;else c=0;if("string"==typeof b&&(b=h.from(b,d)),h.isBuffer(b))return 0===b.length?-1:s(a,b,c,d,e);if("number"==typeof b){if(b&=255,"function"==typeof Uint8Array.prototype.indexOf)if(e)return Uint8Array.prototype.indexOf.call(a,b,c);else return Uint8Array.prototype.lastIndexOf.call(a,b,c);return s(a,[b],c,d,e)}throw TypeError("val must be string, number or Buffer")}function s(a,b,c,d,e){let f,g=1,h=a.length,i=b.length;if(void 0!==d&&("ucs2"===(d=String(d).toLowerCase())||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return -1;g=2,h/=2,i/=2,c/=2}function j(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}if(e){let d=-1;for(f=c;f<h;f++)if(j(a,f)===j(b,-1===d?0:f-d)){if(-1===d&&(d=f),f-d+1===i)return d*g}else -1!==d&&(f-=f-d),d=-1}else for(c+i>h&&(c=h-i),f=c;f>=0;f--){let c=!0;for(let d=0;d<i;d++)if(j(a,f+d)!==j(b,d)){c=!1;break}if(c)return f}return -1}function t(a,b,c){c=Math.min(a.length,c);let d=[],e=b;for(;e<c;){let b=a[e],f=null,g=b>239?4:b>223?3:b>191?2:1;if(e+g<=c){let c,d,h,i;switch(g){case 1:b<128&&(f=b);break;case 2:(192&(c=a[e+1]))==128&&(i=(31&b)<<6|63&c)>127&&(f=i);break;case 3:c=a[e+1],d=a[e+2],(192&c)==128&&(192&d)==128&&(i=(15&b)<<12|(63&c)<<6|63&d)>2047&&(i<55296||i>57343)&&(f=i);break;case 4:c=a[e+1],d=a[e+2],h=a[e+3],(192&c)==128&&(192&d)==128&&(192&h)==128&&(i=(15&b)<<18|(63&c)<<12|(63&d)<<6|63&h)>65535&&i<1114112&&(f=i)}}null===f?(f=65533,g=1):f>65535&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|1023&f),d.push(f),e+=g}var f=d;let g=f.length;if(g<=4096)return String.fromCharCode.apply(String,f);let h="",i=0;for(;i<g;)h+=String.fromCharCode.apply(String,f.slice(i,i+=4096));return h}function u(a,b,c){if(a%1!=0||a<0)throw RangeError("offset is not uint");if(a+b>c)throw RangeError("Trying to access beyond buffer length")}function v(a,b,c,d,e,f){if(!h.isBuffer(a))throw TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw RangeError('"value" argument is out of bounds');if(c+d>a.length)throw RangeError("Index out of range")}function w(a,b,c,d,e){E(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f,f>>=8,a[c++]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,g>>=8,a[c++]=g,c}function x(a,b,c,d,e){E(b,d,e,a,c,7);let f=Number(b&BigInt(0xffffffff));a[c+7]=f,f>>=8,a[c+6]=f,f>>=8,a[c+5]=f,f>>=8,a[c+4]=f;let g=Number(b>>BigInt(32)&BigInt(0xffffffff));return a[c+3]=g,g>>=8,a[c+2]=g,g>>=8,a[c+1]=g,g>>=8,a[c]=g,c+8}function y(a,b,c,d,e,f){if(c+d>a.length||c<0)throw RangeError("Index out of range")}function z(a,b,c,d,f){return b*=1,c>>>=0,f||y(a,b,c,4,34028234663852886e22,-34028234663852886e22),e.write(a,b,c,d,23,4),c+4}function A(a,b,c,d,f){return b*=1,c>>>=0,f||y(a,b,c,8,17976931348623157e292,-17976931348623157e292),e.write(a,b,c,d,52,8),c+8}c.Buffer=h,c.SlowBuffer=function(a){return+a!=a&&(a=0),h.alloc(+a)},c.INSPECT_MAX_BYTES=50,c.kMaxLength=0x7fffffff,h.TYPED_ARRAY_SUPPORT=function(){try{let a=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(a,b),42===a.foo()}catch(a){return!1}}(),!h.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(a,b,c){return i(a,b,c)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(a,b,c){return(j(a),a<=0)?g(a):void 0!==b?"string"==typeof c?g(a).fill(b,c):g(a).fill(b):g(a)},h.allocUnsafe=function(a){return k(a)},h.allocUnsafeSlow=function(a){return k(a)},h.isBuffer=function(a){return null!=a&&!0===a._isBuffer&&a!==h.prototype},h.compare=function(a,b){if(L(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),L(b,Uint8Array)&&(b=h.from(b,b.offset,b.byteLength)),!h.isBuffer(a)||!h.isBuffer(b))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===b)return 0;let c=a.length,d=b.length;for(let e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e],d=b[e];break}return c<d?-1:+(d<c)},h.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(a,b){let c;if(!Array.isArray(a))throw TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);if(void 0===b)for(c=0,b=0;c<a.length;++c)b+=a[c].length;let d=h.allocUnsafe(b),e=0;for(c=0;c<a.length;++c){let b=a[c];if(L(b,Uint8Array))e+b.length>d.length?(h.isBuffer(b)||(b=h.from(b)),b.copy(d,e)):Uint8Array.prototype.set.call(d,b,e);else if(h.isBuffer(b))b.copy(d,e);else throw TypeError('"list" argument must be an Array of Buffers');e+=b.length}return d},h.byteLength=o,h.prototype._isBuffer=!0,h.prototype.swap16=function(){let a=this.length;if(a%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<a;b+=2)q(this,b,b+1);return this},h.prototype.swap32=function(){let a=this.length;if(a%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<a;b+=4)q(this,b,b+3),q(this,b+1,b+2);return this},h.prototype.swap64=function(){let a=this.length;if(a%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<a;b+=8)q(this,b,b+7),q(this,b+1,b+6),q(this,b+2,b+5),q(this,b+3,b+4);return this},h.prototype.toString=function(){let a=this.length;return 0===a?"":0==arguments.length?t(this,0,a):p.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(a){if(!h.isBuffer(a))throw TypeError("Argument must be a Buffer");return this===a||0===h.compare(this,a)},h.prototype.inspect=function(){let a="",b=c.INSPECT_MAX_BYTES;return a=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(a+=" ... "),"<Buffer "+a+">"},f&&(h.prototype[f]=h.prototype.inspect),h.prototype.compare=function(a,b,c,d,e){if(L(a,Uint8Array)&&(a=h.from(a,a.offset,a.byteLength)),!h.isBuffer(a))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(void 0===b&&(b=0),void 0===c&&(c=a?a.length:0),void 0===d&&(d=0),void 0===e&&(e=this.length),b<0||c>a.length||d<0||e>this.length)throw RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return -1;if(b>=c)return 1;if(b>>>=0,c>>>=0,d>>>=0,e>>>=0,this===a)return 0;let f=e-d,g=c-b,i=Math.min(f,g),j=this.slice(d,e),k=a.slice(b,c);for(let a=0;a<i;++a)if(j[a]!==k[a]){f=j[a],g=k[a];break}return f<g?-1:+(g<f)},h.prototype.includes=function(a,b,c){return -1!==this.indexOf(a,b,c)},h.prototype.indexOf=function(a,b,c){return r(this,a,b,c,!0)},h.prototype.lastIndexOf=function(a,b,c){return r(this,a,b,c,!1)},h.prototype.write=function(a,b,c,d){var e,f,g,h,i,j,k,l;if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b>>>=0,isFinite(c)?(c>>>=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let m=this.length-b;if((void 0===c||c>m)&&(c=m),a.length>0&&(c<0||b<0)||b>this.length)throw RangeError("Attempt to write outside buffer bounds");d||(d="utf8");let n=!1;for(;;)switch(d){case"hex":return function(a,b,c,d){let e;c=Number(c)||0;let f=a.length-c;d?(d=Number(d))>f&&(d=f):d=f;let g=b.length;for(d>g/2&&(d=g/2),e=0;e<d;++e){var h;let d=parseInt(b.substr(2*e,2),16);if((h=d)!=h)break;a[c+e]=d}return e}(this,a,b,c);case"utf8":case"utf-8":return e=b,f=c,K(I(a,this.length-e),this,e,f);case"ascii":case"latin1":case"binary":return g=b,h=c,K(function(a){let b=[];for(let c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}(a),this,g,h);case"base64":return i=b,j=c,K(J(a),this,i,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k=b,l=c,K(function(a,b){let c,d,e=[];for(let f=0;f<a.length&&!((b-=2)<0);++f)d=(c=a.charCodeAt(f))>>8,e.push(c%256),e.push(d);return e}(a,this.length-k),this,k,l);default:if(n)throw TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),n=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},h.prototype.slice=function(a,b){let c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c)<0&&(a=0):a>c&&(a=c),b<0?(b+=c)<0&&(b=0):b>c&&(b=c),b<a&&(b=a);let d=this.subarray(a,b);return Object.setPrototypeOf(d,h.prototype),d},h.prototype.readUintLE=h.prototype.readUIntLE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d},h.prototype.readUintBE=h.prototype.readUIntBE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=this[a+--b],e=1;for(;b>0&&(e*=256);)d+=this[a+--b]*e;return d},h.prototype.readUint8=h.prototype.readUInt8=function(a,b){return a>>>=0,b||u(a,1,this.length),this[a]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(a,b){return a>>>=0,b||u(a,2,this.length),this[a]|this[a+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(a,b){return a>>>=0,b||u(a,2,this.length),this[a]<<8|this[a+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(a,b){return a>>>=0,b||u(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+0x1000000*this[a+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(a,b){return a>>>=0,b||u(a,4,this.length),0x1000000*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},h.prototype.readBigUInt64LE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&G(a,this.length-8);let d=b+256*this[++a]+65536*this[++a]+0x1000000*this[++a],e=this[++a]+256*this[++a]+65536*this[++a]+0x1000000*c;return BigInt(d)+(BigInt(e)<<BigInt(32))}),h.prototype.readBigUInt64BE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];(void 0===b||void 0===c)&&G(a,this.length-8);let d=0x1000000*b+65536*this[++a]+256*this[++a]+this[++a],e=0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c;return(BigInt(d)<<BigInt(32))+BigInt(e)}),h.prototype.readIntLE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=this[a],e=1,f=0;for(;++f<b&&(e*=256);)d+=this[a+f]*e;return d>=(e*=128)&&(d-=Math.pow(2,8*b)),d},h.prototype.readIntBE=function(a,b,c){a>>>=0,b>>>=0,c||u(a,b,this.length);let d=b,e=1,f=this[a+--d];for(;d>0&&(e*=256);)f+=this[a+--d]*e;return f>=(e*=128)&&(f-=Math.pow(2,8*b)),f},h.prototype.readInt8=function(a,b){return(a>>>=0,b||u(a,1,this.length),128&this[a])?-((255-this[a]+1)*1):this[a]},h.prototype.readInt16LE=function(a,b){a>>>=0,b||u(a,2,this.length);let c=this[a]|this[a+1]<<8;return 32768&c?0xffff0000|c:c},h.prototype.readInt16BE=function(a,b){a>>>=0,b||u(a,2,this.length);let c=this[a+1]|this[a]<<8;return 32768&c?0xffff0000|c:c},h.prototype.readInt32LE=function(a,b){return a>>>=0,b||u(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},h.prototype.readInt32BE=function(a,b){return a>>>=0,b||u(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},h.prototype.readBigInt64LE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&G(a,this.length-8),(BigInt(this[a+4]+256*this[a+5]+65536*this[a+6]+(c<<24))<<BigInt(32))+BigInt(b+256*this[++a]+65536*this[++a]+0x1000000*this[++a])}),h.prototype.readBigInt64BE=N(function(a){F(a>>>=0,"offset");let b=this[a],c=this[a+7];return(void 0===b||void 0===c)&&G(a,this.length-8),(BigInt((b<<24)+65536*this[++a]+256*this[++a]+this[++a])<<BigInt(32))+BigInt(0x1000000*this[++a]+65536*this[++a]+256*this[++a]+c)}),h.prototype.readFloatLE=function(a,b){return a>>>=0,b||u(a,4,this.length),e.read(this,a,!0,23,4)},h.prototype.readFloatBE=function(a,b){return a>>>=0,b||u(a,4,this.length),e.read(this,a,!1,23,4)},h.prototype.readDoubleLE=function(a,b){return a>>>=0,b||u(a,8,this.length),e.read(this,a,!0,52,8)},h.prototype.readDoubleBE=function(a,b){return a>>>=0,b||u(a,8,this.length),e.read(this,a,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;v(this,a,b,c,d,0)}let e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(a,b,c,d){if(a*=1,b>>>=0,c>>>=0,!d){let d=Math.pow(2,8*c)-1;v(this,a,b,c,d,0)}let e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},h.prototype.writeUint8=h.prototype.writeUInt8=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,1,255,0),this[b]=255&a,b+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,65535,0),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,65535,0),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0xffffffff,0),this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a,b+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0xffffffff,0),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigUInt64LE=N(function(a,b=0){return w(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=N(function(a,b=0){return x(this,a,b,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);v(this,a,b,c,d-1,-d)}let e=0,f=1,g=0;for(this[b]=255&a;++e<c&&(f*=256);)a<0&&0===g&&0!==this[b+e-1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},h.prototype.writeIntBE=function(a,b,c,d){if(a*=1,b>>>=0,!d){let d=Math.pow(2,8*c-1);v(this,a,b,c,d-1,-d)}let e=c-1,f=1,g=0;for(this[b+e]=255&a;--e>=0&&(f*=256);)a<0&&0===g&&0!==this[b+e+1]&&(g=1),this[b+e]=(a/f|0)-g&255;return b+c},h.prototype.writeInt8=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,1,127,-128),a<0&&(a=255+a+1),this[b]=255&a,b+1},h.prototype.writeInt16LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,32767,-32768),this[b]=255&a,this[b+1]=a>>>8,b+2},h.prototype.writeInt16BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,2,32767,-32768),this[b]=a>>>8,this[b+1]=255&a,b+2},h.prototype.writeInt32LE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0x7fffffff,-0x80000000),this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24,b+4},h.prototype.writeInt32BE=function(a,b,c){return a*=1,b>>>=0,c||v(this,a,b,4,0x7fffffff,-0x80000000),a<0&&(a=0xffffffff+a+1),this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a,b+4},h.prototype.writeBigInt64LE=N(function(a,b=0){return w(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=N(function(a,b=0){return x(this,a,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(a,b,c){return z(this,a,b,!0,c)},h.prototype.writeFloatBE=function(a,b,c){return z(this,a,b,!1,c)},h.prototype.writeDoubleLE=function(a,b,c){return A(this,a,b,!0,c)},h.prototype.writeDoubleBE=function(a,b,c){return A(this,a,b,!1,c)},h.prototype.copy=function(a,b,c,d){if(!h.isBuffer(a))throw TypeError("argument should be a Buffer");if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c||0===a.length||0===this.length)return 0;if(b<0)throw RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw RangeError("Index out of range");if(d<0)throw RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);let e=d-c;return this===a&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(b,c,d):Uint8Array.prototype.set.call(a,this.subarray(c,d),b),e},h.prototype.fill=function(a,b,c,d){let e;if("string"==typeof a){if("string"==typeof b?(d=b,b=0,c=this.length):"string"==typeof c&&(d=c,c=this.length),void 0!==d&&"string"!=typeof d)throw TypeError("encoding must be a string");if("string"==typeof d&&!h.isEncoding(d))throw TypeError("Unknown encoding: "+d);if(1===a.length){let b=a.charCodeAt(0);("utf8"===d&&b<128||"latin1"===d)&&(a=b)}}else"number"==typeof a?a&=255:"boolean"==typeof a&&(a=Number(a));if(b<0||this.length<b||this.length<c)throw RangeError("Out of range index");if(c<=b)return this;if(b>>>=0,c=void 0===c?this.length:c>>>0,a||(a=0),"number"==typeof a)for(e=b;e<c;++e)this[e]=a;else{let f=h.isBuffer(a)?a:h.from(a,d),g=f.length;if(0===g)throw TypeError('The value "'+a+'" is invalid for argument "value"');for(e=0;e<c-b;++e)this[e+b]=f[e%g]}return this};let B={};function C(a,b,c){B[a]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:b.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${a}]`,this.stack,delete this.name}get code(){return a}set code(a){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:a,writable:!0})}toString(){return`${this.name} [${a}]: ${this.message}`}}}function D(a){let b="",c=a.length,d=+("-"===a[0]);for(;c>=d+4;c-=3)b=`_${a.slice(c-3,c)}${b}`;return`${a.slice(0,c)}${b}`}function E(a,b,c,d,e,f){if(a>c||a<b){let d,e="bigint"==typeof b?"n":"";throw d=f>3?0===b||b===BigInt(0)?`>= 0${e} and < 2${e} ** ${(f+1)*8}${e}`:`>= -(2${e} ** ${(f+1)*8-1}${e}) and < 2 ** ${(f+1)*8-1}${e}`:`>= ${b}${e} and <= ${c}${e}`,new B.ERR_OUT_OF_RANGE("value",d,a)}F(e,"offset"),(void 0===d[e]||void 0===d[e+f])&&G(e,d.length-(f+1))}function F(a,b){if("number"!=typeof a)throw new B.ERR_INVALID_ARG_TYPE(b,"number",a)}function G(a,b,c){if(Math.floor(a)!==a)throw F(a,c),new B.ERR_OUT_OF_RANGE(c||"offset","an integer",a);if(b<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(c||"offset",`>= ${+!!c} and <= ${b}`,a)}C("ERR_BUFFER_OUT_OF_BOUNDS",function(a){return a?`${a} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),C("ERR_INVALID_ARG_TYPE",function(a,b){return`The "${a}" argument must be of type number. Received type ${typeof b}`},TypeError),C("ERR_OUT_OF_RANGE",function(a,b,c){let d=`The value of "${a}" is out of range.`,e=c;return Number.isInteger(c)&&Math.abs(c)>0x100000000?e=D(String(c)):"bigint"==typeof c&&(e=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(e=D(e)),e+="n"),d+=` It must be ${b}. Received ${e}`},RangeError);let H=/[^+/0-9A-Za-z-_]/g;function I(a,b){let c;b=b||1/0;let d=a.length,e=null,f=[];for(let g=0;g<d;++g){if((c=a.charCodeAt(g))>55295&&c<57344){if(!e){if(c>56319||g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else if(c<1114112){if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}else throw Error("Invalid code point")}return f}function J(a){return d.toByteArray(function(a){if((a=(a=a.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;a.length%4!=0;)a+="=";return a}(a))}function K(a,b,c,d){let e;for(e=0;e<d&&!(e+c>=b.length)&&!(e>=a.length);++e)b[e+c]=a[e];return e}function L(a,b){return a instanceof b||null!=a&&null!=a.constructor&&null!=a.constructor.name&&a.constructor.name===b.name}let M=function(){let a="0123456789abcdef",b=Array(256);for(let c=0;c<16;++c){let d=16*c;for(let e=0;e<16;++e)b[d+e]=a[c]+a[e]}return b}();function N(a){return"u"<typeof BigInt?O:a}function O(){throw Error("BigInt not supported")}},90095,(a,b,c)=>{"use strict";var d=a.r(32612),e=a=>(d.Buffer.isBuffer(a)?a:d.Buffer.from(a)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),f=a=>({...a,encryption:{...a.encryption},integrity:{...a.integrity}}),g={"aes-128-ctr":{keyBits:128,ivBits:128,name:"AES-CTR"},"aes-256-cbc":{keyBits:256,ivBits:128,name:"AES-CBC"},sha256:{keyBits:256,name:"SHA-256"}},h="Fe26.2",i=(a,b)=>{let c;if(b<1)throw Error("Invalid random bits count");let e=Math.ceil(b/8);return c=d.Buffer.allocUnsafe(e),a.getRandomValues(c),c},j=async(a,b,c,e,f,g)=>{let h=new TextEncoder,i=h.encode(b),j=await a.subtle.importKey("raw",i,"PBKDF2",!1,["deriveBits"]),k=h.encode(c),l=await a.subtle.deriveBits({name:"PBKDF2",hash:g,salt:k,iterations:e},j,8*f);return d.Buffer.from(l)},k=async(a,b,c)=>{var d;if(null==b||!b.length)throw Error("Empty password");if(null==c||"object"!=typeof c)throw Error("Bad options");if(!(c.algorithm in g))throw Error(`Unknown algorithm: ${c.algorithm}`);let e=g[c.algorithm],f={},h=null!=(d=c.hmac)&&d,k=h?{name:"HMAC",hash:e.name}:{name:e.name},l=h?["sign","verify"]:["encrypt","decrypt"];if("string"==typeof b){if(b.length<c.minPasswordlength)throw Error(`Password string too short (min ${c.minPasswordlength} characters required)`);let{salt:d=""}=c;if(!d){let{saltBits:b=0}=c;if(!b)throw Error("Missing salt and saltBits options");d=i(a,b).toString("hex")}let g=await j(a,b,d,c.iterations,e.keyBits/8,"SHA-1");f.key=await a.subtle.importKey("raw",g,k,!1,l),f.salt=d}else{if(b.length<e.keyBits/8)throw Error("Key buffer (password) too small");f.key=await a.subtle.importKey("raw",b,k,!1,l),f.salt=""}return c.iv?f.iv=c.iv:"ivBits"in e&&(f.iv=i(a,e.ivBits)),f},l=async(a,b,c,e)=>{let f=await k(a,b,c),h=new TextEncoder().encode(e),i=await a.subtle.encrypt({name:g[c.algorithm].name,iv:f.iv},f.key,h);return{encrypted:d.Buffer.from(i),key:f}},m=async(a,b,c,e)=>{let f=await k(a,b,c),h=await a.subtle.decrypt({name:g[c.algorithm].name,iv:f.iv},f.key,d.Buffer.isBuffer(e)?e:d.Buffer.from(e));return new TextDecoder().decode(h)},n=async(a,b,c,f)=>{let g=await k(a,b,{...c,hmac:!0}),h=new TextEncoder().encode(f),i=await a.subtle.sign({name:"HMAC"},g.key,h);return{digest:e(d.Buffer.from(i)),salt:g.salt}},o=a=>"object"!=typeof a||d.Buffer.isBuffer(a)?{encryption:a,integrity:a}:"secret"in a?{id:a.id,encryption:a.secret,integrity:a.secret}:{id:a.id,encryption:a.encryption,integrity:a.integrity},p=async(a,b,c,d)=>{if(!c)throw Error("Empty password");let g=f(d),i=Date.now()+(g.localtimeOffsetMsec||0),j=JSON.stringify(b),k=o(c),{id:m=""}=k;if(m&&!/^\w+$/.test(m))throw Error("Invalid password id");let{encrypted:p,key:q}=await l(a,k.encryption,g.encryption,j),r=e(p),s=e(q.iv),t=g.ttl?i+g.ttl:"",u=`${h}*${m}*${q.salt}*${s}*${r}*${t}`,v=await n(a,k.integrity,g.integrity,u);return`${u}*${v.salt}*${v.digest}`},q=async(a,b,c,e)=>{let g;if(!c)throw Error("Empty password");let i=f(e),j=Date.now()+(i.localtimeOffsetMsec||0),k=b.split("*");if(8!==k.length)throw Error("Incorrect number of sealed components");let l=k[0],p=k[1],q=k[2],r=k[3],s=k[4],t=k[5],u=k[6],v=k[7],w=`${l}*${p}*${q}*${r}*${s}*${t}`;if(h!==l)throw Error("Wrong mac prefix");if(t){if(!/^\d+$/.exec(t))throw Error("Invalid expiration");if(parseInt(t,10)<=j-1e3*i.timestampSkewSec)throw Error("Expired seal")}if(void 0===c||"string"==typeof c&&0===c.length)throw Error("Empty password");if("object"!=typeof c||d.Buffer.isBuffer(c))g=c;else{if(!((p||"default")in c))throw Error(`Cannot find password: ${p}`);g=c[p||"default"]}g=o(g);let x=i.integrity;if(x.salt=u,!((a,b)=>{let c=+(a.length!==b.length);c&&(b=a);for(let d=0;d<a.length;d+=1)c|=a.charCodeAt(d)^b.charCodeAt(d);return 0===c})((await n(a,g.integrity,x,w)).digest,v))throw Error("Bad hmac value");let y=d.Buffer.from(s,"base64"),z=i.encryption;z.salt=q,z.iv=d.Buffer.from(r,"base64");let A=await m(a,g.encryption,z,y);return A?JSON.parse(A):null};Object.defineProperty(c,"Buffer",{enumerable:!0,get:function(){return d.Buffer}}),c.algorithms=g,c.base64urlEncode=e,c.clone=f,c.decrypt=m,c.defaults={encryption:{saltBits:256,algorithm:"aes-256-cbc",iterations:1,minPasswordlength:32},integrity:{saltBits:256,algorithm:"sha256",iterations:1,minPasswordlength:32},ttl:0,timestampSkewSec:60,localtimeOffsetMsec:0},c.encrypt=l,c.generateKey=k,c.hmacWithPassword=n,c.macFormatVersion="2",c.macPrefix=h,c.randomBits=i,c.seal=p,c.unseal=q},69066,(a,b,c)=>{"use strict";c.parse=function(a,b){if("string"!=typeof a)throw TypeError("argument str must be a string");for(var c={},d=(b||{}).decode||f,e=0;e<a.length;){var g=a.indexOf("=",e);if(-1===g)break;var h=a.indexOf(";",e);if(-1===h)h=a.length;else if(h<g){e=a.lastIndexOf(";",g-1)+1;continue}var i=a.slice(e,g).trim();if(void 0===c[i]){var j=a.slice(g+1,h).trim();34===j.charCodeAt(0)&&(j=j.slice(1,-1)),c[i]=function(a,b){try{return b(a)}catch(b){return a}}(j,d)}e=h+1}return c},c.serialize=function(a,b,c){var f=c||{},h=f.encode||g;if("function"!=typeof h)throw TypeError("option encode is invalid");if(!e.test(a))throw TypeError("argument name is invalid");var i=h(b);if(i&&!e.test(i))throw TypeError("argument val is invalid");var j=a+"="+i;if(null!=f.maxAge){var k=f.maxAge-0;if(isNaN(k)||!isFinite(k))throw TypeError("option maxAge is invalid");j+="; Max-Age="+Math.floor(k)}if(f.domain){if(!e.test(f.domain))throw TypeError("option domain is invalid");j+="; Domain="+f.domain}if(f.path){if(!e.test(f.path))throw TypeError("option path is invalid");j+="; Path="+f.path}if(f.expires){var l,m=f.expires;if(l=m,"[object Date]"!==d.call(l)&&!(l instanceof Date)||isNaN(m.valueOf()))throw TypeError("option expires is invalid");j+="; Expires="+m.toUTCString()}if(f.httpOnly&&(j+="; HttpOnly"),f.secure&&(j+="; Secure"),f.priority)switch("string"==typeof f.priority?f.priority.toLowerCase():f.priority){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(f.sameSite)switch("string"==typeof f.sameSite?f.sameSite.toLowerCase():f.sameSite){case!0:case"strict":j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"none":j+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return j};var d=Object.prototype.toString,e=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function f(a){return -1!==a.indexOf("%")?decodeURIComponent(a):a}function g(a){return encodeURIComponent(a)}},69234,(a,b,c)=>{"use strict";var d=Object.create,e=Object.defineProperty,f=Object.getOwnPropertyDescriptor,g=Object.getOwnPropertyNames,h=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,j=(a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let h of g(b))i.call(a,h)||h===c||e(a,h,{get:()=>b[h],enumerable:!(d=f(b,h))||d.enumerable});return a},k=(a,b,c)=>(c=null!=a?d(h(a)):{},j(!b&&a&&a.__esModule?c:e(c,"default",{value:a,enumerable:!0}),a)),l={},m={createGetIronSession:()=>s,createSealData:()=>v,createUnsealData:()=>u,getIronSession:()=>A,sealData:()=>z,unsealData:()=>y};for(var n in m)e(l,n,{get:m[n],enumerable:!0});b.exports=j(e({},"__esModule",{value:!0}),l);var o=k(a.r(90095)),p=k(a.r(69066)),q=1296e3,r={ttl:q,cookieOptions:{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}};function s(a,b,c){return async(a,d,e)=>{if(!a||!d||!e||!e.cookieName||!e.password)throw Error('iron-session: Bad usage. Minimum usage is const session = await getIronSession(req, res, { cookieName: "...", password: "...". Check the usage here: https://github.com/vvo/iron-session');let f=w(e.password);Object.values(w(e.password)).forEach(a=>{if(a.length<32)throw Error("iron-session: Bad usage. Password must be at least 32 characters long.")});let g={...r,...e,cookieOptions:{...r.cookieOptions,...e.cookieOptions||{}}};0===g.ttl&&(g.ttl=0x7fffffff),e.cookieOptions&&"maxAge"in e.cookieOptions?void 0===e.cookieOptions.maxAge?g.ttl=0:g.cookieOptions.maxAge=e.cookieOptions.maxAge-60:g.cookieOptions.maxAge=g.ttl-60;let h=p.default.parse("credentials"in a?a.headers.get("cookie")||"":a.headers.cookie||"")[g.cookieName],i=void 0===h?{}:await b(h,{password:f,ttl:g.ttl});return Object.defineProperties(i,{save:{value:async function(){if("headersSent"in d&&!0===d.headersSent)throw Error("iron-session: Cannot set session cookie: session.save() was called after headers were sent. Make sure to call it before any res.send() or res.end()");let a=await c(i,{password:f,ttl:g.ttl}),b=p.default.serialize(g.cookieName,a,g.cookieOptions);if(b.length>4096)throw Error(`iron-session: Cookie length is too big ${b.length}, browsers will refuse it. Try to remove some data.`);t(b,d)}},destroy:{value:function(){Object.keys(i).forEach(a=>{delete i[a]}),t(p.default.serialize(g.cookieName,"",{...g.cookieOptions,maxAge:0}),d)}}}),i}}function t(a,b){var c;if("headers"in b)return void b.headers.append("set-cookie",a);let d=null!=(c=b.getHeader("set-cookie"))?c:[];"string"==typeof d&&(d=[d]),b.setHeader("set-cookie",[...d,a])}function u(a){return async(b,{password:c,ttl:d=q})=>{let e=w(c),{sealWithoutVersion:f,tokenVersion:g}=function(a){if("~"===a[a.length-2]){let[b,c]=a.split("~");return{sealWithoutVersion:b,tokenVersion:parseInt(c,10)}}return{sealWithoutVersion:a,tokenVersion:null}}(b);try{let b=await o.unseal(a,f,e,{...o.defaults,ttl:1e3*d})||{};if(2===g)return b;return{...b.persistent}}catch(a){if(a instanceof Error&&("Expired seal"===a.message||"Bad hmac value"===a.message||a.message.startsWith("Cannot find password: ")||"Incorrect number of sealed components"===a.message))return{};throw a}}}function v(a){return async(b,{password:c,ttl:d=q})=>{let e=w(c),f=Math.max(...Object.keys(e).map(a=>parseInt(a,10))),g={id:f.toString(),secret:e[f]},h=await o.seal(a,b,g,{...o.defaults,ttl:1e3*d});return`${h}~2`}}function w(a){return"string"==typeof a?{1:a}:a}var x=new(a.r(72612)).Crypto,y=u(x),z=v(x),A=s(x,y,z)},42165,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.IronSessionProvider=void 0,c.IronSessionProvider=class{}},7806,(a,b,c)=>{"use strict";var d=a.e&&a.e.__awaiter||function(a,b,c,d){return new(c||(c=Promise))(function(e,f){function g(a){try{i(d.next(a))}catch(a){f(a)}}function h(a){try{i(d.throw(a))}catch(a){f(a)}}function i(a){var b;a.done?e(a.value):((b=a.value)instanceof c?b:new c(function(a){a(b)})).then(g,h)}i((d=d.apply(a,b||[])).next())})};Object.defineProperty(c,"__esModule",{value:!0}),c.WebIronSessionProvider=void 0;let e=a.r(69234),f=a.r(42165);class g extends f.IronSessionProvider{sealData(a,b){return d(this,void 0,void 0,function*(){let c=Object.assign(Object.assign({},b),{ttl:0});return(0,e.sealData)(a,c)})}unsealData(a,b){return d(this,void 0,void 0,function*(){return(0,e.unsealData)(a,b)})}}c.WebIronSessionProvider=g},33177,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},20099,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},68403,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(33177),c),e(a.r(20099),c)},48771,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},47644,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},72918,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},79657,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},45509,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},14384,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(48771),c),e(a.r(47644),c),e(a.r(72918),c),e(a.r(79657),c),e(a.r(45509),c)},90943,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},95731,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},37696,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},27935,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},75967,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(90943),c),e(a.r(95731),c),e(a.r(37696),c),e(a.r(27935),c)},31804,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},30387,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},69377,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},62631,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},53122,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},94586,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},45767,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},68210,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},96003,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},69649,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},67108,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(31804),c),e(a.r(30387),c),e(a.r(69377),c),e(a.r(62631),c),e(a.r(53122),c),e(a.r(94586),c),e(a.r(45767),c),e(a.r(68210),c),e(a.r(96003),c),e(a.r(69649),c)},86741,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},44150,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},56895,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},45622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},90332,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},84421,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},92261,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(86741),c),e(a.r(44150),c),e(a.r(56895),c),e(a.r(45622),c),e(a.r(90332),c),e(a.r(84421),c)},84263,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.getPrimaryEmail=void 0,c.getPrimaryEmail=function(a){var b;let c=null==(b=a.emails)?void 0:b.find(a=>a.primary);return null==c?void 0:c.value}},40222,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},94410,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(40222),c)},43735,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},41410,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},89959,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},67309,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},98580,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(43735),c),e(a.r(41410),c),e(a.r(89959),c),e(a.r(67309),c)},55969,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},21609,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.DomainDataState=void 0,(e=d||(c.DomainDataState=d={})).Verified="verified",e.Pending="pending"},95944,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},40434,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},88,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},44646,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},4545,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(55969),c),e(a.r(21609),c),e(a.r(95944),c),e(a.r(40434),c),e(a.r(88),c),e(a.r(44646),c)},9527,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},78410,(a,b,c)=>{"use strict";var d,e,f,g;Object.defineProperty(c,"__esModule",{value:!0}),c.OrganizationDomainVerificationStrategy=c.OrganizationDomainState=void 0,(f=d||(c.OrganizationDomainState=d={})).LegacyVerified="legacy_verified",f.Verified="verified",f.Pending="pending",f.Failed="failed",(g=e||(c.OrganizationDomainVerificationStrategy=e={})).Dns="dns",g.Manual="manual"},67032,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(9527),c),e(a.r(78410),c)},53731,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},71199,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},99767,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},49696,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(53731),c),e(a.r(71199),c),e(a.r(99767),c)},9381,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.GeneratePortalLinkIntent=void 0,(e=d||(c.GeneratePortalLinkIntent=d={})).AuditLogs="audit_logs",e.DomainVerification="domain_verification",e.DSync="dsync",e.LogStreams="log_streams",e.SSO="sso",e.CertificateRenewal="certificate_renewal"},39622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.GeneratePortalLinkIntent=void 0;var d=a.r(9381);Object.defineProperty(c,"GeneratePortalLinkIntent",{enumerable:!0,get:function(){return d.GeneratePortalLinkIntent}})},74285,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},61502,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(74285),c)},15395,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},59541,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),c.ConnectionType=void 0,(e=d||(c.ConnectionType=d={})).ADFSSAML="ADFSSAML",e.AdpOidc="AdpOidc",e.AppleOAuth="AppleOAuth",e.Auth0SAML="Auth0SAML",e.AzureSAML="AzureSAML",e.CasSAML="CasSAML",e.ClassLinkSAML="ClassLinkSAML",e.CloudflareSAML="CloudflareSAML",e.CyberArkSAML="CyberArkSAML",e.DuoSAML="DuoSAML",e.GenericOIDC="GenericOIDC",e.GenericSAML="GenericSAML",e.GitHubOAuth="GitHubOAuth",e.GoogleOAuth="GoogleOAuth",e.GoogleSAML="GoogleSAML",e.JumpCloudSAML="JumpCloudSAML",e.KeycloakSAML="KeycloakSAML",e.LastPassSAML="LastPassSAML",e.LoginGovOidc="LoginGovOidc",e.MagicLink="MagicLink",e.MicrosoftOAuth="MicrosoftOAuth",e.MiniOrangeSAML="MiniOrangeSAML",e.NetIqSAML="NetIqSAML",e.OktaSAML="OktaSAML",e.OneLoginSAML="OneLoginSAML",e.OracleSAML="OracleSAML",e.PingFederateSAML="PingFederateSAML",e.PingOneSAML="PingOneSAML",e.RipplingSAML="RipplingSAML",e.SalesforceOAuth="SalesforceOAuth",e.SalesforceSAML="SalesforceSAML",e.ShibbolethGenericSAML="ShibbolethGenericSAML",e.ShibbolethSAML="ShibbolethSAML",e.SimpleSamlPhpSAML="SimpleSamlPhpSAML",e.VMwareSAML="VMwareSAML"},96824,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},48705,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},79116,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},1979,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},95260,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},47179,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},28496,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(15395),c),e(a.r(59541),c),e(a.r(96824),c),e(a.r(48705),c),e(a.r(79116),c),e(a.r(1979),c),e(a.r(95260),c),e(a.r(47179),c)},75924,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},5947,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},6852,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},38387,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},84543,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},52194,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},35191,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},61637,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},48307,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},18706,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},61796,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0})},63660,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),e(a.r(75924),c),e(a.r(5947),c),e(a.r(6852),c),e(a.r(38387),c),e(a.r(84543),c),e(a.r(52194),c),e(a.r(35191),c),e(a.r(61637),c),e(a.r(48307),c),e(a.r(18706),c),e(a.r(61796),c)},58978,(a,b,c)=>{"use strict";var d=a.e&&a.e.__createBinding||(Object.create?function(a,b,c,d){void 0===d&&(d=c);var e=Object.getOwnPropertyDescriptor(b,c);(!e||("get"in e?!b.__esModule:e.writable||e.configurable))&&(e={enumerable:!0,get:function(){return b[c]}}),Object.defineProperty(a,d,e)}:function(a,b,c,d){void 0===d&&(d=c),a[d]=b[c]}),e=a.e&&a.e.__exportStar||function(a,b){for(var c in a)"default"===c||Object.prototype.hasOwnProperty.call(b,c)||d(b,a,c)};Object.defineProperty(c,"__esModule",{value:!0}),c.WorkOS=void 0;let f=a.r(92241),g=a.r(48571),h=a.r(50717),i=a.r(65477),j=a.r(69848),k=a.r(25413),l=a.r(60677),m=a.r(7806);e(a.r(68403),c),e(a.r(14384),c),e(a.r(75967),c),e(a.r(77771),c),e(a.r(67108),c),e(a.r(83983),c),e(a.r(92261),c),e(a.r(84263),c),e(a.r(94410),c),e(a.r(98580),c),e(a.r(91575),c),e(a.r(4545),c),e(a.r(67032),c),e(a.r(49696),c),e(a.r(39622),c),e(a.r(61502),c),e(a.r(28496),c),e(a.r(49622),c),e(a.r(63660),c);class n extends l.WorkOS{createHttpClient(a,b){var c;let d=Object.assign(Object.assign({},a.config),{timeout:a.timeout,headers:Object.assign(Object.assign({},null==(c=a.config)?void 0:c.headers),{Authorization:`Bearer ${this.key}`,"User-Agent":b})});return"u">typeof fetch||void 0!==a.fetchFn?new h.FetchHttpClient(this.baseURL,d,a.fetchFn):new i.NodeHttpClient(this.baseURL,d)}createWebhookClient(){return new k.Webhooks(this.getCryptoProvider())}getCryptoProvider(){return"u">typeof crypto&&void 0!==crypto.subtle?new g.SubtleCryptoProvider:new f.NodeCryptoProvider}createActionsClient(){return new j.Actions(this.getCryptoProvider())}createIronSessionProvider(){return new m.WebIronSessionProvider}emitWarning(a){return process.emitWarning(a,"WorkOS")}}c.WorkOS=n},92603,(a,b,c)=>{"use strict";function d(a,b,c){if(a){for(let d of(c&&(c=c.toLowerCase()),a))if(b===d.domain?.split(":",1)[0].toLowerCase()||c===d.defaultLocale.toLowerCase()||d.locales?.some(a=>a.toLowerCase()===c))return d}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"detectDomainLocale",{enumerable:!0,get:function(){return d}})},71442,(a,b,c)=>{"use strict";function d(a){let b=a.indexOf("#"),c=a.indexOf("?"),d=c>-1&&(b<0||c<b);return d||b>-1?{pathname:a.substring(0,d?c:b),query:d?a.substring(c,b>-1?b:void 0):"",hash:b>-1?a.slice(b):""}:{pathname:a,query:"",hash:""}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"parsePath",{enumerable:!0,get:function(){return d}})},91150,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addPathPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(71442);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return`${b}${c}${e}${f}`}},47074,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addPathSuffix",{enumerable:!0,get:function(){return e}});let d=a.r(71442);function e(a,b){if(!a.startsWith("/")||!b)return a;let{pathname:c,query:e,hash:f}=(0,d.parsePath)(a);return`${c}${b}${e}${f}`}},39481,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"pathHasPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(71442);function e(a,b){if("string"!=typeof a)return!1;let{pathname:c}=(0,d.parsePath)(a);return c===b||c.startsWith(b+"/")}},7700,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"addLocale",{enumerable:!0,get:function(){return f}});let d=a.r(91150),e=a.r(39481);function f(a,b,c,f){if(!b||b===c)return a;let g=a.toLowerCase();return!f&&((0,e.pathHasPrefix)(g,"/api")||(0,e.pathHasPrefix)(g,`/${b.toLowerCase()}`))?a:(0,d.addPathPrefix)(a,`/${b}`)}},97642,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"formatNextPathnameInfo",{enumerable:!0,get:function(){return h}});let d=a.r(74993),e=a.r(91150),f=a.r(47074),g=a.r(7700);function h(a){let b=(0,g.addLocale)(a.pathname,a.locale,a.buildId?void 0:a.defaultLocale,a.ignorePrefix);return(a.buildId||!a.trailingSlash)&&(b=(0,d.removeTrailingSlash)(b)),a.buildId&&(b=(0,f.addPathSuffix)((0,e.addPathPrefix)(b,`/_next/data/${a.buildId}`),"/"===a.pathname?"index.json":".json")),b=(0,e.addPathPrefix)(b,a.basePath),!a.buildId&&a.trailingSlash?b.endsWith("/")?b:(0,f.addPathSuffix)(b,"/"):(0,d.removeTrailingSlash)(b)}},64239,(a,b,c)=>{"use strict";function d(a,b){let c;if(b?.host&&!Array.isArray(b.host))c=b.host.toString().split(":",1)[0];else{if(!a.hostname)return;c=a.hostname}return c.toLowerCase()}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getHostname",{enumerable:!0,get:function(){return d}})},61601,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"removePathPrefix",{enumerable:!0,get:function(){return e}});let d=a.r(39481);function e(a,b){if(!(0,d.pathHasPrefix)(a,b))return a;let c=a.slice(b.length);return c.startsWith("/")?c:`/${c}`}},94971,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"getNextPathnameInfo",{enumerable:!0,get:function(){return g}});let d=a.r(3885),e=a.r(61601),f=a.r(39481);function g(a,b){let{basePath:c,i18n:g,trailingSlash:h}=b.nextConfig??{},i={pathname:a,trailingSlash:"/"!==a?a.endsWith("/"):h};c&&(0,f.pathHasPrefix)(i.pathname,c)&&(i.pathname=(0,e.removePathPrefix)(i.pathname,c),i.basePath=c);let j=i.pathname;if(i.pathname.startsWith("/_next/data/")&&i.pathname.endsWith(".json")){let a=i.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");i.buildId=a[0],j="index"!==a[1]?`/${a.slice(1).join("/")}`:"/",!0===b.parseData&&(i.pathname=j)}if(g){let a=b.i18nProvider?b.i18nProvider.analyze(i.pathname):(0,d.normalizeLocalePath)(i.pathname,g.locales);i.locale=a.detectedLocale,i.pathname=a.pathname??i.pathname,!a.detectedLocale&&i.buildId&&(a=b.i18nProvider?b.i18nProvider.analyze(j):(0,d.normalizeLocalePath)(j,g.locales)).detectedLocale&&(i.locale=a.detectedLocale)}return i}},22670,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"NextURL",{enumerable:!0,get:function(){return k}});let d=a.r(92603),e=a.r(97642),f=a.r(64239),g=a.r(94971),h=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function i(a,b){return new URL(String(a).replace(h,"localhost"),b&&String(b).replace(h,"localhost"))}let j=Symbol("NextURLInternal");class k{constructor(a,b,c){let d,e;"object"==typeof b&&"pathname"in b||"string"==typeof b?(d=b,e=c||{}):e=c||b||{},this[j]={url:i(a,d??e.base),options:e,basePath:""},this.analyze()}analyze(){var a,b,c,e,h;let i=(0,g.getNextPathnameInfo)(this[j].url.pathname,{nextConfig:this[j].options.nextConfig,parseData:!0,i18nProvider:this[j].options.i18nProvider}),k=(0,f.getHostname)(this[j].url,this[j].options.headers);this[j].domainLocale=this[j].options.i18nProvider?this[j].options.i18nProvider.detectDomainLocale(k):(0,d.detectDomainLocale)(null==(b=this[j].options.nextConfig)||null==(a=b.i18n)?void 0:a.domains,k);let l=(null==(c=this[j].domainLocale)?void 0:c.defaultLocale)||(null==(h=this[j].options.nextConfig)||null==(e=h.i18n)?void 0:e.defaultLocale);this[j].url.pathname=i.pathname,this[j].defaultLocale=l,this[j].basePath=i.basePath??"",this[j].buildId=i.buildId,this[j].locale=i.locale??l,this[j].trailingSlash=i.trailingSlash}formatPathname(){return(0,e.formatNextPathnameInfo)({basePath:this[j].basePath,buildId:this[j].buildId,defaultLocale:this[j].options.forceLocale?void 0:this[j].defaultLocale,locale:this[j].locale,pathname:this[j].url.pathname,trailingSlash:this[j].trailingSlash})}formatSearch(){return this[j].url.search}get buildId(){return this[j].buildId}set buildId(a){this[j].buildId=a}get locale(){return this[j].locale??""}set locale(a){var b,c;if(!this[j].locale||!(null==(c=this[j].options.nextConfig)||null==(b=c.i18n)?void 0:b.locales.includes(a)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${a}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[j].locale=a}get defaultLocale(){return this[j].defaultLocale}get domainLocale(){return this[j].domainLocale}get searchParams(){return this[j].url.searchParams}get host(){return this[j].url.host}set host(a){this[j].url.host=a}get hostname(){return this[j].url.hostname}set hostname(a){this[j].url.hostname=a}get port(){return this[j].url.port}set port(a){this[j].url.port=a}get protocol(){return this[j].url.protocol}set protocol(a){this[j].url.protocol=a}get href(){let a=this.formatPathname(),b=this.formatSearch();return`${this.protocol}//${this.host}${a}${b}${this.hash}`}set href(a){this[j].url=i(a),this.analyze()}get origin(){return this[j].url.origin}get pathname(){return this[j].url.pathname}set pathname(a){this[j].url.pathname=a}get hash(){return this[j].url.hash}set hash(a){this[j].url.hash=a}get search(){return this[j].url.search}set search(a){this[j].url.search=a}get password(){return this[j].url.password}set password(a){this[j].url.password=a}get username(){return this[j].url.username}set username(a){this[j].url.username=a}get basePath(){return this[j].basePath}set basePath(a){this[j].basePath=a.startsWith("/")?a:`/${a}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new k(String(this),this[j].options)}}},89753,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={PageSignatureError:function(){return f},RemovedPageError:function(){return g},RemovedUAError:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});class f extends Error{constructor({page:a}){super(`The middleware "${a}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class g extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class h extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},88491,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={INTERNALS:function(){return j},NextRequest:function(){return k}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(22670),g=a.r(92273),h=a.r(89753),i=a.r(63681),j=Symbol("internal request");class k extends Request{constructor(a,b={}){const c="string"!=typeof a&&"url"in a?a.url:String(a);(0,g.validateURL)(c),b.body&&"half"!==b.duplex&&(b.duplex="half"),a instanceof Request?super(a,b):super(c,b);const d=new f.NextURL(c,{headers:(0,g.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:b.nextConfig});this[j]={cookies:new i.RequestCookies(this.headers),nextUrl:d,url:d.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[j].cookies}get nextUrl(){return this[j].nextUrl}get page(){throw new h.RemovedPageError}get ua(){throw new h.RemovedUAError}get url(){return this[j].url}}},51978,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"NextResponse",{enumerable:!0,get:function(){return l}});let d=a.r(63681),e=a.r(22670),f=a.r(92273),g=a.r(51409),h=a.r(63681),i=Symbol("internal response"),j=new Set([301,302,303,307,308]);function k(a,b){var c;if(null==a||null==(c=a.request)?void 0:c.headers){if(!(a.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let c=[];for(let[d,e]of a.request.headers)b.set("x-middleware-request-"+d,e),c.push(d);b.set("x-middleware-override-headers",c.join(","))}}class l extends Response{constructor(a,b={}){super(a,b);const c=this.headers,j=new Proxy(new h.ResponseCookies(c),{get(a,e,f){switch(e){case"delete":case"set":return(...f)=>{let g=Reflect.apply(a[e],a,f),i=new Headers(c);return g instanceof h.ResponseCookies&&c.set("x-middleware-set-cookie",g.getAll().map(a=>(0,d.stringifyCookie)(a)).join(",")),k(b,i),g};default:return g.ReflectAdapter.get(a,e,f)}}});this[i]={cookies:j,url:b.url?new e.NextURL(b.url,{headers:(0,f.toNodeOutgoingHttpHeaders)(c),nextConfig:b.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[i].cookies}static json(a,b){let c=Response.json(a,b);return new l(c.body,c)}static redirect(a,b){let c="number"==typeof b?b:(null==b?void 0:b.status)??307;if(!j.has(c))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let d="object"==typeof b?b:{},e=new Headers(null==d?void 0:d.headers);return e.set("Location",(0,f.validateURL)(a)),new l(null,{...d,headers:e,status:c})}static rewrite(a,b){let c=new Headers(null==b?void 0:b.headers);return c.set("x-middleware-rewrite",(0,f.validateURL)(a)),k(b,c),new l(null,{...b,headers:c})}static next(a){let b=new Headers(null==a?void 0:a.headers);return b.set("x-middleware-next","1"),k(a,b),new l(null,{...a,headers:b})}}},58176,(a,b,c)=>{"use strict";function d(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ImageResponse",{enumerable:!0,get:function(){return d}})},6431,(a,b,c)=>{var d={226:function(b,c){!function(d,e){"use strict";var f="function",g="undefined",h="object",i="string",j="major",k="model",l="name",m="type",n="vendor",o="version",p="architecture",q="console",r="mobile",s="tablet",t="smarttv",u="wearable",v="embedded",w="Amazon",x="Apple",y="ASUS",z="BlackBerry",A="Browser",B="Chrome",C="Firefox",D="Google",E="Huawei",F="Microsoft",G="Motorola",H="Opera",I="Samsung",J="Sharp",K="Sony",L="Xiaomi",M="Zebra",N="Facebook",O="Chromium OS",P="Mac OS",Q=function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},R=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].toUpperCase()]=a[c];return b},S=function(a,b){return typeof a===i&&-1!==T(b).indexOf(T(a))},T=function(a){return a.toLowerCase()},U=function(a,b){if(typeof a===i)return a=a.replace(/^\s\s*/,""),typeof b===g?a:a.substring(0,350)},V=function(a,b){for(var c,d,e,g,i,j,k=0;k<b.length&&!i;){var l=b[k],m=b[k+1];for(c=d=0;c<l.length&&!i&&l[c];)if(i=l[c++].exec(a))for(e=0;e<m.length;e++)j=i[++d],typeof(g=m[e])===h&&g.length>0?2===g.length?typeof g[1]==f?this[g[0]]=g[1].call(this,j):this[g[0]]=g[1]:3===g.length?typeof g[1]!==f||g[1].exec&&g[1].test?this[g[0]]=j?j.replace(g[1],g[2]):void 0:this[g[0]]=j?g[1].call(this,j,g[2]):void 0:4===g.length&&(this[g[0]]=j?g[3].call(this,j.replace(g[1],g[2])):void 0):this[g]=j||void 0;k+=2}},W=function(a,b){for(var c in b)if(typeof b[c]===h&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(S(b[c][d],a))return"?"===c?void 0:c}else if(S(b[c],a))return"?"===c?void 0:c;return a},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Y={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[o,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[o,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,o],[/opios[\/ ]+([\w\.]+)/i],[o,[l,H+" Mini"]],[/\bopr\/([\w\.]+)/i],[o,[l,H]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,o],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[o,[l,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[o,[l,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[o,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[o,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[o,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[o,[l,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+A],o],[/\bfocus\/([\w\.]+)/i],[o,[l,C+" Focus"]],[/\bopt\/([\w\.]+)/i],[o,[l,H+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[o,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[o,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[o,[l,H+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[o,[l,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[o,[l,C]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+A]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+A],o],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],o],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[l,o],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,N],o],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[l,o],[/\bgsa\/([\w\.]+) .*safari\//i],[o,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[o,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[o,[l,B+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,B+" WebView"],o],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[o,[l,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,o],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[o,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[o,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[o,W,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,o],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],o],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[o,[l,C+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,o],[/(cobalt)\/([\w\.]+)/i],[l,[o,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,T]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[p,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[p,"armhf"]],[/windows (ce|mobile); ppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[p,/ower/,"",T]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[p,T]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[k,[n,I],[m,s]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[k,[n,I],[m,r]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[k,[n,x],[m,r]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[k,[n,x],[m,s]],[/(macintosh);/i],[k,[n,x]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[k,[n,J],[m,r]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[k,[n,E],[m,s]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[k,[n,E],[m,r]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[k,/_/g," "],[n,L],[m,r]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[k,/_/g," "],[n,L],[m,s]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[k,[n,"OPPO"],[m,r]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[k,[n,"Vivo"],[m,r]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[k,[n,"Realme"],[m,r]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[k,[n,G],[m,r]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[k,[n,G],[m,s]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[k,[n,"LG"],[m,s]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[k,[n,"LG"],[m,r]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[k,[n,"Lenovo"],[m,s]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[k,/_/g," "],[n,"Nokia"],[m,r]],[/(pixel c)\b/i],[k,[n,D],[m,s]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[k,[n,D],[m,r]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[k,[n,K],[m,r]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[k,"Xperia Tablet"],[n,K],[m,s]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[k,[n,"OnePlus"],[m,r]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[k,[n,w],[m,s]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[k,/(.+)/g,"Fire Phone $1"],[n,w],[m,r]],[/(playbook);[-\w\),; ]+(rim)/i],[k,n,[m,s]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[k,[n,z],[m,r]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[k,[n,y],[m,s]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[k,[n,y],[m,r]],[/(nexus 9)/i],[k,[n,"HTC"],[m,s]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[n,[k,/_/g," "],[m,r]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[k,[n,"Acer"],[m,s]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[k,[n,"Meizu"],[m,r]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[n,k,[m,r]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[n,k,[m,s]],[/(surface duo)/i],[k,[n,F],[m,s]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[k,[n,"Fairphone"],[m,r]],[/(u304aa)/i],[k,[n,"AT&T"],[m,r]],[/\bsie-(\w*)/i],[k,[n,"Siemens"],[m,r]],[/\b(rct\w+) b/i],[k,[n,"RCA"],[m,s]],[/\b(venue[\d ]{2,7}) b/i],[k,[n,"Dell"],[m,s]],[/\b(q(?:mv|ta)\w+) b/i],[k,[n,"Verizon"],[m,s]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[k,[n,"Barnes & Noble"],[m,s]],[/\b(tm\d{3}\w+) b/i],[k,[n,"NuVision"],[m,s]],[/\b(k88) b/i],[k,[n,"ZTE"],[m,s]],[/\b(nx\d{3}j) b/i],[k,[n,"ZTE"],[m,r]],[/\b(gen\d{3}) b.+49h/i],[k,[n,"Swiss"],[m,r]],[/\b(zur\d{3}) b/i],[k,[n,"Swiss"],[m,s]],[/\b((zeki)?tb.*\b) b/i],[k,[n,"Zeki"],[m,s]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[n,"Dragon Touch"],k,[m,s]],[/\b(ns-?\w{0,9}) b/i],[k,[n,"Insignia"],[m,s]],[/\b((nxa|next)-?\w{0,9}) b/i],[k,[n,"NextBook"],[m,s]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[n,"Voice"],k,[m,r]],[/\b(lvtel\-)?(v1[12]) b/i],[[n,"LvTel"],k,[m,r]],[/\b(ph-1) /i],[k,[n,"Essential"],[m,r]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[k,[n,"Envizen"],[m,s]],[/\b(trio[-\w\. ]+) b/i],[k,[n,"MachSpeed"],[m,s]],[/\btu_(1491) b/i],[k,[n,"Rotor"],[m,s]],[/(shield[\w ]+) b/i],[k,[n,"Nvidia"],[m,s]],[/(sprint) (\w+)/i],[n,k,[m,r]],[/(kin\.[onetw]{3})/i],[[k,/\./g," "],[n,F],[m,r]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[k,[n,M],[m,s]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[k,[n,M],[m,r]],[/smart-tv.+(samsung)/i],[n,[m,t]],[/hbbtv.+maple;(\d+)/i],[[k,/^/,"SmartTV"],[n,I],[m,t]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[n,"LG"],[m,t]],[/(apple) ?tv/i],[n,[k,x+" TV"],[m,t]],[/crkey/i],[[k,B+"cast"],[n,D],[m,t]],[/droid.+aft(\w)( bui|\))/i],[k,[n,w],[m,t]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[k,[n,J],[m,t]],[/(bravia[\w ]+)( bui|\))/i],[k,[n,K],[m,t]],[/(mitv-\w{5}) bui/i],[k,[n,L],[m,t]],[/Hbbtv.*(technisat) (.*);/i],[n,k,[m,t]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[n,U],[k,U],[m,t]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[m,t]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[n,k,[m,q]],[/droid.+; (shield) bui/i],[k,[n,"Nvidia"],[m,q]],[/(playstation [345portablevi]+)/i],[k,[n,K],[m,q]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[k,[n,F],[m,q]],[/((pebble))app/i],[n,k,[m,u]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[k,[n,x],[m,u]],[/droid.+; (glass) \d/i],[k,[n,D],[m,u]],[/droid.+; (wt63?0{2,3})\)/i],[k,[n,M],[m,u]],[/(quest( 2| pro)?)/i],[k,[n,N],[m,u]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[n,[m,v]],[/(aeobc)\b/i],[k,[n,w],[m,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[k,[m,r]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[k,[m,s]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[m,s]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[m,r]],[/(android[-\w\. ]{0,9});.+buil/i],[k,[n,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[o,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[o,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,o],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[o,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,o],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[l,[o,W,X]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[l,"Windows"],[o,W,X]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[o,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,P],[o,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[o,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,o],[/\(bb(10);/i],[o,[l,z]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[o,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[o,[l,C+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[o,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[o,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[o,[l,B+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,O],o],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,o],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],o],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,o]]},Z=function(a,b){if(typeof a===h&&(b=a,a=void 0),!(this instanceof Z))return new Z(a,b).getResult();var c=typeof d!==g&&d.navigator?d.navigator:void 0,e=a||(c&&c.userAgent?c.userAgent:""),q=c&&c.userAgentData?c.userAgentData:void 0,t=b?Q(Y,b):Y,u=c&&c.userAgent==e;return this.getBrowser=function(){var a,b={};return b[l]=void 0,b[o]=void 0,V.call(b,e,t.browser),b[j]=typeof(a=b[o])===i?a.replace(/[^\d\.]/g,"").split(".")[0]:void 0,u&&c&&c.brave&&typeof c.brave.isBrave==f&&(b[l]="Brave"),b},this.getCPU=function(){var a={};return a[p]=void 0,V.call(a,e,t.cpu),a},this.getDevice=function(){var a={};return a[n]=void 0,a[k]=void 0,a[m]=void 0,V.call(a,e,t.device),u&&!a[m]&&q&&q.mobile&&(a[m]=r),u&&"Macintosh"==a[k]&&c&&typeof c.standalone!==g&&c.maxTouchPoints&&c.maxTouchPoints>2&&(a[k]="iPad",a[m]=s),a},this.getEngine=function(){var a={};return a[l]=void 0,a[o]=void 0,V.call(a,e,t.engine),a},this.getOS=function(){var a={};return a[l]=void 0,a[o]=void 0,V.call(a,e,t.os),u&&!a[l]&&q&&"Unknown"!=q.platform&&(a[l]=q.platform.replace(/chrome os/i,O).replace(/macos/i,P)),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return e},this.setUA=function(a){return e=typeof a===i&&a.length>350?U(a,350):a,this},this.setUA(e),this};if(Z.VERSION="1.0.35",Z.BROWSER=R([l,o,j]),Z.CPU=R([p]),Z.DEVICE=R([k,n,m,q,r,t,s,u,v]),Z.ENGINE=Z.OS=R([l,o]),typeof c!==g)b.exports&&(c=b.exports=Z),c.UAParser=Z;else if(typeof define===f&&define.amd)a.r,void 0!==Z&&a.v(Z);else typeof d!==g&&(d.UAParser=Z);var $=typeof d!==g&&(d.jQuery||d.Zepto);if($&&!$.ua){var _=new Z;$.ua=_.getResult(),$.ua.get=function(){return _.getUA()},$.ua.set=function(a){_.setUA(a);var b=_.getResult();for(var c in b)$.ua[c]=b[c]}}}(this)}},e={};function f(a){var b=e[a];if(void 0!==b)return b.exports;var c=e[a]={exports:{}},g=!0;try{d[a].call(c.exports,c,c.exports,f),g=!1}finally{g&&delete e[a]}return c.exports}f.ab="/ROOT/node_modules/next/dist/compiled/ua-parser-js/",b.exports=f(226)},40881,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d,e={isBot:function(){return h},userAgent:function(){return j},userAgentFromString:function(){return i}};for(var f in e)Object.defineProperty(c,f,{enumerable:!0,get:e[f]});let g=(d=a.r(6431))&&d.__esModule?d:{default:d};function h(a){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(a)}function i(a){return{...(0,g.default)(a),isBot:void 0!==a&&h(a)}}function j({headers:a}){return i(a.get("user-agent")||void 0)}},50792,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"URLPattern",{enumerable:!0,get:function(){return d}});let d="u"<typeof URLPattern?void 0:URLPattern},51455,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"after",{enumerable:!0,get:function(){return e}});let d=a.r(56704);function e(a){let b=d.workAsyncStorage.getStore();if(!b)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:c}=b;return c.after(a)}},89969,(a,b,c)=>{"use strict";var d,e;Object.defineProperty(c,"__esModule",{value:!0}),d=a.r(51455),e=c,Object.keys(d).forEach(function(a){"default"===a||Object.prototype.hasOwnProperty.call(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:function(){return d[a]}})})},29574,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"connection",{enumerable:!0,get:function(){return j}});let d=a.r(56704),e=a.r(32319),f=a.r(60384),g=a.r(60312),h=a.r(13091),i=a.r(86309);function j(){let a=d.workAsyncStorage.getStore(),b=e.workUnitAsyncStorage.getStore();if(a){if(b&&"after"===b.phase&&!(0,i.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside \`after()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but \`after()\` executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E827",enumerable:!1,configurable:!0});if(a.forceStatic)return Promise.resolve(void 0);if(a.dynamicShouldError)throw Object.defineProperty(new g.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E847",enumerable:!1,configurable:!0});if(b)switch(b.type){case"cache":{let b=Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E841",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"private-cache":{let b=Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E837",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"unstable-cache":throw Object.defineProperty(Error(`Route ${a.route} used \`connection()\` inside a function cached with \`unstable_cache()\`. The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E840",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,h.makeHangingPromise)(b.renderSignal,a.route,"`connection()`");case"prerender-ppr":return(0,f.postponeWithTracking)(a.route,"connection",b.dynamicTracking);case"prerender-legacy":return(0,f.throwToInterruptStaticGeneration)("connection",a,b);case"request":return(0,f.trackDynamicDataInDynamicRender)(b),Promise.resolve(void 0)}}(0,e.throwForMissingRequestStore)("connection")}a.r(31382)},43405,(a,b,c)=>{let d={NextRequest:a.r(88491).NextRequest,NextResponse:a.r(51978).NextResponse,ImageResponse:a.r(58176).ImageResponse,userAgentFromString:a.r(40881).userAgentFromString,userAgent:a.r(40881).userAgent,URLPattern:a.r(50792).URLPattern,after:a.r(89969).after,connection:a.r(29574).connection};b.exports=d,c.NextRequest=d.NextRequest,c.NextResponse=d.NextResponse,c.ImageResponse=d.ImageResponse,c.userAgentFromString=d.userAgentFromString,c.userAgent=d.userAgent,c.URLPattern=d.URLPattern,c.after=d.after,c.connection=d.connection},13095,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},63564,a=>{"use strict";var b,c,d,e,f=a.i(37936),g=a.i(79058),h=a.i(23725),i=a.i(93951),j=a.i(64518),k=a.i(5246);a.i(70396);var l=a.i(73727);function m(a){return process.env[a]}let n=m("WORKOS_API_HOSTNAME"),o=m("WORKOS_API_HTTPS"),p=m("WORKOS_API_PORT"),q=m("WORKOS_COOKIE_DOMAIN"),r=m("WORKOS_COOKIE_MAX_AGE"),s=m("WORKOS_COOKIE_NAME"),t=m("WORKOS_COOKIE_SAMESITE"),u=null!=(b=m("WORKOS_API_KEY"))?b:"",v=null!=(c=m("WORKOS_CLIENT_ID"))?c:"",w=null!=(d=m("WORKOS_COOKIE_PASSWORD"))?d:"",x=null!=(e=process.env.NEXT_PUBLIC_WORKOS_REDIRECT_URI)?e:"";function y(a,b=!1,c=!1){let d,e,f=t||"lax";if(!["lax","strict","none"].includes(f.toLowerCase()))throw Error(`Invalid SameSite value: ${f}`);let g=a||x;if("none"===f.toLowerCase())d=!0;else if(g)try{let a=new URL(g);d="https:"===a.protocol}catch(a){d=!0}else d=!0;if(c)e=0;else if(r){let a=parseInt(r,10);e=Number.isFinite(a)?a:3456e4}else e=3456e4;if(b){let a=f.charAt(0).toUpperCase()+f.slice(1).toLowerCase(),b=["Path=/","HttpOnly",`SameSite=${a}`,`Max-Age=${e}`];return q&&b.push(`Domain=${q}`),d&&b.push("Secure"),b.join("; ")}return{path:"/",httpOnly:!0,secure:d,sameSite:f,maxAge:e,domain:q||""}}function z(a,b,c){let d=`workos-access-token=${c?"":null!=a?a:""}`,e=!1;if(b)try{let a=new URL(b);e="localhost"!==a.hostname&&"127.0.0.1"!==a.hostname}catch(a){if(e=!0,x)try{let a=new URL(x);e="https:"===a.protocol}catch(a){e=!1}}else if(x)try{let a=new URL(x);e="https:"===a.protocol}catch(a){e=!1}let f=[d,"SameSite=Lax",`Max-Age=${30*!c}`];return e&&f.push("Secure"),c&&f.push(`Expires=${new Date(0).toUTCString()}`),f.join("; ")}function A(a){let b=a.replace(/-/g,"+").replace(/_/g,"/"),c="=".repeat((4-b.length%4)%4);return atob(b+c)}class B extends Error{constructor(a,b,c){super(a),this.name="AuthKitError",this.cause=b,this.data=c}}class C extends B{constructor(a,b,c){super(a,b),this.name="TokenRefreshError",this.userId=null==c?void 0:c.userId,this.sessionId=null==c?void 0:c.sessionId}}var D=a.i(58978),E=a.i(43405);function F(a){let b,c=!1;return()=>(c||(b=a(),c=!0),b)}let G={apiHostname:n,https:!o||"true"===o,port:p?parseInt(p):void 0,appInfo:{name:"authkit/nextjs",version:"2.13.0"}},H=F(()=>new D.WorkOS(u,G));async function I(a={}){var b;let{returnPathname:c,screenHint:d,organizationId:e,loginHint:f,prompt:g,state:h}=a,i=a.redirectUri;i||(i=null!=(b=(await (0,k.headers)()).get("x-redirect-uri"))?b:void 0);let j=c?btoa(JSON.stringify({returnPathname:c})).replace(/\+/g,"-").replace(/\//g,"_"):null,l=j&&h?`${j}.${h}`:j||h||void 0;return H().userManagement.getAuthorizationUrl({provider:"authkit",clientId:v,redirectUri:null!=i?i:x,state:l,screenHint:d,organizationId:e,loginHint:f,prompt:g})}function J(a){return a.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}let K=["x-workos-middleware","x-url","x-redirect-uri","x-sign-up-paths","x-workos-session"],L=["set-cookie","cache-control","vary","www-authenticate","proxy-authenticate","link","x-middleware-cache"],M=["set-cookie","www-authenticate","proxy-authenticate","link"];function N(a){let b=a.toLowerCase();return K.includes(b)||b.startsWith("x-workos-")}function O(a,b,c){let d=b.toLowerCase();if(M.includes(d))a.append(b,c);else if("vary"===d){let d=a.get(b),e=new Set([...d?d.split(",").map(a=>a.trim()):[],...c.split(",").map(a=>a.trim())]);a.set(b,[...e].join(", "))}else a.set(b,c)}function P(a,b){for(let[c,d]of b)O(a.headers,c,d);return a}function Q(a,b,c={}){let{requestHeaders:d,responseHeaders:e}=function(a,b){let c=new Headers(b),d=new Headers(a.headers);for(let a of[...d.keys()])N(a)&&d.delete(a);for(let a of K){let b=c.get(a);null!=b&&d.set(a,b)}let e=new Headers;for(let[a,b]of c){let c=a.toLowerCase();!N(c)&&L.includes(c)&&O(e,a,b)}return e.has("set-cookie")&&!e.has("cache-control")&&e.set("cache-control","no-store"),{requestHeaders:d,responseHeaders:e}}(a,b),{redirect:f,redirectStatus:g}=c;if(null!=f&&""!==f){let b;try{b=f instanceof URL?f:new URL(f,a.url)}catch(a){throw Error(`Invalid redirect URL: "${f}". Must be a valid absolute or relative URL.`)}let c=a.method.toUpperCase();return P(E.NextResponse.redirect(b,null!=g?g:"GET"===c||"HEAD"===c?307:303),e)}return P(E.NextResponse.next({request:{headers:d}}),e)}var R=a.i(13095);let S="x-workos-session",T="x-workos-middleware",U="x-sign-up-paths",V=F(()=>(0,h.createRemoteJWKSet)(new URL(H().userManagement.getJwksUrl(v))));function W(a,b,c){if(!(null==c?void 0:c.accessToken)&&!b.cookies.has(s||"wos-session")&&!b.headers.has("authorization"))return;let d=new Set(["cookie"]);b.headers.has("authorization")&&d.add("authorization");let e=a.get("Vary");e&&e.split(",").forEach(a=>{let b=a.trim().toLowerCase();b&&d.add(b)}),a.set("Vary",Array.from(d).map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(", ")),a.set("Cache-Control","private, no-cache, no-store, must-revalidate, max-age=0"),a.set("x-middleware-cache","no-cache")}function X(a){let b=(a.headers.get("accept")||"").includes("text/html"),c=a.headers.has("RSC")||a.headers.has("Next-Router-State-Tree"),d="prefetch"===a.headers.get("Purpose")||"prefetch"===a.headers.get("Sec-Purpose")||a.headers.has("Next-Router-Prefetch");return b&&!c&&!d}async function Y(a){return(0,g.sealData)(a,{password:w,ttl:0})}async function Z(a,b,c,d,e,f=!1){let g;if(!d&&!x)throw Error("You must provide a redirect URI in the AuthKit middleware or in the environment variables.");if(!w||w.length<32)throw Error("You must provide a valid cookie password that is at least 32 characters in the environment variables.");g=new URL(d?d:x),c.enabled&&g.pathname===a.nextUrl.pathname&&!c.unauthenticatedPaths.includes(g.pathname)&&c.unauthenticatedPaths.push(g.pathname);let h=c.unauthenticatedPaths.filter(b=>aa(b).exec(a.nextUrl.pathname)),{session:i,headers:j,authorizationUrl:k}=await $(a,{debug:b,redirectUri:d,screenHint:ai(e,a.nextUrl.pathname),eagerAuth:f});return(e.length>0&&j.set(U,e.join(",")),W(j,a,i),c.enabled&&0===h.length&&!i.user)?(b&&console.log(`Unauthenticated user on protected route ${a.url}, redirecting to AuthKit`),Q(a,j,{redirect:k})):Q(a,j)}async function $(a,b={debug:!1}){var c,d;let e=await af(a),f=new Headers;if(f.set(T,"true"),f.set("x-url",a.url),b.redirectUri&&f.set("x-redirect-uri",b.redirectUri),f.delete(S),!e)return b.debug&&console.log("No session found from cookie"),{session:{user:null},headers:f,authorizationUrl:await I({returnPathname:ah(a.url),redirectUri:b.redirectUri||x,screenHint:b.screenHint})};let g=await ae(e.accessToken),h=s||"wos-session";if(W(f,a,e),g){f.set(S,a.cookies.get(h).value);let{sid:c,org_id:d,role:g,roles:j,permissions:k,entitlements:l,feature_flags:m}=(0,i.decodeJwt)(e.accessToken);if(b.eagerAuth&&X(a)){let b=a.cookies.get("workos-access-token");b&&b.value===e.accessToken||f.append("Set-Cookie",z(e.accessToken,a.url))}return{session:{sessionId:c,user:e.user,organizationId:d,role:g,roles:j,permissions:k,entitlements:l,featureFlags:m,impersonator:e.impersonator,accessToken:e.accessToken},headers:f}}try{b.debug&&console.log(`Session invalid. ${e.accessToken?`Refreshing access token that ends in ${e.accessToken.slice(-10)}`:"Access token missing."}`);let{org_id:d}=(0,i.decodeJwt)(e.accessToken),{accessToken:g,refreshToken:j,user:k,impersonator:l}=await H().userManagement.authenticateWithRefreshToken({clientId:v,refreshToken:e.refreshToken,organizationId:d});b.debug&&console.log("Session successfully refreshed");let m=await Y({accessToken:g,refreshToken:j,user:k,impersonator:l});f.append("Set-Cookie",`${h}=${m}; ${y(a.url,!0)}`),f.set(S,m),b.eagerAuth&&X(a)&&f.append("Set-Cookie",z(g,a.url));let{sid:n,org_id:o,role:p,roles:q,permissions:r,entitlements:s,feature_flags:t}=(0,i.decodeJwt)(g);return null==(c=b.onSessionRefreshSuccess)||c.call(b,{accessToken:g,user:k,impersonator:l,organizationId:o}),{session:{sessionId:n,user:k,organizationId:o,role:p,roles:q,permissions:r,entitlements:s,featureFlags:t,impersonator:l,accessToken:g},headers:f}}catch(e){b.debug&&console.log("Failed to refresh. Deleting cookie.",e);let c=`${h}=; Expires=${new Date(0).toUTCString()}; ${y(a.url,!0,!0)}`;if(f.append("Set-Cookie",c),b.eagerAuth){let b=z(null,a.url,!0);f.append("Set-Cookie",b)}return null==(d=b.onSessionRefreshError)||d.call(b,{error:e,request:a}),{session:{user:null},headers:f,authorizationUrl:await I({returnPathname:ah(a.url),redirectUri:b.redirectUri||x})}}}async function _({organizationId:a,ensureSignedIn:b=!1}={}){let c,d=await af();if(!d)return b&&await ab(),{user:null};let{org_id:e}=(0,i.decodeJwt)(d.accessToken);try{c=await H().userManagement.authenticateWithRefreshToken({clientId:v,refreshToken:d.refreshToken,organizationId:null!=a?a:e})}catch(a){throw new C(`Failed to refresh session: ${a instanceof Error?a.message:String(a)}`,a,function(a){if(!(null==a?void 0:a.accessToken))return{};try{let{payload:b}=function(a){let b=a.split(".");if(3!==b.length)throw Error("Invalid JWT format");try{let a=JSON.parse(A(b[0])),c=JSON.parse(A(b[1]));return{header:a,payload:c}}catch(a){throw Error(`Failed to decode JWT: ${a instanceof Error?a.message:String(a)}`)}}(a.accessToken);return{userId:b.sub,sessionId:b.sid}}catch(a){return{}}}(d))}let f=(await (0,k.headers)()).get("x-url");await aj(c,f||x);let{accessToken:g,user:h,impersonator:j}=c,{sid:l,org_id:m,role:n,roles:o,permissions:p,entitlements:q,feature_flags:r}=(0,i.decodeJwt)(g);return{sessionId:l,user:h,organizationId:m,role:n,roles:o,permissions:p,entitlements:q,featureFlags:r,impersonator:j,accessToken:g}}function aa(a){try{let b=new URL(a,"https://example.com"),c=`${b.pathname}${b.hash||""}`,d=function(a,b){void 0===b&&(b={});for(var c=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];if("*"===d||"+"===d||"?"===d){b.push({type:"MODIFIER",index:c,value:a[c++]});continue}if("\\"===d){b.push({type:"ESCAPED_CHAR",index:c++,value:a[c++]});continue}if("{"===d){b.push({type:"OPEN",index:c,value:a[c++]});continue}if("}"===d){b.push({type:"CLOSE",index:c,value:a[c++]});continue}if(":"===d){for(var e="",f=c+1;f<a.length;){var g=a.charCodeAt(f);if(g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||95===g){e+=a[f++];continue}break}if(!e)throw TypeError("Missing parameter name at ".concat(c));b.push({type:"NAME",index:c,value:e}),c=f;continue}if("("===d){var h=1,i="",f=c+1;if("?"===a[f])throw TypeError('Pattern cannot start with "?" at '.concat(f));for(;f<a.length;){if("\\"===a[f]){i+=a[f++]+a[f++];continue}if(")"===a[f]){if(0==--h){f++;break}}else if("("===a[f]&&(h++,"?"!==a[f+1]))throw TypeError("Capturing groups are not allowed at ".concat(f));i+=a[f++]}if(h)throw TypeError("Unbalanced pattern at ".concat(c));if(!i)throw TypeError("Missing pattern at ".concat(c));b.push({type:"PATTERN",index:c,value:i}),c=f;continue}b.push({type:"CHAR",index:c,value:a[c++]})}return b.push({type:"END",index:c,value:""}),b}(a),d=b.prefixes,e=void 0===d?"./":d,f=b.delimiter,g=void 0===f?"/#?":f,h=[],i=0,j=0,k="",l=function(a){if(j<c.length&&c[j].type===a)return c[j++].value},m=function(a){var b=l(a);if(void 0!==b)return b;var d=c[j],e=d.type,f=d.index;throw TypeError("Unexpected ".concat(e," at ").concat(f,", expected ").concat(a))},n=function(){for(var a,b="";a=l("CHAR")||l("ESCAPED_CHAR");)b+=a;return b},o=function(a){for(var b=0;b<g.length;b++){var c=g[b];if(a.indexOf(c)>-1)return!0}return!1},p=function(a){var b=h[h.length-1],c=a||(b&&"string"==typeof b?b:"");if(b&&!c)throw TypeError('Must have text between two parameters, missing text after "'.concat(b.name,'"'));return!c||o(c)?"[^".concat(J(g),"]+?"):"(?:(?!".concat(J(c),")[^").concat(J(g),"])+?")};j<c.length;){var q=l("CHAR"),r=l("NAME"),s=l("PATTERN");if(r||s){var t=q||"";-1===e.indexOf(t)&&(k+=t,t=""),k&&(h.push(k),k=""),h.push({name:r||i++,prefix:t,suffix:"",pattern:s||p(t),modifier:l("MODIFIER")||""});continue}var u=q||l("ESCAPED_CHAR");if(u){k+=u;continue}if(k&&(h.push(k),k=""),l("OPEN")){var t=n(),v=l("NAME")||"",w=l("PATTERN")||"",x=n();m("CLOSE"),h.push({name:v||(w?i++:""),pattern:v&&!w?p(t):w,prefix:t,suffix:x,modifier:l("MODIFIER")||""});continue}m("END")}return h}(c),e=function(a,b,c){void 0===c&&(c={});for(var d,e=c.strict,f=void 0!==e&&e,g=c.start,h=c.end,i=c.encode,j=void 0===i?function(a){return a}:i,k=c.delimiter,l=c.endsWith,m="[".concat(J(void 0===l?"":l),"]|$"),n="[".concat(J(void 0===k?"/#?":k),"]"),o=void 0===g||g?"^":"",p=0;p<a.length;p++){var q=a[p];if("string"==typeof q)o+=J(j(q));else{var r=J(j(q.prefix)),s=J(j(q.suffix));if(q.pattern)if(r||s)if("+"===q.modifier||"*"===q.modifier){var t="*"===q.modifier?"?":"";o+="(?:".concat(r,"((?:").concat(q.pattern,")(?:").concat(s).concat(r,"(?:").concat(q.pattern,"))*)").concat(s,")").concat(t)}else o+="(?:".concat(r,"(").concat(q.pattern,")").concat(s,")").concat(q.modifier);else{if("+"===q.modifier||"*"===q.modifier)throw TypeError('Can not repeat "'.concat(q.name,'" without a prefix and suffix'));o+="(".concat(q.pattern,")").concat(q.modifier)}else o+="(?:".concat(r).concat(s,")").concat(q.modifier)}}if(void 0===h||h)f||(o+="".concat(n,"?")),o+=c.endsWith?"(?=".concat(m,")"):"$";else{var u=a[a.length-1],v="string"==typeof u?n.indexOf(u[u.length-1])>-1:void 0===u;f||(o+="(?:".concat(n,"(?=").concat(m,"))?")),v||(o+="(?=".concat(n,"|").concat(m,")"))}return new RegExp(o,(d=c)&&d.sensitive?"":"i")}(d).source;return new RegExp(e)}catch(b){console.log("err",b);let a=b instanceof Error?b.message:String(b);throw Error(`Error parsing routes for middleware auth. Reason: ${a}`)}}async function ab(){var a;let b=await (0,k.headers)(),c=b.get("x-url");if(!c)throw Error("No URL found in the headers");let d=ai(null==(a=b.get(U))?void 0:a.split(","),new URL(c).pathname),e=ah(c);(0,l.redirect)(await I({returnPathname:e,screenHint:d}))}async function ac(a){let b=null!=a?a:(await ad()).accessToken;return b?(0,i.decodeJwt)(b):{}}async function ad(a){let b=await ag();if(!b)return(null==a?void 0:a.ensureSignedIn)&&await ab(),{user:null};let{sid:c,org_id:d,role:e,roles:f,permissions:g,entitlements:h,feature_flags:j}=(0,i.decodeJwt)(b.accessToken);return{sessionId:c,user:b.user,organizationId:d,role:e,roles:f,permissions:g,entitlements:h,featureFlags:j,impersonator:b.impersonator,accessToken:b.accessToken}}async function ae(a){try{return await (0,j.jwtVerify)(a,V()),!0}catch(a){return!1}}async function af(a){let b,c=s||"wos-session";if(b=a?a.cookies.get(c):(await (0,k.cookies)()).get(c))return(0,g.unsealData)(b.value,{password:w})}async function ag(){let a=await (0,k.headers)();if(!a.get(T)){let b=a.get("x-url");throw Error(`You are calling 'withAuth' on ${null!=b?b:"a route"} that isn't covered by the AuthKit middleware. Make sure it is running on all paths you are calling 'withAuth' from by updating your middleware config in 'middleware.(js|ts)'.`)}let b=a.get(S);if(b)return(0,g.unsealData)(b,{password:w})}function ah(a){let b=new URL(a);return`${b.pathname}${b.searchParams.size>0?"?"+b.searchParams.toString():""}`}function ai(a,b){return a&&a.filter(a=>aa(a).exec(b)).length>0?"sign-up":"sign-in"}async function aj(a,b){let c=await Y(a),d=await (0,k.cookies)(),e="string"==typeof b?b:b.url;d.set(s||"wos-session",c,y(e))}(0,R.ensureServerEntryExports)([Y,Z,$,_,ac,ad,af,aj]),(0,f.registerServerReference)(Y,"40bf1e5b842fc7d1b2c51f4ad69cf027f06cde645a",null),(0,f.registerServerReference)(Z,"7e8958c6dfd0561c018183ad3d52897fce9eec6b61",null),(0,f.registerServerReference)($,"60a7465197574ef657efa89fbc99d002a5e84a0e1c",null),(0,f.registerServerReference)(_,"402507932f50b72a10fce923d6513979b290406277",null),(0,f.registerServerReference)(ac,"403198522f8c98a433baafd92ff186cec0ce3cdf8f",null),(0,f.registerServerReference)(ad,"408ea708d218a23e92323bec67c81614d8f7b0bb66",null),(0,f.registerServerReference)(af,"404d2db90e94b9fa54f81c0eb51a227af2099fb67d",null),(0,f.registerServerReference)(aj,"60cc81b506cbdd6800609e607843ba56c4e83a2027",null),a.s(["encryptSession",()=>Y,"getSessionFromCookie",()=>af,"getTokenClaims",()=>ac,"refreshSession",()=>_,"saveSession",()=>aj,"updateSession",()=>$,"updateSessionMiddleware",()=>Z,"withAuth",()=>ad],63564)}];

//# sourceMappingURL=node_modules_4f75f835._.js.map
module.exports=[5632,e=>{"use strict";let t=new TextEncoder,r=new TextDecoder;function i(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let i of e)t.set(i,r),r+=i.length;return t}e.s(["concat",()=>i,"decoder",0,r,"encoder",0,t])},14122,e=>{"use strict";var t=e.i(51615),r=e.i(5632);let i=e=>t.Buffer.from(e).toString("base64url");e.s(["decode",0,e=>{let i;return new Uint8Array(t.Buffer.from(((i=e)instanceof Uint8Array&&(i=r.decoder.decode(i)),i),"base64url"))},"encode",()=>i])},88201,e=>{"use strict";var t=e.i(14122);t.encode;let r=t.decode;e.s(["decode",0,r])},17444,e=>{"use strict";function t(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}e.s(["default",()=>t])},1842,e=>{"use strict";class t extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,t){super(e,t),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class r extends t{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:t}}),this.claim=r,this.reason=i,this.payload=t}}class i extends t{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",i="unspecified"){super(e,{cause:{claim:r,reason:i,payload:t}}),this.claim=r,this.reason=i,this.payload=t}}class n extends t{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class o extends t{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class a extends t{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class s extends t{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class c extends t{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class l extends t{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(e="no applicable key found in the JSON Web Key Set",t){super(e,t)}}class u extends t{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(e="multiple matching keys found in the JSON Web Key Set",t){super(e,t)}}class d extends t{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(e="request timed out",t){super(e,t)}}class p extends t{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(e="signature verification failed",t){super(e,t)}}e.s(["JOSEAlgNotAllowed",()=>n,"JOSEError",()=>t,"JOSENotSupported",()=>o,"JWKSInvalid",()=>c,"JWKSMultipleMatchingKeys",()=>u,"JWKSNoMatchingKey",()=>l,"JWKSTimeout",()=>d,"JWSInvalid",()=>a,"JWSSignatureVerificationFailed",()=>p,"JWTClaimValidationFailed",()=>r,"JWTExpired",()=>i,"JWTInvalid",()=>s])},35311,e=>{"use strict";var t=e.i(88201),r=e.i(5632),i=e.i(17444),n=e.i(1842);function o(e){let o,a;if("string"!=typeof e)throw new n.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:s,length:c}=e.split(".");if(5===c)throw new n.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==c)throw new n.JWTInvalid("Invalid JWT");if(!s)throw new n.JWTInvalid("JWTs must contain a payload");try{o=(0,t.decode)(s)}catch{throw new n.JWTInvalid("Failed to base64url decode the payload")}try{a=JSON.parse(r.decoder.decode(o))}catch{throw new n.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,i.default)(a))throw new n.JWTInvalid("Invalid JWT Claims Set");return a}e.s(["decodeJwt",()=>o])},17374,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={ActionDidNotRevalidate:function(){return o},ActionDidRevalidateDynamicOnly:function(){return s},ActionDidRevalidateStaticAndDynamic:function(){return a}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});let o=0,a=1,s=2},30240,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={MutableRequestCookiesAdapter:function(){return h},ReadonlyRequestCookiesError:function(){return l},RequestCookiesAdapter:function(){return u},appendMutableCookies:function(){return f},areCookiesMutableInCurrentPhase:function(){return g},createCookiesWithMutableAccessCheck:function(){return y},getModifiedCookieValues:function(){return p},responseCookiesToRequestCookies:function(){return v}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});let o=e.r(472),a=e.r(30759),s=e.r(56704),c=e.r(17374);class l extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new l}}class u{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return l.callable;default:return a.ReflectAdapter.get(e,t,r)}}})}}let d=Symbol.for("next.mutated.cookies");function p(e){let t=e[d];return t&&Array.isArray(t)&&0!==t.length?t:[]}function f(e,t){let r=p(t);if(0===r.length)return!1;let i=new o.ResponseCookies(e),n=i.getAll();for(let e of r)i.set(e);for(let e of n)i.set(e);return!0}class h{static wrap(e,t){let r=new o.ResponseCookies(new Headers);for(let t of e.getAll())r.set(t);let i=[],n=new Set,l=()=>{let e=s.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=c.ActionDidRevalidateStaticAndDynamic),i=r.getAll().filter(e=>n.has(e.name)),t){let e=[];for(let t of i){let r=new o.ResponseCookies(new Headers);r.set(t),e.push(r.toString())}t(e)}},u=new Proxy(r,{get(e,t,r){switch(t){case d:return i;case"delete":return function(...t){n.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.delete(...t),u}finally{l()}};case"set":return function(...t){n.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t),u}finally{l()}};default:return a.ReflectAdapter.get(e,t,r)}}});return u}}function y(e){let t=new Proxy(e.mutableCookies,{get(r,i,n){switch(i){case"delete":return function(...i){return m(e,"cookies().delete"),r.delete(...i),t};case"set":return function(...i){return m(e,"cookies().set"),r.set(...i),t};default:return a.ReflectAdapter.get(r,i,n)}}});return t}function g(e){return"action"===e.phase}function m(e,t){if(!g(e))throw new l}function v(e){let t=new o.RequestCookies(new Headers);for(let r of e.getAll())t.set(r);return t}},13884,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return c}});let i=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(void 0);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(e.r(3270));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}let o={current:null},a="function"==typeof i.cache?i.cache:e=>e,s=console.warn;function c(e){return function(...t){s(e(...t))}}a(e=>{try{s(o.current)}finally{o.current=null}})},7460,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"cookies",{enumerable:!0,get:function(){return f}});let i=e.r(30240),n=e.r(472),o=e.r(56704),a=e.r(32319),s=e.r(68665),c=e.r(97573),l=e.r(4642),u=e.r(13884),d=e.r(43824),p=e.r(76414);function f(){let e="cookies",t=o.workAsyncStorage.getStore(),r=a.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(t.forceStatic)return y(i.RequestCookiesAdapter.seal(new n.RequestCookies(new Headers({}))));if(t.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(r)switch(r.type){case"cache":let o=Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(o,f),t.invalidDynamicUsageError??=o,o;case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var u=t,g=r;let a=h.get(g);if(a)return a;let m=(0,l.makeHangingPromise)(g.renderSignal,u.route,"`cookies()`");return h.set(g,m),m;case"prerender-client":let v="`cookies`";throw Object.defineProperty(new p.InvariantError(`${v} must not be used within a Client Component. Next.js should be preventing ${v} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,s.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,s.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,s.delayUntilRuntimeStage)(r,y(r.cookies));case"private-cache":return y(r.cookies);case"request":return(0,s.trackDynamicDataInDynamicRender)(r),y((0,i.areCookiesMutableInCurrentPhase)(r)?r.userspaceMutableCookies:r.cookies)}}(0,a.throwForMissingRequestStore)(e)}e.r(18185);let h=new WeakMap;function y(e){let t=h.get(e);if(t)return t;let r=Promise.resolve(e);return h.set(e,r),r}(0,u.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},36052,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={HeadersAdapter:function(){return s},ReadonlyHeadersError:function(){return a}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});let o=e.r(30759);class a extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new a}}class s extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,i){if("symbol"==typeof r)return o.ReflectAdapter.get(t,r,i);let n=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===n);if(void 0!==a)return o.ReflectAdapter.get(t,a,i)},set(t,r,i,n){if("symbol"==typeof r)return o.ReflectAdapter.set(t,r,i,n);let a=r.toLowerCase(),s=Object.keys(e).find(e=>e.toLowerCase()===a);return o.ReflectAdapter.set(t,s??r,i,n)},has(t,r){if("symbol"==typeof r)return o.ReflectAdapter.has(t,r);let i=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0!==n&&o.ReflectAdapter.has(t,n)},deleteProperty(t,r){if("symbol"==typeof r)return o.ReflectAdapter.deleteProperty(t,r);let i=r.toLowerCase(),n=Object.keys(e).find(e=>e.toLowerCase()===i);return void 0===n||o.ReflectAdapter.deleteProperty(t,n)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return a.callable;default:return o.ReflectAdapter.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new s(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,i]of this.entries())e.call(t,i,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},19971,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"headers",{enumerable:!0,get:function(){return p}});let i=e.r(36052),n=e.r(56704),o=e.r(32319),a=e.r(68665),s=e.r(97573),c=e.r(4642),l=e.r(13884),u=e.r(43824),d=e.r(76414);function p(){let e="headers",t=n.workAsyncStorage.getStore(),r=o.workUnitAsyncStorage.getStore();if(t){if(r&&"after"===r.phase&&!(0,u.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(t.forceStatic)return h(i.HeadersAdapter.seal(new Headers({})));if(r)switch(r.type){case"cache":{let e=Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(e,p),t.invalidDynamicUsageError??=e,e}case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(t.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(r)switch(r.type){case"prerender":var l=t,y=r;let n=f.get(y);if(n)return n;let o=(0,c.makeHangingPromise)(y.renderSignal,l.route,"`headers()`");return f.set(y,o),o;case"prerender-client":let g="`headers`";throw Object.defineProperty(new d.InvariantError(`${g} must not be used within a client component. Next.js should be preventing ${g} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,a.postponeWithTracking)(t.route,e,r.dynamicTracking);case"prerender-legacy":return(0,a.throwToInterruptStaticGeneration)(e,t,r);case"prerender-runtime":return(0,a.delayUntilRuntimeStage)(r,h(r.headers));case"private-cache":return h(r.headers);case"request":return(0,a.trackDynamicDataInDynamicRender)(r),h(r.headers)}}(0,o.throwForMissingRequestStore)(e)}e.r(18185);let f=new WeakMap;function h(e){let t=f.get(e);if(t)return t;let r=Promise.resolve(e);return f.set(e,r),r}(0,l.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},21423,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"draftMode",{enumerable:!0,get:function(){return u}});let i=e.r(32319),n=e.r(56704),o=e.r(68665),a=e.r(13884),s=e.r(97573),c=e.r(65252),l=e.r(76414);function u(){let e=n.workAsyncStorage.getStore(),t=i.workUnitAsyncStorage.getStore();switch((!e||!t)&&(0,i.throwForMissingRequestStore)("draftMode"),t.type){case"prerender-runtime":return(0,o.delayUntilRuntimeStage)(t,d(t.draftMode,e));case"request":return d(t.draftMode,e);case"cache":case"private-cache":case"unstable-cache":let r=(0,i.getDraftModeProviderForCacheScope)(e,t);if(r)return d(r,e);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return d(null,e);default:return t}}function d(e,t){let r=f.get(e??p);return r||Promise.resolve(new h(e))}e.r(30759);let p={},f=new WeakMap;class h{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){y("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){y("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function y(e,t){let r=n.workAsyncStorage.getStore(),a=i.workUnitAsyncStorage.getStore();if(r){if((null==a?void 0:a.phase)==="after")throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(r.dynamicShouldError)throw Object.defineProperty(new s.StaticGenBailoutError(`Route ${r.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(a)switch(a.type){case"cache":case"private-cache":{let i=Object.defineProperty(Error(`Route ${r.route} used "${e}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(i,t),r.invalidDynamicUsageError??=i,i}case"unstable-cache":throw Object.defineProperty(Error(`Route ${r.route} used "${e}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let t=Object.defineProperty(Error(`Route ${r.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,o.abortAndThrowOnSynchronousRequestDataAccess)(r.route,e,t,a)}case"prerender-client":let i="`draftMode`";throw Object.defineProperty(new l.InvariantError(`${i} must not be used within a Client Component. Next.js should be preventing ${i} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,o.postponeWithTracking)(r.route,e,a.dynamicTracking);case"prerender-legacy":a.revalidate=0;let n=Object.defineProperty(new c.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.dynamicUsageDescription=e,r.dynamicUsageStack=n.stack,n;case"request":(0,o.trackDynamicDataInDynamicRender)(a)}}}(0,a.createDedupedByCallsiteServerErrorLoggerDev)(function(e,t){let r=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${r}used ${t}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},93458,(e,t,r)=>{t.exports.cookies=e.r(7460).cookies,t.exports.headers=e.r(19971).headers,t.exports.draftMode=e.r(21423).draftMode},8595,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReadonlyURLSearchParams",{enumerable:!0,get:function(){return n}});class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},50723,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"RedirectStatusCode",{enumerable:!0,get:function(){return n}});var i,n=((i={})[i.SeeOther=303]="SeeOther",i[i.TemporaryRedirect=307]="TemporaryRedirect",i[i.PermanentRedirect=308]="PermanentRedirect",i);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},19334,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i,n={REDIRECT_ERROR_CODE:function(){return s},RedirectType:function(){return c},isRedirectError:function(){return l}};for(var o in n)Object.defineProperty(r,o,{enumerable:!0,get:n[o]});let a=e.r(50723),s="NEXT_REDIRECT";var c=((i={}).push="push",i.replace="replace",i);function l(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,i]=t,n=t.slice(2,-2).join(";"),o=Number(t.at(-2));return r===s&&("replace"===i||"push"===i)&&"string"==typeof n&&!isNaN(o)&&o in a.RedirectStatusCode}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},22349,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={getRedirectError:function(){return c},getRedirectStatusCodeFromError:function(){return f},getRedirectTypeFromError:function(){return p},getURLFromRedirectError:function(){return d},permanentRedirect:function(){return u},redirect:function(){return l}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});let o=e.r(50723),a=e.r(19334),s=e.r(20635).actionAsyncStorage;function c(e,t,r=o.RedirectStatusCode.TemporaryRedirect){let i=Object.defineProperty(Error(a.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i.digest=`${a.REDIRECT_ERROR_CODE};${t};${e};${r};`,i}function l(e,t){throw c(e,t??=s?.getStore()?.isAction?a.RedirectType.push:a.RedirectType.replace,o.RedirectStatusCode.TemporaryRedirect)}function u(e,t=a.RedirectType.replace){throw c(e,t,o.RedirectStatusCode.PermanentRedirect)}function d(e){return(0,a.isRedirectError)(e)?e.digest.split(";").slice(2,-2).join(";"):null}function p(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return e.digest.split(";",2)[1]}function f(e){if(!(0,a.isRedirectError)(e))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(e.digest.split(";").at(-2))}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},12053,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={HTTPAccessErrorStatus:function(){return o},HTTP_ERROR_FALLBACK_ERROR_CODE:function(){return s},getAccessFallbackErrorTypeByStatus:function(){return u},getAccessFallbackHTTPStatus:function(){return l},isHTTPAccessFallbackError:function(){return c}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});let o={NOT_FOUND:404,FORBIDDEN:403,UNAUTHORIZED:401},a=new Set(Object.values(o)),s="NEXT_HTTP_ERROR_FALLBACK";function c(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r]=e.digest.split(";");return t===s&&a.has(Number(r))}function l(e){return Number(e.digest.split(";")[1])}function u(e){switch(e){case 401:return"unauthorized";case 403:return"forbidden";case 404:return"not-found";default:return}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},2507,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"notFound",{enumerable:!0,get:function(){return o}});let i=e.r(12053),n=`${i.HTTP_ERROR_FALLBACK_ERROR_CODE};404`;function o(){let e=Object.defineProperty(Error(n),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw e.digest=n,e}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},47658,(e,t,r)=>{"use strict";function i(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"forbidden",{enumerable:!0,get:function(){return i}}),e.r(12053).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},35458,(e,t,r)=>{"use strict";function i(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unauthorized",{enumerable:!0,get:function(){return i}}),e.r(12053).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},67539,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isPostpone",{enumerable:!0,get:function(){return n}});let i=Symbol.for("react.postpone");function n(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}},62782,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isNextRouterError",{enumerable:!0,get:function(){return o}});let i=e.r(12053),n=e.r(19334);function o(e){return(0,n.isRedirectError)(e)||(0,i.isHTTPAccessFallbackError)(e)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},17387,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,a.isNextRouterError)(t)||(0,o.isBailoutToCSRError)(t)||(0,c.isDynamicServerError)(t)||(0,s.isDynamicPostpone)(t)||(0,n.isPostpone)(t)||(0,i.isHangingPromiseRejectionError)(t)||(0,s.isPrerenderInterruptedError)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let i=e.r(4642),n=e.r(67539),o=e.r(31584),a=e.r(62782),s=e.r(68665),c=e.r(65252);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},9811,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"unstable_rethrow",{enumerable:!0,get:function(){return i}});let i=e.r(17387).unstable_rethrow;("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},79509,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={ReadonlyURLSearchParams:function(){return o.ReadonlyURLSearchParams},RedirectType:function(){return s.RedirectType},forbidden:function(){return l.forbidden},notFound:function(){return c.notFound},permanentRedirect:function(){return a.permanentRedirect},redirect:function(){return a.redirect},unauthorized:function(){return u.unauthorized},unstable_isUnrecognizedActionError:function(){return p},unstable_rethrow:function(){return d.unstable_rethrow}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});let o=e.r(8595),a=e.r(22349),s=e.r(19334),c=e.r(2507),l=e.r(47658),u=e.r(35458),d=e.r(9811);function p(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},51783,e=>{"use strict";e.i(79509),e.s([])},84204,e=>{"use strict";var t,r,i,n;function o(e){return process.env[e]}let a=o("WORKOS_API_HOSTNAME"),s=o("WORKOS_API_HTTPS"),c=o("WORKOS_API_PORT"),l=o("WORKOS_COOKIE_DOMAIN"),u=o("WORKOS_COOKIE_MAX_AGE"),d=o("WORKOS_COOKIE_NAME"),p=o("WORKOS_COOKIE_SAMESITE"),f=null!=(t=o("WORKOS_API_KEY"))?t:"",h=null!=(r=o("WORKOS_CLIENT_ID"))?r:"",y=null!=(i=o("WORKOS_COOKIE_PASSWORD"))?i:"",g=null!=(n=process.env.NEXT_PUBLIC_WORKOS_REDIRECT_URI)?n:"";e.s(["WORKOS_API_HOSTNAME",()=>a,"WORKOS_API_HTTPS",()=>s,"WORKOS_API_KEY",()=>f,"WORKOS_API_PORT",()=>c,"WORKOS_CLIENT_ID",()=>h,"WORKOS_COOKIE_DOMAIN",()=>l,"WORKOS_COOKIE_MAX_AGE",()=>u,"WORKOS_COOKIE_NAME",()=>d,"WORKOS_COOKIE_PASSWORD",()=>y,"WORKOS_COOKIE_SAMESITE",()=>p,"WORKOS_REDIRECT_URI",()=>g])},52486,e=>{"use strict";var t=e.i(84204);function r(e,i=!1,n=!1){let o,a,s=t.WORKOS_COOKIE_SAMESITE||"lax";if(!["lax","strict","none"].includes(s.toLowerCase()))throw Error(`Invalid SameSite value: ${s}`);let c=e||t.WORKOS_REDIRECT_URI;if("none"===s.toLowerCase())o=!0;else if(c)try{let e=new URL(c);o="https:"===e.protocol}catch(e){o=!0}else o=!0;if(n)a=0;else if(t.WORKOS_COOKIE_MAX_AGE){let e=parseInt(t.WORKOS_COOKIE_MAX_AGE,10);a=Number.isFinite(e)?e:3456e4}else a=3456e4;if(i){let e=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase(),r=["Path=/","HttpOnly",`SameSite=${e}`,`Max-Age=${a}`];return t.WORKOS_COOKIE_DOMAIN&&r.push(`Domain=${t.WORKOS_COOKIE_DOMAIN}`),o&&r.push("Secure"),r.join("; ")}return{path:"/",httpOnly:!0,secure:o,sameSite:s,maxAge:a,domain:t.WORKOS_COOKIE_DOMAIN||""}}function i(e,r,i){let n=`workos-access-token=${i?"":null!=e?e:""}`,o=!1;if(r)try{let e=new URL(r);o="localhost"!==e.hostname&&"127.0.0.1"!==e.hostname}catch(r){o=!0;let e=t.WORKOS_REDIRECT_URI;if(e)try{let t=new URL(e);o="https:"===t.protocol}catch(e){o=!1}}else if(t.WORKOS_REDIRECT_URI)try{let e=new URL(t.WORKOS_REDIRECT_URI);o="https:"===e.protocol}catch(e){o=!1}let a=[n,"SameSite=Lax",`Max-Age=${30*!i}`];return o&&a.push("Secure"),i&&a.push(`Expires=${new Date(0).toUTCString()}`),a.join("; ")}e.s(["getCookieOptions",()=>r,"getJwtCookie",()=>i])},22433,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoProvider=void 0,r.CryptoProvider=class{constructor(){this.encoder=new TextEncoder}}},75963,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.NodeCryptoProvider=void 0;let s=o(e.r(54799)),c=e.r(22433);class l extends c.CryptoProvider{computeHMACSignature(e,t){return s.createHmac("sha256",t).update(e,"utf8").digest("hex")}computeHMACSignatureAsync(e,t){return a(this,void 0,void 0,function*(){return this.computeHMACSignature(e,t)})}secureCompare(e,t){return a(this,void 0,void 0,function*(){let r=this.encoder.encode(e),i=this.encoder.encode(t);if(r.length!==i.length)return!1;let n=s.randomBytes(32),o=s.createHmac("sha256",n).update(r).digest(),a=s.createHmac("sha256",n).update(i).digest();return s.timingSafeEqual(o,a)})}encrypt(e,t,r,i){return a(this,void 0,void 0,function*(){let n=r||s.randomBytes(32),o=s.createCipheriv("aes-256-gcm",t,n);i&&o.setAAD(Buffer.from(i));let a=Buffer.concat([o.update(Buffer.from(e)),o.final()]),c=o.getAuthTag();return{ciphertext:new Uint8Array(a),iv:new Uint8Array(n),tag:new Uint8Array(c)}})}decrypt(e,t,r,i,n){return a(this,void 0,void 0,function*(){let o=s.createDecipheriv("aes-256-gcm",t,r);return o.setAuthTag(Buffer.from(i)),n&&o.setAAD(Buffer.from(n)),new Uint8Array(Buffer.concat([o.update(Buffer.from(e)),o.final()]))})}randomBytes(e){return new Uint8Array(s.randomBytes(e))}randomUUID(){return s.randomUUID()}}r.NodeCryptoProvider=l},66769,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.SubtleCryptoProvider=void 0;let n=e.r(22433);class o extends n.CryptoProvider{constructor(e){super(),this.subtleCrypto=e||crypto.subtle}computeHMACSignature(e,t){throw Error("SubleCryptoProvider cannot be used in a synchronous context.")}computeHMACSignatureAsync(e,t){return i(this,void 0,void 0,function*(){let r=new TextEncoder,i=yield this.subtleCrypto.importKey("raw",r.encode(t),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=new Uint8Array((yield this.subtleCrypto.sign("hmac",i,r.encode(e)))),o=Array(n.length);for(let e=0;e<n.length;e++)o[e]=a[n[e]];return o.join("")})}secureCompare(e,t){return i(this,void 0,void 0,function*(){let r=this.encoder.encode(e),i=this.encoder.encode(t);if(r.length!==i.length)return!1;let n={name:"HMAC",hash:"SHA-256"},o=yield crypto.subtle.generateKey(n,!1,["sign","verify"]),a=yield crypto.subtle.sign(n,o,r);return yield crypto.subtle.verify(n,o,a,i)})}encrypt(e,t,r,n){return i(this,void 0,void 0,function*(){let i=r||crypto.getRandomValues(new Uint8Array(32)),o=yield this.subtleCrypto.importKey("raw",t,{name:"AES-GCM"},!1,["encrypt"]),a={name:"AES-GCM",iv:i};n&&(a.additionalData=n);let s=new Uint8Array((yield this.subtleCrypto.encrypt(a,o,e))),c=s.length-16,l=s.slice(c);return{ciphertext:s.slice(0,c),iv:i,tag:l}})}decrypt(e,t,r,n,o){return i(this,void 0,void 0,function*(){let i=new Uint8Array(e.length+n.length);i.set(e,0),i.set(n,e.length);let a=yield this.subtleCrypto.importKey("raw",t,{name:"AES-GCM"},!1,["decrypt"]),s={name:"AES-GCM",iv:r};return o&&(s.additionalData=o),new Uint8Array((yield this.subtleCrypto.decrypt(s,a,i)))})}randomBytes(e){let t=new Uint8Array(e);return crypto.getRandomValues(t),t}randomUUID(){if("u">typeof crypto&&"function"==typeof crypto.randomUUID)return crypto.randomUUID();let e=this.randomBytes(16);e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=Array.from(e,e=>a[e]).join("");return`${t.slice(0,8)}-${t.slice(8,12)}-${t.slice(12,16)}-${t.slice(16,20)}-${t.slice(20)}`}}r.SubtleCryptoProvider=o;let a=Array(256);for(let e=0;e<a.length;e++)a[e]=e.toString(16).padStart(2,"0")},30559,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HttpClientError=r.HttpClientResponse=r.HttpClient=void 0;class i{constructor(e,t){this.baseURL=e,this.options=t,this.MAX_RETRY_ATTEMPTS=3,this.BACKOFF_MULTIPLIER=1.5,this.MINIMUM_SLEEP_TIME_IN_MILLISECONDS=500,this.RETRY_STATUS_CODES=[408,500,502,504],this.sleep=e=>new Promise(t=>setTimeout(t,this.getSleepTimeInMilliseconds(e)))}getClientName(){throw Error("getClientName not implemented")}addClientToUserAgent(e){return e.indexOf(" ")>-1?e.replace(/\b\s/,`/${this.getClientName()} `):e+=`/${this.getClientName()}`}static getResourceURL(e,t,r){return new URL([t,i.getQueryString(r)].filter(Boolean).join("?"),e).toString()}static getQueryString(e){if(!e)return;let t={};return Object.entries(e).forEach(([e,r])=>{""!==r&&void 0!==r&&(t[e]=r)}),new URLSearchParams(t).toString()}static getContentTypeHeader(e){if(e instanceof URLSearchParams)return{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}}static getBody(e){return null===e||e instanceof URLSearchParams?e:JSON.stringify(e)}static isPathRetryable(e){return e.startsWith("/fga/")||e.startsWith("/vault/")||e.startsWith("/audit_logs/events")}getSleepTimeInMilliseconds(e){return this.MINIMUM_SLEEP_TIME_IN_MILLISECONDS*Math.pow(this.BACKOFF_MULTIPLIER,e)*(Math.random()+.5)}}r.HttpClient=i,r.HttpClientResponse=class{constructor(e,t){this._statusCode=e,this._headers=t}getStatusCode(){return this._statusCode}getHeaders(){return this._headers}},r.HttpClientError=class extends Error{constructor({message:e,response:t}){super(e),this.name="HttpClientError",this.message="The request could not be completed.",this.message=e,this.response=t}}},29960,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ParseError=void 0,r.ParseError=class extends Error{constructor({message:e,rawBody:t,rawStatus:r,requestID:i}){super(e),this.name="ParseError",this.status=500,this.rawBody=t,this.rawStatus=r,this.requestID=i}}},69758,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.FetchHttpClientResponse=r.FetchHttpClient=void 0;let n=e.r(30559),o=e.r(29960);class a extends n.HttpClient{constructor(e,t,r){if(super(e,t),this.baseURL=e,this.options=t,!r){if(!globalThis.fetch)throw Error("Fetch function not defined in the global scope and no replacement was provided.");r=globalThis.fetch}this._fetchFn=r.bind(globalThis)}getClientName(){return"fetch"}get(e,t){return i(this,void 0,void 0,function*(){let r=n.HttpClient.getResourceURL(this.baseURL,e,t.params);return n.HttpClient.isPathRetryable(e)?yield this.fetchRequestWithRetry(r,"GET",null,t.headers):yield this.fetchRequest(r,"GET",null,t.headers)})}post(e,t,r){return i(this,void 0,void 0,function*(){let i=n.HttpClient.getResourceURL(this.baseURL,e,r.params);return n.HttpClient.isPathRetryable(e)?yield this.fetchRequestWithRetry(i,"POST",n.HttpClient.getBody(t),Object.assign(Object.assign({},n.HttpClient.getContentTypeHeader(t)),r.headers)):yield this.fetchRequest(i,"POST",n.HttpClient.getBody(t),Object.assign(Object.assign({},n.HttpClient.getContentTypeHeader(t)),r.headers))})}put(e,t,r){return i(this,void 0,void 0,function*(){let i=n.HttpClient.getResourceURL(this.baseURL,e,r.params);return n.HttpClient.isPathRetryable(e)?yield this.fetchRequestWithRetry(i,"PUT",n.HttpClient.getBody(t),Object.assign(Object.assign({},n.HttpClient.getContentTypeHeader(t)),r.headers)):yield this.fetchRequest(i,"PUT",n.HttpClient.getBody(t),Object.assign(Object.assign({},n.HttpClient.getContentTypeHeader(t)),r.headers))})}delete(e,t){return i(this,void 0,void 0,function*(){let r=n.HttpClient.getResourceURL(this.baseURL,e,t.params);return n.HttpClient.isPathRetryable(e)?yield this.fetchRequestWithRetry(r,"DELETE",null,t.headers):yield this.fetchRequest(r,"DELETE",null,t.headers)})}fetchRequest(e,t,r,a){var c,l,u,d,p;return i(this,void 0,void 0,function*(){let i,f,h="POST"===t||"PUT"===t||"PATCH"===t,{"User-Agent":y}=(null==(c=this.options)?void 0:c.headers)||{},g=null!=(u=null==(l=this.options)?void 0:l.timeout)?u:6e4;i=new AbortController,f=setTimeout(()=>{null==i||i.abort()},g);try{let c=yield this._fetchFn(e,{method:t,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null==(d=this.options)?void 0:d.headers),a),{"User-Agent":this.addClientToUserAgent((y||"workos-node").toString())}),body:r||(h?"":void 0),signal:null==i?void 0:i.signal});if(f&&clearTimeout(f),!c.ok){let e,t=null!=(p=c.headers.get("X-Request-ID"))?p:"",r=yield c.text();try{e=JSON.parse(r)}catch(e){if(e instanceof SyntaxError)throw new o.ParseError({message:e.message,rawBody:r,requestID:t,rawStatus:c.status});throw e}throw new n.HttpClientError({message:c.statusText,response:{status:c.status,headers:c.headers,data:e}})}return new s(c)}catch(e){if(f&&clearTimeout(f),e instanceof Error&&"AbortError"===e.name)throw new n.HttpClientError({message:`Request timeout after ${g}ms`,response:{status:408,headers:{},data:{error:"Request timeout"}}});throw e}})}fetchRequestWithRetry(e,t,r,n){return i(this,void 0,void 0,function*(){let o,a=1,s=()=>i(this,void 0,void 0,function*(){let i=null;try{o=yield this.fetchRequest(e,t,r,n)}catch(e){i=e}if(this.shouldRetryRequest(i,a))return a++,yield this.sleep(a),s();if(null!=i)throw i;return o});return s()})}shouldRetryRequest(e,t){return!(t>this.MAX_RETRY_ATTEMPTS)&&(!!(null!=e&&(e instanceof TypeError||e instanceof n.HttpClientError&&this.RETRY_STATUS_CODES.includes(e.response.status)))||!1)}}r.FetchHttpClient=a;class s extends n.HttpClientResponse{constructor(e){super(e.status,s._transformHeadersToObject(e.headers)),this._res=e}getRawResponse(){return this._res}toJSON(){let e=this._res.headers.get("content-type");return(null==e?void 0:e.includes("application/json"))?this._res.json():null}static _transformHeadersToObject(e){let t={};for(let r of Object.entries(e)){if(!Array.isArray(r)||2!==r.length)throw Error("Response objects produced by the fetch function given to FetchHttpClient do not have an iterable headers map. Response#headers should be an iterable object.");t[r[0]]=r[1]}return t}}r.FetchHttpClientResponse=s},70814,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.e&&e.e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.NodeHttpClientResponse=r.NodeHttpClient=void 0;let s=e.r(30559),c=o(e.r(47299)),l=o(e.r(43698)),u=c.default||c,d=l.default||l;class p extends s.HttpClient{constructor(e,t){super(e,t),this.baseURL=e,this.options=t,this.httpAgent=new u.Agent({keepAlive:!0}),this.httpsAgent=new d.Agent({keepAlive:!0})}getClientName(){return"node"}static getBody(e){return null==e?null:e instanceof URLSearchParams?e.toString():JSON.stringify(e)}get(e,t){return a(this,void 0,void 0,function*(){let r=s.HttpClient.getResourceURL(this.baseURL,e,t.params);return s.HttpClient.isPathRetryable(e)?yield this.nodeRequestWithRetry(r,"GET",null,t.headers):yield this.nodeRequest(r,"GET",null,t.headers)})}post(e,t,r){return a(this,void 0,void 0,function*(){let i=s.HttpClient.getResourceURL(this.baseURL,e,r.params);return s.HttpClient.isPathRetryable(e)?yield this.nodeRequestWithRetry(i,"POST",p.getBody(t),Object.assign(Object.assign({},s.HttpClient.getContentTypeHeader(t)),r.headers)):yield this.nodeRequest(i,"POST",p.getBody(t),Object.assign(Object.assign({},s.HttpClient.getContentTypeHeader(t)),r.headers))})}put(e,t,r){return a(this,void 0,void 0,function*(){let i=s.HttpClient.getResourceURL(this.baseURL,e,r.params);return s.HttpClient.isPathRetryable(e)?yield this.nodeRequestWithRetry(i,"PUT",p.getBody(t),Object.assign(Object.assign({},s.HttpClient.getContentTypeHeader(t)),r.headers)):yield this.nodeRequest(i,"PUT",p.getBody(t),Object.assign(Object.assign({},s.HttpClient.getContentTypeHeader(t)),r.headers))})}delete(e,t){return a(this,void 0,void 0,function*(){let r=s.HttpClient.getResourceURL(this.baseURL,e,t.params);return s.HttpClient.isPathRetryable(e)?yield this.nodeRequestWithRetry(r,"DELETE",null,t.headers):yield this.nodeRequest(r,"DELETE",null,t.headers)})}nodeRequest(e,t,r,i){return a(this,void 0,void 0,function*(){return new Promise((n,o)=>{var c,l;let p=e.startsWith("https"),h=p?this.httpsAgent:this.httpAgent,y=p?d:u,{"User-Agent":g}=null==(c=this.options)?void 0:c.headers,m={method:t,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null==(l=this.options)?void 0:l.headers),i),{"User-Agent":this.addClientToUserAgent(g.toString())}),agent:h},v=y.request(e,m,e=>a(this,void 0,void 0,function*(){let t=new f(e);e.statusCode&&(e.statusCode<200||e.statusCode>299)&&o(new s.HttpClientError({message:e.statusMessage,response:{status:e.statusCode,headers:e.headers,data:yield t.toJSON()}})),n(t)}));v.on("error",e=>{o(Error(e.message))}),r&&(v.setHeader("Content-Length",Buffer.byteLength(r)),v.write(r)),v.end()})})}nodeRequestWithRetry(e,t,r,i){var n,o;return a(this,void 0,void 0,function*(){let c=e.startsWith("https"),l=c?this.httpsAgent:this.httpAgent,p=c?d:u,{"User-Agent":h}=null==(n=this.options)?void 0:n.headers,y={method:t,headers:Object.assign(Object.assign(Object.assign({Accept:"application/json, text/plain, */*","Content-Type":"application/json"},null==(o=this.options)?void 0:o.headers),i),{"User-Agent":this.addClientToUserAgent(h.toString())}),agent:l},g=1,m=()=>a(this,void 0,void 0,function*(){return new Promise((t,i)=>{let n=p.request(e,y,e=>a(this,void 0,void 0,function*(){let r=new f(e);if(this.shouldRetryRequest(e,g))return g++,yield this.sleep(g),m().then(t).catch(i);e.statusCode&&(e.statusCode<200||e.statusCode>299)&&i(new s.HttpClientError({message:e.statusMessage,response:{status:e.statusCode,headers:e.headers,data:yield r.toJSON()}})),t(new f(e))}));n.on("error",e=>a(this,void 0,void 0,function*(){if(null!=e&&e instanceof TypeError)return g++,yield this.sleep(g),m().then(t).catch(i);i(Error(e.message))})),r&&(n.setHeader("Content-Length",Buffer.byteLength(r)),n.write(r)),n.end()})});return m()})}shouldRetryRequest(e,t){return!(t>this.MAX_RETRY_ATTEMPTS)&&!!(null!=e&&this.RETRY_STATUS_CODES.includes(e.statusCode))}}r.NodeHttpClient=p;class f extends s.HttpClientResponse{constructor(e){super(e.statusCode,e.headers||{}),this._res=e}getRawResponse(){return this._res}toJSON(){return new Promise((e,t)=>{let r=this._res.headers["content-type"];(null==r?void 0:r.includes("application/json"))||e(null);let i="";this._res.setEncoding("utf8"),this._res.on("data",e=>{i+=e}),this._res.once("end",()=>{try{e(JSON.parse(i))}catch(e){t(e)}})})}}r.NodeHttpClientResponse=f},55752,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GenericServerException=void 0,r.GenericServerException=class extends Error{constructor(e,t,r,i){super(),this.status=e,this.rawData=r,this.requestID=i,this.name="GenericServerException",this.message="The request could not be completed.",t&&(this.message=t)}}},94397,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BadRequestException=void 0,r.BadRequestException=class extends Error{constructor({code:e,errors:t,message:r,requestID:i}){super(),this.status=400,this.name="BadRequestException",this.message="Bad request",this.requestID=i,r&&(this.message=r),e&&(this.code=e),t&&(this.errors=t)}}},53593,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NoApiKeyProvidedException=void 0,r.NoApiKeyProvidedException=class extends Error{constructor(){super(...arguments),this.status=500,this.name="NoApiKeyProvidedException",this.message='Missing API key. Pass it to the constructor (new WorkOS("sk_test_Sz3IQjepeSWaI4cMS4ms4sMuU")) or define it in the WORKOS_API_KEY environment variable.'}}},52117,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.NotFoundException=void 0,r.NotFoundException=class extends Error{constructor({code:e,message:t,path:r,requestID:i}){super(),this.status=404,this.name="NotFoundException",this.code=e,this.message=null!=t?t:`The requested path '${r}' could not be found.`,this.requestID=i}}},35008,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.OauthException=void 0,r.OauthException=class extends Error{constructor(e,t,r,i,n){super(),this.status=e,this.requestID=t,this.error=r,this.errorDescription=i,this.rawData=n,this.name="OauthException",r&&i?this.message=`Error: ${r}
Error Description: ${i}`:r?this.message=`Error: ${r}`:this.message="An error has occurred."}}},87017,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RateLimitExceededException=void 0;let i=e.r(55752);class n extends i.GenericServerException{constructor(e,t,r){super(429,e,{},t),this.retryAfter=r,this.name="RateLimitExceededException"}}r.RateLimitExceededException=n},16152,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignatureVerificationException=void 0,r.SignatureVerificationException=class extends Error{constructor(e){super(e||"Signature verification failed."),this.name="SignatureVerificationException"}}},72690,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnauthorizedException=void 0,r.UnauthorizedException=class extends Error{constructor(e){super(),this.requestID=e,this.status=401,this.name="UnauthorizedException",this.message="Could not authorize the request. Maybe your API key is invalid?"}}},31717,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnprocessableEntityException=void 0,r.UnprocessableEntityException=class extends Error{constructor({code:e,errors:t,message:r,requestID:i}){if(super(),this.status=422,this.name="UnprocessableEntityException",this.message="Unprocessable entity",this.requestID=i,r&&(this.message=r),e&&(this.code=e),t){const e=1===t.length?"requirement":"requirements";for(const{code:r}of(this.message=`The following ${e} must be met:
`,t))this.message=this.message.concat(`	${r}
`)}}}},49949,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(55752),r),n(e.r(94397),r),n(e.r(53593),r),n(e.r(52117),r),n(e.r(35008),r),n(e.r(87017),r),n(e.r(16152),r),n(e.r(72690),r),n(e.r(31717),r)},75861,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.SignatureProvider=void 0;let n=e.r(49949);r.SignatureProvider=class{constructor(e){this.cryptoProvider=e}verifyHeader({payload:e,sigHeader:t,secret:r,tolerance:o=18e4}){return i(this,void 0,void 0,function*(){let[i,a]=this.getTimestampAndSignatureHash(t);if(!a||0===Object.keys(a).length)throw new n.SignatureVerificationException("No signature hash found with expected scheme v1");if(parseInt(i,10)<Date.now()-o)throw new n.SignatureVerificationException("Timestamp outside the tolerance zone");let s=yield this.computeSignature(i,e,r);if((yield this.cryptoProvider.secureCompare(s,a))===!1)throw new n.SignatureVerificationException("Signature hash does not match the expected signature hash for payload");return!0})}getTimestampAndSignatureHash(e){let[t,r]=e.split(",");if(void 0===t||void 0===r)throw new n.SignatureVerificationException("Signature or timestamp missing");let{1:i}=t.split("="),{1:o}=r.split("=");return[i,o]}computeSignature(e,t,r){return i(this,void 0,void 0,function*(){t=JSON.stringify(t);let i=`${e}.${t}`;return yield this.cryptoProvider.computeHMACSignatureAsync(i,r)})}}},69858,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unreachable=void 0,r.unreachable=(e,t=`Entered unreachable code. Received '${e}'.`)=>{throw TypeError(t)}},3316,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeOrganizationDomain=void 0,r.deserializeOrganizationDomain=e=>({object:e.object,id:e.id,domain:e.domain,organizationId:e.organization_id,state:e.state,verificationToken:e.verification_token,verificationStrategy:e.verification_strategy,createdAt:e.created_at,updatedAt:e.updated_at})},89214,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeOrganization=void 0;let i=e.r(3316);r.deserializeOrganization=e=>{var t,r;return Object.assign(Object.assign({object:e.object,id:e.id,name:e.name,allowProfilesOutsideOrganization:e.allow_profiles_outside_organization,domains:e.domains.map(i.deserializeOrganizationDomain)},void 0===e.stripe_customer_id?void 0:{stripeCustomerId:e.stripe_customer_id}),{createdAt:e.created_at,updatedAt:e.updated_at,externalId:null!=(t=e.external_id)?t:null,metadata:null!=(r=e.metadata)?r:{}})}},26797,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeAuthenticateWithCodeOptions=void 0,r.serializeAuthenticateWithCodeOptions=e=>({grant_type:"authorization_code",client_id:e.clientId,client_secret:e.clientSecret,code:e.code,code_verifier:e.codeVerifier,invitation_token:e.invitationToken,ip_address:e.ipAddress,user_agent:e.userAgent})},92895,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeAuthenticateWithCodeAndVerifierOptions=void 0,r.serializeAuthenticateWithCodeAndVerifierOptions=e=>({grant_type:"authorization_code",client_id:e.clientId,code:e.code,code_verifier:e.codeVerifier,invitation_token:e.invitationToken,ip_address:e.ipAddress,user_agent:e.userAgent})},18379,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeAuthenticateWithMagicAuthOptions=void 0,r.serializeAuthenticateWithMagicAuthOptions=e=>({grant_type:"urn:workos:oauth:grant-type:magic-auth:code",client_id:e.clientId,client_secret:e.clientSecret,code:e.code,email:e.email,invitation_token:e.invitationToken,link_authorization_code:e.linkAuthorizationCode,ip_address:e.ipAddress,user_agent:e.userAgent})},21582,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeAuthenticateWithPasswordOptions=void 0,r.serializeAuthenticateWithPasswordOptions=e=>({grant_type:"password",client_id:e.clientId,client_secret:e.clientSecret,email:e.email,password:e.password,invitation_token:e.invitationToken,ip_address:e.ipAddress,user_agent:e.userAgent})},14517,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeAuthenticateWithRefreshTokenOptions=void 0,r.serializeAuthenticateWithRefreshTokenOptions=e=>({grant_type:"refresh_token",client_id:e.clientId,client_secret:e.clientSecret,refresh_token:e.refreshToken,organization_id:e.organizationId,ip_address:e.ipAddress,user_agent:e.userAgent})},12208,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeAuthenticateWithTotpOptions=void 0,r.serializeAuthenticateWithTotpOptions=e=>({grant_type:"urn:workos:oauth:grant-type:mfa-totp",client_id:e.clientId,client_secret:e.clientSecret,code:e.code,authentication_challenge_id:e.authenticationChallengeId,pending_authentication_token:e.pendingAuthenticationToken,ip_address:e.ipAddress,user_agent:e.userAgent})},30004,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeAuthenticationEvent=void 0,r.deserializeAuthenticationEvent=e=>({email:e.email,error:e.error,ipAddress:e.ip_address,status:e.status,type:e.type,userAgent:e.user_agent,userId:e.user_id})},23614,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeOauthTokens=void 0,r.deserializeOauthTokens=e=>e?{accessToken:e.access_token,refreshToken:e.refresh_token,expiresAt:e.expires_at,scopes:e.scopes}:void 0},78446,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeUser=void 0,r.deserializeUser=e=>{var t,r;return{object:e.object,id:e.id,email:e.email,emailVerified:e.email_verified,firstName:e.first_name,profilePictureUrl:e.profile_picture_url,lastName:e.last_name,lastSignInAt:e.last_sign_in_at,locale:e.locale,createdAt:e.created_at,updatedAt:e.updated_at,externalId:null!=(t=e.external_id)?t:null,metadata:null!=(r=e.metadata)?r:{}}}},23331,(e,t,r)=>{"use strict";var i=e.e&&e.e.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeAuthenticationResponse=void 0;let n=e.r(23614),o=e.r(78446);r.deserializeAuthenticationResponse=e=>{let{user:t,organization_id:r,access_token:a,refresh_token:s,authentication_method:c,impersonator:l,oauth_tokens:u}=e,d=i(e,["user","organization_id","access_token","refresh_token","authentication_method","impersonator","oauth_tokens"]);return Object.assign({user:(0,o.deserializeUser)(t),organizationId:r,accessToken:a,refreshToken:s,impersonator:l,authenticationMethod:c,oauthTokens:(0,n.deserializeOauthTokens)(u)},d)}},75468,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreateMagicAuthOptions=void 0,r.serializeCreateMagicAuthOptions=e=>({email:e.email,invitation_token:e.invitationToken})},36337,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreatePasswordResetOptions=void 0,r.serializeCreatePasswordResetOptions=e=>({email:e.email})},77556,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeEmailVerificationEvent=r.deserializeEmailVerification=void 0,r.deserializeEmailVerification=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,code:e.code,createdAt:e.created_at,updatedAt:e.updated_at}),r.deserializeEmailVerificationEvent=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,createdAt:e.created_at,updatedAt:e.updated_at})},66991,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeEnrollAuthFactorOptions=void 0,r.serializeEnrollAuthFactorOptions=e=>({type:e.type,totp_issuer:e.totpIssuer,totp_user:e.totpUser,totp_secret:e.totpSecret})},14121,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeTotpWithSecrets=r.deserializeTotp=void 0,r.deserializeTotp=e=>({issuer:e.issuer,user:e.user}),r.deserializeTotpWithSecrets=e=>({issuer:e.issuer,user:e.user,qrCode:e.qr_code,secret:e.secret,uri:e.uri})},77918,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeFactorWithSecrets=r.deserializeFactor=void 0;let i=e.r(14121);r.deserializeFactor=e=>({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,type:e.type,totp:(0,i.deserializeTotp)(e.totp),userId:e.user_id}),r.deserializeFactorWithSecrets=e=>({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,type:e.type,totp:(0,i.deserializeTotpWithSecrets)(e.totp),userId:e.user_id})},29388,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeInvitationEvent=r.deserializeInvitation=void 0,r.deserializeInvitation=e=>({object:e.object,id:e.id,email:e.email,state:e.state,acceptedAt:e.accepted_at,revokedAt:e.revoked_at,expiresAt:e.expires_at,organizationId:e.organization_id,inviterUserId:e.inviter_user_id,acceptedUserId:e.accepted_user_id,token:e.token,acceptInvitationUrl:e.accept_invitation_url,createdAt:e.created_at,updatedAt:e.updated_at}),r.deserializeInvitationEvent=e=>({object:e.object,id:e.id,email:e.email,state:e.state,acceptedAt:e.accepted_at,revokedAt:e.revoked_at,expiresAt:e.expires_at,organizationId:e.organization_id,inviterUserId:e.inviter_user_id,acceptedUserId:e.accepted_user_id,createdAt:e.created_at,updatedAt:e.updated_at})},37800,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeListSessionsOptions=void 0,r.serializeListSessionsOptions=e=>Object.assign({},e)},92815,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeMagicAuthEvent=r.deserializeMagicAuth=void 0,r.deserializeMagicAuth=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,code:e.code,createdAt:e.created_at,updatedAt:e.updated_at}),r.deserializeMagicAuthEvent=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,createdAt:e.created_at,updatedAt:e.updated_at})},2413,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializePasswordResetEvent=r.deserializePasswordReset=void 0,r.deserializePasswordReset=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,passwordResetToken:e.password_reset_token,passwordResetUrl:e.password_reset_url,expiresAt:e.expires_at,createdAt:e.created_at}),r.deserializePasswordResetEvent=e=>({object:e.object,id:e.id,userId:e.user_id,email:e.email,expiresAt:e.expires_at,createdAt:e.created_at})},57611,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeResetPasswordOptions=void 0,r.serializeResetPasswordOptions=e=>({token:e.token,new_password:e.newPassword})},1268,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeSendPasswordResetEmailOptions=void 0,r.serializeSendPasswordResetEmailOptions=e=>({email:e.email,password_reset_url:e.passwordResetUrl})},35140,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeSession=void 0,r.deserializeSession=e=>({object:"session",id:e.id,userId:e.user_id,ipAddress:e.ip_address,userAgent:e.user_agent,organizationId:e.organization_id,impersonator:e.impersonator,authMethod:e.auth_method,status:e.status,expiresAt:e.expires_at,endedAt:e.ended_at,createdAt:e.created_at,updatedAt:e.updated_at})},97290,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreateUserOptions=void 0,r.serializeCreateUserOptions=e=>({email:e.email,password:e.password,password_hash:e.passwordHash,password_hash_type:e.passwordHashType,first_name:e.firstName,last_name:e.lastName,email_verified:e.emailVerified,external_id:e.externalId,metadata:e.metadata})},52452,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeSendMagicAuthCodeOptions=void 0,r.serializeSendMagicAuthCodeOptions=e=>({email:e.email})},76751,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeUpdateUserOptions=void 0,r.serializeUpdateUserOptions=e=>({email:e.email,email_verified:e.emailVerified,first_name:e.firstName,last_name:e.lastName,password:e.password,password_hash:e.passwordHash,password_hash_type:e.passwordHashType,external_id:e.externalId,locale:e.locale,metadata:e.metadata})},39705,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeUpdateUserPasswordOptions=void 0,r.serializeUpdateUserPasswordOptions=e=>({password:e.password})},40178,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(26797),r),n(e.r(92895),r),n(e.r(18379),r),n(e.r(21582),r),n(e.r(14517),r),n(e.r(12208),r),n(e.r(30004),r),n(e.r(23331),r),n(e.r(75468),r),n(e.r(36337),r),n(e.r(77556),r),n(e.r(66991),r),n(e.r(77918),r),n(e.r(29388),r),n(e.r(37800),r),n(e.r(92815),r),n(e.r(2413),r),n(e.r(57611),r),n(e.r(1268),r),n(e.r(35140),r),n(e.r(97290),r),n(e.r(52452),r),n(e.r(76751),r),n(e.r(39705),r),n(e.r(78446),r)},61254,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeOrganizationMembership=void 0,r.deserializeOrganizationMembership=e=>Object.assign({object:e.object,id:e.id,userId:e.user_id,organizationId:e.organization_id,organizationName:e.organization_name,status:e.status,createdAt:e.created_at,updatedAt:e.updated_at,role:e.role},e.roles&&{roles:e.roles})},32968,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeAction=void 0;let i=e.r(89214),n=e.r(40178),o=e.r(61254);r.deserializeAction=e=>{switch(e.object){case"user_registration_action_context":let t;return{id:e.id,object:e.object,userData:{object:(t=e.user_data).object,email:t.email,firstName:t.first_name,lastName:t.last_name},invitation:e.invitation?(0,n.deserializeInvitation)(e.invitation):void 0,ipAddress:e.ip_address,userAgent:e.user_agent,deviceFingerprint:e.device_fingerprint};case"authentication_action_context":return{id:e.id,object:e.object,user:(0,n.deserializeUser)(e.user),organization:e.organization?(0,i.deserializeOrganization)(e.organization):void 0,organizationMembership:e.organization_membership?(0,o.deserializeOrganizationMembership)(e.organization_membership):void 0,ipAddress:e.ip_address,userAgent:e.user_agent,deviceFingerprint:e.device_fingerprint,issuer:e.issuer}}}},25829,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.Actions=void 0;let n=e.r(75861),o=e.r(69858),a=e.r(32968);r.Actions=class{constructor(e){this.signatureProvider=new n.SignatureProvider(e)}get computeSignature(){return this.signatureProvider.computeSignature.bind(this.signatureProvider)}get verifyHeader(){return this.signatureProvider.verifyHeader.bind(this.signatureProvider)}serializeType(e){switch(e){case"authentication":return"authentication_action_response";case"user_registration":return"user_registration_action_response";default:return(0,o.unreachable)(e)}}signResponse(e,t){return i(this,void 0,void 0,function*(){let r,{verdict:i,type:n}=e;"Deny"===i&&e.errorMessage&&(r=e.errorMessage);let o=Object.assign({timestamp:Date.now(),verdict:i},"Deny"===i&&e.errorMessage&&{error_message:r});return{object:this.serializeType(n),payload:o,signature:yield this.computeSignature(o.timestamp,o,t)}})}constructAction({payload:e,sigHeader:t,secret:r,tolerance:n=3e4}){return i(this,void 0,void 0,function*(){return yield this.verifyHeader({payload:e,sigHeader:t,secret:r,tolerance:n}),(0,a.deserializeAction)(e)})}}},31706,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeUpdatedEventDirectoryGroup=r.deserializeDirectoryGroup=void 0,r.deserializeDirectoryGroup=e=>({id:e.id,idpId:e.idp_id,directoryId:e.directory_id,organizationId:e.organization_id,name:e.name,createdAt:e.created_at,updatedAt:e.updated_at,rawAttributes:e.raw_attributes}),r.deserializeUpdatedEventDirectoryGroup=e=>({id:e.id,idpId:e.idp_id,directoryId:e.directory_id,organizationId:e.organization_id,name:e.name,createdAt:e.created_at,updatedAt:e.updated_at,rawAttributes:e.raw_attributes,previousAttributes:e.previous_attributes})},97674,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeUpdatedEventDirectoryUser=r.deserializeDirectoryUserWithGroups=r.deserializeDirectoryUser=void 0;let i=e.r(31706);r.deserializeDirectoryUser=e=>({object:e.object,id:e.id,directoryId:e.directory_id,organizationId:e.organization_id,rawAttributes:e.raw_attributes,customAttributes:e.custom_attributes,idpId:e.idp_id,firstName:e.first_name,email:e.email,emails:e.emails,username:e.username,lastName:e.last_name,jobTitle:e.job_title,state:e.state,role:e.role,roles:e.roles,createdAt:e.created_at,updatedAt:e.updated_at}),r.deserializeDirectoryUserWithGroups=e=>Object.assign(Object.assign({},(0,r.deserializeDirectoryUser)(e)),{groups:e.groups.map(i.deserializeDirectoryGroup)}),r.deserializeUpdatedEventDirectoryUser=e=>({object:"directory_user",id:e.id,directoryId:e.directory_id,organizationId:e.organization_id,rawAttributes:e.raw_attributes,customAttributes:e.custom_attributes,idpId:e.idp_id,firstName:e.first_name,email:e.email,emails:e.emails,username:e.username,lastName:e.last_name,jobTitle:e.job_title,state:e.state,role:e.role,roles:e.roles,createdAt:e.created_at,updatedAt:e.updated_at,previousAttributes:e.previous_attributes})},22785,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeDeletedEventDirectory=r.deserializeEventDirectory=r.deserializeDirectoryState=r.deserializeDirectory=void 0,r.deserializeDirectory=e=>({object:e.object,id:e.id,domain:e.domain,externalKey:e.external_key,name:e.name,organizationId:e.organization_id,state:(0,r.deserializeDirectoryState)(e.state),type:e.type,createdAt:e.created_at,updatedAt:e.updated_at}),r.deserializeDirectoryState=e=>"linked"===e?"active":"unlinked"===e?"inactive":e,r.deserializeEventDirectory=e=>({object:e.object,id:e.id,externalKey:e.external_key,type:e.type,state:e.state,name:e.name,organizationId:e.organization_id,domains:e.domains,createdAt:e.created_at,updatedAt:e.updated_at}),r.deserializeDeletedEventDirectory=e=>({object:e.object,id:e.id,type:e.type,state:e.state,name:e.name,organizationId:e.organization_id,createdAt:e.created_at,updatedAt:e.updated_at})},68250,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeListDirectoriesOptions=void 0,r.serializeListDirectoriesOptions=e=>({organization_id:e.organizationId,search:e.search,limit:e.limit,before:e.before,after:e.after,order:e.order})},96747,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(31706),r),n(e.r(97674),r),n(e.r(22785),r),n(e.r(68250),r)},93928,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreateOrganizationOptions=void 0,r.serializeCreateOrganizationOptions=e=>({name:e.name,allow_profiles_outside_organization:e.allowProfilesOutsideOrganization,domain_data:e.domainData,domains:e.domains,external_id:e.externalId,metadata:e.metadata})},62577,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeUpdateOrganizationOptions=void 0,r.serializeUpdateOrganizationOptions=e=>({name:e.name,allow_profiles_outside_organization:e.allowProfilesOutsideOrganization,domain_data:e.domainData,domains:e.domains,stripe_customer_id:e.stripeCustomerId,external_id:e.externalId,metadata:e.metadata})},74034,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(93928),r),n(e.r(89214),r),n(e.r(62577),r)},28857,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeConnection=void 0,r.deserializeConnection=e=>({object:e.object,id:e.id,organizationId:e.organization_id,name:e.name,connectionType:e.connection_type,type:e.connection_type,state:e.state,domains:e.domains,createdAt:e.created_at,updatedAt:e.updated_at})},8311,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeListConnectionsOptions=void 0,r.serializeListConnectionsOptions=e=>({connection_type:e.connectionType,domain:e.domain,organization_id:e.organizationId,limit:e.limit,before:e.before,after:e.after,order:e.order})},6239,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeProfile=void 0,r.deserializeProfile=e=>({id:e.id,idpId:e.idp_id,organizationId:e.organization_id,connectionId:e.connection_id,connectionType:e.connection_type,email:e.email,firstName:e.first_name,lastName:e.last_name,role:e.role,roles:e.roles,groups:e.groups,customAttributes:e.custom_attributes,rawAttributes:e.raw_attributes})},32736,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeProfileAndToken=void 0;let i=e.r(23614),n=e.r(6239);r.deserializeProfileAndToken=e=>({accessToken:e.access_token,profile:(0,n.deserializeProfile)(e.profile),oauthTokens:(0,i.deserializeOauthTokens)(e.oauth_tokens)})},95006,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(28857),r),n(e.r(8311),r),n(e.r(32736),r),n(e.r(6239),r)},37521,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeRoleEvent=void 0,r.deserializeRoleEvent=e=>({object:"role",slug:e.slug,permissions:e.permissions,createdAt:e.created_at,updatedAt:e.updated_at})},234,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeAuthenticationRadarRiskDetectedEvent=void 0,r.deserializeAuthenticationRadarRiskDetectedEvent=e=>({authMethod:e.auth_method,action:e.action,control:e.control,blocklistType:e.blocklist_type,ipAddress:e.ip_address,userAgent:e.user_agent,userId:e.user_id,email:e.email})},7045,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeApiKey=void 0,r.deserializeApiKey=function(e){return{object:e.object,id:e.id,owner:e.owner,name:e.name,obfuscatedValue:e.obfuscated_value,lastUsedAt:e.last_used_at,permissions:e.permissions,createdAt:e.created_at,updatedAt:e.updated_at}}},14423,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeEvent=void 0;let i=e.r(96747),n=e.r(74034),o=e.r(95006),a=e.r(40178),s=e.r(3316),c=e.r(61254),l=e.r(37521),u=e.r(35140),d=e.r(234),p=e.r(7045);r.deserializeEvent=e=>{let t={id:e.id,createdAt:e.created_at,context:e.context};switch(e.event){case"authentication.email_verification_succeeded":case"authentication.magic_auth_failed":case"authentication.magic_auth_succeeded":case"authentication.mfa_succeeded":case"authentication.oauth_failed":case"authentication.oauth_succeeded":case"authentication.passkey_failed":case"authentication.passkey_succeeded":case"authentication.password_failed":case"authentication.password_succeeded":case"authentication.sso_failed":case"authentication.sso_succeeded":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeAuthenticationEvent)(e.data)});case"authentication.radar_risk_detected":return Object.assign(Object.assign({},t),{event:e.event,data:(0,d.deserializeAuthenticationRadarRiskDetectedEvent)(e.data)});case"connection.activated":case"connection.deactivated":case"connection.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,o.deserializeConnection)(e.data)});case"dsync.activated":case"dsync.deactivated":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeEventDirectory)(e.data)});case"dsync.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeDeletedEventDirectory)(e.data)});case"dsync.group.created":case"dsync.group.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeDirectoryGroup)(e.data)});case"dsync.group.updated":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeUpdatedEventDirectoryGroup)(e.data)});case"dsync.group.user_added":case"dsync.group.user_removed":return Object.assign(Object.assign({},t),{event:e.event,data:{directoryId:e.data.directory_id,user:(0,i.deserializeDirectoryUser)(e.data.user),group:(0,i.deserializeDirectoryGroup)(e.data.group)}});case"dsync.user.created":case"dsync.user.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeDirectoryUser)(e.data)});case"dsync.user.updated":return Object.assign(Object.assign({},t),{event:e.event,data:(0,i.deserializeUpdatedEventDirectoryUser)(e.data)});case"email_verification.created":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeEmailVerificationEvent)(e.data)});case"invitation.accepted":case"invitation.created":case"invitation.revoked":case"invitation.resent":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeInvitationEvent)(e.data)});case"magic_auth.created":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeMagicAuthEvent)(e.data)});case"password_reset.created":case"password_reset.succeeded":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializePasswordResetEvent)(e.data)});case"user.created":case"user.updated":case"user.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,a.deserializeUser)(e.data)});case"organization_membership.added":case"organization_membership.created":case"organization_membership.deleted":case"organization_membership.updated":case"organization_membership.removed":return Object.assign(Object.assign({},t),{event:e.event,data:(0,c.deserializeOrganizationMembership)(e.data)});case"role.created":case"role.deleted":case"role.updated":return Object.assign(Object.assign({},t),{event:e.event,data:(0,l.deserializeRoleEvent)(e.data)});case"session.created":case"session.revoked":return Object.assign(Object.assign({},t),{event:e.event,data:(0,u.deserializeSession)(e.data)});case"organization.created":case"organization.updated":case"organization.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,n.deserializeOrganization)(e.data)});case"organization_domain.verified":case"organization_domain.verification_failed":case"organization_domain.created":case"organization_domain.updated":case"organization_domain.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,s.deserializeOrganizationDomain)(e.data)});case"api_key.created":case"api_key.deleted":return Object.assign(Object.assign({},t),{event:e.event,data:(0,p.deserializeApiKey)(e.data)})}}},72797,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeList=void 0,r.deserializeList=(e,t)=>({object:"list",data:e.data.map(t),listMetadata:e.list_metadata})},47904,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(14423),r),n(e.r(72797),r)},15150,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.Webhooks=void 0;let n=e.r(47904),o=e.r(75861);r.Webhooks=class{constructor(e){this.signatureProvider=new o.SignatureProvider(e)}get verifyHeader(){return this.signatureProvider.verifyHeader.bind(this.signatureProvider)}get computeSignature(){return this.signatureProvider.computeSignature.bind(this.signatureProvider)}get getTimestampAndSignatureHash(){return this.signatureProvider.getTimestampAndSignatureHash.bind(this.signatureProvider)}constructEvent({payload:e,sigHeader:t,secret:r,tolerance:o=18e4}){return i(this,void 0,void 0,function*(){return yield this.verifyHeader({payload:e,sigHeader:t,secret:r,tolerance:o}),(0,n.deserializeEvent)(e)})}}},21823,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeValidateApiKeyResponse=void 0;let i=e.r(7045);r.deserializeValidateApiKeyResponse=function(e){return{apiKey:e.api_key?(0,i.deserializeApiKey)(e.api_key):null}}},28893,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.ApiKeys=void 0;let n=e.r(21823);r.ApiKeys=class{constructor(e){this.workos=e}validateApiKey(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/api_keys/validations",e);return(0,n.deserializeValidateApiKeyResponse)(t)})}deleteApiKey(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/api_keys/${e}`)})}}},26647,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},n=e.e&&e.e.__await||function(e){return this instanceof n?(this.v=e,this):new n(e)},o=e.e&&e.e.__asyncValues||function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){var o,a,s;o=i,a=n,s=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){o({value:e,done:s})},a)})}}},a=e.e&&e.e.__asyncDelegator||function(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,o){t[i]=e[i]?function(t){return(r=!r)?{value:n(e[i](t)),done:!1}:o?o(t):t}:o}},s=e.e&&e.e.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,o=r.apply(e,t||[]),a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){o[e]&&(i[e]=function(t){return new Promise(function(r,i){a.push([e,t,r,i])>1||c(e,t)})})}function c(e,t){try{var r;(r=o[e](t)).value instanceof n?Promise.resolve(r.value.v).then(l,u):d(a[0][2],r)}catch(e){d(a[0][3],e)}}function l(e){c("next",e)}function u(e){c("throw",e)}function d(e,t){e(t),a.shift(),a.length&&c(a[0][0],a[0][1])}};Object.defineProperty(r,"__esModule",{value:!0}),r.AutoPaginatable=void 0,r.AutoPaginatable=class{constructor(e,t,r){this.list=e,this.apiCall=t,this.object="list",this.options=Object.assign({},r)}get data(){return this.list.data}get listMetadata(){return this.list.listMetadata}generatePages(e){return s(this,arguments,function*(){let t=yield n(this.apiCall(Object.assign(Object.assign({},this.options),{limit:100,after:e.after})));yield yield n(t.data),t.listMetadata.after&&(yield n(new Promise(e=>setTimeout(e,350))),yield n((yield*a(o(this.generatePages({after:t.listMetadata.after}))))))})}autoPagination(){var e,t,r,n;return i(this,void 0,void 0,function*(){if(this.options.limit)return this.data;let i=[];try{for(var a,s=!0,c=o(this.generatePages({after:this.options.after}));!(e=(a=yield c.next()).done);s=!0)n=a.value,s=!1,i.push(...n)}catch(e){t={error:e}}finally{try{!s&&!e&&(r=c.return)&&(yield r.call(c))}finally{if(t)throw t.error}}return i})}}},54732,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.fetchAndDeserialize=void 0;let n=e.r(47904);r.fetchAndDeserialize=(e,t,r,o,a)=>i(void 0,void 0,void 0,function*(){let{data:i}=yield e.get(t,Object.assign({query:Object.assign(Object.assign({},o),{order:(null==o?void 0:o.order)||"desc"})},a));return(0,n.deserializeList)(i,r)})},77522,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.DirectorySync=void 0;let n=e.r(26647),o=e.r(96747),a=e.r(54732);r.DirectorySync=class{constructor(e){this.workos=e}listDirectories(e){return i(this,void 0,void 0,function*(){return new n.AutoPaginatable((yield(0,a.fetchAndDeserialize)(this.workos,"/directories",o.deserializeDirectory,e?(0,o.serializeListDirectoriesOptions)(e):void 0)),e=>(0,a.fetchAndDeserialize)(this.workos,"/directories",o.deserializeDirectory,e),e?(0,o.serializeListDirectoriesOptions)(e):void 0)})}getDirectory(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/directories/${e}`);return(0,o.deserializeDirectory)(t)})}deleteDirectory(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/directories/${e}`)})}listGroups(e){return i(this,void 0,void 0,function*(){return new n.AutoPaginatable((yield(0,a.fetchAndDeserialize)(this.workos,"/directory_groups",o.deserializeDirectoryGroup,e)),e=>(0,a.fetchAndDeserialize)(this.workos,"/directory_groups",o.deserializeDirectoryGroup,e),e)})}listUsers(e){return i(this,void 0,void 0,function*(){return new n.AutoPaginatable((yield(0,a.fetchAndDeserialize)(this.workos,"/directory_users",o.deserializeDirectoryUserWithGroups,e)),e=>(0,a.fetchAndDeserialize)(this.workos,"/directory_users",o.deserializeDirectoryUserWithGroups,e),e)})}getUser(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/directory_users/${e}`);return(0,o.deserializeDirectoryUserWithGroups)(t)})}getGroup(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/directory_groups/${e}`);return(0,o.deserializeDirectoryGroup)(t)})}}},5172,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeListEventOptions=void 0,r.serializeListEventOptions=e=>({events:e.events,organization_id:e.organizationId,range_start:e.rangeStart,range_end:e.rangeEnd,limit:e.limit,after:e.after})},23284,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(5172),r)},92425,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.Events=void 0;let n=e.r(47904),o=e.r(23284);r.Events=class{constructor(e){this.workos=e}listEvents(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get("/events",{query:e?(0,o.serializeListEventOptions)(e):void 0});return(0,n.deserializeList)(t,n.deserializeEvent)})}}},78694,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeRole=void 0,r.deserializeRole=e=>({object:e.object,id:e.id,name:e.name,slug:e.slug,description:e.description,permissions:e.permissions,type:e.type,createdAt:e.created_at,updatedAt:e.updated_at})},17202,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeFeatureFlag=void 0,r.deserializeFeatureFlag=e=>({object:e.object,id:e.id,name:e.name,slug:e.slug,description:e.description,tags:e.tags,enabled:e.enabled,defaultValue:e.default_value,createdAt:e.created_at,updatedAt:e.updated_at})},72319,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(17202),r)},89611,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreateOrganizationApiKeyOptions=void 0,r.serializeCreateOrganizationApiKeyOptions=function(e){return{name:e.name,permissions:e.permissions}}},59726,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeCreatedApiKey=void 0,r.deserializeCreatedApiKey=function(e){return{object:e.object,id:e.id,owner:e.owner,name:e.name,obfuscatedValue:e.obfuscated_value,value:e.value,lastUsedAt:e.last_used_at,permissions:e.permissions,createdAt:e.created_at,updatedAt:e.updated_at}}},68770,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(7045),r),n(e.r(89611),r),n(e.r(59726),r),n(e.r(21823),r)},96396,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},n=e.e&&e.e.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};Object.defineProperty(r,"__esModule",{value:!0}),r.Organizations=void 0;let o=e.r(26647),a=e.r(74034),s=e.r(54732),c=e.r(78694),l=e.r(72319),u=e.r(68770);r.Organizations=class{constructor(e){this.workos=e}listOrganizations(e){return i(this,void 0,void 0,function*(){return new o.AutoPaginatable((yield(0,s.fetchAndDeserialize)(this.workos,"/organizations",a.deserializeOrganization,e)),e=>(0,s.fetchAndDeserialize)(this.workos,"/organizations",a.deserializeOrganization,e),e)})}createOrganization(e,t={}){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post("/organizations",(0,a.serializeCreateOrganizationOptions)(e),t);return(0,a.deserializeOrganization)(r)})}deleteOrganization(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/organizations/${e}`)})}getOrganization(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/organizations/${e}`);return(0,a.deserializeOrganization)(t)})}getOrganizationByExternalId(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/organizations/external_id/${e}`);return(0,a.deserializeOrganization)(t)})}updateOrganization(e){return i(this,void 0,void 0,function*(){let{organization:t}=e,r=n(e,["organization"]),{data:i}=yield this.workos.put(`/organizations/${t}`,(0,a.serializeUpdateOrganizationOptions)(r));return(0,a.deserializeOrganization)(i)})}listOrganizationRoles(e){return i(this,void 0,void 0,function*(){let{organizationId:t}=e,{data:r}=yield this.workos.get(`/organizations/${t}/roles`);return{object:"list",data:r.data.map(e=>(0,c.deserializeRole)(e))}})}listOrganizationFeatureFlags(e){return i(this,void 0,void 0,function*(){let{organizationId:t}=e,r=n(e,["organizationId"]);return new o.AutoPaginatable((yield(0,s.fetchAndDeserialize)(this.workos,`/organizations/${t}/feature-flags`,l.deserializeFeatureFlag,r)),e=>(0,s.fetchAndDeserialize)(this.workos,`/organizations/${t}/feature-flags`,l.deserializeFeatureFlag,e),r)})}listOrganizationApiKeys(e){return i(this,void 0,void 0,function*(){let{organizationId:t}=e,r=n(e,["organizationId"]);return new o.AutoPaginatable((yield(0,s.fetchAndDeserialize)(this.workos,`/organizations/${t}/api_keys`,u.deserializeApiKey,r)),e=>(0,s.fetchAndDeserialize)(this.workos,`/organizations/${t}/api_keys`,u.deserializeApiKey,e),r)})}createOrganizationApiKey(e,t={}){return i(this,void 0,void 0,function*(){let{organizationId:r}=e,{data:i}=yield this.workos.post(`/organizations/${r}/api_keys`,(0,u.serializeCreateOrganizationApiKeyOptions)(e),t);return(0,u.deserializeCreatedApiKey)(i)})}}},71964,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreateOrganizationDomainOptions=void 0,r.serializeCreateOrganizationDomainOptions=e=>({domain:e.domain,organization_id:e.organizationId})},63589,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.OrganizationDomains=void 0;let n=e.r(71964),o=e.r(3316);r.OrganizationDomains=class{constructor(e){this.workos=e}get(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/organization_domains/${e}`);return(0,o.deserializeOrganizationDomain)(t)})}verify(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/organization_domains/${e}/verify`,{});return(0,o.deserializeOrganizationDomain)(t)})}create(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/organization_domains",(0,n.serializeCreateOrganizationDomainOptions)(e));return(0,o.deserializeOrganizationDomain)(t)})}delete(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/organization_domains/${e}`)})}}},8172,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializePasswordlessSession=void 0,r.deserializePasswordlessSession=e=>({id:e.id,email:e.email,expiresAt:e.expires_at,link:e.link,object:e.object})},15549,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},n=e.e&&e.e.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};Object.defineProperty(r,"__esModule",{value:!0}),r.Passwordless=void 0;let o=e.r(8172);r.Passwordless=class{constructor(e){this.workos=e}createSession(e){var{redirectURI:t,expiresIn:r}=e,a=n(e,["redirectURI","expiresIn"]);return i(this,void 0,void 0,function*(){let{data:e}=yield this.workos.post("/passwordless/sessions",Object.assign(Object.assign({},a),{redirect_uri:t,expires_in:r}));return(0,o.deserializePasswordlessSession)(e)})}sendSession(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/passwordless/sessions/${e}/send`,{});return t})}}},31776,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeAccessToken=void 0,r.deserializeAccessToken=function(e){return{object:"access_token",accessToken:e.access_token,expiresAt:e.expires_at?new Date(Date.parse(e.expires_at)):null,scopes:e.scopes,missingScopes:e.missing_scopes}}},71284,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeGetAccessTokenResponse=r.serializeGetAccessTokenOptions=void 0;let i=e.r(31776);r.serializeGetAccessTokenOptions=function(e){return{user_id:e.userId,organization_id:e.organizationId}},r.deserializeGetAccessTokenResponse=function(e){return e.active?{active:!0,accessToken:(0,i.deserializeAccessToken)(e.access_token)}:{active:!1,error:e.error}}},95134,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},n=e.e&&e.e.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};Object.defineProperty(r,"__esModule",{value:!0}),r.Pipes=void 0;let o=e.r(71284);r.Pipes=class{constructor(e){this.workos=e}getAccessToken(e){var{provider:t}=e,r=n(e,["provider"]);return i(this,void 0,void 0,function*(){let{data:e}=yield this.workos.post(`data-integrations/${t}/token`,(0,o.serializeGetAccessTokenOptions)(r));return(0,o.deserializeGetAccessTokenResponse)(e)})}}},69845,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.Portal=void 0,r.Portal=class{constructor(e){this.workos=e}generateLink({intent:e,organization:t,returnUrl:r,successUrl:n}){return i(this,void 0,void 0,function*(){let{data:i}=yield this.workos.post("/portal/generate_link",{intent:e,organization:t,return_url:r,success_url:n});return i})}}},62387,(e,t,r)=>{"use strict";t.exports=TypeError},31116,(e,t,r)=>{t.exports=e.r(24361).inspect},21308,(e,t,r)=>{var i="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&i?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=i&&n&&"function"==typeof n.get?n.get:null,a=i&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,l=s&&c&&"function"==typeof c.get?c.get:null,u=s&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,p="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,y=Object.prototype.toString,g=Function.prototype.toString,m=String.prototype.match,v=String.prototype.slice,w=String.prototype.replace,b=String.prototype.toUpperCase,_=String.prototype.toLowerCase,S=RegExp.prototype.test,A=Array.prototype.concat,E=Array.prototype.join,O=Array.prototype.slice,k=Math.floor,P="function"==typeof BigInt?BigInt.prototype.valueOf:null,j=Object.getOwnPropertySymbols,C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,I="function"==typeof Symbol&&"object"==typeof Symbol.iterator,x="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===I?"object":"symbol")?Symbol.toStringTag:null,R=Object.prototype.propertyIsEnumerable,B=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function K(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||S.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var i=e<0?-k(-e):k(e);if(i!==e){var n=String(i),o=v.call(t,n.length+1);return w.call(n,r,"$&_")+"."+w.call(w.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return w.call(t,r,"$&_")}var T=e.r(31116),M=T.custom,U=L(M)?M:null,N={__proto__:null,double:'"',single:"'"},D={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function z(e,t,r){var i=N[r.quoteStyle||t];return i+e+i}function W(e){return!x||!("object"==typeof e&&(x in e||void 0!==e[x]))}function H(e){return"[object Array]"===V(e)&&W(e)}function J(e){return"[object RegExp]"===V(e)&&W(e)}function L(e){if(I)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!C)return!1;try{return C.call(e),!0}catch(e){}return!1}t.exports=function t(r,i,n,s){var c,y,b,S,k,j=i||{};if(F(j,"quoteStyle")&&!F(N,j.quoteStyle))throw TypeError('option "quoteStyle" must be "single" or "double"');if(F(j,"maxStringLength")&&("number"==typeof j.maxStringLength?j.maxStringLength<0&&j.maxStringLength!==1/0:null!==j.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var M=!F(j,"customInspect")||j.customInspect;if("boolean"!=typeof M&&"symbol"!==M)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(F(j,"indent")&&null!==j.indent&&"	"!==j.indent&&!(parseInt(j.indent,10)===j.indent&&j.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(F(j,"numericSeparator")&&"boolean"!=typeof j.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var $=j.numericSeparator;if(void 0===r)return"undefined";if(null===r)return"null";if("boolean"==typeof r)return r?"true":"false";if("string"==typeof r)return function e(t,r){if(t.length>r.maxStringLength){var i=t.length-r.maxStringLength;return e(v.call(t,0,r.maxStringLength),r)+("... "+i)+" more character"+(i>1?"s":"")}var n=D[r.quoteStyle||"single"];return n.lastIndex=0,z(w.call(w.call(t,n,"\\$1"),/[\x00-\x1f]/g,q),"single",r)}(r,j);if("number"==typeof r){if(0===r)return 1/0/r>0?"0":"-0";var et=String(r);return $?K(r,et):et}if("bigint"==typeof r){var er=String(r)+"n";return $?K(r,er):er}var ei=void 0===j.depth?5:j.depth;if(void 0===n&&(n=0),n>=ei&&ei>0&&"object"==typeof r)return H(r)?"[Array]":"[Object]";var en=function(e,t){var r;if("	"===e.indent)r="	";else{if("number"!=typeof e.indent||!(e.indent>0))return null;r=E.call(Array(e.indent+1)," ")}return{base:r,prev:E.call(Array(t+1),r)}}(j,n);if(void 0===s)s=[];else if(G(s,r)>=0)return"[Circular]";function eo(e,r,i){if(r&&(s=O.call(s)).push(r),i){var o={depth:j.depth};return F(j,"quoteStyle")&&(o.quoteStyle=j.quoteStyle),t(e,o,n+1,s)}return t(e,j,n+1,s)}if("function"==typeof r&&!J(r)){var ea=function(e){if(e.name)return e.name;var t=m.call(g.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(r),es=ee(r,eo);return"[Function"+(ea?": "+ea:" (anonymous)")+"]"+(es.length>0?" { "+E.call(es,", ")+" }":"")}if(L(r)){var ec=I?w.call(String(r),/^(Symbol\(.*\))_[^)]*$/,"$1"):C.call(r);return"object"!=typeof r||I?ec:X(ec)}if((el=r)&&"object"==typeof el&&("u">typeof HTMLElement&&el instanceof HTMLElement||"string"==typeof el.nodeName&&"function"==typeof el.getAttribute)){for(var el,eu,ed="<"+_.call(String(r.nodeName)),ep=r.attributes||[],ef=0;ef<ep.length;ef++){ed+=" "+ep[ef].name+"="+z((eu=ep[ef].value,w.call(String(eu),/"/g,"&quot;")),"double",j)}return ed+=">",r.childNodes&&r.childNodes.length&&(ed+="..."),ed+="</"+_.call(String(r.nodeName))+">"}if(H(r)){if(0===r.length)return"[]";var eh=ee(r,eo);return en&&!function(e){for(var t=0;t<e.length;t++)if(G(e[t],"\n")>=0)return!1;return!0}(eh)?"["+Z(eh,en)+"]":"[ "+E.call(eh,", ")+" ]"}if("[object Error]"===V(c=r)&&W(c)){var ey=ee(r,eo);return"cause"in Error.prototype||!("cause"in r)||R.call(r,"cause")?0===ey.length?"["+String(r)+"]":"{ ["+String(r)+"] "+E.call(ey,", ")+" }":"{ ["+String(r)+"] "+E.call(A.call("[cause]: "+eo(r.cause),ey),", ")+" }"}if("object"==typeof r&&M){if(U&&"function"==typeof r[U]&&T)return T(r,{depth:ei-n});else if("symbol"!==M&&"function"==typeof r.inspect)return r.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{l.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(r)){var eg=[];return a&&a.call(r,function(e,t){eg.push(eo(t,r,!0)+" => "+eo(e,r))}),Q("Map",o.call(r),eg,en)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(r)){var em=[];return u&&u.call(r,function(e){em.push(eo(e,r))}),Q("Set",l.call(r),em,en)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(r))return Y("WeakMap");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(r))return Y("WeakSet");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{return f.call(e),!0}catch(e){}return!1}(r))return Y("WeakRef");if("[object Number]"===V(y=r)&&W(y))return X(eo(Number(r)));if(function(e){if(!e||"object"!=typeof e||!P)return!1;try{return P.call(e),!0}catch(e){}return!1}(r))return X(eo(P.call(r)));if("[object Boolean]"===V(b=r)&&W(b))return X(h.call(r));if("[object String]"===V(S=r)&&W(S))return X(eo(String(r)));if("u">typeof globalThis&&r===globalThis||r===e.g)return"{ [object globalThis] }";if(!("[object Date]"===V(k=r)&&W(k))&&!J(r)){var ev=ee(r,eo),ew=B?B(r)===Object.prototype:r instanceof Object||r.constructor===Object,eb=r instanceof Object?"":"null prototype",e_=!ew&&x&&Object(r)===r&&x in r?v.call(V(r),8,-1):eb?"Object":"",eS=(ew||"function"!=typeof r.constructor?"":r.constructor.name?r.constructor.name+" ":"")+(e_||eb?"["+E.call(A.call([],e_||[],eb||[]),": ")+"] ":"");return 0===ev.length?eS+"{}":en?eS+"{"+Z(ev,en)+"}":eS+"{ "+E.call(ev,", ")+" }"}return String(r)};var $=Object.prototype.hasOwnProperty||function(e){return e in this};function F(e,t){return $.call(e,t)}function V(e){return y.call(e)}function G(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return -1}function q(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+b.call(t.toString(16))}function X(e){return"Object("+e+")"}function Y(e){return e+" { ? }"}function Q(e,t,r,i){return e+" ("+t+") {"+(i?Z(r,i):E.call(r,", "))+"}"}function Z(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+E.call(e,","+r)+"\n"+t.prev}function ee(e,t){var r,i=H(e),n=[];if(i){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=F(e,o)?t(e[o],e):""}var a="function"==typeof j?j(e):[];if(I){r={};for(var s=0;s<a.length;s++)r["$"+a[s]]=a[s]}for(var c in e)if(F(e,c)&&(!i||String(Number(c))!==c||!(c<e.length)))if(I&&r["$"+c]instanceof Symbol)continue;else S.call(/[^\w$]/,c)?n.push(t(c,e)+": "+t(e[c],e)):n.push(c+": "+t(e[c],e));if("function"==typeof j)for(var l=0;l<a.length;l++)R.call(e,a[l])&&n.push("["+t(a[l])+"]: "+t(e[a[l]],e));return n}},44535,(e,t,r)=>{"use strict";var i=e.r(21308),n=e.r(62387),o=function(e,t,r){for(var i,n=e;null!=(i=n.next);n=i)if(i.key===t)return n.next=i.next,r||(i.next=e.next,e.next=i),i},a=function(e,t){if(e){var r=o(e,t);return r&&r.value}},s=function(e,t,r){var i=o(e,t);i?i.value=r:e.next={key:t,next:e.next,value:r}},c=function(e,t){if(e)return o(e,t,!0)};t.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new n("Side channel does not contain "+i(e))},delete:function(t){var r=e&&e.next,i=c(e,t);return i&&r&&r===i&&(e=void 0),!!i},get:function(t){return a(e,t)},has:function(t){var r;return!!(r=e)&&!!o(r,t)},set:function(t,r){e||(e={next:void 0}),s(e,t,r)}};return t}},50997,(e,t,r)=>{"use strict";t.exports=Object},72135,(e,t,r)=>{"use strict";t.exports=Error},77211,(e,t,r)=>{"use strict";t.exports=EvalError},36638,(e,t,r)=>{"use strict";t.exports=RangeError},54152,(e,t,r)=>{"use strict";t.exports=ReferenceError},95757,(e,t,r)=>{"use strict";t.exports=SyntaxError},2570,(e,t,r)=>{"use strict";t.exports=URIError},59048,(e,t,r)=>{"use strict";t.exports=Math.abs},94959,(e,t,r)=>{"use strict";t.exports=Math.floor},28011,(e,t,r)=>{"use strict";t.exports=Math.max},15893,(e,t,r)=>{"use strict";t.exports=Math.min},1976,(e,t,r)=>{"use strict";t.exports=Math.pow},16805,(e,t,r)=>{"use strict";t.exports=Math.round},11984,(e,t,r)=>{"use strict";t.exports=Number.isNaN||function(e){return e!=e}},1862,(e,t,r)=>{"use strict";var i=e.r(11984);t.exports=function(e){return i(e)||0===e?e:e<0?-1:1}},30764,(e,t,r)=>{"use strict";t.exports=Object.getOwnPropertyDescriptor},14038,(e,t,r)=>{"use strict";var i=e.r(30764);if(i)try{i([],"length")}catch(e){i=null}t.exports=i},42654,(e,t,r)=>{"use strict";var i=Object.defineProperty||!1;if(i)try{i({},"a",{value:1})}catch(e){i=!1}t.exports=i},35837,(e,t,r)=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t||"[object Symbol]"!==Object.prototype.toString.call(t)||"[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var i in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},43265,(e,t,r)=>{"use strict";var i="u">typeof Symbol&&Symbol,n=e.r(35837);t.exports=function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&n()}},5349,(e,t,r)=>{"use strict";t.exports="u">typeof Reflect&&Reflect.getPrototypeOf||null},54153,(e,t,r)=>{"use strict";t.exports=e.r(50997).getPrototypeOf||null},35117,(e,t,r)=>{"use strict";var i=Object.prototype.toString,n=Math.max,o=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r},a=function(e,t){for(var r=[],i=t||0,n=0;i<e.length;i+=1,n+=1)r[n]=e[i];return r},s=function(e,t){for(var r="",i=0;i<e.length;i+=1)r+=e[i],i+1<e.length&&(r+=t);return r};t.exports=function(e){var t,r=this;if("function"!=typeof r||"[object Function]"!==i.apply(r))throw TypeError("Function.prototype.bind called on incompatible "+r);for(var c=a(arguments,1),l=n(0,r.length-c.length),u=[],d=0;d<l;d++)u[d]="$"+d;if(t=Function("binder","return function ("+s(u,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof t){var i=r.apply(this,o(c,arguments));return Object(i)===i?i:this}return r.apply(e,o(c,arguments))}),r.prototype){var p=function(){};p.prototype=r.prototype,t.prototype=new p,p.prototype=null}return t}},81153,(e,t,r)=>{"use strict";var i=e.r(35117);t.exports=Function.prototype.bind||i},90694,(e,t,r)=>{"use strict";t.exports=Function.prototype.call},22552,(e,t,r)=>{"use strict";t.exports=Function.prototype.apply},34641,(e,t,r)=>{"use strict";t.exports="u">typeof Reflect&&Reflect&&Reflect.apply},83860,(e,t,r)=>{"use strict";var i=e.r(81153),n=e.r(22552),o=e.r(90694);t.exports=e.r(34641)||i.call(o,n)},27352,(e,t,r)=>{"use strict";var i=e.r(81153),n=e.r(62387),o=e.r(90694),a=e.r(83860);t.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new n("a function is required");return a(i,o,e)}},26036,(e,t,r)=>{"use strict";var i,n=e.r(27352),o=e.r(14038);try{i=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var a=!!i&&o&&o(Object.prototype,"__proto__"),s=Object,c=s.getPrototypeOf;t.exports=a&&"function"==typeof a.get?n([a.get]):"function"==typeof c&&function(e){return c(null==e?e:s(e))}},33728,(e,t,r)=>{"use strict";var i=e.r(5349),n=e.r(54153),o=e.r(26036);t.exports=i?function(e){return i(e)}:n?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw TypeError("getProto: not an object");return n(e)}:o?function(e){return o(e)}:null},72146,(e,t,r)=>{"use strict";var i=Function.prototype.call,n=Object.prototype.hasOwnProperty;t.exports=e.r(81153).call(i,n)},72138,(e,t,r)=>{"use strict";var i=e.r(50997),n=e.r(72135),o=e.r(77211),a=e.r(36638),s=e.r(54152),c=e.r(95757),l=e.r(62387),u=e.r(2570),d=e.r(59048),p=e.r(94959),f=e.r(28011),h=e.r(15893),y=e.r(1976),g=e.r(16805),m=e.r(1862),v=Function,w=function(e){try{return v('"use strict"; return ('+e+").constructor;")()}catch(e){}},b=e.r(14038),_=e.r(42654),S=function(){throw new l},A=b?function(){try{return arguments.callee,S}catch(e){try{return b(arguments,"callee").get}catch(e){return S}}}():S,E=e.r(43265)(),O=e.r(33728),k=e.r(54153),P=e.r(5349),j=e.r(22552),C=e.r(90694),I={},x="u">typeof Uint8Array&&O?O(Uint8Array):void 0,R={__proto__:null,"%AggregateError%":"u"<typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"u"<typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":E&&O?O([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":I,"%AsyncGenerator%":I,"%AsyncGeneratorFunction%":I,"%AsyncIteratorPrototype%":I,"%Atomics%":"u"<typeof Atomics?void 0:Atomics,"%BigInt%":"u"<typeof BigInt?void 0:BigInt,"%BigInt64Array%":"u"<typeof BigInt64Array?void 0:BigInt64Array,"%BigUint64Array%":"u"<typeof BigUint64Array?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"u"<typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":o,"%Float16Array%":"u"<typeof Float16Array?void 0:Float16Array,"%Float32Array%":"u"<typeof Float32Array?void 0:Float32Array,"%Float64Array%":"u"<typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"u"<typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":I,"%Int8Array%":"u"<typeof Int8Array?void 0:Int8Array,"%Int16Array%":"u"<typeof Int16Array?void 0:Int16Array,"%Int32Array%":"u"<typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":E&&O?O(O([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"u"<typeof Map?void 0:Map,"%MapIteratorPrototype%":"u">typeof Map&&E&&O?O(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":i,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"u"<typeof Promise?void 0:Promise,"%Proxy%":"u"<typeof Proxy?void 0:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":"u"<typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"u"<typeof Set?void 0:Set,"%SetIteratorPrototype%":"u">typeof Set&&E&&O?O(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"u"<typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":E&&O?O(""[Symbol.iterator]()):void 0,"%Symbol%":E?Symbol:void 0,"%SyntaxError%":c,"%ThrowTypeError%":A,"%TypedArray%":x,"%TypeError%":l,"%Uint8Array%":"u"<typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"u"<typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"u"<typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"u"<typeof Uint32Array?void 0:Uint32Array,"%URIError%":u,"%WeakMap%":"u"<typeof WeakMap?void 0:WeakMap,"%WeakRef%":"u"<typeof WeakRef?void 0:WeakRef,"%WeakSet%":"u"<typeof WeakSet?void 0:WeakSet,"%Function.prototype.call%":C,"%Function.prototype.apply%":j,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":k,"%Math.abs%":d,"%Math.floor%":p,"%Math.max%":f,"%Math.min%":h,"%Math.pow%":y,"%Math.round%":g,"%Math.sign%":m,"%Reflect.getPrototypeOf%":P};if(O)try{null.error}catch(e){var B=O(O(e));R["%Error.prototype%"]=B}var K=function e(t){var r;if("%AsyncFunction%"===t)r=w("async function () {}");else if("%GeneratorFunction%"===t)r=w("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=w("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&O&&(r=O(n.prototype))}return R[t]=r,r},T={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=e.r(81153),U=e.r(72146),N=M.call(C,Array.prototype.concat),D=M.call(j,Array.prototype.splice),z=M.call(C,String.prototype.replace),W=M.call(C,String.prototype.slice),H=M.call(C,RegExp.prototype.exec),J=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,L=/\\(\\)?/g,$=function(e){var t=W(e,0,1),r=W(e,-1);if("%"===t&&"%"!==r)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new c("invalid intrinsic syntax, expected opening `%`");var i=[];return z(e,J,function(e,t,r,n){i[i.length]=r?z(n,L,"$1"):t||e}),i},F=function(e,t){var r,i=e;if(U(T,i)&&(i="%"+(r=T[i])[0]+"%"),U(R,i)){var n=R[i];if(n===I&&(n=K(i)),void 0===n&&!t)throw new l("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:n}}throw new c("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new l("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new l('"allowMissing" argument must be a boolean');if(null===H(/^%?[^%]*%?$/,e))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=$(e),i=r.length>0?r[0]:"",n=F("%"+i+"%",t),o=n.name,a=n.value,s=!1,u=n.alias;u&&(i=u[0],D(r,N([0,1],u)));for(var d=1,p=!0;d<r.length;d+=1){var f=r[d],h=W(f,0,1),y=W(f,-1);if(('"'===h||"'"===h||"`"===h||'"'===y||"'"===y||"`"===y)&&h!==y)throw new c("property names with quotes must have matching quotes");if("constructor"!==f&&p||(s=!0),i+="."+f,U(R,o="%"+i+"%"))a=R[o];else if(null!=a){if(!(f in a)){if(!t)throw new l("base intrinsic for "+e+" exists, but the property is not available.");return}if(b&&d+1>=r.length){var g=b(a,f);a=(p=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:a[f]}else p=U(a,f),a=a[f];p&&!s&&(R[o]=a)}}return a}},84128,(e,t,r)=>{"use strict";var i=e.r(72138),n=e.r(27352),o=n([i("%String.prototype.indexOf%")]);t.exports=function(e,t){var r=i(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?n([r]):r}},45374,(e,t,r)=>{"use strict";var i=e.r(72138),n=e.r(84128),o=e.r(21308),a=e.r(62387),s=i("%Map%",!0),c=n("Map.prototype.get",!0),l=n("Map.prototype.set",!0),u=n("Map.prototype.has",!0),d=n("Map.prototype.delete",!0),p=n("Map.prototype.size",!0);t.exports=!!s&&function(){var e,t={assert:function(e){if(!t.has(e))throw new a("Side channel does not contain "+o(e))},delete:function(t){if(e){var r=d(e,t);return 0===p(e)&&(e=void 0),r}return!1},get:function(t){if(e)return c(e,t)},has:function(t){return!!e&&u(e,t)},set:function(t,r){e||(e=new s),l(e,t,r)}};return t}},18809,(e,t,r)=>{"use strict";var i=e.r(72138),n=e.r(84128),o=e.r(21308),a=e.r(45374),s=e.r(62387),c=i("%WeakMap%",!0),l=n("WeakMap.prototype.get",!0),u=n("WeakMap.prototype.set",!0),d=n("WeakMap.prototype.has",!0),p=n("WeakMap.prototype.delete",!0);t.exports=c?function(){var e,t,r={assert:function(e){if(!r.has(e))throw new s("Side channel does not contain "+o(e))},delete:function(r){if(c&&r&&("object"==typeof r||"function"==typeof r)){if(e)return p(e,r)}else if(a&&t)return t.delete(r);return!1},get:function(r){return c&&r&&("object"==typeof r||"function"==typeof r)&&e?l(e,r):t&&t.get(r)},has:function(r){return c&&r&&("object"==typeof r||"function"==typeof r)&&e?d(e,r):!!t&&t.has(r)},set:function(r,i){c&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new c),u(e,r,i)):a&&(t||(t=a()),t.set(r,i))}};return r}:a},39750,(e,t,r)=>{"use strict";var i=e.r(62387),n=e.r(21308),o=e.r(44535),a=e.r(45374),s=e.r(18809)||a||o;t.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new i("Side channel does not contain "+n(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,r){e||(e=s()),e.set(t,r)}};return t}},60961,(e,t,r)=>{"use strict";var i=String.prototype.replace,n=/%20/g,o="RFC3986";t.exports={default:o,formatters:{RFC1738:function(e){return i.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:o}},97974,(e,t,r)=>{"use strict";var i=e.r(60961),n=e.r(39750),o=Object.prototype.hasOwnProperty,a=Array.isArray,s=n(),c=function(e,t){return s.set(e,t),e},l=function(e){return s.has(e)},u=function(e){return s.get(e)},d=function(e,t){s.set(e,t)},p=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),f=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(a(r)){for(var i=[],n=0;n<r.length;++n)void 0!==r[n]&&i.push(r[n]);t.obj[t.prop]=i}}},h=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},i=0;i<e.length;++i)void 0!==e[i]&&(r[i]=e[i]);return r};t.exports={arrayToObject:h,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t,r,i){if(l(e)){var n=u(e)+1;return e[n]=t,d(e,n),e}var o=[].concat(e,t);return o.length>r?c(h(o,{plainObjects:i}),o.length-1):o},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var n=t[i],o=n.obj[n.prop],a=Object.keys(o),s=0;s<a.length;++s){var c=a[s],l=o[c];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:o,prop:c}),r.push(l))}return f(t),e},decode:function(e,t,r){var i=e.replace(/\+/g," ");if("iso-8859-1"===r)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(e){return i}},encode:function(e,t,r,n,o){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var s="",c=0;c<a.length;c+=1024){for(var l=a.length>=1024?a.slice(c,c+1024):a,u=[],d=0;d<l.length;++d){var f=l.charCodeAt(d);if(45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===i.RFC1738&&(40===f||41===f)){u[u.length]=l.charAt(d);continue}if(f<128){u[u.length]=p[f];continue}if(f<2048){u[u.length]=p[192|f>>6]+p[128|63&f];continue}if(f<55296||f>=57344){u[u.length]=p[224|f>>12]+p[128|f>>6&63]+p[128|63&f];continue}d+=1,f=65536+((1023&f)<<10|1023&l.charCodeAt(d)),u[u.length]=p[240|f>>18]+p[128|f>>12&63]+p[128|f>>6&63]+p[128|63&f]}s+=u.join("")}return s},isBuffer:function(e){return!!e&&"object"==typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isOverflow:l,isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(a(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r&&"function"!=typeof r){if(a(t))t.push(r);else if(!t||"object"!=typeof t)return[t,r];else if(l(t)){var n=u(t)+1;t[n]=r,d(t,n)}else(i&&(i.plainObjects||i.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0);return t}if(!t||"object"!=typeof t){if(l(r)){for(var s=Object.keys(r),p=i&&i.plainObjects?{__proto__:null,0:t}:{0:t},f=0;f<s.length;f++)p[parseInt(s[f],10)+1]=r[s[f]];return c(p,u(r)+1)}return[t].concat(r)}var y=t;return(a(t)&&!a(r)&&(y=h(t,i)),a(t)&&a(r))?(r.forEach(function(r,n){if(o.call(t,n)){var a=t[n];a&&"object"==typeof a&&r&&"object"==typeof r?t[n]=e(a,r,i):t.push(r)}else t[n]=r}),t):Object.keys(r).reduce(function(t,n){var a=r[n];return o.call(t,n)?t[n]=e(t[n],a,i):t[n]=a,t},y)}}},19483,(e,t,r)=>{"use strict";var i=e.r(39750),n=e.r(97974),o=e.r(60961),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,l=Array.prototype.push,u=function(e,t){l.apply(e,c(t)?t:[t])},d=Date.prototype.toISOString,p=o.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:n.encode,encodeValuesOnly:!1,filter:void 0,format:p,formatter:o.formatters[p],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},h={},y=function e(t,r,o,a,s,l,d,p,y,g,m,v,w,b,_,S,A,E){for(var O,k,P=t,j=E,C=0,I=!1;void 0!==(j=j.get(h))&&!I;){var x=j.get(t);if(C+=1,void 0!==x)if(x===C)throw RangeError("Cyclic object value");else I=!0;void 0===j.get(h)&&(C=0)}if("function"==typeof g?P=g(r,P):P instanceof Date?P=w(P):"comma"===o&&c(P)&&(P=n.maybeMap(P,function(e){return e instanceof Date?w(e):e})),null===P){if(l)return y&&!S?y(r,f.encoder,A,"key",b):r;P=""}if("string"==typeof(O=P)||"number"==typeof O||"boolean"==typeof O||"symbol"==typeof O||"bigint"==typeof O||n.isBuffer(P))return y?[_(S?r:y(r,f.encoder,A,"key",b))+"="+_(y(P,f.encoder,A,"value",b))]:[_(r)+"="+_(String(P))];var R=[];if(void 0===P)return R;if("comma"===o&&c(P))S&&y&&(P=n.maybeMap(P,y)),k=[{value:P.length>0?P.join(",")||null:void 0}];else if(c(g))k=g;else{var B=Object.keys(P);k=m?B.sort(m):B}var K=p?String(r).replace(/\./g,"%2E"):String(r),T=a&&c(P)&&1===P.length?K+"[]":K;if(s&&c(P)&&0===P.length)return T+"[]";for(var M=0;M<k.length;++M){var U=k[M],N="object"==typeof U&&U&&void 0!==U.value?U.value:P[U];if(!d||null!==N){var D=v&&p?String(U).replace(/\./g,"%2E"):String(U),z=c(P)?"function"==typeof o?o(T,D):T:T+(v?"."+D:"["+D+"]");E.set(t,C);var W=i();W.set(h,E),u(R,e(N,z,o,a,s,l,d,p,"comma"===o&&S&&c(P)?null:y,g,m,v,w,b,_,S,A,W))}}return R},g=function(e){if(!e)return f;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw TypeError("Encoder has to be a function.");var t,r=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=o.default;if(void 0!==e.format){if(!a.call(o.formatters,e.format))throw TypeError("Unknown format option provided.");i=e.format}var n=o.formatters[i],l=f.filter;if(("function"==typeof e.filter||c(e.filter))&&(l=e.filter),t=e.arrayFormat in s?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":f.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var u=void 0===e.allowDots?!0===e.encodeDotInKeys||f.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:t,charset:r,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:f.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:l,format:i,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}};t.exports=function(e,t){var r,n=e,o=g(t);"function"==typeof o.filter?n=(0,o.filter)("",n):c(o.filter)&&(r=o.filter);var a=[];if("object"!=typeof n||null===n)return"";var l=s[o.arrayFormat],d="comma"===l&&o.commaRoundTrip;r||(r=Object.keys(n)),o.sort&&r.sort(o.sort);for(var p=i(),f=0;f<r.length;++f){var h=r[f],m=n[h];o.skipNulls&&null===m||u(a,y(m,h,l,d,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,p))}var v=a.join(o.delimiter),w=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),v.length>0?w+v:""}},73528,(e,t,r)=>{"use strict";var i=e.r(97974),n=Object.prototype.hasOwnProperty,o=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:i.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},s=function(e,t,r){if(e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},c=function(e,t){var r={__proto__:null},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var l=t.parameterLimit===1/0?void 0:t.parameterLimit,u=c.split(t.delimiter,t.throwOnLimitExceeded?l+1:l);if(t.throwOnLimitExceeded&&u.length>l)throw RangeError("Parameter limit exceeded. Only "+l+" parameter"+(1===l?"":"s")+" allowed.");var d=-1,p=t.charset;if(t.charsetSentinel)for(f=0;f<u.length;++f)0===u[f].indexOf("utf8=")&&("utf8=%E2%9C%93"===u[f]?p="utf-8":"utf8=%26%2310003%3B"===u[f]&&(p="iso-8859-1"),d=f,f=u.length);for(f=0;f<u.length;++f)if(f!==d){var f,h,y,g=u[f],m=g.indexOf("]="),v=-1===m?g.indexOf("="):m+1;if(-1===v?(h=t.decoder(g,a.decoder,p,"key"),y=t.strictNullHandling?null:""):null!==(h=t.decoder(g.slice(0,v),a.decoder,p,"key"))&&(y=i.maybeMap(s(g.slice(v+1),t,o(r[h])?r[h].length:0),function(e){return t.decoder(e,a.decoder,p,"value")})),y&&t.interpretNumericEntities&&"iso-8859-1"===p&&(y=String(y).replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})),g.indexOf("[]=")>-1&&(y=o(y)?[y]:y),null!==h){var w=n.call(r,h);w&&"combine"===t.duplicates?r[h]=i.combine(r[h],y,t.arrayLimit,t.plainObjects):w&&"last"!==t.duplicates||(r[h]=y)}}return r},l=function(e,t,r,n){var o=0;if(e.length>0&&"[]"===e[e.length-1]){var a=e.slice(0,-1).join("");o=Array.isArray(t)&&t[a]?t[a].length:0}for(var c=n?t:s(t,r,o),l=e.length-1;l>=0;--l){var u,d=e[l];if("[]"===d&&r.parseArrays)u=i.isOverflow(c)?c:r.allowEmptyArrays&&(""===c||r.strictNullHandling&&null===c)?[]:i.combine([],c,r.arrayLimit,r.plainObjects);else{u=r.plainObjects?{__proto__:null}:{};var p="["===d.charAt(0)&&"]"===d.charAt(d.length-1)?d.slice(1,-1):d,f=r.decodeDotInKeys?p.replace(/%2E/g,"."):p,h=parseInt(f,10);r.parseArrays||""!==f?!isNaN(h)&&d!==f&&String(h)===f&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(u=[])[h]=c:"__proto__"!==f&&(u[f]=c):u={0:c}}c=u}return c},u=function(e,t){var r=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e;if(t.depth<=0){if(!t.plainObjects&&n.call(Object.prototype,r)&&!t.allowPrototypes)return;return[r]}var i=/(\[[^[\]]*])/g,o=/(\[[^[\]]*])/.exec(r),a=o?r.slice(0,o.index):r,s=[];if(a){if(!t.plainObjects&&n.call(Object.prototype,a)&&!t.allowPrototypes)return;s.push(a)}for(var c=0;null!==(o=i.exec(r))&&c<t.depth;){c+=1;var l=o[1].slice(1,-1);if(!t.plainObjects&&n.call(Object.prototype,l)&&!t.allowPrototypes)return;s.push(o[1])}if(o){if(!0===t.strictDepth)throw RangeError("Input depth exceeded depth option of "+t.depth+" and strictDepth is true");s.push("["+r.slice(o.index)+"]")}return s},d=function(e,t,r,i){if(e){var n=u(e,r);if(n)return l(n,t,r,i)}},p=function(e){if(!e)return a;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==e.throwOnLimitExceeded&&"boolean"!=typeof e.throwOnLimitExceeded)throw TypeError("`throwOnLimitExceeded` option must be a boolean");var t=void 0===e.charset?a.charset:e.charset,r=void 0===e.duplicates?a.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||a.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:a.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:a.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof e.throwOnLimitExceeded&&e.throwOnLimitExceeded}};t.exports=function(e,t){var r=p(t);if(""===e||null==e)return r.plainObjects?{__proto__:null}:{};for(var n="string"==typeof e?c(e,r):e,o=r.plainObjects?{__proto__:null}:{},a=Object.keys(n),s=0;s<a.length;++s){var l=a[s],u=d(l,n[l],r,"string"==typeof e);o=i.merge(o,u,r)}return!0===r.allowSparse?o:i.compact(o)}},126,(e,t,r)=>{"use strict";var i=e.r(19483),n=e.r(73528);t.exports={formats:e.r(60961),parse:n,stringify:i}},69778,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},n=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.SSO=void 0;let o=n(e.r(126)),a=e.r(54732),s=e.r(26647),c=e.r(95006);r.SSO=class{constructor(e){this.workos=e}listConnections(e){return i(this,void 0,void 0,function*(){return new s.AutoPaginatable((yield(0,a.fetchAndDeserialize)(this.workos,"/connections",c.deserializeConnection,e?(0,c.serializeListConnectionsOptions)(e):void 0)),e=>(0,a.fetchAndDeserialize)(this.workos,"/connections",c.deserializeConnection,e),e?(0,c.serializeListConnectionsOptions)(e):void 0)})}deleteConnection(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/connections/${e}`)})}getAuthorizationUrl({connection:e,clientId:t,domain:r,domainHint:i,loginHint:n,organization:a,provider:s,providerQueryParams:c,providerScopes:l,redirectUri:u,state:d}){let p;if(!r&&!s&&!e&&!a)throw Error("Incomplete arguments. Need to specify either a 'connection', 'organization', 'domain', or 'provider'.");r&&this.workos.emitWarning("The `domain` parameter for `getAuthorizationURL` is deprecated. Please use `organization` instead.");let f=(p={connection:e,organization:a,domain:r,domain_hint:i,login_hint:n,provider:s,provider_query_params:c,provider_scopes:l,client_id:t,redirect_uri:u,response_type:"code",state:d},o.default.stringify(p,{arrayFormat:"repeat",sort:(e,t)=>e.localeCompare(t),format:"RFC1738"}));return`${this.workos.baseURL}/sso/authorize?${f}`}getConnection(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/connections/${e}`);return(0,c.deserializeConnection)(t)})}getProfileAndToken({code:e,clientId:t}){return i(this,void 0,void 0,function*(){let r=new URLSearchParams({client_id:t,client_secret:this.workos.key,grant_type:"authorization_code",code:e}),{data:i}=yield this.workos.post("/sso/token",r);return(0,c.deserializeProfileAndToken)(i)})}getProfile({accessToken:e}){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get("/sso/profile",{accessToken:e});return(0,c.deserializeProfile)(t)})}}},13117,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeChallenge=void 0,r.deserializeChallenge=e=>({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,expiresAt:e.expires_at,code:e.code,authenticationFactorId:e.authentication_factor_id})},18119,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeSms=void 0,r.deserializeSms=e=>({phoneNumber:e.phone_number})},99339,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeFactorWithSecrets=r.deserializeFactor=void 0;let i=e.r(18119),n=e.r(14121);r.deserializeFactor=e=>Object.assign(Object.assign({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,type:e.type},e.sms?{sms:(0,i.deserializeSms)(e.sms)}:{}),e.totp?{totp:(0,n.deserializeTotp)(e.totp)}:{}),r.deserializeFactorWithSecrets=e=>Object.assign(Object.assign({object:e.object,id:e.id,createdAt:e.created_at,updatedAt:e.updated_at,type:e.type},e.sms?{sms:(0,i.deserializeSms)(e.sms)}:{}),e.totp?{totp:(0,n.deserializeTotpWithSecrets)(e.totp)}:{})},41468,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeVerifyResponse=void 0;let i=e.r(13117);r.deserializeVerifyResponse=e=>({challenge:(0,i.deserializeChallenge)(e.challenge),valid:e.valid})},96143,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(13117),r),n(e.r(99339),r),n(e.r(41468),r)},98299,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.Mfa=void 0;let n=e.r(96143);r.Mfa=class{constructor(e){this.workos=e}deleteFactor(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/auth/factors/${e}`)})}getFactor(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/auth/factors/${e}`);return(0,n.deserializeFactor)(t)})}enrollFactor(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/auth/factors/enroll",Object.assign({type:e.type},(()=>{switch(e.type){case"sms":return{phone_number:e.phoneNumber};case"totp":return{totp_issuer:e.issuer,totp_user:e.user};default:return{}}})()));return(0,n.deserializeFactorWithSecrets)(t)})}challengeFactor(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/auth/factors/${e.authenticationFactorId}/challenge`,{sms_template:"smsTemplate"in e?e.smsTemplate:void 0});return(0,n.deserializeChallenge)(t)})}verifyFactor(e){return i(this,void 0,void 0,function*(){return this.verifyChallenge(e)})}verifyChallenge(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/auth/challenges/${e.authenticationChallengeId}/verify`,{code:e.code});return(0,n.deserializeVerifyResponse)(t)})}}},43421,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeAuditLogExport=void 0,r.deserializeAuditLogExport=e=>({object:e.object,id:e.id,state:e.state,url:e.url,createdAt:e.created_at,updatedAt:e.updated_at})},39885,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeAuditLogExportOptions=void 0,r.serializeAuditLogExportOptions=e=>({actions:e.actions,actors:e.actors,actor_names:e.actorNames,actor_ids:e.actorIds,organization_id:e.organizationId,range_end:e.rangeEnd.toISOString(),range_start:e.rangeStart.toISOString(),targets:e.targets})},94678,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreateAuditLogEventOptions=void 0,r.serializeCreateAuditLogEventOptions=e=>({action:e.action,version:e.version,occurred_at:e.occurredAt.toISOString(),actor:e.actor,targets:e.targets,context:{location:e.context.location,user_agent:e.context.userAgent},metadata:e.metadata})},36402,(e,t,r)=>{"use strict";function i(e){if(!e)return{};let t={};return Object.keys(e).forEach(r=>{t[r]={type:e[r]}}),t}Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreateAuditLogSchemaOptions=void 0,r.serializeCreateAuditLogSchemaOptions=e=>{var t;return{actor:{metadata:{type:"object",properties:i(null==(t=e.actor)?void 0:t.metadata)}},targets:e.targets.map(e=>({type:e.type,metadata:e.metadata?{type:"object",properties:i(e.metadata)}:void 0})),metadata:e.metadata?{type:"object",properties:i(e.metadata)}:void 0}}},85337,(e,t,r)=>{"use strict";function i(e){if(!e||!e.properties)return{};let t={};return Object.keys(e.properties).forEach(r=>{e.properties&&(t[r]=e.properties[r].type)}),t}Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeAuditLogSchema=void 0,r.deserializeAuditLogSchema=e=>{var t;return{object:e.object,version:e.version,targets:e.targets.map(e=>({type:e.type,metadata:e.metadata?i(e.metadata):void 0})),actor:{metadata:i(null==(t=e.actor)?void 0:t.metadata)},metadata:e.metadata?i(e.metadata):void 0,createdAt:e.created_at}}},18665,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(43421),r),n(e.r(39885),r),n(e.r(94678),r),n(e.r(36402),r),n(e.r(85337),r)},82240,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.AuditLogs=void 0;let n=e.r(18665);r.AuditLogs=class{constructor(e){this.workos=e}createEvent(e,t,r={}){return i(this,void 0,void 0,function*(){let i=Object.assign(Object.assign({},r),{idempotencyKey:r.idempotencyKey||`workos-node-${this.workos.getCryptoProvider().randomUUID()}`});yield this.workos.post("/audit_logs/events",{event:(0,n.serializeCreateAuditLogEventOptions)(t),organization_id:e},i)})}createExport(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/audit_logs/exports",(0,n.serializeAuditLogExportOptions)(e));return(0,n.deserializeAuditLogExport)(t)})}getExport(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/audit_logs/exports/${e}`);return(0,n.deserializeAuditLogExport)(t)})}createSchema(e,t={}){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post(`/audit_logs/actions/${e.action}/schemas`,(0,n.serializeCreateAuditLogSchemaOptions)(e),t);return(0,n.deserializeAuditLogSchema)(r)})}}},40978,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680);r.default=(e,t)=>(0,i.createHash)(e).update(t).digest()},88208,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.concatKdf=r.lengthAndInput=r.uint32be=r.uint64be=r.p2s=r.concat=r.decoder=r.encoder=void 0;let i=e.r(40978);function n(...e){let t=new Uint8Array(e.reduce((e,{length:t})=>e+t,0)),r=0;for(let i of e)t.set(i,r),r+=i.length;return t}function o(e,t,r){if(t<0||t>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,255&t],r)}function a(e){let t=new Uint8Array(4);return o(t,e),t}r.encoder=new TextEncoder,r.decoder=new TextDecoder,r.concat=n,r.p2s=function(e,t){return n(r.encoder.encode(e),new Uint8Array([0]),t)},r.uint64be=function(e){let t=Math.floor(e/0x100000000),r=new Uint8Array(8);return o(r,t,0),o(r,e%0x100000000,4),r},r.uint32be=a,r.lengthAndInput=function(e){return n(a(e.length),e)},r.concatKdf=async function(e,t,r){let n=Math.ceil((t>>3)/32),o=new Uint8Array(32*n);for(let t=0;t<n;t++){let n=new Uint8Array(4+e.length+r.length);n.set(a(t+1)),n.set(e,4),n.set(r,4+e.length),o.set(await (0,i.default)("sha256",n),32*t)}return o.slice(0,t>>3)}},29218,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decode=r.encode=r.encodeBase64=r.decodeBase64=void 0;let i=e.r(51615),n=e.r(88208);r.encode=e=>i.Buffer.from(e).toString("base64url"),r.decodeBase64=e=>new Uint8Array(i.Buffer.from(e,"base64")),r.encodeBase64=e=>i.Buffer.from(e).toString("base64"),r.decode=e=>{let t;return new Uint8Array(i.Buffer.from(((t=e)instanceof Uint8Array&&(t=n.decoder.decode(t)),t),"base64"))}},67324,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JWSSignatureVerificationFailed=r.JWKSTimeout=r.JWKSMultipleMatchingKeys=r.JWKSNoMatchingKey=r.JWKSInvalid=r.JWKInvalid=r.JWTInvalid=r.JWSInvalid=r.JWEInvalid=r.JWEDecryptionFailed=r.JOSENotSupported=r.JOSEAlgNotAllowed=r.JWTExpired=r.JWTClaimValidationFailed=r.JOSEError=void 0;class i extends Error{static get code(){return"ERR_JOSE_GENERIC"}code="ERR_JOSE_GENERIC";constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}r.JOSEError=i,r.JWTClaimValidationFailed=class extends i{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(e,t,r="unspecified",i="unspecified"){super(e),this.claim=r,this.reason=i,this.payload=t}},r.JWTExpired=class extends i{static get code(){return"ERR_JWT_EXPIRED"}code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(e,t,r="unspecified",i="unspecified"){super(e),this.claim=r,this.reason=i,this.payload=t}},r.JOSEAlgNotAllowed=class extends i{static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}code="ERR_JOSE_ALG_NOT_ALLOWED"},r.JOSENotSupported=class extends i{static get code(){return"ERR_JOSE_NOT_SUPPORTED"}code="ERR_JOSE_NOT_SUPPORTED"},r.JWEDecryptionFailed=class extends i{static get code(){return"ERR_JWE_DECRYPTION_FAILED"}code="ERR_JWE_DECRYPTION_FAILED";message="decryption operation failed"},r.JWEInvalid=class extends i{static get code(){return"ERR_JWE_INVALID"}code="ERR_JWE_INVALID"},r.JWSInvalid=class extends i{static get code(){return"ERR_JWS_INVALID"}code="ERR_JWS_INVALID"},r.JWTInvalid=class extends i{static get code(){return"ERR_JWT_INVALID"}code="ERR_JWT_INVALID"},r.JWKInvalid=class extends i{static get code(){return"ERR_JWK_INVALID"}code="ERR_JWK_INVALID"},r.JWKSInvalid=class extends i{static get code(){return"ERR_JWKS_INVALID"}code="ERR_JWKS_INVALID"},r.JWKSNoMatchingKey=class extends i{static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}code="ERR_JWKS_NO_MATCHING_KEY";message="no applicable key found in the JSON Web Key Set"};class n extends i{[Symbol.asyncIterator];static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";message="multiple matching keys found in the JSON Web Key Set"}r.JWKSMultipleMatchingKeys=n,r.JWKSTimeout=class extends i{static get code(){return"ERR_JWKS_TIMEOUT"}code="ERR_JWKS_TIMEOUT";message="request timed out"},r.JWSSignatureVerificationFailed=class extends i{static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";message="signature verification failed"}},19647,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=e.r(66680);Object.defineProperty(r,"default",{enumerable:!0,get:function(){return i.randomFillSync}})},55783,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bitLength=void 0;let i=e.r(67324),n=e.r(19647);function o(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new i.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}r.bitLength=o,r.default=e=>(0,n.default)(new Uint8Array(o(e)>>3))},43478,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(67324),n=e.r(55783);r.default=(e,t)=>{if(t.length<<3!==(0,n.bitLength)(e))throw new i.JWEInvalid("Invalid Initialization Vector length")}},62502,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(12057);r.default=e=>i.types.isKeyObject(e)},40860,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(67324),n=e.r(62502);r.default=(e,t)=>{let r;switch(e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new i.JOSENotSupported(`Content Encryption Algorithm ${e} is not supported either by JOSE or your javascript runtime`)}if(t instanceof Uint8Array){let e=t.byteLength<<3;if(e!==r)throw new i.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}if((0,n.default)(t)&&"secret"===t.type){let e=t.symmetricKeySize<<3;if(e!==r)throw new i.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${e} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},53651,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=e.r(66680).timingSafeEqual},67627,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680),n=e.r(88208);r.default=function(e,t,r,o,a,s){let c=(0,n.concat)(e,t,r,(0,n.uint64be)(e.length<<3)),l=(0,i.createHmac)(`sha${o}`,a);return l.update(c),l.digest().slice(0,s>>3)}},61579,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isCryptoKey=void 0;let i=e.r(66680),n=e.r(12057);r.default=i.webcrypto,r.isCryptoKey=e=>n.types.isCryptoKey(e)},82675,(e,t,r)=>{"use strict";function i(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function n(e,t){return e.name===t}function o(e){return parseInt(e.name.slice(4),10)}function a(e,t){if(t.length&&!t.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw TypeError(e)}}Object.defineProperty(r,"__esModule",{value:!0}),r.checkEncCryptoKey=r.checkSigCryptoKey=void 0,r.checkSigCryptoKey=function(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!n(e.algorithm,"HMAC"))throw i("HMAC");let r=parseInt(t.slice(2),10);if(o(e.algorithm.hash)!==r)throw i(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!n(e.algorithm,"RSASSA-PKCS1-v1_5"))throw i("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(o(e.algorithm.hash)!==r)throw i(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!n(e.algorithm,"RSA-PSS"))throw i("RSA-PSS");let r=parseInt(t.slice(2),10);if(o(e.algorithm.hash)!==r)throw i(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw i("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!n(e.algorithm,"ECDSA"))throw i("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw i(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}a(e,r)},r.checkEncCryptoKey=function(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!n(e.algorithm,"AES-GCM"))throw i("AES-GCM");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw i(r,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!n(e.algorithm,"AES-KW"))throw i("AES-KW");let r=parseInt(t.slice(1,4),10);if(e.algorithm.length!==r)throw i(r,"algorithm.length");break}case"ECDH":switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw i("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!n(e.algorithm,"PBKDF2"))throw i("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!n(e.algorithm,"RSA-OAEP"))throw i("RSA-OAEP");let r=parseInt(t.slice(9),10)||1;if(o(e.algorithm.hash)!==r)throw i(`SHA-${r}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}a(e,r)}},98644,(e,t,r)=>{"use strict";function i(e,t,...r){if(r.length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}Object.defineProperty(r,"__esModule",{value:!0}),r.withAlg=void 0,r.default=(e,...t)=>i("Key must be ",e,...t),r.withAlg=function(e,t,...r){return i(`Key for the ${e} algorithm must be `,t,...r)}},53674,(e,t,r)=>{"use strict";let i;Object.defineProperty(r,"__esModule",{value:!0});let n=e.r(66680);r.default=e=>(i||=new Set((0,n.getCiphers)())).has(e)},66898,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.types=void 0;let i=e.r(61579),n=e.r(62502);r.default=e=>(0,n.default)(e)||(0,i.isCryptoKey)(e);let o=["KeyObject"];r.types=o,(globalThis.CryptoKey||i.default?.CryptoKey)&&o.push("CryptoKey")},2130,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680),n=e.r(43478),o=e.r(40860),a=e.r(88208),s=e.r(67324),c=e.r(53651),l=e.r(67627),u=e.r(61579),d=e.r(82675),p=e.r(62502),f=e.r(98644),h=e.r(53674),y=e.r(66898);r.default=(e,t,r,g,m,v)=>{let w;if((0,u.isCryptoKey)(t))(0,d.checkEncCryptoKey)(t,e,"decrypt"),w=i.KeyObject.from(t);else if(t instanceof Uint8Array||(0,p.default)(t))w=t;else throw TypeError((0,f.default)(t,...y.types,"Uint8Array"));if(!g)throw new s.JWEInvalid("JWE Initialization Vector missing");if(!m)throw new s.JWEInvalid("JWE Authentication Tag missing");switch((0,o.default)(e,w),(0,n.default)(e,g),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,n,o,u){let d,f,y=parseInt(e.slice(1,4),10);(0,p.default)(t)&&(t=t.export());let g=t.subarray(y>>3),m=t.subarray(0,y>>3),v=parseInt(e.slice(-3),10),w=`aes-${y}-cbc`;if(!(0,h.default)(w))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let b=(0,l.default)(u,n,r,v,m,y);try{d=(0,c.default)(o,b)}catch{}if(!d)throw new s.JWEDecryptionFailed;try{let e=(0,i.createDecipheriv)(w,g,n);f=(0,a.concat)(e.update(r),e.final())}catch{}if(!f)throw new s.JWEDecryptionFailed;return f}(e,w,r,g,m,v);case"A128GCM":case"A192GCM":case"A256GCM":var b=w;let _=parseInt(e.slice(1,4),10),S=`aes-${_}-gcm`;if(!(0,h.default)(S))throw new s.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);try{let e=(0,i.createDecipheriv)(S,b,g,{authTagLength:16});e.setAuthTag(m),v.byteLength&&e.setAAD(v,{plaintextLength:r.length});let t=e.update(r);return e.final(),t}catch{throw new s.JWEDecryptionFailed}default:throw new s.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},20372,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=(...e)=>{let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0}},90317,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},83305,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unwrap=r.wrap=void 0;let i=e.r(51615),n=e.r(66680),o=e.r(67324),a=e.r(88208),s=e.r(61579),c=e.r(82675),l=e.r(62502),u=e.r(98644),d=e.r(53674),p=e.r(66898);function f(e,t){if(e.symmetricKeySize<<3!==parseInt(t.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${t}`)}function h(e,t,r){if((0,l.default)(e))return e;if(e instanceof Uint8Array)return(0,n.createSecretKey)(e);if((0,s.isCryptoKey)(e))return(0,c.checkEncCryptoKey)(e,t,r),n.KeyObject.from(e);throw TypeError((0,u.default)(e,...p.types,"Uint8Array"))}r.wrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),c=`aes${s}-wrap`;if(!(0,d.default)(c))throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let l=h(t,e,"wrapKey");f(l,e);let u=(0,n.createCipheriv)(c,l,i.Buffer.alloc(8,166));return(0,a.concat)(u.update(r),u.final())},r.unwrap=(e,t,r)=>{let s=parseInt(e.slice(1,4),10),c=`aes${s}-wrap`;if(!(0,d.default)(c))throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`);let l=h(t,e,"unwrapKey");f(l,e);let u=(0,n.createDecipheriv)(c,l,i.Buffer.alloc(8,166));return(0,a.concat)(u.update(r),u.final())}},34308,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.weakMap=void 0;let i=e.r(66680),n=e.r(67324),o=e.r(61579),a=e.r(62502),s=e.r(98644),c=e.r(66898);r.weakMap=new WeakMap,r.default=(e,t)=>{let r;if((0,o.isCryptoKey)(e))r=i.KeyObject.from(e);else if((0,a.default)(e))r=e;else throw TypeError((0,s.default)(e,...c.types));if("secret"===r.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(r.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${r.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${r.asymmetricKeyType.slice(1)}`;case"ec":{let e=r.asymmetricKeyDetails.namedCurve;if(t)return e;switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new n.JOSENotSupported("Unsupported key curve for this operation")}}default:throw TypeError("Invalid asymmetric key type for this operation")}}},86824,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ecdhAllowed=r.generateEpk=r.deriveKey=void 0;let i=e.r(66680),n=e.r(12057),o=e.r(34308),a=e.r(88208),s=e.r(67324),c=e.r(61579),l=e.r(82675),u=e.r(62502),d=e.r(98644),p=e.r(66898),f=(0,n.promisify)(i.generateKeyPair);r.deriveKey=async function(e,t,r,n,o=new Uint8Array(0),s=new Uint8Array(0)){let f,h;if((0,c.isCryptoKey)(e))(0,l.checkEncCryptoKey)(e,"ECDH"),f=i.KeyObject.from(e);else if((0,u.default)(e))f=e;else throw TypeError((0,d.default)(e,...p.types));if((0,c.isCryptoKey)(t))(0,l.checkEncCryptoKey)(t,"ECDH","deriveBits"),h=i.KeyObject.from(t);else if((0,u.default)(t))h=t;else throw TypeError((0,d.default)(t,...p.types));let y=(0,a.concat)((0,a.lengthAndInput)(a.encoder.encode(r)),(0,a.lengthAndInput)(o),(0,a.lengthAndInput)(s),(0,a.uint32be)(n)),g=(0,i.diffieHellman)({privateKey:h,publicKey:f});return(0,a.concatKdf)(g,n,y)},r.generateEpk=async function(e){let t;if((0,c.isCryptoKey)(e))t=i.KeyObject.from(e);else if((0,u.default)(e))t=e;else throw TypeError((0,d.default)(e,...p.types));switch(t.asymmetricKeyType){case"x25519":return f("x25519");case"x448":return f("x448");case"ec":return f("ec",{namedCurve:(0,o.default)(t)});default:throw new s.JOSENotSupported("Invalid or unsupported EPK")}},r.ecdhAllowed=e=>["P-256","P-384","P-521","X25519","X448"].includes((0,o.default)(e))},73961,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(67324);r.default=function(e){if(!(e instanceof Uint8Array)||e.length<8)throw new i.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}},26621,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decrypt=r.encrypt=void 0;let i=e.r(12057),n=e.r(66680),o=e.r(19647),a=e.r(88208),s=e.r(29218),c=e.r(83305),l=e.r(73961),u=e.r(61579),d=e.r(82675),p=e.r(62502),f=e.r(98644),h=e.r(66898),y=(0,i.promisify)(n.pbkdf2);function g(e,t){if((0,p.default)(e))return e.export();if(e instanceof Uint8Array)return e;if((0,u.isCryptoKey)(e))return(0,d.checkEncCryptoKey)(e,t,"deriveBits","deriveKey"),n.KeyObject.from(e).export();throw TypeError((0,f.default)(e,...h.types,"Uint8Array"))}r.encrypt=async(e,t,r,i=2048,n=(0,o.default)(new Uint8Array(16)))=>{(0,l.default)(n);let u=(0,a.p2s)(e,n),d=parseInt(e.slice(13,16),10)>>3,p=g(t,e),f=await y(p,u,i,d,`sha${e.slice(8,11)}`);return{encryptedKey:await (0,c.wrap)(e.slice(-6),f,r),p2c:i,p2s:(0,s.encode)(n)}},r.decrypt=async(e,t,r,i,n)=>{(0,l.default)(n);let o=(0,a.p2s)(e,n),s=parseInt(e.slice(13,16),10)>>3,u=g(t,e),d=await y(u,o,i,s,`sha${e.slice(8,11)}`);return(0,c.unwrap)(e.slice(-6),d,r)}},28101,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=(e,t)=>{let{modulusLength:r}=e.asymmetricKeyDetails;if("number"!=typeof r||r<2048)throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)}},33389,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decrypt=r.encrypt=void 0;let i=e.r(66680),n=e.r(12057),o=e.r(28101),a=e.r(61579),s=e.r(82675),c=e.r(62502),l=e.r(98644),u=e.r(66898),d=(e,t)=>{if("rsa"!==e.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,o.default)(e,t)},p=(0,n.deprecate)(()=>i.constants.RSA_PKCS1_PADDING,'The RSA1_5 "alg" (JWE Algorithm) is deprecated and will be removed in the next major revision.'),f=e=>{switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return i.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return p();default:return}},h=e=>{switch(e){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function y(e,t,...r){if((0,c.default)(e))return e;if((0,a.isCryptoKey)(e))return(0,s.checkEncCryptoKey)(e,t,...r),i.KeyObject.from(e);throw TypeError((0,l.default)(e,...u.types))}r.encrypt=(e,t,r)=>{let n=f(e),o=h(e),a=y(t,e,"wrapKey","encrypt");return d(a,e),(0,i.publicEncrypt)({key:a,oaepHash:o,padding:n},r)},r.decrypt=(e,t,r)=>{let n=f(e),o=h(e),a=y(t,e,"unwrapKey","decrypt");return d(a,e),(0,i.privateDecrypt)({key:a,oaepHash:o,padding:n},r)}},26563,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={}},170,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.bitLength=void 0;let i=e.r(67324),n=e.r(19647);function o(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new i.JOSENotSupported(`Unsupported JWE Algorithm: ${e}`)}}r.bitLength=o,r.default=e=>(0,n.default)(new Uint8Array(o(e)>>3))},76286,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.fromX509=r.fromSPKI=r.fromPKCS8=r.toPKCS8=r.toSPKI=void 0;let i=e.r(66680),n=e.r(51615),o=e.r(61579),a=e.r(62502),s=e.r(98644),c=e.r(66898),l=(e,t,r)=>{let n;if((0,o.isCryptoKey)(r)){if(!r.extractable)throw TypeError("CryptoKey is not extractable");n=i.KeyObject.from(r)}else if((0,a.default)(r))n=r;else throw TypeError((0,s.default)(r,...c.types));if(n.type!==e)throw TypeError(`key is not a ${e} key`);return n.export({format:"pem",type:t})};r.toSPKI=e=>l("public","spki",e),r.toPKCS8=e=>l("private","pkcs8",e),r.fromPKCS8=e=>(0,i.createPrivateKey)({key:n.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),r.fromSPKI=e=>(0,i.createPublicKey)({key:n.Buffer.from(e.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),r.fromX509=e=>(0,i.createPublicKey)({key:e,type:"spki",format:"pem"})},58295,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680);r.default=e=>(e.d?i.createPrivateKey:i.createPublicKey)({format:"jwk",key:e})},99669,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.importJWK=r.importPKCS8=r.importX509=r.importSPKI=void 0;let i=e.r(29218),n=e.r(76286),o=e.r(58295),a=e.r(67324),s=e.r(90317);r.importSPKI=async function(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,n.fromSPKI)(e,t,r)},r.importX509=async function(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,n.fromX509)(e,t,r)},r.importPKCS8=async function(e,t,r){if("string"!=typeof e||0!==e.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,n.fromPKCS8)(e,t,r)},r.importJWK=async function(e,t){if(!(0,s.default)(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,i.decode)(e.k);case"RSA":if(void 0!==e.oth)throw new a.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,o.default)({...e,alg:t});default:throw new a.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}},39966,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(98644),n=e.r(66898),o=e=>e?.[Symbol.toStringTag];r.default=(e,t,r)=>{if(e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)){if(!(t instanceof Uint8Array)){if(!(0,n.default)(t))throw TypeError((0,i.withAlg)(e,t,...n.types,"Uint8Array"));if("secret"!==t.type)throw TypeError(`${o(t)} instances for symmetric algorithms must be of type "secret"`)}}else{if(!(0,n.default)(t))throw TypeError((0,i.withAlg)(e,t,...n.types));if("secret"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${o(t)} instances for asymmetric algorithm encryption must be of type "public"`)}}},3499,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680),n=e.r(43478),o=e.r(40860),a=e.r(88208),s=e.r(67627),c=e.r(61579),l=e.r(82675),u=e.r(62502),d=e.r(98644),p=e.r(55783),f=e.r(67324),h=e.r(53674),y=e.r(66898);r.default=(e,t,r,g,m)=>{let v;if((0,c.isCryptoKey)(r))(0,l.checkEncCryptoKey)(r,e,"encrypt"),v=i.KeyObject.from(r);else if(r instanceof Uint8Array||(0,u.default)(r))v=r;else throw TypeError((0,d.default)(r,...y.types,"Uint8Array"));switch((0,o.default)(e,v),g?(0,n.default)(e,g):g=(0,p.default)(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(e,t,r,n,o){let c=parseInt(e.slice(1,4),10);(0,u.default)(r)&&(r=r.export());let l=r.subarray(c>>3),d=r.subarray(0,c>>3),p=`aes-${c}-cbc`;if(!(0,h.default)(p))throw new f.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let y=(0,i.createCipheriv)(p,l,n),g=(0,a.concat)(y.update(t),y.final()),m=parseInt(e.slice(-3),10),v=(0,s.default)(o,n,g,m,d,c);return{ciphertext:g,tag:v,iv:n}}(e,t,v,g,m);case"A128GCM":case"A192GCM":case"A256GCM":var w=v,b=g;let _=parseInt(e.slice(1,4),10),S=`aes-${_}-gcm`;if(!(0,h.default)(S))throw new f.JOSENotSupported(`alg ${e} is not supported by your javascript runtime`);let A=(0,i.createCipheriv)(S,w,b,{authTagLength:16});m.byteLength&&A.setAAD(m,{plaintextLength:t.length});let E=A.update(t);return A.final(),{ciphertext:E,tag:A.getAuthTag(),iv:b};default:throw new f.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},87731,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.unwrap=r.wrap=void 0;let i=e.r(3499),n=e.r(2130),o=e.r(29218);r.wrap=async function(e,t,r,n){let a=e.slice(0,7),s=await (0,i.default)(a,r,t,n,new Uint8Array(0));return{encryptedKey:s.ciphertext,iv:(0,o.encode)(s.iv),tag:(0,o.encode)(s.tag)}},r.unwrap=async function(e,t,r,i,o){let a=e.slice(0,7);return(0,n.default)(a,t,r,i,o,new Uint8Array(0))}},93491,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(83305),n=e.r(86824),o=e.r(26621),a=e.r(33389),s=e.r(29218),c=e.r(26563),l=e.r(67324),u=e.r(170),d=e.r(99669),p=e.r(39966),f=e.r(90317),h=e.r(87731);r.default=async function(e,t,r,y,g){switch((0,p.default)(e,t,"decrypt"),t=await c.default.normalizePrivateKey?.(t,e)||t,e){case"dir":if(void 0!==r)throw new l.JWEInvalid("Encountered unexpected JWE Encrypted Key");return t;case"ECDH-ES":if(void 0!==r)throw new l.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let o,a;if(!(0,f.default)(y.epk))throw new l.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!n.ecdhAllowed(t))throw new l.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let c=await (0,d.importJWK)(y.epk,e);if(void 0!==y.apu){if("string"!=typeof y.apu)throw new l.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=(0,s.decode)(y.apu)}catch{throw new l.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==y.apv){if("string"!=typeof y.apv)throw new l.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=(0,s.decode)(y.apv)}catch{throw new l.JWEInvalid("Failed to base64url decode the apv")}}let p=await n.deriveKey(c,t,"ECDH-ES"===e?y.enc:e,"ECDH-ES"===e?(0,u.bitLength)(y.enc):parseInt(e.slice(-5,-2),10),o,a);if("ECDH-ES"===e)return p;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,i.unwrap)(e.slice(-6),p,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,a.decrypt)(e,t,r);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let i;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof y.p2c)throw new l.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let n=g?.maxPBES2Count||1e4;if(y.p2c>n)throw new l.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof y.p2s)throw new l.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{i=(0,s.decode)(y.p2s)}catch{throw new l.JWEInvalid("Failed to base64url decode the p2s")}return(0,o.decrypt)(e,t,r,y.p2c,i)}case"A128KW":case"A192KW":case"A256KW":if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");return(0,i.unwrap)(e,t,r);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let i,n;if(void 0===r)throw new l.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof y.iv)throw new l.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof y.tag)throw new l.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{i=(0,s.decode)(y.iv)}catch{throw new l.JWEInvalid("Failed to base64url decode the iv")}try{n=(0,s.decode)(y.tag)}catch{throw new l.JWEInvalid("Failed to base64url decode the tag")}return(0,h.unwrap)(e,t,r,i,n)}default:throw new l.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}},42002,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(67324);r.default=function(e,t,r,n,o){let a;if(void 0!==o.crit&&n?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,n.crit)){if(!a.has(s))throw new i.JOSENotSupported(`Extension Header Parameter "${s}" is not recognized`);if(void 0===o[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(a.get(s)&&void 0===n[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(n.crit)}},53887,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=(e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)}},63044,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flattenedDecrypt=void 0;let i=e.r(29218),n=e.r(2130),o=e.r(67324),a=e.r(20372),s=e.r(90317),c=e.r(93491),l=e.r(88208),u=e.r(170),d=e.r(42002),p=e.r(53887);r.flattenedDecrypt=async function(e,t,r){let f,h,y,g,m,v,w;if(!(0,s.default)(e))throw new o.JWEInvalid("Flattened JWE must be an object");if(void 0===e.protected&&void 0===e.header&&void 0===e.unprotected)throw new o.JWEInvalid("JOSE Header missing");if(void 0!==e.iv&&"string"!=typeof e.iv)throw new o.JWEInvalid("JWE Initialization Vector incorrect type");if("string"!=typeof e.ciphertext)throw new o.JWEInvalid("JWE Ciphertext missing or incorrect type");if(void 0!==e.tag&&"string"!=typeof e.tag)throw new o.JWEInvalid("JWE Authentication Tag incorrect type");if(void 0!==e.protected&&"string"!=typeof e.protected)throw new o.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==e.encrypted_key&&"string"!=typeof e.encrypted_key)throw new o.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==e.aad&&"string"!=typeof e.aad)throw new o.JWEInvalid("JWE AAD incorrect type");if(void 0!==e.header&&!(0,s.default)(e.header))throw new o.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==e.unprotected&&!(0,s.default)(e.unprotected))throw new o.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(e.protected)try{let t=(0,i.decode)(e.protected);f=JSON.parse(l.decoder.decode(t))}catch{throw new o.JWEInvalid("JWE Protected Header is invalid")}if(!(0,a.default)(f,e.header,e.unprotected))throw new o.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let b={...f,...e.header,...e.unprotected};if((0,d.default)(o.JWEInvalid,new Map,r?.crit,f,b),void 0!==b.zip)throw new o.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:_,enc:S}=b;if("string"!=typeof _||!_)throw new o.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof S||!S)throw new o.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let A=r&&(0,p.default)("keyManagementAlgorithms",r.keyManagementAlgorithms),E=r&&(0,p.default)("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(A&&!A.has(_)||!A&&_.startsWith("PBES2"))throw new o.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(E&&!E.has(S))throw new o.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==e.encrypted_key)try{h=(0,i.decode)(e.encrypted_key)}catch{throw new o.JWEInvalid("Failed to base64url decode the encrypted_key")}let O=!1;"function"==typeof t&&(t=await t(f,e),O=!0);try{y=await (0,c.default)(_,t,h,b,r)}catch(e){if(e instanceof TypeError||e instanceof o.JWEInvalid||e instanceof o.JOSENotSupported)throw e;y=(0,u.default)(S)}if(void 0!==e.iv)try{g=(0,i.decode)(e.iv)}catch{throw new o.JWEInvalid("Failed to base64url decode the iv")}if(void 0!==e.tag)try{m=(0,i.decode)(e.tag)}catch{throw new o.JWEInvalid("Failed to base64url decode the tag")}let k=l.encoder.encode(e.protected??"");v=void 0!==e.aad?(0,l.concat)(k,l.encoder.encode("."),l.encoder.encode(e.aad)):k;try{w=(0,i.decode)(e.ciphertext)}catch{throw new o.JWEInvalid("Failed to base64url decode the ciphertext")}let P={plaintext:await (0,n.default)(S,y,w,g,m,v)};if(void 0!==e.protected&&(P.protectedHeader=f),void 0!==e.aad)try{P.additionalAuthenticatedData=(0,i.decode)(e.aad)}catch{throw new o.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==e.unprotected&&(P.sharedUnprotectedHeader=e.unprotected),void 0!==e.header&&(P.unprotectedHeader=e.header),O)?{...P,key:t}:P}},70108,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compactDecrypt=void 0;let i=e.r(63044),n=e.r(67324),o=e.r(88208);r.compactDecrypt=async function(e,t,r){if(e instanceof Uint8Array&&(e=o.decoder.decode(e)),"string"!=typeof e)throw new n.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:a,1:s,2:c,3:l,4:u,length:d}=e.split(".");if(5!==d)throw new n.JWEInvalid("Invalid Compact JWE");let p=await (0,i.flattenedDecrypt)({ciphertext:l,iv:c||void 0,protected:a,tag:u||void 0,encrypted_key:s||void 0},t,r),f={plaintext:p.plaintext,protectedHeader:p.protectedHeader};return"function"==typeof t?{...f,key:p.key}:f}},4156,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generalDecrypt=void 0;let i=e.r(63044),n=e.r(67324),o=e.r(90317);r.generalDecrypt=async function(e,t,r){if(!(0,o.default)(e))throw new n.JWEInvalid("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(o.default))throw new n.JWEInvalid("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new n.JWEInvalid("JWE Recipients has no members");for(let n of e.recipients)try{return await (0,i.flattenedDecrypt)({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new n.JWEDecryptionFailed}},23086,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680),n=e.r(29218),o=e.r(67324),a=e.r(61579),s=e.r(62502),c=e.r(98644),l=e.r(66898);r.default=e=>{let t;if((0,a.isCryptoKey)(e)){if(!e.extractable)throw TypeError("CryptoKey is not extractable");t=i.KeyObject.from(e)}else if((0,s.default)(e))t=e;else if(e instanceof Uint8Array)return{kty:"oct",k:(0,n.encode)(e)};else throw TypeError((0,c.default)(e,...l.types,"Uint8Array"));if("secret"!==t.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(t.asymmetricKeyType))throw new o.JOSENotSupported("Unsupported key asymmetricKeyType");return t.export({format:"jwk"})}},26770,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.exportJWK=r.exportPKCS8=r.exportSPKI=void 0;let i=e.r(76286),n=e.r(76286),o=e.r(23086);r.exportSPKI=async function(e){return(0,i.toSPKI)(e)},r.exportPKCS8=async function(e){return(0,n.toPKCS8)(e)},r.exportJWK=async function(e){return(0,o.default)(e)}},16428,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(83305),n=e.r(86824),o=e.r(26621),a=e.r(33389),s=e.r(29218),c=e.r(26563),l=e.r(170),u=e.r(67324),d=e.r(26770),p=e.r(39966),f=e.r(87731);r.default=async function(e,t,r,h,y={}){let g,m,v;switch((0,p.default)(e,r,"encrypt"),r=await c.default.normalizePublicKey?.(r,e)||r,e){case"dir":v=r;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!n.ecdhAllowed(r))throw new u.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:o,apv:a}=y,{epk:c}=y;c||=(await n.generateEpk(r)).privateKey;let{x:p,y:f,crv:w,kty:b}=await (0,d.exportJWK)(c),_=await n.deriveKey(r,c,"ECDH-ES"===e?t:e,"ECDH-ES"===e?(0,l.bitLength)(t):parseInt(e.slice(-5,-2),10),o,a);if(m={epk:{x:p,crv:w,kty:b}},"EC"===b&&(m.epk.y=f),o&&(m.apu=(0,s.encode)(o)),a&&(m.apv=(0,s.encode)(a)),"ECDH-ES"===e){v=_;break}v=h||(0,l.default)(t);let S=e.slice(-6);g=await (0,i.wrap)(S,_,v);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":v=h||(0,l.default)(t),g=await (0,a.encrypt)(e,r,v);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{v=h||(0,l.default)(t);let{p2c:i,p2s:n}=y;({encryptedKey:g,...m}=await (0,o.encrypt)(e,r,v,i,n));break}case"A128KW":case"A192KW":case"A256KW":v=h||(0,l.default)(t),g=await (0,i.wrap)(e,r,v);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{v=h||(0,l.default)(t);let{iv:i}=y;({encryptedKey:g,...m}=await (0,f.wrap)(e,r,v,i));break}default:throw new u.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:v,encryptedKey:g,parameters:m}}},60831,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FlattenedEncrypt=r.unprotected=void 0;let i=e.r(29218),n=e.r(3499),o=e.r(16428),a=e.r(67324),s=e.r(20372),c=e.r(88208),l=e.r(42002);r.unprotected=Symbol(),r.FlattenedEncrypt=class{_plaintext;_protectedHeader;_sharedUnprotectedHeader;_unprotectedHeader;_aad;_cek;_iv;_keyManagementParameters;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,t){let u,d,p,f,h;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new a.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,s.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new a.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let y={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,l.default)(a.JWEInvalid,new Map,t?.crit,this._protectedHeader,y),void 0!==y.zip)throw new a.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:g,enc:m}=y;if("string"!=typeof g||!g)throw new a.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof m||!m)throw new a.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this._cek&&("dir"===g||"ECDH-ES"===g))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${g}`);{let i;({cek:d,encryptedKey:u,parameters:i}=await (0,o.default)(g,m,e,this._cek,this._keyManagementParameters)),i&&(t&&r.unprotected in t?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...i}:this.setUnprotectedHeader(i):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...i}:this.setProtectedHeader(i))}f=this._protectedHeader?c.encoder.encode((0,i.encode)(JSON.stringify(this._protectedHeader))):c.encoder.encode(""),this._aad?(h=(0,i.encode)(this._aad),p=(0,c.concat)(f,c.encoder.encode("."),c.encoder.encode(h))):p=f;let{ciphertext:v,tag:w,iv:b}=await (0,n.default)(m,this._plaintext,d,this._iv,p),_={ciphertext:(0,i.encode)(v)};return b&&(_.iv=(0,i.encode)(b)),w&&(_.tag=(0,i.encode)(w)),u&&(_.encrypted_key=(0,i.encode)(u)),h&&(_.aad=h),this._protectedHeader&&(_.protected=c.decoder.decode(f)),this._sharedUnprotectedHeader&&(_.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(_.header=this._unprotectedHeader),_}}},28962,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeneralEncrypt=void 0;let i=e.r(60831),n=e.r(67324),o=e.r(170),a=e.r(20372),s=e.r(16428),c=e.r(29218),l=e.r(42002);class u{parent;unprotectedHeader;key;options;constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}}r.GeneralEncrypt=class{_plaintext;_recipients=[];_protectedHeader;_unprotectedHeader;_aad;constructor(e){this._plaintext=e}addRecipient(e,t){let r=new u(this,e,{crit:t?.crit});return this._recipients.push(r),r}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(){let e;if(!this._recipients.length)throw new n.JWEInvalid("at least one recipient must be added");if(1===this._recipients.length){let[e]=this._recipients,t=await new i.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(e.unprotectedHeader).encrypt(e.key,{...e.options}),r={ciphertext:t.ciphertext,iv:t.iv,recipients:[{}],tag:t.tag};return t.aad&&(r.aad=t.aad),t.protected&&(r.protected=t.protected),t.unprotected&&(r.unprotected=t.unprotected),t.encrypted_key&&(r.recipients[0].encrypted_key=t.encrypted_key),t.header&&(r.recipients[0].header=t.header),r}for(let t=0;t<this._recipients.length;t++){let r=this._recipients[t];if(!(0,a.default)(this._protectedHeader,this._unprotectedHeader,r.unprotectedHeader))throw new n.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let i={...this._protectedHeader,...this._unprotectedHeader,...r.unprotectedHeader},{alg:o}=i;if("string"!=typeof o||!o)throw new n.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===o||"ECDH-ES"===o)throw new n.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof i.enc||!i.enc)throw new n.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(e){if(e!==i.enc)throw new n.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else e=i.enc;if((0,l.default)(n.JWEInvalid,new Map,r.options.crit,this._protectedHeader,i),void 0!==i.zip)throw new n.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}let t=(0,o.default)(e),r={ciphertext:"",iv:"",recipients:[],tag:""};for(let n=0;n<this._recipients.length;n++){let o=this._recipients[n],a={};r.recipients.push(a);let l=({...this._protectedHeader,...this._unprotectedHeader,...o.unprotectedHeader}).alg.startsWith("PBES2")?2048+n:void 0;if(0===n){let e=await new i.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(t).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(o.unprotectedHeader).setKeyManagementParameters({p2c:l}).encrypt(o.key,{...o.options,[i.unprotected]:!0});r.ciphertext=e.ciphertext,r.iv=e.iv,r.tag=e.tag,e.aad&&(r.aad=e.aad),e.protected&&(r.protected=e.protected),e.unprotected&&(r.unprotected=e.unprotected),a.encrypted_key=e.encrypted_key,e.header&&(a.header=e.header);continue}let{encryptedKey:u,parameters:d}=await (0,s.default)(o.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,e,o.key,t,{p2c:l});a.encrypted_key=(0,c.encode)(u),(o.unprotectedHeader||d)&&(a.header={...o.unprotectedHeader,...d})}return r}}},84980,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(67324);r.default=function(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new i.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},3311,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680),n=e.r(34308),o=e.r(67324),a=e.r(28101),s={padding:i.constants.RSA_PKCS1_PSS_PADDING,saltLength:i.constants.RSA_PSS_SALTLEN_DIGEST},c=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);r.default=function(e,t){switch(e){case"EdDSA":if(!["ed25519","ed448"].includes(t.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return t;case"RS256":case"RS384":case"RS512":if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,a.default)(t,e),t;case"PS256":case"PS384":case"PS512":if("rsa-pss"===t.asymmetricKeyType){let{hashAlgorithm:r,mgf1HashAlgorithm:i,saltLength:n}=t.asymmetricKeyDetails,o=parseInt(e.slice(-3),10);if(void 0!==r&&(r!==`sha${o}`||i!==r))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==n&&n>o>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,a.default)(t,e),{key:t,...s};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==t.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let r=(0,n.default)(t),i=c.get(e);if(r!==i)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${i}, got ${r}`);return{dsaEncoding:"ieee-p1363",key:t}}default:throw new o.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},13966,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(67324);r.default=function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new i.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}},57994,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680),n=e.r(61579),o=e.r(82675),a=e.r(98644),s=e.r(66898);r.default=function(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError((0,a.default)(t,...s.types));return(0,i.createSecretKey)(t)}if(t instanceof i.KeyObject)return t;if((0,n.isCryptoKey)(t))return(0,o.checkSigCryptoKey)(t,e,r),i.KeyObject.from(t);throw TypeError((0,a.default)(t,...s.types,"Uint8Array"))}},24017,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680),n=e.r(12057),o=e.r(84980),a=e.r(13966),s=e.r(3311),c=e.r(57994),l=(0,n.promisify)(i.sign);r.default=async(e,t,r)=>{let n=(0,c.default)(e,t,"sign");if(e.startsWith("HS")){let t=i.createHmac((0,a.default)(e),n);return t.update(r),t.digest()}return l((0,o.default)(e),r,(0,s.default)(e,n))}},90672,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(66680),n=e.r(12057),o=e.r(84980),a=e.r(3311),s=e.r(24017),c=e.r(57994),l=(0,n.promisify)(i.verify);r.default=async(e,t,r,n)=>{let u=(0,c.default)(e,t,"verify");if(e.startsWith("HS")){let t=await (0,s.default)(e,u,n);try{return i.timingSafeEqual(r,t)}catch{return!1}}let d=(0,o.default)(e),p=(0,a.default)(e,u);try{return await l(d,n,p,r)}catch{return!1}}},97757,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.flattenedVerify=void 0;let i=e.r(29218),n=e.r(90672),o=e.r(67324),a=e.r(88208),s=e.r(20372),c=e.r(90317),l=e.r(39966),u=e.r(42002),d=e.r(53887);r.flattenedVerify=async function(e,t,r){let p,f;if(!(0,c.default)(e))throw new o.JWSInvalid("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new o.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new o.JWSInvalid("JWS Protected Header incorrect type");if(void 0===e.payload)throw new o.JWSInvalid("JWS Payload missing");if("string"!=typeof e.signature)throw new o.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,c.default)(e.header))throw new o.JWSInvalid("JWS Unprotected Header incorrect type");let h={};if(e.protected)try{let t=(0,i.decode)(e.protected);h=JSON.parse(a.decoder.decode(t))}catch{throw new o.JWSInvalid("JWS Protected Header is invalid")}if(!(0,s.default)(h,e.header))throw new o.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let y={...h,...e.header},g=(0,u.default)(o.JWSInvalid,new Map([["b64",!0]]),r?.crit,h,y),m=!0;if(g.has("b64")&&"boolean"!=typeof(m=h.b64))throw new o.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:v}=y;if("string"!=typeof v||!v)throw new o.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let w=r&&(0,d.default)("algorithms",r.algorithms);if(w&&!w.has(v))throw new o.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(m){if("string"!=typeof e.payload)throw new o.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new o.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let b=!1;"function"==typeof t&&(t=await t(h,e),b=!0),(0,l.default)(v,t,"verify");let _=(0,a.concat)(a.encoder.encode(e.protected??""),a.encoder.encode("."),"string"==typeof e.payload?a.encoder.encode(e.payload):e.payload);try{p=(0,i.decode)(e.signature)}catch{throw new o.JWSInvalid("Failed to base64url decode the signature")}if(!await (0,n.default)(v,t,p,_))throw new o.JWSSignatureVerificationFailed;if(m)try{f=(0,i.decode)(e.payload)}catch{throw new o.JWSInvalid("Failed to base64url decode the payload")}else f="string"==typeof e.payload?a.encoder.encode(e.payload):e.payload;let S={payload:f};return(void 0!==e.protected&&(S.protectedHeader=h),void 0!==e.header&&(S.unprotectedHeader=e.header),b)?{...S,key:t}:S}},26907,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.compactVerify=void 0;let i=e.r(97757),n=e.r(67324),o=e.r(88208);r.compactVerify=async function(e,t,r){if(e instanceof Uint8Array&&(e=o.decoder.decode(e)),"string"!=typeof e)throw new n.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:a,1:s,2:c,length:l}=e.split(".");if(3!==l)throw new n.JWSInvalid("Invalid Compact JWS");let u=await (0,i.flattenedVerify)({payload:s,protected:a,signature:c},t,r),d={payload:u.payload,protectedHeader:u.protectedHeader};return"function"==typeof t?{...d,key:u.key}:d}},91484,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generalVerify=void 0;let i=e.r(97757),n=e.r(67324),o=e.r(90317);r.generalVerify=async function(e,t,r){if(!(0,o.default)(e))throw new n.JWSInvalid("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(o.default))throw new n.JWSInvalid("JWS Signatures missing or incorrect type");for(let n of e.signatures)try{return await (0,i.flattenedVerify)({header:n.header,payload:e.payload,protected:n.protected,signature:n.signature},t,r)}catch{}throw new n.JWSSignatureVerificationFailed}},50044,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=e=>Math.floor(e.getTime()/1e3)},14270,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;r.default=e=>{let t,r=i.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let n=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(n);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*n);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*n);break;case"day":case"days":case"d":t=Math.round(86400*n);break;case"week":case"weeks":case"w":t=Math.round(604800*n);break;default:t=Math.round(0x1e187e0*n)}return"-"===r[1]||"ago"===r[4]?-t:t}},23434,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(67324),n=e.r(88208),o=e.r(50044),a=e.r(14270),s=e.r(90317),c=e=>e.toLowerCase().replace(/^application\//,"");r.default=(e,t,r={})=>{var l,u;let d,p;try{d=JSON.parse(n.decoder.decode(t))}catch{}if(!(0,s.default)(d))throw new i.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{typ:f}=r;if(f&&("string"!=typeof e.typ||c(e.typ)!==c(f)))throw new i.JWTClaimValidationFailed('unexpected "typ" JWT header value',d,"typ","check_failed");let{requiredClaims:h=[],issuer:y,subject:g,audience:m,maxTokenAge:v}=r,w=[...h];for(let e of(void 0!==v&&w.push("iat"),void 0!==m&&w.push("aud"),void 0!==g&&w.push("sub"),void 0!==y&&w.push("iss"),new Set(w.reverse())))if(!(e in d))throw new i.JWTClaimValidationFailed(`missing required "${e}" claim`,d,e,"missing");if(y&&!(Array.isArray(y)?y:[y]).includes(d.iss))throw new i.JWTClaimValidationFailed('unexpected "iss" claim value',d,"iss","check_failed");if(g&&d.sub!==g)throw new i.JWTClaimValidationFailed('unexpected "sub" claim value',d,"sub","check_failed");if(m&&(l=d.aud,u="string"==typeof m?[m]:m,"string"==typeof l?!u.includes(l):!(Array.isArray(l)&&u.some(Set.prototype.has.bind(new Set(l))))))throw new i.JWTClaimValidationFailed('unexpected "aud" claim value',d,"aud","check_failed");switch(typeof r.clockTolerance){case"string":p=(0,a.default)(r.clockTolerance);break;case"number":p=r.clockTolerance;break;case"undefined":p=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:b}=r,_=(0,o.default)(b||new Date);if((void 0!==d.iat||v)&&"number"!=typeof d.iat)throw new i.JWTClaimValidationFailed('"iat" claim must be a number',d,"iat","invalid");if(void 0!==d.nbf){if("number"!=typeof d.nbf)throw new i.JWTClaimValidationFailed('"nbf" claim must be a number',d,"nbf","invalid");if(d.nbf>_+p)throw new i.JWTClaimValidationFailed('"nbf" claim timestamp check failed',d,"nbf","check_failed")}if(void 0!==d.exp){if("number"!=typeof d.exp)throw new i.JWTClaimValidationFailed('"exp" claim must be a number',d,"exp","invalid");if(d.exp<=_-p)throw new i.JWTExpired('"exp" claim timestamp check failed',d,"exp","check_failed")}if(v){let e=_-d.iat;if(e-p>("number"==typeof v?v:(0,a.default)(v)))throw new i.JWTExpired('"iat" claim timestamp check failed (too far in the past)',d,"iat","check_failed");if(e<0-p)throw new i.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',d,"iat","check_failed")}return d}},7066,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jwtVerify=void 0;let i=e.r(26907),n=e.r(23434),o=e.r(67324);r.jwtVerify=async function(e,t,r){let a=await (0,i.compactVerify)(e,t,r);if(a.protectedHeader.crit?.includes("b64")&&!1===a.protectedHeader.b64)throw new o.JWTInvalid("JWTs MUST NOT use unencoded payload");let s={payload:(0,n.default)(a.protectedHeader,a.payload,r),protectedHeader:a.protectedHeader};return"function"==typeof t?{...s,key:a.key}:s}},83330,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.jwtDecrypt=void 0;let i=e.r(70108),n=e.r(23434),o=e.r(67324);r.jwtDecrypt=async function(e,t,r){let a=await (0,i.compactDecrypt)(e,t,r),s=(0,n.default)(a.protectedHeader,a.plaintext,r),{protectedHeader:c}=a;if(void 0!==c.iss&&c.iss!==s.iss)throw new o.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',s,"iss","mismatch");if(void 0!==c.sub&&c.sub!==s.sub)throw new o.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',s,"sub","mismatch");if(void 0!==c.aud&&JSON.stringify(c.aud)!==JSON.stringify(s.aud))throw new o.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',s,"aud","mismatch");let l={payload:s,protectedHeader:c};return"function"==typeof t?{...l,key:a.key}:l}},9518,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompactEncrypt=void 0;let i=e.r(60831);r.CompactEncrypt=class{_flattened;constructor(e){this._flattened=new i.FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,t){let r=await this._flattened.encrypt(e,t);return[r.protected,r.encrypted_key,r.iv,r.ciphertext,r.tag].join(".")}}},86711,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FlattenedSign=void 0;let i=e.r(29218),n=e.r(24017),o=e.r(20372),a=e.r(67324),s=e.r(88208),c=e.r(39966),l=e.r(42002);r.FlattenedSign=class{_payload;_protectedHeader;_unprotectedHeader;constructor(e){if(!(e instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){let r;if(!this._protectedHeader&&!this._unprotectedHeader)throw new a.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,o.default)(this._protectedHeader,this._unprotectedHeader))throw new a.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let u={...this._protectedHeader,...this._unprotectedHeader},d=(0,l.default)(a.JWSInvalid,new Map([["b64",!0]]),t?.crit,this._protectedHeader,u),p=!0;if(d.has("b64")&&"boolean"!=typeof(p=this._protectedHeader.b64))throw new a.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:f}=u;if("string"!=typeof f||!f)throw new a.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,c.default)(f,e,"sign");let h=this._payload;p&&(h=s.encoder.encode((0,i.encode)(h))),r=this._protectedHeader?s.encoder.encode((0,i.encode)(JSON.stringify(this._protectedHeader))):s.encoder.encode("");let y=(0,s.concat)(r,s.encoder.encode("."),h),g=await (0,n.default)(f,e,y),m={signature:(0,i.encode)(g),payload:""};return p&&(m.payload=s.decoder.decode(h)),this._unprotectedHeader&&(m.header=this._unprotectedHeader),this._protectedHeader&&(m.protected=s.decoder.decode(r)),m}}},89918,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CompactSign=void 0;let i=e.r(86711);r.CompactSign=class{_flattened;constructor(e){this._flattened=new i.FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){let r=await this._flattened.sign(e,t);if(void 0===r.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}},65216,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeneralSign=void 0;let i=e.r(86711),n=e.r(67324);class o{parent;protectedHeader;unprotectedHeader;options;key;constructor(e,t,r){this.parent=e,this.key=t,this.options=r}setProtectedHeader(e){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}}r.GeneralSign=class{_payload;_signatures=[];constructor(e){this._payload=e}addSignature(e,t){let r=new o(this,e,t);return this._signatures.push(r),r}async sign(){if(!this._signatures.length)throw new n.JWSInvalid("at least one signature must be added");let e={signatures:[],payload:""};for(let t=0;t<this._signatures.length;t++){let r=this._signatures[t],o=new i.FlattenedSign(this._payload);o.setProtectedHeader(r.protectedHeader),o.setUnprotectedHeader(r.unprotectedHeader);let{payload:a,...s}=await o.sign(r.key,r.options);if(0===t)e.payload=a;else if(e.payload!==a)throw new n.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(s)}return e}}},4010,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ProduceJWT=void 0;let i=e.r(50044),n=e.r(90317),o=e.r(14270);function a(e,t){if(!Number.isFinite(t))throw TypeError(`Invalid ${e} input`);return t}r.ProduceJWT=class{_payload;constructor(e={}){if(!(0,n.default)(e))throw TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return"number"==typeof e?this._payload={...this._payload,nbf:a("setNotBefore",e)}:e instanceof Date?this._payload={...this._payload,nbf:a("setNotBefore",(0,i.default)(e))}:this._payload={...this._payload,nbf:(0,i.default)(new Date)+(0,o.default)(e)},this}setExpirationTime(e){return"number"==typeof e?this._payload={...this._payload,exp:a("setExpirationTime",e)}:e instanceof Date?this._payload={...this._payload,exp:a("setExpirationTime",(0,i.default)(e))}:this._payload={...this._payload,exp:(0,i.default)(new Date)+(0,o.default)(e)},this}setIssuedAt(e){return void 0===e?this._payload={...this._payload,iat:(0,i.default)(new Date)}:e instanceof Date?this._payload={...this._payload,iat:a("setIssuedAt",(0,i.default)(e))}:"string"==typeof e?this._payload={...this._payload,iat:a("setIssuedAt",(0,i.default)(new Date)+(0,o.default)(e))}:this._payload={...this._payload,iat:a("setIssuedAt",e)},this}}},24222,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignJWT=void 0;let i=e.r(89918),n=e.r(67324),o=e.r(88208),a=e.r(4010);class s extends a.ProduceJWT{_protectedHeader;setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){let r=new i.CompactSign(o.encoder.encode(JSON.stringify(this._payload)));if(r.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new n.JWTInvalid("JWTs MUST NOT use unencoded payload");return r.sign(e,t)}}r.SignJWT=s},93659,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EncryptJWT=void 0;let i=e.r(9518),n=e.r(88208),o=e.r(4010);class a extends o.ProduceJWT{_cek;_iv;_keyManagementParameters;_protectedHeader;_replicateIssuerAsHeader;_replicateSubjectAsHeader;_replicateAudienceAsHeader;setProtectedHeader(e){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,t){let r=new i.CompactEncrypt(n.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),r.setProtectedHeader(this._protectedHeader),this._iv&&r.setInitializationVector(this._iv),this._cek&&r.setContentEncryptionKey(this._cek),this._keyManagementParameters&&r.setKeyManagementParameters(this._keyManagementParameters),r.encrypt(e,t)}}r.EncryptJWT=a},4464,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateJwkThumbprintUri=r.calculateJwkThumbprint=void 0;let i=e.r(40978),n=e.r(29218),o=e.r(67324),a=e.r(88208),s=e.r(90317),c=(e,t)=>{if("string"!=typeof e||!e)throw new o.JWKInvalid(`${t} missing or invalid`)};async function l(e,t){let r;if(!(0,s.default)(e))throw TypeError("JWK must be an object");if("sha256"!==(t??="sha256")&&"sha384"!==t&&"sha512"!==t)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(e.kty){case"EC":c(e.crv,'"crv" (Curve) Parameter'),c(e.x,'"x" (X Coordinate) Parameter'),c(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":c(e.crv,'"crv" (Subtype of Key Pair) Parameter'),c(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":c(e.e,'"e" (Exponent) Parameter'),c(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":c(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new o.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let l=a.encoder.encode(JSON.stringify(r));return(0,n.encode)(await (0,i.default)(t,l))}r.calculateJwkThumbprint=l,r.calculateJwkThumbprintUri=async function(e,t){t??="sha256";let r=await l(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}},83896,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EmbeddedJWK=void 0;let i=e.r(99669),n=e.r(90317),o=e.r(67324);r.EmbeddedJWK=async function(e,t){let r={...e,...t?.header};if(!(0,n.default)(r.jwk))throw new o.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let a=await (0,i.importJWK)({...r.jwk,ext:!0},r.alg);if(a instanceof Uint8Array||"public"!==a.type)throw new o.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return a}},99758,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.createLocalJWKSet=r.LocalJWKSet=void 0;let i=e.r(99669),n=e.r(67324),o=e.r(90317);function a(e){return(0,o.default)(e)}function s(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}class c{_jwks;_cached=new WeakMap;constructor(e){if(!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(a)}(e))throw new n.JWKSInvalid("JSON Web Key Set malformed");this._jwks=s(e)}async getKey(e,t){let{alg:r,kid:i}={...e,...t?.header},o=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new n.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(r),a=this._jwks.keys.filter(e=>{let t=o===e.kty;if(t&&"string"==typeof i&&(t=i===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t&&"EdDSA"===r&&(t="Ed25519"===e.crv||"Ed448"===e.crv),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv}return t}),{0:s,length:c}=a;if(0===c)throw new n.JWKSNoMatchingKey;if(1!==c){let e=new n.JWKSMultipleMatchingKeys,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of a)try{yield await l(t,e,r)}catch{}},e}return l(this._cached,s,r)}}async function l(e,t,r){let o=e.get(t)||e.set(t,{}).get(t);if(void 0===o[r]){let e=await (0,i.importJWK)({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new n.JWKSInvalid("JSON Web Key Set members must be public keys");o[r]=e}return o[r]}r.LocalJWKSet=c,r.createLocalJWKSet=function(e){let t=new c(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>s(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}},20750,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(47299),n=e.r(43698),o=e.r(87769),a=e.r(67324),s=e.r(88208);r.default=async(e,t,r)=>{let c;switch(e.protocol){case"https:":c=n.get;break;case"http:":c=i.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:l,headers:u}=r,d=c(e.href,{agent:l,timeout:t,headers:u}),[p]=await Promise.race([(0,o.once)(d,"response"),(0,o.once)(d,"timeout")]);if(!p)throw d.destroy(),new a.JWKSTimeout;if(200!==p.statusCode)throw new a.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let f=[];for await(let e of p)f.push(e);try{return JSON.parse(s.decoder.decode((0,s.concat)(...f)))}catch{throw new a.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}}},86235,(e,t,r)=>{"use strict";let i;Object.defineProperty(r,"__esModule",{value:!0}),r.createRemoteJWKSet=r.experimental_jwksCache=void 0;let n=e.r(20750),o=e.r(67324),a=e.r(99758),s=e.r(90317);("u"<typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(i="jose/v5.6.3"),r.experimental_jwksCache=Symbol();class c{_url;_timeoutDuration;_cooldownDuration;_cacheMaxAge;_jwksTimestamp;_pendingFetch;_options;_local;_cache;constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t?.agent,headers:t?.headers},this._timeoutDuration="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,t?.[r.experimental_jwksCache]!==void 0&&(this._cache=t?.[r.experimental_jwksCache],function(e,t){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&!!(0,s.default)(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,s.default)}(t?.[r.experimental_jwksCache],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=(0,a.createLocalJWKSet)(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(r){if(r instanceof o.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw r}}async reload(){this._pendingFetch&&("u">typeof WebSocketPair||"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"u">typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let e=new Headers(this._options.headers);i&&!e.has("User-Agent")&&(e.set("User-Agent",i),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||=(0,n.default)(this._url,this._timeoutDuration,this._options).then(e=>{this._local=(0,a.createLocalJWKSet)(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e}),await this._pendingFetch}}r.createRemoteJWKSet=function(e,t){let r=new c(e,t),i=async(e,t)=>r.getKey(e,t);return Object.defineProperties(i,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>r._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),i}},99078,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UnsecuredJWT=void 0;let i=e.r(29218),n=e.r(88208),o=e.r(67324),a=e.r(23434),s=e.r(4010);class c extends s.ProduceJWT{encode(){let e=i.encode(JSON.stringify({alg:"none"})),t=i.encode(JSON.stringify(this._payload));return`${e}.${t}.`}static decode(e,t){let r;if("string"!=typeof e)throw new o.JWTInvalid("Unsecured JWT must be a string");let{0:s,1:c,2:l,length:u}=e.split(".");if(3!==u||""!==l)throw new o.JWTInvalid("Invalid Unsecured JWT");try{if(r=JSON.parse(n.decoder.decode(i.decode(s))),"none"!==r.alg)throw Error()}catch{throw new o.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,a.default)(r,i.decode(c),t),header:r}}}r.UnsecuredJWT=c},3069,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decode=r.encode=void 0;let i=e.r(29218);r.encode=i.encode,r.decode=i.decode},52225,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decodeProtectedHeader=void 0;let i=e.r(3069),n=e.r(88208),o=e.r(90317);r.decodeProtectedHeader=function(e){let t;if("string"==typeof e){let r=e.split(".");(3===r.length||5===r.length)&&([t]=r)}else if("object"==typeof e&&e)if("protected"in e)t=e.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof t||!t)throw Error();let e=JSON.parse(n.decoder.decode((0,i.decode)(t)));if(!(0,o.default)(e))throw Error();return e}catch{throw TypeError("Invalid Token or Protected Header formatting")}}},35280,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.decodeJwt=void 0;let i=e.r(3069),n=e.r(88208),o=e.r(90317),a=e.r(67324);r.decodeJwt=function(e){let t,r;if("string"!=typeof e)throw new a.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:s,length:c}=e.split(".");if(5===c)throw new a.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==c)throw new a.JWTInvalid("Invalid JWT");if(!s)throw new a.JWTInvalid("JWTs must contain a payload");try{t=(0,i.decode)(s)}catch{throw new a.JWTInvalid("Failed to base64url decode the payload")}try{r=JSON.parse(n.decoder.decode(t))}catch{throw new a.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,o.default)(r))throw new a.JWTInvalid("Invalid JWT Claims Set");return r}},18780,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateKeyPair=r.generateSecret=void 0;let i=e.r(66680),n=e.r(12057),o=e.r(19647),a=e.r(67324),s=(0,n.promisify)(i.generateKeyPair);r.generateSecret=async function(e,t){let r;switch(e){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(e.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10);break;default:throw new a.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,i.createSecretKey)((0,o.default)(new Uint8Array(r>>3)))},r.generateKeyPair=async function(e,t){switch(e){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let e=t?.modulusLength??2048;if("number"!=typeof e||e<2048)throw new a.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return await s("rsa",{modulusLength:e,publicExponent:65537})}case"ES256":return s("ec",{namedCurve:"P-256"});case"ES256K":return s("ec",{namedCurve:"secp256k1"});case"ES384":return s("ec",{namedCurve:"P-384"});case"ES512":return s("ec",{namedCurve:"P-521"});case"EdDSA":switch(t?.crv){case void 0:case"Ed25519":return s("ed25519");case"Ed448":return s("ed448");default:throw new a.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e=t?.crv??"P-256";switch(e){case void 0:case"P-256":case"P-384":case"P-521":return s("ec",{namedCurve:e});case"X25519":return s("x25519");case"X448":return s("x448");default:throw new a.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}}default:throw new a.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}},29663,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateKeyPair=void 0;let i=e.r(18780);r.generateKeyPair=async function(e,t){return(0,i.generateKeyPair)(e,t)}},94789,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.generateSecret=void 0;let i=e.r(18780);r.generateSecret=async function(e,t){return(0,i.generateSecret)(e,t)}},96467,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default="node:crypto"},36307,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=e.r(96467).default},7878,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.cryptoRuntime=r.base64url=r.generateSecret=r.generateKeyPair=r.errors=r.decodeJwt=r.decodeProtectedHeader=r.importJWK=r.importX509=r.importPKCS8=r.importSPKI=r.exportJWK=r.exportSPKI=r.exportPKCS8=r.UnsecuredJWT=r.experimental_jwksCache=r.createRemoteJWKSet=r.createLocalJWKSet=r.EmbeddedJWK=r.calculateJwkThumbprintUri=r.calculateJwkThumbprint=r.EncryptJWT=r.SignJWT=r.GeneralSign=r.FlattenedSign=r.CompactSign=r.FlattenedEncrypt=r.CompactEncrypt=r.jwtDecrypt=r.jwtVerify=r.generalVerify=r.flattenedVerify=r.compactVerify=r.GeneralEncrypt=r.generalDecrypt=r.flattenedDecrypt=r.compactDecrypt=void 0;var i=e.r(70108);Object.defineProperty(r,"compactDecrypt",{enumerable:!0,get:function(){return i.compactDecrypt}});var n=e.r(63044);Object.defineProperty(r,"flattenedDecrypt",{enumerable:!0,get:function(){return n.flattenedDecrypt}});var o=e.r(4156);Object.defineProperty(r,"generalDecrypt",{enumerable:!0,get:function(){return o.generalDecrypt}});var a=e.r(28962);Object.defineProperty(r,"GeneralEncrypt",{enumerable:!0,get:function(){return a.GeneralEncrypt}});var s=e.r(26907);Object.defineProperty(r,"compactVerify",{enumerable:!0,get:function(){return s.compactVerify}});var c=e.r(97757);Object.defineProperty(r,"flattenedVerify",{enumerable:!0,get:function(){return c.flattenedVerify}});var l=e.r(91484);Object.defineProperty(r,"generalVerify",{enumerable:!0,get:function(){return l.generalVerify}});var u=e.r(7066);Object.defineProperty(r,"jwtVerify",{enumerable:!0,get:function(){return u.jwtVerify}});var d=e.r(83330);Object.defineProperty(r,"jwtDecrypt",{enumerable:!0,get:function(){return d.jwtDecrypt}});var p=e.r(9518);Object.defineProperty(r,"CompactEncrypt",{enumerable:!0,get:function(){return p.CompactEncrypt}});var f=e.r(60831);Object.defineProperty(r,"FlattenedEncrypt",{enumerable:!0,get:function(){return f.FlattenedEncrypt}});var h=e.r(89918);Object.defineProperty(r,"CompactSign",{enumerable:!0,get:function(){return h.CompactSign}});var y=e.r(86711);Object.defineProperty(r,"FlattenedSign",{enumerable:!0,get:function(){return y.FlattenedSign}});var g=e.r(65216);Object.defineProperty(r,"GeneralSign",{enumerable:!0,get:function(){return g.GeneralSign}});var m=e.r(24222);Object.defineProperty(r,"SignJWT",{enumerable:!0,get:function(){return m.SignJWT}});var v=e.r(93659);Object.defineProperty(r,"EncryptJWT",{enumerable:!0,get:function(){return v.EncryptJWT}});var w=e.r(4464);Object.defineProperty(r,"calculateJwkThumbprint",{enumerable:!0,get:function(){return w.calculateJwkThumbprint}}),Object.defineProperty(r,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return w.calculateJwkThumbprintUri}});var b=e.r(83896);Object.defineProperty(r,"EmbeddedJWK",{enumerable:!0,get:function(){return b.EmbeddedJWK}});var _=e.r(99758);Object.defineProperty(r,"createLocalJWKSet",{enumerable:!0,get:function(){return _.createLocalJWKSet}});var S=e.r(86235);Object.defineProperty(r,"createRemoteJWKSet",{enumerable:!0,get:function(){return S.createRemoteJWKSet}}),Object.defineProperty(r,"experimental_jwksCache",{enumerable:!0,get:function(){return S.experimental_jwksCache}});var A=e.r(99078);Object.defineProperty(r,"UnsecuredJWT",{enumerable:!0,get:function(){return A.UnsecuredJWT}});var E=e.r(26770);Object.defineProperty(r,"exportPKCS8",{enumerable:!0,get:function(){return E.exportPKCS8}}),Object.defineProperty(r,"exportSPKI",{enumerable:!0,get:function(){return E.exportSPKI}}),Object.defineProperty(r,"exportJWK",{enumerable:!0,get:function(){return E.exportJWK}});var O=e.r(99669);Object.defineProperty(r,"importSPKI",{enumerable:!0,get:function(){return O.importSPKI}}),Object.defineProperty(r,"importPKCS8",{enumerable:!0,get:function(){return O.importPKCS8}}),Object.defineProperty(r,"importX509",{enumerable:!0,get:function(){return O.importX509}}),Object.defineProperty(r,"importJWK",{enumerable:!0,get:function(){return O.importJWK}});var k=e.r(52225);Object.defineProperty(r,"decodeProtectedHeader",{enumerable:!0,get:function(){return k.decodeProtectedHeader}});var P=e.r(35280);Object.defineProperty(r,"decodeJwt",{enumerable:!0,get:function(){return P.decodeJwt}}),r.errors=e.r(67324);var j=e.r(29663);Object.defineProperty(r,"generateKeyPair",{enumerable:!0,get:function(){return j.generateKeyPair}});var C=e.r(94789);Object.defineProperty(r,"generateSecret",{enumerable:!0,get:function(){return C.generateSecret}}),r.base64url=e.r(3069);var I=e.r(36307);Object.defineProperty(r,"cryptoRuntime",{enumerable:!0,get:function(){return I.default}})},12898,(e,t,r)=>{"use strict";var i,n;Object.defineProperty(r,"__esModule",{value:!0}),r.AuthenticateWithSessionCookieFailureReason=void 0,(n=i||(r.AuthenticateWithSessionCookieFailureReason=i={})).INVALID_JWT="invalid_jwt",n.INVALID_SESSION_COOKIE="invalid_session_cookie",n.NO_SESSION_COOKIE_PROVIDED="no_session_cookie_provided"},33567,(e,t,r)=>{"use strict";var i,n;Object.defineProperty(r,"__esModule",{value:!0}),r.RefreshAndSealSessionDataFailureReason=void 0,(n=i||(r.RefreshAndSealSessionDataFailureReason=i={})).INVALID_SESSION_COOKE="invalid_session_cookie",n.INVALID_SESSION_COOKIE="invalid_session_cookie",n.NO_SESSION_COOKIE_PROVIDED="no_session_cookie_provided",n.INVALID_GRANT="invalid_grant",n.MFA_ENROLLMENT="mfa_enrollment",n.SSO_REQUIRED="sso_required",n.ORGANIZATION_NOT_AUTHORIZED="organization_not_authorized"},20055,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeRevokeSessionOptions=void 0,r.serializeRevokeSessionOptions=e=>({session_id:e.sessionId})},31050,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeAuthenticateWithEmailVerificationOptions=void 0,r.serializeAuthenticateWithEmailVerificationOptions=e=>({grant_type:"urn:workos:oauth:grant-type:email-verification:code",client_id:e.clientId,client_secret:e.clientSecret,pending_authentication_token:e.pendingAuthenticationToken,code:e.code,ip_address:e.ipAddress,user_agent:e.userAgent})},58602,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeAuthenticateWithOrganizationSelectionOptions=void 0,r.serializeAuthenticateWithOrganizationSelectionOptions=e=>({grant_type:"urn:workos:oauth:grant-type:organization-selection",client_id:e.clientId,client_secret:e.clientSecret,pending_authentication_token:e.pendingAuthenticationToken,organization_id:e.organizationId,ip_address:e.ipAddress,user_agent:e.userAgent})},38819,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreateOrganizationMembershipOptions=void 0,r.serializeCreateOrganizationMembershipOptions=e=>({organization_id:e.organizationId,user_id:e.userId,role_slug:e.roleSlug,role_slugs:e.roleSlugs})},33806,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeIdentities=void 0,r.deserializeIdentities=e=>e.map(e=>({idpId:e.idp_id,type:e.type,provider:e.provider}))},26716,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeListInvitationsOptions=void 0,r.serializeListInvitationsOptions=e=>({email:e.email,organization_id:e.organizationId,limit:e.limit,before:e.before,after:e.after,order:e.order})},75598,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeListOrganizationMembershipsOptions=void 0,r.serializeListOrganizationMembershipsOptions=e=>{var t;return{user_id:e.userId,organization_id:e.organizationId,statuses:null==(t=e.statuses)?void 0:t.join(","),limit:e.limit,before:e.before,after:e.after,order:e.order}}},85573,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeListUsersOptions=void 0,r.serializeListUsersOptions=e=>({email:e.email,organization_id:e.organizationId,limit:e.limit,before:e.before,after:e.after,order:e.order})},1273,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeSendInvitationOptions=void 0,r.serializeSendInvitationOptions=e=>({email:e.email,organization_id:e.organizationId,expires_in_days:e.expiresInDays,inviter_user_id:e.inviterUserId,role_slug:e.roleSlug})},35546,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeUpdateOrganizationMembershipOptions=void 0,r.serializeUpdateOrganizationMembershipOptions=e=>({role_slug:e.roleSlug,role_slugs:e.roleSlugs})},89417,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},38079,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},84995,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},18668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},23189,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},48478,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},79977,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},99973,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},2137,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},8801,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},92825,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},32011,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},33862,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},13432,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},9349,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},60096,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},1546,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},15376,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},5635,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},51175,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},80994,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},71861,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},50031,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},79595,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},16135,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},30904,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},98662,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},766,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},89801,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},57021,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},90894,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},75219,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},5543,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},80817,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},91997,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},17675,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},21749,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},18995,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},45256,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},96569,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},92132,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},29262,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},76984,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},48373,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(89417),r),n(e.r(38079),r),n(e.r(84995),r),n(e.r(18668),r),n(e.r(23189),r),n(e.r(48478),r),n(e.r(79977),r),n(e.r(99973),r),n(e.r(12898),r),n(e.r(2137),r),n(e.r(8801),r),n(e.r(92825),r),n(e.r(32011),r),n(e.r(33862),r),n(e.r(13432),r),n(e.r(9349),r),n(e.r(60096),r),n(e.r(1546),r),n(e.r(15376),r),n(e.r(5635),r),n(e.r(51175),r),n(e.r(80994),r),n(e.r(71861),r),n(e.r(50031),r),n(e.r(79595),r),n(e.r(16135),r),n(e.r(30904),r),n(e.r(98662),r),n(e.r(766),r),n(e.r(89801),r),n(e.r(57021),r),n(e.r(90894),r),n(e.r(75219),r),n(e.r(5543),r),n(e.r(33567),r),n(e.r(80817),r),n(e.r(20055),r),n(e.r(91997),r),n(e.r(17675),r),n(e.r(21749),r),n(e.r(18995),r),n(e.r(45256),r),n(e.r(96569),r),n(e.r(92132),r),n(e.r(29262),r),n(e.r(84508),r),n(e.r(76984),r)},2086,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.CookieSession=void 0;let n=e.r(7878),o=e.r(35008),a=e.r(48373);r.CookieSession=class{constructor(e,t,r){if(!r)throw Error("cookiePassword is required");this.userManagement=e,this.ironSessionProvider=e.ironSessionProvider,this.cookiePassword=r,this.sessionData=t,this.jwks=this.userManagement.jwks}authenticate(){return i(this,void 0,void 0,function*(){let e;if(!this.sessionData)return{authenticated:!1,reason:a.AuthenticateWithSessionCookieFailureReason.NO_SESSION_COOKIE_PROVIDED};try{e=yield this.ironSessionProvider.unsealData(this.sessionData,{password:this.cookiePassword})}catch(e){return{authenticated:!1,reason:a.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE}}if(!e.accessToken)return{authenticated:!1,reason:a.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE};if(!(yield this.isValidJwt(e.accessToken)))return{authenticated:!1,reason:a.AuthenticateWithSessionCookieFailureReason.INVALID_JWT};let{sid:t,org_id:r,role:i,roles:o,permissions:s,entitlements:c,feature_flags:l}=(0,n.decodeJwt)(e.accessToken);return{authenticated:!0,sessionId:t,organizationId:r,role:i,roles:o,permissions:s,entitlements:c,featureFlags:l,user:e.user,authenticationMethod:e.authenticationMethod,impersonator:e.impersonator,accessToken:e.accessToken}})}refresh(e={}){var t,r;return i(this,void 0,void 0,function*(){let i=yield this.ironSessionProvider.unsealData(this.sessionData,{password:this.cookiePassword});if(!i.refreshToken||!i.user)return{authenticated:!1,reason:a.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};let{org_id:s}=(0,n.decodeJwt)(i.accessToken);try{let o=null!=(t=e.cookiePassword)?t:this.cookiePassword,a=yield this.userManagement.authenticateWithRefreshToken({clientId:this.userManagement.clientId,refreshToken:i.refreshToken,organizationId:null!=(r=e.organizationId)?r:s,session:{sealSession:!0,cookiePassword:o}});e.cookiePassword&&(this.cookiePassword=e.cookiePassword),this.sessionData=a.sealedSession;let{sid:c,org_id:l,role:u,roles:d,permissions:p,entitlements:f,feature_flags:h}=(0,n.decodeJwt)(a.accessToken);return{authenticated:!0,sealedSession:a.sealedSession,session:a,authenticationMethod:a.authenticationMethod,sessionId:c,organizationId:l,role:u,roles:d,permissions:p,entitlements:f,featureFlags:h,user:i.user,impersonator:i.impersonator}}catch(e){if(e instanceof o.OauthException&&(e.error===a.RefreshAndSealSessionDataFailureReason.INVALID_GRANT||e.error===a.RefreshAndSealSessionDataFailureReason.MFA_ENROLLMENT||e.error===a.RefreshAndSealSessionDataFailureReason.SSO_REQUIRED))return{authenticated:!1,reason:e.error};throw e}})}getLogoutUrl({returnTo:e}={}){return i(this,void 0,void 0,function*(){let t=yield this.authenticate();if(!t.authenticated){let{reason:e}=t;throw Error(`Failed to extract session ID for logout URL: ${e}`)}return this.userManagement.getLogoutUrl({sessionId:t.sessionId,returnTo:e})})}isValidJwt(e){return i(this,void 0,void 0,function*(){if(!this.jwks)throw Error("Missing client ID. Did you provide it when initializing WorkOS?");try{return yield(0,n.jwtVerify)(e,this.jwks),!0}catch(e){return!1}})}}},29440,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})},n=e.e&&e.e.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r},o=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.UserManagement=void 0;let a=e.r(7878),s=o(e.r(126)),c=e.r(35008),l=e.r(54732),u=e.r(26647),d=e.r(96143),p=e.r(72319),f=e.r(12898),h=e.r(33567),y=e.r(20055),g=e.r(40178),m=e.r(31050),v=e.r(58602),w=e.r(38819),b=e.r(77918),_=e.r(33806),S=e.r(29388),A=e.r(26716),E=e.r(75598),O=e.r(85573),k=e.r(61254),P=e.r(1273),j=e.r(35546),C=e.r(2086);r.UserManagement=class{constructor(e,t){this.workos=e;const{clientId:r}=e.options;this.clientId=r,this.ironSessionProvider=t}get jwks(){if(this.clientId)return null!=this._jwks||(this._jwks=(0,a.createRemoteJWKSet)(new URL(this.getJwksUrl(this.clientId)),{cooldownDuration:3e5})),this._jwks}loadSealedSession(e){return new C.CookieSession(this,e.sessionData,e.cookiePassword)}getUser(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/users/${e}`);return(0,g.deserializeUser)(t)})}getUserByExternalId(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/users/external_id/${e}`);return(0,g.deserializeUser)(t)})}listUsers(e){return i(this,void 0,void 0,function*(){return new u.AutoPaginatable((yield(0,l.fetchAndDeserialize)(this.workos,"/user_management/users",g.deserializeUser,e?(0,O.serializeListUsersOptions)(e):void 0)),e=>(0,l.fetchAndDeserialize)(this.workos,"/user_management/users",g.deserializeUser,e),e?(0,O.serializeListUsersOptions)(e):void 0)})}createUser(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/users",(0,g.serializeCreateUserOptions)(e));return(0,g.deserializeUser)(t)})}authenticateWithMagicAuth(e){return i(this,void 0,void 0,function*(){let{session:t}=e,r=n(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,g.serializeAuthenticateWithMagicAuthOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,g.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithPassword(e){return i(this,void 0,void 0,function*(){let{session:t}=e,r=n(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,g.serializeAuthenticateWithPasswordOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,g.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithCode(e){return i(this,void 0,void 0,function*(){let{session:t}=e,r=n(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,g.serializeAuthenticateWithCodeOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,g.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithCodeAndVerifier(e){return i(this,void 0,void 0,function*(){let{session:t}=e,r=n(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,g.serializeAuthenticateWithCodeAndVerifierOptions)(r));return this.prepareAuthenticationResponse({authenticationResponse:(0,g.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithRefreshToken(e){return i(this,void 0,void 0,function*(){let{session:t}=e,r=n(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,g.serializeAuthenticateWithRefreshTokenOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,g.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithTotp(e){return i(this,void 0,void 0,function*(){let{session:t}=e,r=n(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,g.serializeAuthenticateWithTotpOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,g.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithEmailVerification(e){return i(this,void 0,void 0,function*(){let{session:t}=e,r=n(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,m.serializeAuthenticateWithEmailVerificationOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,g.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithOrganizationSelection(e){return i(this,void 0,void 0,function*(){let{session:t}=e,r=n(e,["session"]),{data:i}=yield this.workos.post("/user_management/authenticate",(0,v.serializeAuthenticateWithOrganizationSelectionOptions)(Object.assign(Object.assign({},r),{clientSecret:this.workos.key})));return this.prepareAuthenticationResponse({authenticationResponse:(0,g.deserializeAuthenticationResponse)(i),session:t})})}authenticateWithSessionCookie({sessionData:e,cookiePassword:t=process.env.WORKOS_COOKIE_PASSWORD}){return i(this,void 0,void 0,function*(){if(!t)throw Error("Cookie password is required");if(!this.jwks)throw Error("Must provide clientId to initialize JWKS");if(!e)return{authenticated:!1,reason:f.AuthenticateWithSessionCookieFailureReason.NO_SESSION_COOKIE_PROVIDED};let r=yield this.ironSessionProvider.unsealData(e,{password:t});if(!r.accessToken)return{authenticated:!1,reason:f.AuthenticateWithSessionCookieFailureReason.INVALID_SESSION_COOKIE};if(!(yield this.isValidJwt(r.accessToken)))return{authenticated:!1,reason:f.AuthenticateWithSessionCookieFailureReason.INVALID_JWT};let{sid:i,org_id:n,role:o,roles:s,permissions:c,entitlements:l,feature_flags:u}=(0,a.decodeJwt)(r.accessToken);return{authenticated:!0,sessionId:i,organizationId:n,role:o,roles:s,user:r.user,permissions:c,entitlements:l,featureFlags:u,accessToken:r.accessToken,authenticationMethod:r.authenticationMethod}})}isValidJwt(e){return i(this,void 0,void 0,function*(){if(!this.jwks)throw Error("Must provide clientId to initialize JWKS");try{return yield(0,a.jwtVerify)(e,this.jwks),!0}catch(e){return!1}})}refreshAndSealSessionData({sessionData:e,organizationId:t,cookiePassword:r=process.env.WORKOS_COOKIE_PASSWORD}){return i(this,void 0,void 0,function*(){if(!r)throw Error("Cookie password is required");if(!e)return{authenticated:!1,reason:h.RefreshAndSealSessionDataFailureReason.NO_SESSION_COOKIE_PROVIDED};let i=yield this.ironSessionProvider.unsealData(e,{password:r});if(!i.refreshToken||!i.user)return{authenticated:!1,reason:h.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};let{org_id:n}=(0,a.decodeJwt)(i.accessToken);try{let{sealedSession:e}=yield this.authenticateWithRefreshToken({clientId:this.workos.clientId,refreshToken:i.refreshToken,organizationId:null!=t?t:n,session:{sealSession:!0,cookiePassword:r}});if(!e)return{authenticated:!1,reason:h.RefreshAndSealSessionDataFailureReason.INVALID_SESSION_COOKIE};return{authenticated:!0,sealedSession:e}}catch(e){if(e instanceof c.OauthException&&(e.error===h.RefreshAndSealSessionDataFailureReason.INVALID_GRANT||e.error===h.RefreshAndSealSessionDataFailureReason.MFA_ENROLLMENT||e.error===h.RefreshAndSealSessionDataFailureReason.SSO_REQUIRED))return{authenticated:!1,reason:e.error};throw e}})}prepareAuthenticationResponse({authenticationResponse:e,session:t}){return i(this,void 0,void 0,function*(){return(null==t?void 0:t.sealSession)?Object.assign(Object.assign({},e),{sealedSession:yield this.sealSessionDataFromAuthenticationResponse({authenticationResponse:e,cookiePassword:t.cookiePassword})}):e})}sealSessionDataFromAuthenticationResponse({authenticationResponse:e,cookiePassword:t}){return i(this,void 0,void 0,function*(){if(!t)throw Error("Cookie password is required");let{org_id:r}=(0,a.decodeJwt)(e.accessToken),i={organizationId:r,user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken,authenticationMethod:e.authenticationMethod,impersonator:e.impersonator};return this.ironSessionProvider.sealData(i,{password:t})})}getSessionFromCookie({sessionData:e,cookiePassword:t=process.env.WORKOS_COOKIE_PASSWORD}){return i(this,void 0,void 0,function*(){if(!t)throw Error("Cookie password is required");if(e)return this.ironSessionProvider.unsealData(e,{password:t})})}getEmailVerification(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/email_verification/${e}`);return(0,g.deserializeEmailVerification)(t)})}sendVerificationEmail({userId:e}){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/user_management/users/${e}/email_verification/send`,{});return{user:(0,g.deserializeUser)(t.user)}})}getMagicAuth(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/magic_auth/${e}`);return(0,g.deserializeMagicAuth)(t)})}createMagicAuth(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/magic_auth",(0,g.serializeCreateMagicAuthOptions)(Object.assign({},e)));return(0,g.deserializeMagicAuth)(t)})}sendMagicAuthCode(e){return i(this,void 0,void 0,function*(){yield this.workos.post("/user_management/magic_auth/send",(0,g.serializeSendMagicAuthCodeOptions)(e))})}verifyEmail({code:e,userId:t}){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post(`/user_management/users/${t}/email_verification/confirm`,{code:e});return{user:(0,g.deserializeUser)(r.user)}})}getPasswordReset(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/password_reset/${e}`);return(0,g.deserializePasswordReset)(t)})}createPasswordReset(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/password_reset",(0,g.serializeCreatePasswordResetOptions)(Object.assign({},e)));return(0,g.deserializePasswordReset)(t)})}sendPasswordResetEmail(e){return i(this,void 0,void 0,function*(){yield this.workos.post("/user_management/password_reset/send",(0,g.serializeSendPasswordResetEmailOptions)(e))})}resetPassword(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/password_reset/confirm",(0,g.serializeResetPasswordOptions)(e));return{user:(0,g.deserializeUser)(t.user)}})}updateUser(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.put(`/user_management/users/${e.userId}`,(0,g.serializeUpdateUserOptions)(e));return(0,g.deserializeUser)(t)})}enrollAuthFactor(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/user_management/users/${e.userId}/auth_factors`,(0,g.serializeEnrollAuthFactorOptions)(e));return{authenticationFactor:(0,g.deserializeFactorWithSecrets)(t.authentication_factor),authenticationChallenge:(0,d.deserializeChallenge)(t.authentication_challenge)}})}listAuthFactors(e){return i(this,void 0,void 0,function*(){let{userId:t}=e,r=n(e,["userId"]);return new u.AutoPaginatable((yield(0,l.fetchAndDeserialize)(this.workos,`/user_management/users/${t}/auth_factors`,b.deserializeFactor,r)),e=>(0,l.fetchAndDeserialize)(this.workos,`/user_management/users/${t}/auth_factors`,b.deserializeFactor,e),r)})}listUserFeatureFlags(e){return i(this,void 0,void 0,function*(){let{userId:t}=e,r=n(e,["userId"]);return new u.AutoPaginatable((yield(0,l.fetchAndDeserialize)(this.workos,`/user_management/users/${t}/feature-flags`,p.deserializeFeatureFlag,r)),e=>(0,l.fetchAndDeserialize)(this.workos,`/user_management/users/${t}/feature-flags`,p.deserializeFeatureFlag,e),r)})}listSessions(e,t){return i(this,void 0,void 0,function*(){return new u.AutoPaginatable((yield(0,l.fetchAndDeserialize)(this.workos,`/user_management/users/${e}/sessions`,g.deserializeSession,t?(0,g.serializeListSessionsOptions)(t):void 0)),t=>(0,l.fetchAndDeserialize)(this.workos,`/user_management/users/${e}/sessions`,g.deserializeSession,t),t?(0,g.serializeListSessionsOptions)(t):void 0)})}deleteUser(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/user_management/users/${e}`)})}getUserIdentities(e){return i(this,void 0,void 0,function*(){if(!e)throw TypeError("Incomplete arguments. Need to specify 'userId'.");let{data:t}=yield this.workos.get(`/user_management/users/${e}/identities`);return(0,_.deserializeIdentities)(t)})}getOrganizationMembership(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/organization_memberships/${e}`);return(0,k.deserializeOrganizationMembership)(t)})}listOrganizationMemberships(e){return i(this,void 0,void 0,function*(){return new u.AutoPaginatable((yield(0,l.fetchAndDeserialize)(this.workos,"/user_management/organization_memberships",k.deserializeOrganizationMembership,e?(0,E.serializeListOrganizationMembershipsOptions)(e):void 0)),e=>(0,l.fetchAndDeserialize)(this.workos,"/user_management/organization_memberships",k.deserializeOrganizationMembership,e),e?(0,E.serializeListOrganizationMembershipsOptions)(e):void 0)})}createOrganizationMembership(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/organization_memberships",(0,w.serializeCreateOrganizationMembershipOptions)(e));return(0,k.deserializeOrganizationMembership)(t)})}updateOrganizationMembership(e,t){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.put(`/user_management/organization_memberships/${e}`,(0,j.serializeUpdateOrganizationMembershipOptions)(t));return(0,k.deserializeOrganizationMembership)(r)})}deleteOrganizationMembership(e){return i(this,void 0,void 0,function*(){yield this.workos.delete(`/user_management/organization_memberships/${e}`)})}deactivateOrganizationMembership(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.put(`/user_management/organization_memberships/${e}/deactivate`,{});return(0,k.deserializeOrganizationMembership)(t)})}reactivateOrganizationMembership(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.put(`/user_management/organization_memberships/${e}/reactivate`,{});return(0,k.deserializeOrganizationMembership)(t)})}getInvitation(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/invitations/${e}`);return(0,S.deserializeInvitation)(t)})}findInvitationByToken(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/user_management/invitations/by_token/${e}`);return(0,S.deserializeInvitation)(t)})}listInvitations(e){return i(this,void 0,void 0,function*(){return new u.AutoPaginatable((yield(0,l.fetchAndDeserialize)(this.workos,"/user_management/invitations",S.deserializeInvitation,e?(0,A.serializeListInvitationsOptions)(e):void 0)),e=>(0,l.fetchAndDeserialize)(this.workos,"/user_management/invitations",S.deserializeInvitation,e),e?(0,A.serializeListInvitationsOptions)(e):void 0)})}sendInvitation(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/user_management/invitations",(0,P.serializeSendInvitationOptions)(Object.assign({},e)));return(0,S.deserializeInvitation)(t)})}acceptInvitation(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/user_management/invitations/${e}/accept`,null);return(0,S.deserializeInvitation)(t)})}revokeInvitation(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/user_management/invitations/${e}/revoke`,null);return(0,S.deserializeInvitation)(t)})}resendInvitation(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post(`/user_management/invitations/${e}/resend`,null);return(0,S.deserializeInvitation)(t)})}revokeSession(e){return i(this,void 0,void 0,function*(){yield this.workos.post("/user_management/sessions/revoke",(0,y.serializeRevokeSessionOptions)(e))})}getAuthorizationUrl({connectionId:e,codeChallenge:t,codeChallengeMethod:r,context:i,clientId:n,domainHint:o,loginHint:a,organizationId:c,provider:l,providerQueryParams:u,providerScopes:d,prompt:p,redirectUri:f,state:h,screenHint:y}){let g;if(!l&&!e&&!c)throw TypeError("Incomplete arguments. Need to specify either a 'connectionId', 'organizationId', or 'provider'.");if("authkit"!==l&&y)throw TypeError("'screenHint' is only supported for 'authkit' provider");i&&this.workos.emitWarning(`\`context\` is deprecated. We previously required initiate login endpoints to return the
\`context\` query parameter when getting the authorization URL. This is no longer necessary.`);let m=(g={connection_id:e,code_challenge:t,code_challenge_method:r,context:i,organization_id:c,domain_hint:o,login_hint:a,provider:l,provider_query_params:u,provider_scopes:d,prompt:p,client_id:n,redirect_uri:f,response_type:"code",state:h,screen_hint:y},s.default.stringify(g,{arrayFormat:"repeat",sort:(e,t)=>e.localeCompare(t),format:"RFC1738"}));return`${this.workos.baseURL}/user_management/authorize?${m}`}getLogoutUrl({sessionId:e,returnTo:t}){if(!e)throw TypeError("Incomplete arguments. Need to specify 'sessionId'.");let r=new URL("/user_management/sessions/logout",this.workos.baseURL);return r.searchParams.set("session_id",e),t&&r.searchParams.set("return_to",t),r.toString()}getLogoutUrlFromSessionCookie({sessionData:e,cookiePassword:t=process.env.WORKOS_COOKIE_PASSWORD}){return i(this,void 0,void 0,function*(){let r=yield this.authenticateWithSessionCookie({sessionData:e,cookiePassword:t});if(!r.authenticated){let{reason:e}=r;throw Error(`Failed to extract session ID for logout URL: ${e}`)}return this.getLogoutUrl({sessionId:r.sessionId})})}getJwksUrl(e){if(!e)throw TypeError("clientId must be a valid clientId");return`${this.workos.baseURL}/sso/jwks/${e}`}}},99747,(e,t,r)=>{"use strict";var i,n;Object.defineProperty(r,"__esModule",{value:!0}),r.CheckOp=void 0,(n=i||(r.CheckOp=i={})).AllOf="all_of",n.AnyOf="any_of"},52634,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isResourceInterface=r.isSubject=void 0,r.isSubject=function(e){return Object.prototype.hasOwnProperty.call(e,"resourceType")&&Object.prototype.hasOwnProperty.call(e,"resourceId")},r.isResourceInterface=function(e){return!!e&&"object"==typeof e&&"getResouceType"in e&&"getResourceId"in e}},99149,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeDecisionTreeNode=r.serializeCheckBatchOptions=r.serializeCheckOptions=void 0;let i=e.r(52634);r.serializeCheckOptions=e=>({op:e.op,checks:e.checks.map(n),debug:e.debug}),r.serializeCheckBatchOptions=e=>({op:"batch",checks:e.checks.map(n),debug:e.debug});let n=e=>{var t;return{resource_type:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceType():e.resource.resourceType,resource_id:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceId():e.resource.resourceId?e.resource.resourceId:"",relation:e.relation,subject:(0,i.isSubject)(e.subject)?{resource_type:e.subject.resourceType,resource_id:e.subject.resourceId}:{resource_type:e.subject.getResourceType(),resource_id:e.subject.getResourceId()},context:null!=(t=e.context)?t:{}}};r.deserializeDecisionTreeNode=e=>({check:{resource:{resourceType:e.check.resource_type,resourceId:e.check.resource_id},relation:e.check.relation,subject:{resourceType:e.check.subject.resource_type,resourceId:e.check.subject.resource_id},context:e.check.context},policy:e.policy,decision:e.decision,processingTime:e.processing_time,children:e.children.map(r.deserializeDecisionTreeNode)})},66296,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CheckResult=void 0;let i=e.r(99149);r.CheckResult=class{constructor(e){this.result=e.result,this.isImplicit=e.is_implicit,this.warrantToken=e.warrant_token,this.debugInfo=e.debug_info?{processingTime:e.debug_info.processing_time,decisionTree:(0,i.deserializeDecisionTreeNode)(e.debug_info.decision_tree)}:void 0,this.warnings=e.warnings}isAuthorized(){return"authorized"===this.result}}},8360,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},14867,(e,t,r)=>{"use strict";var i,n;Object.defineProperty(r,"__esModule",{value:!0}),r.ResourceOp=void 0,(n=i||(r.ResourceOp=i={})).Create="create",n.Delete="delete"},35253,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},9136,(e,t,r)=>{"use strict";var i,n;Object.defineProperty(r,"__esModule",{value:!0}),r.WarrantOp=void 0,(n=i||(r.WarrantOp=i={})).Create="create",n.Delete="delete"},56737,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},19765,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},98850,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(99747),r),n(e.r(66296),r),n(e.r(8360),r),n(e.r(14867),r),n(e.r(35253),r),n(e.r(9136),r),n(e.r(56737),r),n(e.r(19765),r)},18040,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeCreateResourceOptions=void 0;let i=e.r(52634);r.serializeCreateResourceOptions=e=>({resource_type:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceType():e.resource.resourceType,resource_id:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceId():e.resource.resourceId?e.resource.resourceId:"",meta:e.meta})},43544,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeDeleteResourceOptions=void 0;let i=e.r(52634);r.serializeDeleteResourceOptions=e=>({resource_type:(0,i.isResourceInterface)(e)?e.getResourceType():e.resourceType,resource_id:(0,i.isResourceInterface)(e)?e.getResourceId():e.resourceId?e.resourceId:""})},39012,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeBatchWriteResourcesOptions=void 0;let i=e.r(98850),n=e.r(18040),o=e.r(43544);r.serializeBatchWriteResourcesOptions=e=>{let t=[];return e.op===i.ResourceOp.Create?t=e.resources.map(e=>(0,n.serializeCreateResourceOptions)(e)):e.op===i.ResourceOp.Delete&&(t=e.resources.map(e=>(0,o.serializeDeleteResourceOptions)(e))),{op:e.op,resources:t}}},24806,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeListResourceOptions=void 0,r.serializeListResourceOptions=e=>({resource_type:e.resourceType,search:e.search,limit:e.limit,before:e.before,after:e.after,order:e.order})},19954,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeListWarrantsOptions=void 0,r.serializeListWarrantsOptions=e=>({resource_type:e.resourceType,resource_id:e.resourceId,relation:e.relation,subject_type:e.subjectType,subject_id:e.subjectId,subject_relation:e.subjectRelation,limit:e.limit,after:e.after})},93447,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeQueryOptions=void 0,r.serializeQueryOptions=e=>({q:e.q,context:JSON.stringify(e.context),limit:e.limit,before:e.before,after:e.after,order:e.order})},45580,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeQueryResult=void 0,r.deserializeQueryResult=e=>({resourceType:e.resource_type,resourceId:e.resource_id,relation:e.relation,warrant:{resourceType:e.warrant.resource_type,resourceId:e.warrant.resource_id,relation:e.warrant.relation,subject:{resourceType:e.warrant.subject.resource_type,resourceId:e.warrant.subject.resource_id,relation:e.warrant.subject.relation}},isImplicit:e.is_implicit,meta:e.meta})},56284,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeBatchWriteResourcesResponse=r.deserializeResource=void 0,r.deserializeResource=e=>({resourceType:e.resource_type,resourceId:e.resource_id,meta:e.meta}),r.deserializeBatchWriteResourcesResponse=e=>e.data.map(e=>(0,r.deserializeResource)(e))},65044,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeWarrantToken=void 0,r.deserializeWarrantToken=e=>({warrantToken:e.warrant_token})},33376,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeWarrant=void 0,r.deserializeWarrant=e=>({resourceType:e.resource_type,resourceId:e.resource_id,relation:e.relation,subject:{resourceType:e.subject.resource_type,resourceId:e.subject.resource_id,relation:e.subject.relation},policy:e.policy})},15818,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeWriteWarrantOptions=void 0;let i=e.r(52634);r.serializeWriteWarrantOptions=e=>({op:e.op,resource_type:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceType():e.resource.resourceType,resource_id:(0,i.isResourceInterface)(e.resource)?e.resource.getResourceId():e.resource.resourceId?e.resource.resourceId:"",relation:e.relation,subject:(0,i.isSubject)(e.subject)?{resource_type:e.subject.resourceType,resource_id:e.subject.resourceId}:{resource_type:e.subject.getResourceType(),resource_id:e.subject.getResourceId()},policy:e.policy})},67488,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeFGAList=void 0,r.deserializeFGAList=(e,t)=>({object:"list",data:e.data.map(t),listMetadata:e.list_metadata,warnings:e.warnings})},15692,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(99149),r),n(e.r(39012),r),n(e.r(18040),r),n(e.r(43544),r),n(e.r(24806),r),n(e.r(19954),r),n(e.r(93447),r),n(e.r(45580),r),n(e.r(56284),r),n(e.r(65044),r),n(e.r(33376),r),n(e.r(15818),r),n(e.r(67488),r)},67453,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FgaPaginatable=void 0;let i=e.r(26647);class n extends i.AutoPaginatable{constructor(e,t,r){super(e,t,r)}get warnings(){return this.list.warnings}}r.FgaPaginatable=n},29361,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.fetchAndDeserializeFGAList=void 0;let n=e.r(67488);r.fetchAndDeserializeFGAList=(e,t,r,o,a)=>i(void 0,void 0,void 0,function*(){let{data:i}=yield e.get(t,Object.assign({query:o},a));return(0,n.deserializeFGAList)(i,r)})},65071,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.FGA=void 0;let n=e.r(98850),o=e.r(15692),a=e.r(52634),s=e.r(26647),c=e.r(54732),l=e.r(67453),u=e.r(29361);r.FGA=class{constructor(e){this.workos=e}check(e,t={}){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post("/fga/v1/check",(0,o.serializeCheckOptions)(e),t);return new n.CheckResult(r)})}checkBatch(e,t={}){return i(this,void 0,void 0,function*(){let{data:r}=yield this.workos.post("/fga/v1/check",(0,o.serializeCheckBatchOptions)(e),t);return r.map(e=>new n.CheckResult(e))})}createResource(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/fga/v1/resources",(0,o.serializeCreateResourceOptions)(e));return(0,o.deserializeResource)(t)})}getResource(e){return i(this,void 0,void 0,function*(){let t=(0,a.isResourceInterface)(e)?e.getResourceType():e.resourceType,r=(0,a.isResourceInterface)(e)?e.getResourceId():e.resourceId,{data:i}=yield this.workos.get(`/fga/v1/resources/${t}/${r}`);return(0,o.deserializeResource)(i)})}listResources(e){return i(this,void 0,void 0,function*(){return new s.AutoPaginatable((yield(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/resources",o.deserializeResource,e?(0,o.serializeListResourceOptions)(e):void 0)),e=>(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/resources",o.deserializeResource,e),e?(0,o.serializeListResourceOptions)(e):void 0)})}updateResource(e){return i(this,void 0,void 0,function*(){let t=(0,a.isResourceInterface)(e.resource)?e.resource.getResourceType():e.resource.resourceType,r=(0,a.isResourceInterface)(e.resource)?e.resource.getResourceId():e.resource.resourceId,{data:i}=yield this.workos.put(`/fga/v1/resources/${t}/${r}`,{meta:e.meta});return(0,o.deserializeResource)(i)})}deleteResource(e){return i(this,void 0,void 0,function*(){let t=(0,a.isResourceInterface)(e)?e.getResourceType():e.resourceType,r=(0,a.isResourceInterface)(e)?e.getResourceId():e.resourceId;yield this.workos.delete(`/fga/v1/resources/${t}/${r}`)})}batchWriteResources(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/fga/v1/resources/batch",(0,o.serializeBatchWriteResourcesOptions)(e));return(0,o.deserializeBatchWriteResourcesResponse)(t)})}writeWarrant(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/fga/v1/warrants",(0,o.serializeWriteWarrantOptions)(e));return(0,o.deserializeWarrantToken)(t)})}batchWriteWarrants(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/fga/v1/warrants",e.map(o.serializeWriteWarrantOptions));return(0,o.deserializeWarrantToken)(t)})}listWarrants(e,t){return i(this,void 0,void 0,function*(){return new s.AutoPaginatable((yield(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/warrants",o.deserializeWarrant,e?(0,o.serializeListWarrantsOptions)(e):void 0,t)),e=>(0,c.fetchAndDeserialize)(this.workos,"/fga/v1/warrants",o.deserializeWarrant,e,t),e?(0,o.serializeListWarrantsOptions)(e):void 0)})}query(e,t={}){return i(this,void 0,void 0,function*(){return new l.FgaPaginatable((yield(0,u.fetchAndDeserializeFGAList)(this.workos,"/fga/v1/query",o.deserializeQueryResult,(0,o.serializeQueryOptions)(e),t)),e=>(0,u.fetchAndDeserializeFGAList)(this.workos,"/fga/v1/query",o.deserializeQueryResult,e,t),(0,o.serializeQueryOptions)(e))})}}},55376,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.FeatureFlags=void 0;let n=e.r(26647),o=e.r(72319),a=e.r(54732);r.FeatureFlags=class{constructor(e){this.workos=e}listFeatureFlags(e){return i(this,void 0,void 0,function*(){return new n.AutoPaginatable((yield(0,a.fetchAndDeserialize)(this.workos,"/feature-flags",o.deserializeFeatureFlag,e)),e=>(0,a.fetchAndDeserialize)(this.workos,"/feature-flags",o.deserializeFeatureFlag,e),e)})}getFeatureFlag(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/feature-flags/${e}`);return(0,o.deserializeFeatureFlag)(t)})}enableFeatureFlag(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.put(`/feature-flags/${e}/enable`,{});return(0,o.deserializeFeatureFlag)(t)})}disableFeatureFlag(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.put(`/feature-flags/${e}/disable`,{});return(0,o.deserializeFeatureFlag)(t)})}addFlagTarget(e){return i(this,void 0,void 0,function*(){let{slug:t,targetId:r}=e;yield this.workos.post(`/feature-flags/${t}/targets/${r}`,{})})}removeFlagTarget(e){return i(this,void 0,void 0,function*(){let{slug:t,targetId:r}=e;yield this.workos.delete(`/feature-flags/${t}/targets/${r}`)})}}},54497,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeGetTokenResponse=r.serializeGetTokenOptions=void 0,r.serializeGetTokenOptions=e=>({organization_id:e.organizationId,user_id:e.userId,scopes:e.scopes}),r.deserializeGetTokenResponse=e=>({token:e.token})},70226,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.Widgets=void 0;let n=e.r(54497);r.Widgets=class{constructor(e){this.workos=e}getToken(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/widgets/token",(0,n.serializeGetTokenOptions)(e));return(0,n.deserializeGetTokenResponse)(t).token})}}},74760,(e,t,r)=>{"use strict";t.exports={extract:function(e,t,r,i){if(r<0||r>32)throw Error("Bad value for bitLength.");if(void 0===i)i=0;else if(0!==i&&1!==i)throw Error("Bad value for defaultBit.");var n=255*i,o=0,a=t+r,s=Math.floor(t/8),c=Math.floor(a/8),l=a%8;for(0!==l&&(o=u(c)&(1<<l)-1);c>s;)o=o<<8|u(--c);return o>>>t%8;function u(t){var r=e[t];return void 0===r?n:r}},inject:function(e,t,r,i){if(r<0||r>32)throw Error("Bad value for bitLength.");var n=Math.floor((t+r-1)/8);if(t<0||n>=e.length)throw Error("Index out of range.");for(var o=Math.floor(t/8),a=t%8;r>0;)1&i?e[o]|=1<<a:e[o]&=~(1<<a),i>>=1,r--,0==(a=(a+1)%8)&&o++},getSign:function(e){return e[e.length-1]>>>7},highOrder:function(e,t){for(var r=t.length,i=(1^e)*255;r>0&&t[r-1]===i;)r--;if(0===r)return -1;for(var n=t[r-1],o=8*r-1,a=7;a>0&&(n>>a&1)!==e;a--)o--;return o}}},54054,(e,t,r)=>{"use strict";var i=[];function n(e,t){if(0===t)return!1;var r=t&-t,i=e+r;return i===e||i-r!==e}function o(e){var t=i[e];return t?i[e]=void 0:t=Buffer.alloc(e),t.fill(0),t}function a(e){var t=e.length;t<20&&(i[t]=e)}function s(e,t){if(e<0||e>0xfffffffffffff800)throw Error("Value out of range.");var r=Math.floor(e/0x100000000);t.writeUInt32LE(e%0x100000000,0),t.writeUInt32LE(r,4)}t.exports={alloc:o,free:a,readInt:function(e){var t=e.length,r=e[t-1]<128?0:-1,i=!1;if(t<7)for(var o=t-1;o>=0;o--)r=256*r+e[o];else for(var o=t-1;o>=0;o--){var a=e[o];n(r*=256,a)&&(i=!0),r+=a}return{value:r,lossy:i}},readUInt:function(e){var t=e.length,r=0,i=!1;if(t<7)for(var o=t-1;o>=0;o--)r=256*r+e[o];else for(var o=t-1;o>=0;o--){var a=e[o];n(r*=256,a)&&(i=!0),r+=a}return{value:r,lossy:i}},resize:function(e,t){if(t===e.length)return e;var r=o(t);return e.copy(r),a(e),r},writeInt64:function(e,t){if(e<-0x8000000000000000||e>0x7ffffffffffffc00)throw Error("Value out of range.");e<0&&(e+=0xffffffffffffffff),s(e,t)},writeUInt64:s}},81228,(e,t,r)=>{"use strict";var i=e.r(74760),n=e.r(54054);function o(e,t){t?(o=i.getSign(e),a=i.highOrder(1^i.getSign(e),e)+2):(o=0,a=i.highOrder(1,e)+1||1);for(var r,o,a,s=Math.ceil(a/7),c=n.alloc(s),l=0;l<s;l++){var u=i.extract(e,7*l,7,o);c[l]=128|u}return c[s-1]&=127,c}function a(e,t,r){for(var o,a,s=function(e,t){for(var r=0;e[t+r]>=128;)r++;if(t+ ++r>e.length)throw Error("Bogus encoding");return r}(e,t=void 0===t?0:t),c=Math.ceil(7*s/8),l=n.alloc(c),u=0;s>0;)i.inject(l,u,7,e[t]),u+=7,t++,s--;if(r){var d=l[c-1],p=u%8;if(0!==p){var f=32-p;d=l[c-1]=d<<f>>f&255}a=255*(o=d>>7)}else o=0,a=0;for(;c>1&&l[c-1]===a&&(!r||l[c-2]>>7===o);)c--;return{value:l=n.resize(l,c),nextIndex:t}}function s(e){return o(e,!0)}function c(e,t){return a(e,t,!0)}function l(e){return o(e,!1)}function u(e,t){return a(e,t,!1)}t.exports={decodeInt32:function(e,t){var r=c(e,t),i=n.readInt(r.value).value;if(n.free(r.value),i<-0x80000000||i>0x7fffffff)throw Error("Result out of range");return{value:i,nextIndex:r.nextIndex}},decodeInt64:function(e,t){var r=c(e,t),i=n.readInt(r.value),o=i.value;if(n.free(r.value),o<-0x8000000000000000||o>0x7ffffffffffffc00)throw Error("Result out of range");return{value:o,nextIndex:r.nextIndex,lossy:i.lossy}},decodeIntBuffer:c,decodeUInt32:function(e,t){var r=u(e,t),i=n.readUInt(r.value).value;if(n.free(r.value),i>0xffffffff)throw Error("Result out of range");return{value:i,nextIndex:r.nextIndex}},decodeUInt64:function(e,t){var r=u(e,t),i=n.readUInt(r.value),o=i.value;if(n.free(r.value),o>0xfffffffffffff800)throw Error("Result out of range");return{value:o,nextIndex:r.nextIndex,lossy:i.lossy}},decodeUIntBuffer:u,encodeInt32:function(e){var t=n.alloc(4);t.writeInt32LE(e,0);var r=s(t);return n.free(t),r},encodeInt64:function(e){var t=n.alloc(8);n.writeInt64(e,t);var r=s(t);return n.free(t),r},encodeIntBuffer:s,encodeUInt32:function(e){var t=n.alloc(4);t.writeUInt32LE(e,0);var r=l(t);return n.free(t),r},encodeUInt64:function(e){var t=n.alloc(8);n.writeUInt64(e,t);var r=l(t);return n.free(t),r},encodeUIntBuffer:l}},77553,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.uint8ArrayToBase64=r.base64ToUint8Array=void 0,r.base64ToUint8Array=function(e){if("function"==typeof atob){let t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}if("u">typeof Buffer)return new Uint8Array(Buffer.from(e,"base64"));throw Error("No base64 decoding implementation available")},r.uint8ArrayToBase64=function(e){if("function"==typeof btoa){let t="";for(let r=0;r<e.byteLength;r++)t+=String.fromCharCode(e[r]);return btoa(t)}if("u">typeof Buffer)return Buffer.from(e).toString("base64");throw Error("No base64 encoding implementation available")}},81738,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.deserializeDecryptDataKeyResponse=r.deserializeCreateDataKeyResponse=void 0,r.deserializeCreateDataKeyResponse=e=>({context:e.context,dataKey:{key:e.data_key,id:e.id},encryptedKeys:e.encrypted_keys}),r.deserializeDecryptDataKeyResponse=e=>({key:e.data_key,id:e.id})},27651,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.serializeUpdateObjectEntity=r.serializeCreateObjectEntity=r.desrializeListObjectVersions=r.deserializeListObjects=r.deserializeObject=r.deserializeObjectMetadata=void 0,r.deserializeObjectMetadata=e=>({context:e.context,environmentId:e.environment_id,id:e.id,keyId:e.key_id,updatedAt:new Date(Date.parse(e.updated_at)),updatedBy:e.updated_by,versionId:e.version_id}),r.deserializeObject=e=>({id:e.id,name:e.name,value:e.value,metadata:(0,r.deserializeObjectMetadata)(e.metadata)});let i=e=>({id:e.id,name:e.name,updatedAt:new Date(Date.parse(e.updated_at))});r.deserializeListObjects=e=>{var t,r;return{object:"list",data:e.data.map(i),listMetadata:{after:null!=(t=e.list_metadata.after)?t:void 0,before:null!=(r=e.list_metadata.before)?r:void 0}}},r.desrializeListObjectVersions=e=>e.data.map(n);let n=e=>({createdAt:new Date(Date.parse(e.created_at)),currentVersion:e.current_version,id:e.id});r.serializeCreateObjectEntity=e=>({name:e.name,value:e.value,key_context:e.context}),r.serializeUpdateObjectEntity=e=>({value:e.value,version_check:e.versionCheck})},57596,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.Vault=void 0;let n=e.r(81228),o=e.r(77553),a=e.r(81738),s=e.r(27651);r.Vault=class{constructor(e){this.workos=e,this.createSecret=this.createObject,this.listSecrets=this.listObjects,this.listSecretVersions=this.listObjectVersions,this.readSecret=this.readObject,this.describeSecret=this.describeObject,this.updateSecret=this.updateObject,this.deleteSecret=this.deleteObject,this.cryptoProvider=e.getCryptoProvider()}decode(e){let t=(0,o.base64ToUint8Array)(e),r=new Uint8Array(t.subarray(0,12)),i=new Uint8Array(t.subarray(12,28)),{value:a,nextIndex:s}=(0,n.decodeUInt32)(t,28),c=t.subarray(s,s+a);return{iv:r,tag:i,keys:(0,o.uint8ArrayToBase64)(c),ciphertext:new Uint8Array(t.subarray(s+a))}}createObject(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/vault/v1/kv",(0,s.serializeCreateObjectEntity)(e));return(0,s.deserializeObjectMetadata)(t)})}listObjects(e){return i(this,void 0,void 0,function*(){let t=new URL("/vault/v1/kv",this.workos.baseURL);(null==e?void 0:e.after)&&t.searchParams.set("after",e.after),(null==e?void 0:e.limit)&&t.searchParams.set("limit",e.limit.toString());let{data:r}=yield this.workos.get(t.toString());return(0,s.deserializeListObjects)(r)})}listObjectVersions(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/vault/v1/kv/${encodeURIComponent(e.id)}/versions`);return(0,s.desrializeListObjectVersions)(t)})}readObject(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/vault/v1/kv/${encodeURIComponent(e.id)}`);return(0,s.deserializeObject)(t)})}readObjectByName(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/vault/v1/kv/name/${encodeURIComponent(e)}`);return(0,s.deserializeObject)(t)})}describeObject(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.get(`/vault/v1/kv/${encodeURIComponent(e.id)}/metadata`);return(0,s.deserializeObject)(t)})}updateObject(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.put(`/vault/v1/kv/${encodeURIComponent(e.id)}`,(0,s.serializeUpdateObjectEntity)(e));return(0,s.deserializeObject)(t)})}deleteObject(e){return i(this,void 0,void 0,function*(){return this.workos.delete(`/vault/v1/kv/${encodeURIComponent(e.id)}`)})}createDataKey(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/vault/v1/keys/data-key",e);return(0,a.deserializeCreateDataKeyResponse)(t)})}decryptDataKey(e){return i(this,void 0,void 0,function*(){let{data:t}=yield this.workos.post("/vault/v1/keys/decrypt",e);return(0,a.deserializeDecryptDataKeyResponse)(t)})}encrypt(e,t,r){return i(this,void 0,void 0,function*(){let i=yield this.createDataKey({context:t}),a=new TextEncoder,s=(0,o.base64ToUint8Array)(i.dataKey.key),c=(0,o.base64ToUint8Array)(i.encryptedKeys),l=(0,n.encodeUInt32)(c.length),u=r?a.encode(r):void 0,d=this.cryptoProvider.randomBytes(12),{ciphertext:p,iv:f,tag:h}=yield this.cryptoProvider.encrypt(a.encode(e),s,d,u),y=new Uint8Array(f.length+h.length+l.length+c.length+p.length),g=0;return y.set(f,g),g+=f.length,y.set(h,g),g+=h.length,y.set(new Uint8Array(l),g),g+=l.length,y.set(c,g),g+=c.length,y.set(p,g),(0,o.uint8ArrayToBase64)(y)})}decrypt(e,t){return i(this,void 0,void 0,function*(){let r=this.decode(e),i=yield this.decryptDataKey({keys:r.keys}),n=(0,o.base64ToUint8Array)(i.key),a=new TextEncoder,s=t?a.encode(t):void 0,c=yield this.cryptoProvider.decrypt(r.ciphertext,n,r.iv,r.tag,s);return new TextDecoder().decode(c)})}}},48125,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConflictException=void 0,r.ConflictException=class extends Error{constructor({error:e,message:t,requestID:r}){super(),this.status=409,this.name="ConflictException",this.requestID=r,t?this.message=t:e?this.message=`Error: ${e}`:this.message="An conflict has occurred on the server."}}},64043,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.WorkOS=void 0;let n=e.r(49949),o=e.r(28893),a=e.r(77522),s=e.r(92425),c=e.r(96396),l=e.r(63589),u=e.r(15549),d=e.r(95134),p=e.r(69845),f=e.r(69778),h=e.r(15150),y=e.r(98299),g=e.r(82240),m=e.r(29440),v=e.r(65071),w=e.r(94397),b=e.r(55376),_=e.r(30559),S=e.r(66769),A=e.r(69758),E=e.r(70226),O=e.r(25829),k=e.r(57596),P=e.r(48125),j=e.r(29960),C="7.82.0",I="Idempotency-Key",x="Warrant-Token";r.WorkOS=class{constructor(e,t={}){if(this.key=e,this.options=t,this.apiKeys=new o.ApiKeys(this),this.auditLogs=new g.AuditLogs(this),this.directorySync=new a.DirectorySync(this),this.events=new s.Events(this),this.featureFlags=new b.FeatureFlags(this),this.fga=new v.FGA(this),this.mfa=new y.Mfa(this),this.organizations=new c.Organizations(this),this.organizationDomains=new l.OrganizationDomains(this),this.passwordless=new u.Passwordless(this),this.pipes=new d.Pipes(this),this.portal=new p.Portal(this),this.sso=new f.SSO(this),this.vault=new k.Vault(this),this.widgets=new E.Widgets(this),!e&&(this.key="u">typeof process?null==process?void 0:process.env.WORKOS_API_KEY:void 0,!this.key))throw new n.NoApiKeyProvidedException;void 0===this.options.https&&(this.options.https=!0),this.clientId=this.options.clientId,!this.clientId&&"u">typeof process&&(this.clientId=null==process?void 0:process.env.WORKOS_CLIENT_ID);const r=this.options.https?"https":"http",i=this.options.apiHostname||"api.workos.com",h=this.options.port;this.baseURL=`${r}://${i}`,h&&(this.baseURL=this.baseURL+`:${h}`);let w=`workos-node/${C}`;if(t.appInfo){const{name:e,version:r}=t.appInfo;w+=` ${e}: ${r}`}this.webhooks=this.createWebhookClient(),this.actions=this.createActionsClient(),this.userManagement=new m.UserManagement(this,this.createIronSessionProvider()),this.client=this.createHttpClient(t,w)}createWebhookClient(){return new h.Webhooks(this.getCryptoProvider())}createActionsClient(){return new O.Actions(this.getCryptoProvider())}getCryptoProvider(){return new S.SubtleCryptoProvider}createHttpClient(e,t){var r;return new A.FetchHttpClient(this.baseURL,Object.assign(Object.assign({},e.config),{timeout:e.timeout,headers:Object.assign(Object.assign({},null==(r=e.config)?void 0:r.headers),{Authorization:`Bearer ${this.key}`,"User-Agent":t})}))}createIronSessionProvider(){throw Error("IronSessionProvider not implemented. Use WorkOSNode or WorkOSWorker instead.")}get version(){return C}post(e,t,r={}){return i(this,void 0,void 0,function*(){let i,n={};r.idempotencyKey&&(n[I]=r.idempotencyKey),r.warrantToken&&(n[x]=r.warrantToken);try{i=yield this.client.post(e,t,{params:r.query,headers:n})}catch(t){throw this.handleHttpError({path:e,error:t}),t}try{return{data:yield i.toJSON()}}catch(e){throw yield this.handleParseError(e,i),e}})}get(e,t={}){return i(this,void 0,void 0,function*(){let r,i={};t.accessToken&&(i.Authorization=`Bearer ${t.accessToken}`),t.warrantToken&&(i[x]=t.warrantToken);try{r=yield this.client.get(e,{params:t.query,headers:i})}catch(t){throw this.handleHttpError({path:e,error:t}),t}try{return{data:yield r.toJSON()}}catch(e){throw yield this.handleParseError(e,r),e}})}put(e,t,r={}){return i(this,void 0,void 0,function*(){let i,n={};r.idempotencyKey&&(n[I]=r.idempotencyKey);try{i=yield this.client.put(e,t,{params:r.query,headers:n})}catch(t){throw this.handleHttpError({path:e,error:t}),t}try{return{data:yield i.toJSON()}}catch(e){throw yield this.handleParseError(e,i),e}})}delete(e,t){return i(this,void 0,void 0,function*(){try{yield this.client.delete(e,{params:t})}catch(t){throw this.handleHttpError({path:e,error:t}),t}})}emitWarning(e){console.warn(`WorkOS: ${e}`)}handleParseError(e,t){var r;return i(this,void 0,void 0,function*(){if(e instanceof SyntaxError){let i=t.getRawResponse(),n=null!=(r=i.headers.get("X-Request-ID"))?r:"",o=i.status,a=yield i.text();throw new j.ParseError({message:e.message,rawBody:a,rawStatus:o,requestID:n})}})}handleHttpError({path:e,error:t}){var r;if(!(t instanceof _.HttpClientError))throw Error(`Unexpected error: ${t}`,{cause:t});let{response:i}=t;if(i){let{status:t,data:o,headers:a}=i,s=null!=(r=a["X-Request-ID"])?r:"",{code:c,error_description:l,error:u,errors:d,message:p}=o;switch(t){case 401:throw new n.UnauthorizedException(s);case 409:throw new P.ConflictException({requestID:s,message:p,error:u});case 422:throw new n.UnprocessableEntityException({code:c,errors:d,message:p,requestID:s});case 404:throw new n.NotFoundException({code:c,message:p,path:e,requestID:s});case 429:{let e=a.get("Retry-After");throw new n.RateLimitExceededException(o.message,s,e?Number(e):null)}default:if(u||l)throw new n.OauthException(t,s,u,l,o);if(c&&d)throw new w.BadRequestException({code:c,errors:d,message:p,requestID:s});throw new n.GenericServerException(t,o.message,o,s)}}}}},34596,e=>{"use strict";class t{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){let i=t.toUint8Array(e),n=t.toUint8Array(r);if(i.length!==n.byteLength)return!1;for(let e=0;e<i.length;e++)if(i[e]!==n[e])return!1;return!0}static concat(...e){let t;t=!Array.isArray(e[0])||e[1]instanceof Function?Array.isArray(e[0])&&e[1]instanceof Function?e[0]:e[e.length-1]instanceof Function?e.slice(0,e.length-1):e:e[0];let r=0;for(let e of t)r+=e.byteLength;let i=new Uint8Array(r),n=0;for(let e of t){let t=this.toUint8Array(e);i.set(t,n),n+=t.length}return e[e.length-1]instanceof Function?this.toView(i,e[e.length-1]):i.buffer}}let r="string",i=/^[0-9a-f\s]+$/i,n=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,o=/^[a-zA-Z0-9-_]+$/;class a{static fromString(e){let t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}static toString(e){let r=t.toUint8Array(e),i="";for(let e=0;e<r.length;e++)i+=String.fromCharCode(r[e]);return decodeURIComponent(escape(i))}}class s{static toString(e,r=!1){let i=t.toArrayBuffer(e),n=new DataView(i),o="";for(let e=0;e<i.byteLength;e+=2)o+=String.fromCharCode(n.getUint16(e,r));return o}static fromString(e,t=!1){let r=new ArrayBuffer(2*e.length),i=new DataView(r);for(let r=0;r<e.length;r++)i.setUint16(2*r,e.charCodeAt(r),t);return r}}class c{static isHex(e){return typeof e===r&&i.test(e)}static isBase64(e){return typeof e===r&&n.test(e)}static isBase64Url(e){return typeof e===r&&o.test(e)}static ToString(e,r="utf8"){let i=t.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(i);case"binary":return this.ToBinary(i);case"hex":return this.ToHex(i);case"base64":return this.ToBase64(i);case"base64url":return this.ToBase64Url(i);case"utf16le":return s.toString(i,!0);case"utf16":case"utf16be":return s.toString(i);default:throw Error(`Unknown type of encoding '${r}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return s.fromString(e,!0);case"utf16":case"utf16be":return s.fromString(e);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){let r=t.toUint8Array(e);return"u">typeof btoa?btoa(this.ToString(r,"binary")):Buffer.from(r).toString("base64")}static FromBase64(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!c.isBase64(t))throw TypeError("Argument 'base64Text' is not Base64 encoded");return"u">typeof atob?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!c.isBase64Url(t))throw TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=c.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return a.fromString(e);case"utf16":case"utf16be":return s.fromString(e);case"utf16le":case"usc2":return s.fromString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=c.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return a.toString(e);case"utf16":case"utf16be":return s.toString(e);case"utf16le":case"usc2":return s.toString(e,!0);default:throw Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){let t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return r.buffer}static ToBinary(e){let r=t.toUint8Array(e),i="";for(let e=0;e<r.length;e++)i+=String.fromCharCode(r[e]);return i}static ToHex(e){let r=t.toUint8Array(e),i="",n=r.length;for(let e=0;e<n;e++){let t=r[e];t<16&&(i+="0"),i+=t.toString(16)}return i}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!c.isHex(t))throw TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);let r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){let i=t.slice(e,e+2);r[e/2]=parseInt(i,16)}return r.buffer}static ToUtf16String(e,t=!1){return s.toString(e,t)}static FromUtf16String(e,t=!1){return s.fromString(e,t)}static Base64Padding(e){let t=4-e.length%4;if(t<4)for(let r=0;r<t;r++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}function l(...e){let t=new Uint8Array(e.map(e=>e.byteLength).reduce((e,t)=>e+t)),r=0;return e.map(e=>new Uint8Array(e)).forEach(e=>{for(let i of e)t[r++]=i}),t.buffer}function u(e,t){let r=0;if(1===e.length)return e[0];for(let i=e.length-1;i>=0;i--)r+=e[e.length-1-i]*Math.pow(2,t*i);return r}function d(e,t,r=-1){let i=e,n=0,o=Math.pow(2,t);for(let a=1;a<8;a++){if(e<o){let e;if(r<0)e=new ArrayBuffer(a),n=a;else{if(r<a)return new ArrayBuffer(0);e=new ArrayBuffer(r),n=r}let o=new Uint8Array(e);for(let e=a-1;e>=0;e--){let r=Math.pow(2,e*t);o[n-e-1]=Math.floor(i/r),i-=o[n-e-1]*r}return e}o*=Math.pow(2,t)}return new ArrayBuffer(0)}function p(...e){let t=0,r=0;for(let r of e)t+=r.length;let i=new Uint8Array(new ArrayBuffer(t));for(let t of e)i.set(t,r),r+=t.length;return i}function f(){let e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let t=255===e[0]&&128&e[1],r=0===e[0]&&(128&e[1])==0;(t||r)&&this.warnings.push("Needlessly long format")}let t=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let e=0;e<this.valueHex.byteLength;e++)t[e]=0;t[0]=128&e[0];let r=u(t,8),i=new Uint8Array(new ArrayBuffer(this.valueHex.byteLength));for(let t=0;t<this.valueHex.byteLength;t++)i[t]=e[t];return i[0]&=127,u(i,8)-r}function h(e,t){let r=e.toString(10);if(t<r.length)return"";let i=t-r.length,n=Array(i);for(let e=0;e<i;e++)n[e]="0";return n.join("").concat(r)}function y(){if("u"<typeof BigInt)throw Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function g(e){let t=0,r=0;for(let r=0;r<e.length;r++)t+=e[r].byteLength;let i=new Uint8Array(t);for(let t=0;t<e.length;t++){let n=e[t];i.set(new Uint8Array(n),r),r+=n.byteLength}return i.buffer}function m(e,t,r,i){return t instanceof Uint8Array?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):i<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-i<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}c.DEFAULT_UTF8_ENCODING="utf8";class v{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return g(this.items)}}let w=[new Uint8Array([1])],b="0123456789",_="name",S="valueHexView",A=new ArrayBuffer(0),E=new Uint8Array(0),O="EndOfContent",k="OCTET STRING",P="BIT STRING";function j(e){var r;return(r=class extends e{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}constructor(...e){var r;super(...e);const i=e[0]||{};this.isHexOnly=null!=(r=i.isHexOnly)&&r,this.valueHexView=i.valueHex?t.toUint8Array(i.valueHex):E}fromBER(e,t,r){let i=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!m(this,i,t,r))return -1;let n=t+r;return(this.valueHexView=i.subarray(t,n),this.valueHexView.length)?(this.blockLength=r,n):(this.warnings.push("Zero buffer length"),t)}toBER(e=!1){return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",A)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:c.ToHex(this.valueHexView)}}}).NAME="hexBlock",r}class C{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:r="",warnings:i=[],valueBeforeDecode:n=E}={}){this.blockLength=e,this.error=r,this.warnings=i,this.valueBeforeDecodeView=t.toUint8Array(n)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:c.ToHex(this.valueBeforeDecodeView)}}}C.NAME="baseBlock";class I extends C{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}I.NAME="valueBlock";class x extends j(C){constructor({idBlock:e={}}={}){var r,i,n,o;super(),e?(this.isHexOnly=null!=(r=e.isHexOnly)&&r,this.valueHexView=e.valueHex?t.toUint8Array(e.valueHex):E,this.tagClass=null!=(i=e.tagClass)?i:-1,this.tagNumber=null!=(n=e.tagNumber)?n:-1,this.isConstructed=null!=(o=e.isConstructed)&&o):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",A}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){let r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,r[0]=t}return r.buffer}if(!this.isHexOnly){let r=d(this.tagNumber,7),i=new Uint8Array(r),n=r.byteLength,o=new Uint8Array(n+1);if(o[0]=31|t,!e){for(let e=0;e<n-1;e++)o[e+1]=128|i[e];o[n]=i[n-1]}return o.buffer}let r=new Uint8Array(this.valueHexView.byteLength+1);if(r[0]=31|t,!e){let e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=128|e[t];r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,r,i){let n=t.toUint8Array(e);if(!m(this,n,r,i))return -1;let o=n.subarray(r,r+i);if(0===o.length)return this.error="Zero buffer length",-1;switch(192&o[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(32&o[0])==32,this.isHexOnly=!1;let a=31&o[0];if(31!==a)this.tagNumber=a,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),r=255;for(;128&o[e];){if(t[e-1]=127&o[e],++e>=o.length)return this.error="End of input reached before message was fully decoded",-1;if(e===r){let e=new Uint8Array(r+=255);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1,t[e-1]=127&o[e];let i=new Uint8Array(e);for(let r=0;r<e;r++)i[r]=t[r];(t=this.valueHexView=new Uint8Array(e)).set(i),this.blockLength<=9?this.tagNumber=u(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}x.NAME="identificationBlock";class R extends C{constructor({lenBlock:e={}}={}){var t,r,i;super(),this.isIndefiniteForm=null!=(t=e.isIndefiniteForm)&&t,this.longFormUsed=null!=(r=e.longFormUsed)&&r,this.length=null!=(i=e.length)?i:0}fromBER(e,r,i){let n=t.toUint8Array(e);if(!m(this,n,r,i))return -1;let o=n.subarray(r,r+i);if(0===o.length)return this.error="Zero buffer length",-1;if(255===o[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===o[0],this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(128&o[0]),!1===this.longFormUsed)return this.length=o[0],this.blockLength=1,r+this.blockLength;let a=127&o[0];if(a>8)return this.error="Too big integer",-1;if(a+1>o.length)return this.error="End of input reached before message was fully decoded",-1;let s=r+1,c=n.subarray(s,s+a);return 0===c[a-1]&&this.warnings.push("Needlessly long encoded length"),this.length=u(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,r+this.blockLength}toBER(e=!1){let t,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=128),t;if(this.longFormUsed){let i=d(this.length,8);if(i.byteLength>127)return this.error="Too big length",A;if(t=new ArrayBuffer(i.byteLength+1),e)return t;let n=new Uint8Array(i);(r=new Uint8Array(t))[0]=128|i.byteLength;for(let e=0;e<i.byteLength;e++)r[e+1]=n[e];return t}return t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}R.NAME="lengthBlock";let B={};class K extends C{constructor({name:e="",optional:t=!1,primitiveSchema:r,...i}={},n){super(i),this.name=e,this.optional=t,r&&(this.primitiveSchema=r),this.idBlock=new x(i),this.lenBlock=new R(i),this.valueBlock=n?new n(i):new I(i)}fromBER(e,t,r){let i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===i?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),i}toBER(e,t){let r=t||new v;t||function e(t){var r;if(t instanceof B.Constructed)for(let r of t.valueBlock.value)e(r)&&(t.lenBlock.isIndefiniteForm=!0);return!!(null==(r=t.lenBlock)?void 0:r.isIndefiniteForm)}(this);let i=this.idBlock.toBER(e);if(r.write(i),this.lenBlock.isIndefiniteForm)r.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,r),r.write(new ArrayBuffer(2));else{let t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;let i=this.lenBlock.toBER(e);r.write(i),r.write(t)}return t?A:r.final()}toJSON(){let e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():c.ToHex(this.toBER())}onAsciiEncoding(){let e=this.constructor.NAME,t=c.ToHex(this.valueBlock.valueBeforeDecodeView);return`${e} : ${t}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;let t=this.toBER(),r=e.toBER();if(t.byteLength!==r.byteLength)return!1;let i=new Uint8Array(t),n=new Uint8Array(r);for(let e=0;e<i.length;e++)if(i[e]!==n[e])return!1;return!0}}K.NAME="BaseBlock";class T extends K{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e="",...t}={},r){super(t,r),e&&this.fromString(e)}fromBER(e,t,r){let i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===i?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),i}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}T.NAME="BaseStringBlock";class M extends j(I){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}M.NAME="PrimitiveValueBlock";class U extends K{constructor(e={}){super(e,M),this.idBlock.isConstructed=!1}}function N(e,t=0,r=e.length){let i=t,n=new K({},I),o=new C;if(!m(o,e,t,r))return n.error=o.error,{offset:-1,result:n};if(!e.subarray(t,t+r).length)return n.error="Zero buffer length",{offset:-1,result:n};let a=n.idBlock.fromBER(e,t,r);if(n.idBlock.warnings.length&&n.warnings.concat(n.idBlock.warnings),-1===a)return n.error=n.idBlock.error,{offset:-1,result:n};if(t=a,r-=n.idBlock.blockLength,a=n.lenBlock.fromBER(e,t,r),n.lenBlock.warnings.length&&n.warnings.concat(n.lenBlock.warnings),-1===a)return n.error=n.lenBlock.error,{offset:-1,result:n};if(t=a,r-=n.lenBlock.blockLength,!n.idBlock.isConstructed&&n.lenBlock.isIndefiniteForm)return n.error="Indefinite length form used for primitive encoding form",{offset:-1,result:n};let s=K;if(1===n.idBlock.tagClass){if(n.idBlock.tagNumber>=37&&!1===n.idBlock.isHexOnly)return n.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:n};switch(n.idBlock.tagNumber){case 0:if(n.idBlock.isConstructed&&n.lenBlock.length>0)return n.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:n};s=B.EndOfContent;break;case 1:s=B.Boolean;break;case 2:s=B.Integer;break;case 3:s=B.BitString;break;case 4:s=B.OctetString;break;case 5:s=B.Null;break;case 6:s=B.ObjectIdentifier;break;case 10:s=B.Enumerated;break;case 12:s=B.Utf8String;break;case 13:s=B.RelativeObjectIdentifier;break;case 14:s=B.TIME;break;case 15:return n.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:n};case 16:s=B.Sequence;break;case 17:s=B.Set;break;case 18:s=B.NumericString;break;case 19:s=B.PrintableString;break;case 20:s=B.TeletexString;break;case 21:s=B.VideotexString;break;case 22:s=B.IA5String;break;case 23:s=B.UTCTime;break;case 24:s=B.GeneralizedTime;break;case 25:s=B.GraphicString;break;case 26:s=B.VisibleString;break;case 27:s=B.GeneralString;break;case 28:s=B.UniversalString;break;case 29:s=B.CharacterString;break;case 30:s=B.BmpString;break;case 31:s=B.DATE;break;case 32:s=B.TimeOfDay;break;case 33:s=B.DateTime;break;case 34:s=B.Duration;break;default:{let e=n.idBlock.isConstructed?new B.Constructed:new B.Primitive;e.idBlock=n.idBlock,e.lenBlock=n.lenBlock,e.warnings=n.warnings,n=e}}}else s=n.idBlock.isConstructed?B.Constructed:B.Primitive;return a=(n=function(e,t){if(e instanceof t)return e;let r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecodeView=e.valueBeforeDecodeView,r}(n,s)).fromBER(e,t,n.lenBlock.isIndefiniteForm?r:n.lenBlock.length),n.valueBeforeDecodeView=e.subarray(i,i+n.blockLength),{offset:a,result:n}}function D(e){if(!e.byteLength){let e=new K({},I);return e.error="Input buffer has zero length",{offset:-1,result:e}}return N(t.toUint8Array(e).slice(),0,e.byteLength)}B.Primitive=U,U.NAME="PRIMITIVE";class z extends I{constructor({value:e=[],isIndefiniteForm:t=!1,...r}={}){super(r),this.value=e,this.isIndefiniteForm=t}fromBER(e,r,i){var n,o;let a=t.toUint8Array(e);if(!m(this,a,r,i))return -1;if(this.valueBeforeDecodeView=a.subarray(r,r+i),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),r;let s=r;for(;n=this.isIndefiniteForm,o=i,(n?1:o)>0;){let e=N(a,s,i);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(s=e.offset,this.blockLength+=e.result.blockLength,i-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===O)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===O?this.value.pop():this.warnings.push("No EndOfContent block encoded")),s}toBER(e,t){let r=t||new v;for(let t=0;t<this.value.length;t++)this.value[t].toBER(e,r);return t?A:r.final()}toJSON(){let e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let t of this.value)e.value.push(t.toJSON());return e}}z.NAME="ConstructedValueBlock";class W extends K{constructor(e={}){super(e,z),this.idBlock.isConstructed=!0}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let i=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return -1===i?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),i}onAsciiEncoding(){let e=[];for(let t of this.valueBlock.value)e.push(t.toString("ascii").split("\n").map(e=>`  ${e}`).join("\n"));let t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join("\n")}`:`${t} :`}}B.Constructed=W,W.NAME="CONSTRUCTED";class H extends I{fromBER(e,t,r){return t}toBER(e){return A}}H.override="EndOfContentValueBlock";class J extends K{constructor(e={}){super(e,H),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}B.EndOfContent=J,J.NAME=O;class L extends K{constructor(e={}){super(e,I),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,r){return(this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength)?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}toBER(e,t){let r=new ArrayBuffer(2);if(!e){let e=new Uint8Array(r);e[0]=5,e[1]=0}return t&&t.write(r),r}onAsciiEncoding(){return`${this.constructor.NAME}`}}B.Null=L,L.NAME="NULL";class $ extends j(I){get value(){for(let e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=255*!!e}constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=t.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,r,i){let n=t.toUint8Array(e);return m(this,n,r,i)?(this.valueHexView=n.subarray(r,r+i),i>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,f.call(this),this.blockLength=i,r+i):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}$.NAME="BooleanValueBlock";class F extends K{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,$),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}B.Boolean=F,F.NAME="BOOLEAN";class V extends j(z){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,r){let i=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(i=z.prototype.fromBER.call(this,e,t,r)))return i;for(let e=0;e<this.value.length;e++){let t=this.value[e].constructor.NAME;if(t===O)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1;else break;if(t!==k)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,i=super.fromBER(e,t,r),this.blockLength=r;return i}toBER(e,t){return this.isConstructed?z.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}V.NAME="OctetStringValueBlock";class G extends K{constructor({idBlock:e={},lenBlock:t={},...r}={}){var i;null!=r.isConstructed||(r.isConstructed=!!(null==(i=r.value)?void 0:i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},V),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===r)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){let i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+r);try{if(i.byteLength){let e=N(i,0,i.byteLength);-1!==e.offset&&e.offset===r&&(this.valueBlock.value=[e.result])}}catch{}}return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return W.prototype.onAsciiEncoding.call(this);let e=this.constructor.NAME,t=c.ToHex(this.valueBlock.valueHexView);return`${e} : ${t}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let e=[];for(let t of this.valueBlock.value)t instanceof ti&&e.push(t.valueBlock.valueHexView);return t.concat(e)}}B.OctetString=ti=G,G.NAME=k;class q extends j(z){constructor({unusedBits:e=0,isConstructed:t=!1,...r}={}){super(r),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,i){if(!i)return r;let n=-1;if(this.isConstructed){if(-1===(n=z.prototype.fromBER.call(this,e,r,i)))return n;for(let e of this.value){let t=e.constructor.NAME;if(t===O)if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1;else break;if(t!==P)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=r.unusedBits}return n}let o=t.toUint8Array(e);if(!m(this,o,r,i))return -1;let a=o.subarray(r,r+i);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let e=a.subarray(1);try{if(e.byteLength){let t=N(e,0,e.byteLength);-1!==t.offset&&t.offset===i-1&&(this.value=[t.result])}}catch{}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,r+i}toBER(e,t){if(this.isConstructed)return z.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength){let e=new Uint8Array(1);return e[0]=0,e.buffer}let r=new Uint8Array(this.valueHexView.length+1);return r[0]=this.unusedBits,r.set(this.valueHexView,1),r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}q.NAME="BitStringValueBlock";class X extends K{constructor({idBlock:e={},lenBlock:t={},...r}={}){var i;null!=r.isConstructed||(r.isConstructed=!!(null==(i=r.value)?void 0:i.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},q),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return W.prototype.onAsciiEncoding.call(this);{let e=[];for(let t of this.valueBlock.valueHexView)e.push(t.toString(2).padStart(8,"0"));let t=e.join(""),r=this.constructor.NAME,i=t.substring(0,t.length-this.valueBlock.unusedBits);return`${r} : ${i}`}}}function Y(e){if(e>=w.length)for(let t=w.length;t<=e;t++){let e=new Uint8Array([0]),r=w[t-1].slice(0);for(let t=r.length-1;t>=0;t--){let i=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=i[0]/10,r[t]=i[0]%10}e[0]>0&&(r=p(e,r)),w.push(r)}return w[e]}B.BitString=X,X.NAME=P;class Q extends j(I){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=f.call(this)))}constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(function(e){let t=e<0?-1*e:e,r=128;for(let i=1;i<8;i++){if(t<=r){if(e<0){let e=d(r-t,8,i),n=new Uint8Array(e);return n[0]|=128,e}let n=d(t,8,i),o=new Uint8Array(n);if(128&o[0]){let e=n.slice(0),t=new Uint8Array(e);o=new Uint8Array(n=new ArrayBuffer(n.byteLength+1));for(let r=0;r<e.byteLength;r++)o[r+1]=t[r];o[0]=0}return n}r*=256}return new ArrayBuffer(0)}(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,i=0){let n=this.fromBER(e,t,r);if(-1===n)return n;let o=this.valueHexView;return 0===o[0]&&(128&o[1])!=0?this.valueHexView=o.subarray(1):0!==i&&o.length<i&&(i-o.length>1&&(i=o.length+1),this.valueHexView=o.subarray(i-o.length)),n}toDER(e=!1){let t=this.valueHexView;switch(!0){case(128&t[0])!=0:{let e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&(128&t[1])==0:this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,r){let i=super.fromBER(e,t,r);return -1===i||this.setValueHex(),i}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let e,t=8*this.valueHexView.length-1,r=new Uint8Array(8*this.valueHexView.length/3),i=0,n=this.valueHexView,o="",a=!1;for(let a=n.byteLength-1;a>=0;a--){e=n[a];for(let n=0;n<8;n++)(1&e)==1&&(i===t?(r=function(e,t){let r,i=0,n=new Uint8Array(e),o=new Uint8Array(t),a=n.slice(0),s=a.length-1,c=o.slice(0),l=c.length-1,u=0;for(let e=l;e>=0;e--,u++)!0==(r=a[s-u]-c[l-u]-i)<0?(i=1,a[s-u]=r+10):(i=0,a[s-u]=r);if(i>0)for(let e=s-l+1;e>=0;e--,u++)if((r=a[s-u]-i)<0)i=1,a[s-u]=r+10;else{i=0,a[s-u]=r;break}return a.slice()}(Y(i),r),o="-"):r=function(e,t){let r=new Uint8Array([0]),i=new Uint8Array(e),n=new Uint8Array(t),o=i.slice(0),a=o.length-1,s=n.slice(0),c=s.length-1,l=0,u=c<a?a:c,d=0;for(let e=u;e>=0;e--,d++)l=!0==d<s.length?o[a-d]+s[c-d]+r[0]:o[a-d]+r[0],r[0]=l/10,!0==d>=o.length?o=p(new Uint8Array([l%10]),o):o[a-d]=l%10;return r[0]>0&&(o=p(r,o)),o}(r,Y(i))),i++,e>>=1}for(let e=0;e<r.length;e++)r[e]&&(a=!0),a&&(o+=b.charAt(r[e]));return!1===a&&(o+=b.charAt(0)),o}}Q.NAME="IntegerValueBlock",Object.defineProperty(Q.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class Z extends K{constructor(e={}){super(e,Q),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return y(),BigInt(this.valueBlock.toString())}static fromBigInt(e){y();let r=BigInt(e),i=new v,n=r.toString(16).replace(/^-/,""),o=new Uint8Array(c.FromHex(n));if(r<0){let e=new Uint8Array(o.length+(128&o[0]?1:0));e[0]|=128;let n=BigInt(`0x${c.ToHex(e)}`)+r,a=t.toUint8Array(c.FromHex(n.toString(16)));a[0]|=128,i.write(a)}else 128&o[0]&&i.write(new Uint8Array([0])),i.write(o);return new tn({valueHex:i.final()})}convertToDER(){let e=new tn({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new tn({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}B.Integer=tn=Z,Z.NAME="INTEGER";class ee extends Z{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}B.Enumerated=ee,ee.NAME="ENUMERATED";class et extends j(I){constructor({valueDec:e=-1,isFirstSid:t=!1,...r}={}){super(r),this.valueDec=e,this.isFirstSid=t}fromBER(e,r,i){if(!i)return r;let n=t.toUint8Array(e);if(!m(this,n,r,i))return -1;let o=n.subarray(r,r+i);this.valueHexView=new Uint8Array(i);for(let e=0;e<i&&(this.valueHexView[e]=127&o[e],this.blockLength++,(128&o[e])!=0);e++);let a=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)a[e]=this.valueHexView[e];return(this.valueHexView=a,(128&o[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=u(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){y();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;let r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++)r[e]=parseInt(t.slice(7*e,7*e+7),2)+128*(e+1<r.length);this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=d(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",A;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),i=t.byteLength-1;for(let t=0;t<i;t++)r[t]=128|e[t];r[i]=e[i]}return r}toString(){let e="";if(this.isHexOnly)e=c.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}et.NAME="sidBlock";class er extends I{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let i=t;for(;r>0;){let t=new et;if(-1===(i=t.fromBER(e,i,r))){this.blockLength=0,this.error=t.error;break}0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return i}toBER(e){let t=[];for(let r=0;r<this.value.length;r++){let i=this.value[r].toBER(e);if(0===i.byteLength)return this.error=this.value[r].error,A;t.push(i)}return g(t)}fromString(e){this.value=[];let t=0,r=0,i="",n=!1;do if(i=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1,n){let e=this.value[0],t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:this.value=[];return}let r=parseInt(i,10);if(isNaN(r))return;e.valueDec=r+t,n=!1}else{let e=new et;if(i>Number.MAX_SAFE_INTEGER)y(),e.valueBigInt=BigInt(i);else if(e.valueDec=parseInt(i,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,n=!0),this.value.push(e)}while(-1!==r)}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let i=this.value[r].toString();0!==r&&(e=`${e}.`),t?(i=`{${i}}`,this.value[r].isFirstSid?e=`2.{${i} - 80}`:e+=i):e+=i}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}er.NAME="ObjectIdentifierValueBlock";class ei extends K{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,er),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}B.ObjectIdentifier=ei,ei.NAME="OBJECT IDENTIFIER";class en extends j(C){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,r,i){if(0===i)return r;let n=t.toUint8Array(e);if(!m(this,n,r,i))return -1;let o=n.subarray(r,r+i);this.valueHexView=new Uint8Array(i);for(let e=0;e<i&&(this.valueHexView[e]=127&o[e],this.blockLength++,(128&o[e])!=0);e++);let a=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)a[e]=this.valueHexView[e];return(this.valueHexView=a,(128&o[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=u(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);let t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}let t=d(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",A;let r=new Uint8Array(t.byteLength);if(!e){let e=new Uint8Array(t),i=t.byteLength-1;for(let t=0;t<i;t++)r[t]=128|e[t];r[i]=e[i]}return r.buffer}toString(){return this.isHexOnly?c.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}en.NAME="relativeSidBlock";class eo extends I{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let i=t;for(;r>0;){let t=new en;if(-1===(i=t.fromBER(e,i,r))){this.blockLength=0,this.error=t.error;break}this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return i}toBER(e,t){let r=[];for(let t=0;t<this.value.length;t++){let i=this.value[t].toBER(e);if(0===i.byteLength)return this.error=this.value[t].error,A;r.push(i)}return g(r)}fromString(e){this.value=[];let t=0,r=0,i="";do{i=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1;let n=new en;if(n.valueDec=parseInt(i,10),isNaN(n.valueDec))break;this.value.push(n)}while(-1!==r)return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let i=this.value[r].toString();0!==r&&(e=`${e}.`),t?e+=i=`{${i}}`:e+=i}return e}toJSON(){let e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}eo.NAME="RelativeObjectIdentifierValueBlock";class ea extends K{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,eo),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}B.RelativeObjectIdentifier=ea,ea.NAME="RelativeObjectIdentifier";class es extends W{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}B.Sequence=es,es.NAME="SEQUENCE";class ec extends W{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}B.Set=ec,ec.NAME="SET";class el extends j(I){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=""}toJSON(){return{...super.toJSON(),value:this.value}}}el.NAME="StringValueBlock";class eu extends el{}eu.NAME="SimpleStringValueBlock";class ed extends T{constructor({...e}={}){super(e,eu)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,t.toUint8Array(e))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);this.valueBlock.value=e}}ed.NAME="SIMPLE STRING";class ep extends ed{fromBuffer(e){this.valueBlock.valueHexView=t.toUint8Array(e);try{this.valueBlock.value=c.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=c.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(c.FromUtf8String(e)),this.valueBlock.value=e}}ep.NAME="Utf8StringValueBlock";class ef extends ep{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}B.Utf8String=ef,ef.NAME="UTF8String";class eh extends ed{fromBuffer(e){this.valueBlock.value=c.ToUtf16String(e),this.valueBlock.valueHexView=t.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(c.FromUtf16String(e))}}eh.NAME="BmpStringValueBlock";class ey extends eh{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}B.BmpString=ey,ey.NAME="BMPString";class eg extends ed{fromBuffer(e){let t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),r=new Uint8Array(t);for(let e=0;e<r.length;e+=4)r[e]=r[e+3],r[e+1]=r[e+2],r[e+2]=0,r[e+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){let t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let i=0;i<t;i++){let t=new Uint8Array(d(e.charCodeAt(i),8));if(t.length>4)continue;let n=4-t.length;for(let e=t.length-1;e>=0;e--)r[4*i+e+n]=t[e]}this.valueBlock.value=e}}eg.NAME="UniversalStringValueBlock";class em extends eg{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}B.UniversalString=em,em.NAME="UniversalString";class ev extends ed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}B.NumericString=ev,ev.NAME="NumericString";class ew extends ed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}B.PrintableString=ew,ew.NAME="PrintableString";class eb extends ed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}B.TeletexString=eb,eb.NAME="TeletexString";class e_ extends ed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}B.VideotexString=e_,e_.NAME="VideotexString";class eS extends ed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}B.IA5String=eS,eS.NAME="IA5String";class eA extends ed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}B.GraphicString=eA,eA.NAME="GraphicString";class eE extends ed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}B.VisibleString=eE,eE.NAME="VisibleString";class eO extends ed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}B.GeneralString=eO,eO.NAME="GeneralString";class ek extends ed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}B.CharacterString=ek,ek.NAME="CharacterString";class eP extends eE{constructor({value:e,valueDate:t,...r}={}){if(super(r),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,t.toUint8Array(e)))}toBuffer(){let e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){let t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(null===t){this.error="Wrong input string for conversion";return}let r=parseInt(t[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(e="iso"){if("iso"===e){let e=Array(7);return e[0]=h(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=h(this.month,2),e[2]=h(this.day,2),e[3]=h(this.hour,2),e[4]=h(this.minute,2),e[5]=h(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}B.UTCTime=eP,eP.NAME="UTCTime";class ej extends eP{constructor(e={}){super(e),null!=this.millisecond||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,r=!1,i="",n="",o=0,a=0,s=0;if("Z"===e[e.length-1])i=e.substring(0,e.length-1),r=!0;else{if(isNaN(new Number(e[e.length-1]).valueOf()))throw Error("Wrong input string for conversion");i=e}if(r){if(-1!==i.indexOf("+")||-1!==i.indexOf("-"))throw Error("Wrong input string for conversion")}else{let e=1,t=i.indexOf("+"),r="";if(-1===t&&(t=i.indexOf("-"),e=-1),-1!==t){if(r=i.substring(t+1),i=i.substring(0,t),2!==r.length&&4!==r.length)throw Error("Wrong input string for conversion");let n=parseInt(r.substring(0,2),10);if(isNaN(n.valueOf()))throw Error("Wrong input string for conversion");if(a=e*n,4===r.length){if(isNaN((n=parseInt(r.substring(2,4),10)).valueOf()))throw Error("Wrong input string for conversion");s=e*n}}}let c=i.indexOf(".");if(-1===c&&(c=i.indexOf(",")),-1!==c){let e=new Number(`0${i.substring(c)}`);if(isNaN(e.valueOf()))throw Error("Wrong input string for conversion");o=e.valueOf(),n=i.substring(0,c)}else n=i;switch(!0){case 8===n.length:if(t=/(\d{4})(\d{2})(\d{2})/ig,-1!==c)throw Error("Wrong input string for conversion");break;case 10===n.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,-1!==c){let e=60*o;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===n.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==c){let e=60*o;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===n.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==c){let e=1e3*o;this.millisecond=Math.floor(e)}break;default:throw Error("Wrong input string for conversion")}let l=t.exec(n);if(null===l)throw Error("Wrong input string for conversion");for(let e=1;e<l.length;e++)switch(e){case 1:this.year=parseInt(l[e],10);break;case 2:this.month=parseInt(l[e],10);break;case 3:this.day=parseInt(l[e],10);break;case 4:this.hour=parseInt(l[e],10)+a;break;case 5:this.minute=parseInt(l[e],10)+s;break;case 6:this.second=parseInt(l[e],10);break;default:throw Error("Wrong input string for conversion")}if(!1===r){let e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if("iso"===e){let e=[];return e.push(h(this.year,4)),e.push(h(this.month,2)),e.push(h(this.day,2)),e.push(h(this.hour,2)),e.push(h(this.minute,2)),e.push(h(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(h(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}B.GeneralizedTime=ej,ej.NAME="GeneralizedTime";class eC extends ef{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}B.DATE=eC,eC.NAME="DATE";class eI extends ef{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}B.TimeOfDay=eI,eI.NAME="TimeOfDay";class ex extends ef{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}B.DateTime=ex,ex.NAME="DateTime";class eR extends ef{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}B.Duration=eR,eR.NAME="Duration";class eB extends ef{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}B.TIME=eB,eB.NAME="TIME";class eK{constructor({name:e="",optional:t=!1}={}){this.name=e,this.optional=t}}class eT extends eK{constructor({value:e=[],...t}={}){super(t),this.value=e}}class eM extends eK{constructor({value:e=new eK,local:t=!1,...r}={}){super(r),this.value=e,this.local=t}}class eU{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=t.toUint8Array(e)}constructor({data:e=E}={}){this.dataView=t.toUint8Array(e)}fromBER(e,r,i){let n=r+i;return this.dataView=t.toUint8Array(e).subarray(r,n),n}toBER(e){return this.dataView.slice().buffer}}function eN(e,t,r){if(r instanceof eT){for(let i of r.value)if(eN(e,t,i).verified)return{verified:!0,result:e};{let e={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty(_)&&(e.name=r.name),e}}if(r instanceof eK)return r.hasOwnProperty(_)&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==!1||"idBlock"in r==!1||"fromBER"in r.idBlock==!1||"toBER"in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let i=r.idBlock.toBER(!1);if(0===i.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(i,0,i.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!("isHexOnly"in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly){if(S in r.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let i=r.idBlock.valueHexView,n=t.idBlock.valueHexView;if(i.length!==n.length)return{verified:!1,result:e};for(let t=0;t<i.length;t++)if(i[t]!==n[1])return{verified:!1,result:e}}if(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(e[r.name]=t)),r instanceof B.Constructed){let i=0,n={verified:!1,result:{error:"Unknown error"}},o=r.valueBlock.value.length;if(o>0&&r.valueBlock.value[0]instanceof eM&&(o=t.valueBlock.value.length),0===o)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){let t=!0;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||!1);return t?{verified:!0,result:e}:(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let a=0;a<o;a++)if(a-i>=t.valueBlock.value.length){if(!1===r.valueBlock.value[a].optional){let t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}}else if(r.valueBlock.value[0]instanceof eM){if(!1===(n=eN(e,t.valueBlock.value[a],r.valueBlock.value[0].value)).verified)if(!r.valueBlock.value[0].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),n;else i++;if(_ in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let i={};void 0===(i="local"in r.valueBlock.value[0]&&r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(i[r.valueBlock.value[0].name]=[]),i[r.valueBlock.value[0].name].push(t.valueBlock.value[a])}}else if(!1===(n=eN(e,t.valueBlock.value[a-i],r.valueBlock.value[a])).verified)if(!r.valueBlock.value[a].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&delete e[r.name]),n;else i++;if(!1===n.verified){let t={verified:!1,result:e};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}return{verified:!0,result:e}}if(r.primitiveSchema&&S in t.valueBlock){let i=N(t.valueBlock.valueHexView);if(-1===i.offset){let t={verified:!1,result:i.result};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,""),r.name&&(delete e[r.name],t.name=r.name)),t}return eN(e,i.result,r.primitiveSchema)}return{verified:!0,result:e}}function eD(e,r){if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let i=N(t.toUint8Array(e));return -1===i.offset?{verified:!1,result:i.result}:eN(i.result,i.result,r)}e.s(["Any",()=>eK,"BaseBlock",()=>K,"BaseStringBlock",()=>T,"BitString",()=>X,"BmpString",()=>ey,"Boolean",()=>F,"CharacterString",()=>ek,"Choice",()=>eT,"Constructed",()=>W,"DATE",()=>eC,"DateTime",()=>ex,"Duration",()=>eR,"EndOfContent",()=>J,"Enumerated",()=>ee,"GeneralString",()=>eO,"GeneralizedTime",()=>ej,"GraphicString",()=>eA,"HexBlock",()=>j,"IA5String",()=>eS,"Integer",()=>Z,"Null",()=>L,"NumericString",()=>ev,"ObjectIdentifier",()=>ei,"OctetString",()=>G,"Primitive",()=>U,"PrintableString",()=>ew,"RawData",()=>eU,"RelativeObjectIdentifier",()=>ea,"Repeated",()=>eM,"Sequence",()=>es,"Set",()=>ec,"TIME",()=>eB,"TeletexString",()=>eb,"TimeOfDay",()=>eI,"UTCTime",()=>eP,"UniversalString",()=>em,"Utf8String",()=>ef,"ValueBlock",()=>I,"VideotexString",()=>e_,"ViewWriter",()=>v,"VisibleString",()=>eE,"compareSchema",()=>eN,"fromBER",()=>D,"verifySchema",()=>eD],23577),(tt=to||(to={}))[tt.Sequence=0]="Sequence",tt[tt.Set=1]="Set",tt[tt.Choice=2]="Choice",(tr=ta||(ta={}))[tr.Any=1]="Any",tr[tr.Boolean=2]="Boolean",tr[tr.OctetString=3]="OctetString",tr[tr.BitString=4]="BitString",tr[tr.Integer=5]="Integer",tr[tr.Enumerated=6]="Enumerated",tr[tr.ObjectIdentifier=7]="ObjectIdentifier",tr[tr.Utf8String=8]="Utf8String",tr[tr.BmpString=9]="BmpString",tr[tr.UniversalString=10]="UniversalString",tr[tr.NumericString=11]="NumericString",tr[tr.PrintableString=12]="PrintableString",tr[tr.TeletexString=13]="TeletexString",tr[tr.VideotexString=14]="VideotexString",tr[tr.IA5String=15]="IA5String",tr[tr.GraphicString=16]="GraphicString",tr[tr.VisibleString=17]="VisibleString",tr[tr.GeneralString=18]="GeneralString",tr[tr.CharacterString=19]="CharacterString",tr[tr.UTCTime=20]="UTCTime",tr[tr.GeneralizedTime=21]="GeneralizedTime",tr[tr.DATE=22]="DATE",tr[tr.TimeOfDay=23]="TimeOfDay",tr[tr.DateTime=24]="DateTime",tr[tr.Duration=25]="Duration",tr[tr.TIME=26]="TIME",tr[tr.Null=27]="Null";let ez={fromASN:e=>e instanceof L?null:e.valueBeforeDecodeView,toASN:e=>{if(null===e)return new L;let t=D(e);if(t.result.error)throw Error(t.result.error);return t.result}},eW={fromASN:e=>e.valueBlock.valueHexView.byteLength>=4?e.valueBlock.toString():e.valueBlock.valueDec,toASN:e=>new Z({value:+e})},eH={fromASN:e=>e.valueBlock.valueDec,toASN:e=>new ee({value:e})},eJ={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new X({valueHex:e})},eL={fromASN:e=>e.valueBlock.toString(),toASN:e=>new ei({value:e})},e$={fromASN:e=>e.valueBlock.value,toASN:e=>new F({value:e})},eF={fromASN:e=>e.valueBlock.valueHexView,toASN:e=>new G({valueHex:e})};function eV(e){return{fromASN:e=>e.valueBlock.value,toASN:t=>new e({value:t})}}let eG=eV(ef),eq=eV(ey),eX=eV(em),eY=eV(ev),eQ=eV(ew),eZ=eV(eb),e0=eV(e_),e1=eV(eS),e2=eV(eA),e8=eV(eE),e6=eV(eO),e5=eV(ek),e3={fromASN:e=>e.toDate(),toASN:e=>new eP({valueDate:e})},e4={fromASN:e=>e.toDate(),toASN:e=>new ej({valueDate:e})},e9={fromASN:()=>null,toASN:()=>new L};function e7(e){switch(e){case ta.Any:return ez;case ta.BitString:return eJ;case ta.BmpString:return eq;case ta.Boolean:return e$;case ta.CharacterString:return e5;case ta.Enumerated:return eH;case ta.GeneralString:return e6;case ta.GeneralizedTime:return e4;case ta.GraphicString:return e2;case ta.IA5String:return e1;case ta.Integer:return eW;case ta.Null:return e9;case ta.NumericString:return eY;case ta.ObjectIdentifier:return eL;case ta.OctetString:return eF;case ta.PrintableString:return eQ;case ta.TeletexString:return eZ;case ta.UTCTime:return e3;case ta.UniversalString:return eX;case ta.Utf8String:return eG;case ta.VideotexString:return e0;case ta.VisibleString:return e8;default:return null}}var te,tt,tr,ti,tn,to,ta,ts,tc=e.i(23577);function tl(e){return"function"==typeof e&&e.prototype?!!e.prototype.toASN&&!!e.prototype.fromASN||tl(e.prototype):!!(e&&"object"==typeof e&&"toASN"in e&&"fromASN"in e)}let tu=new class{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,t=!1){let r=this.items.get(e);if(!r)throw Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(t&&!r.schema)throw Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return r}cache(e){let t=this.get(e);t.schema||(t.schema=this.create(e,!0))}createDefault(e){let t={type:to.Sequence,items:{}},r=this.findParentSchema(e);return r&&(Object.assign(t,r),t.items=Object.assign({},t.items,r.items)),t}create(e,t){let r=this.items.get(e)||this.createDefault(e),i=[];for(let e in r.items){let n,o=r.items[e],a=t?e:"";if("number"==typeof o.type){let e=ta[o.type],t=tc[e];if(!t)throw Error(`Cannot get ASN1 class by name '${e}'`);n=new t({name:a})}else tl(o.type)?n=new o.type().toSchema(a):o.optional?this.get(o.type).type===to.Choice?n=new tc.Any({name:a}):(n=this.create(o.type,!1)).name=a:n=new tc.Any({name:a});let s=!!o.optional||void 0!==o.defaultValue;if(o.repeated&&(n.name="",n=new("set"===o.repeated?tc.Set:tc.Sequence)({name:"",value:[new tc.Repeated({name:a,value:n})]})),null!==o.context&&void 0!==o.context)if(o.implicit)if("number"==typeof o.type||tl(o.type)){let e=o.repeated?tc.Constructed:tc.Primitive;i.push(new e({name:a,optional:s,idBlock:{tagClass:3,tagNumber:o.context}}))}else{this.cache(o.type);let e=!!o.repeated,t=e?n:this.get(o.type,!0).schema;t="valueBlock"in t?t.valueBlock.value:t.value,i.push(new tc.Constructed({name:e?"":a,optional:s,idBlock:{tagClass:3,tagNumber:o.context},value:t}))}else i.push(new tc.Constructed({optional:s,idBlock:{tagClass:3,tagNumber:o.context},value:[n]}));else n.optional=s,i.push(n)}switch(r.type){case to.Sequence:return new tc.Sequence({value:i,name:""});case to.Set:return new tc.Set({value:i,name:""});case to.Choice:return new tc.Choice({value:i,name:""});default:throw Error("Unsupported ASN1 type in use")}}set(e,t){return this.items.set(e,t),this}findParentSchema(e){let t=Object.getPrototypeOf(e);return t?this.items.get(t)||this.findParentSchema(t):null}},td=e=>t=>{let r;tu.has(t)?r=tu.get(t):(r=tu.createDefault(t),tu.set(t,r)),Object.assign(r,e)},tp=e=>(t,r)=>{let i;tu.has(t.constructor)?i=tu.get(t.constructor):(i=tu.createDefault(t.constructor),tu.set(t.constructor,i));let n=Object.assign({},e);if("number"==typeof n.type&&!n.converter){let i=e7(e.type);if(!i)throw Error(`Cannot get default converter for property '${r}' of ${t.constructor.name}`);n.converter=i}n.raw=e.raw,i.items[r]=n};class tf extends Error{constructor(){super(...arguments),this.schemas=[]}}class th{static parse(e,t){let r=tc.fromBER(e);if(r.result.error)throw Error(r.result.error);return this.fromASN(r.result,t)}static fromASN(e,t){try{if(tl(t))return new t().fromASN(e);let r=tu.get(t);tu.cache(t);let i=r.schema,n=this.handleChoiceTypes(e,r,t,i);if(null==n?void 0:n.result)return n.result;(null==n?void 0:n.targetSchema)&&(i=n.targetSchema);let o=this.handleSequenceTypes(e,r,t,i),a=new t;if(function e(t){var r;if(t){let i=Object.getPrototypeOf(t);return(null==(r=null==i?void 0:i.prototype)?void 0:r.constructor)===Array||e(i)}return!1}(t))return this.handleArrayTypes(e,r,t);return this.processSchemaItems(r,o,a),a}catch(e){throw e instanceof tf&&e.schemas.push(t.name),e}}static handleChoiceTypes(e,t,r,i){if(e.constructor===tc.Constructed&&t.type===to.Choice&&3===e.idBlock.tagClass)for(let i in t.items){let n=t.items[i];if(n.context===e.idBlock.tagNumber&&n.implicit&&"function"==typeof n.type&&tu.has(n.type)){let t=tu.get(n.type);if(t&&t.type===to.Sequence){let t=new tc.Sequence;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in t.valueBlock){t.valueBlock.value=e.valueBlock.value;let o=this.fromASN(t,n.type),a=new r;return a[i]=o,{result:a}}}}}else if(e.constructor===tc.Constructed&&t.type!==to.Choice){let r=new tc.Constructed({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:t.schema.valueBlock.value});for(let r in t.items)delete e[r];return{targetSchema:r}}return null}static handleSequenceTypes(e,t,r,i){if(t.type===to.Sequence){let t=tc.compareSchema({},e,i);if(!t.verified)throw new tf(`Data does not match to ${r.name} ASN1 schema.${t.result.error?` ${t.result.error}`:""}`);return t}{let t=tc.compareSchema({},e,i);if(!t.verified)throw new tf(`Data does not match to ${r.name} ASN1 schema.${t.result.error?` ${t.result.error}`:""}`);return t}}static processRepeatedField(e,t,r){let i=e.slice(t);if(1===i.length&&"Sequence"===i[0].constructor.name){let e=i[0];e.valueBlock&&e.valueBlock.value&&Array.isArray(e.valueBlock.value)&&(i=e.valueBlock.value)}if("number"!=typeof r.type)return i.filter(e=>e&&e.valueBlock).map(e=>{try{return this.fromASN(e,r.type)}catch{return}}).filter(e=>void 0!==e);{let e=e7(r.type);if(!e)throw Error(`No converter for ASN.1 type ${r.type}`);return i.filter(e=>e&&e.valueBlock).map(t=>{try{return e.fromASN(t)}catch{return}}).filter(e=>void 0!==e)}}static processPrimitiveField(e,t){let r=e7(t.type);if(!r)throw Error(`No converter for ASN.1 type ${t.type}`);return r.fromASN(e)}static isOptionalChoiceField(e){return e.optional&&"function"==typeof e.type&&tu.has(e.type)&&tu.get(e.type).type===to.Choice}static processOptionalChoiceField(e,t){try{let r=this.fromASN(e,t.type);return{processed:!0,value:r}}catch(e){if(e instanceof tf&&/Wrong values for Choice type/.test(e.message))return{processed:!1};throw e}}static handleArrayTypes(e,t,r){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let i=t.itemType;if("number"!=typeof i)return r.from(e.valueBlock.value,e=>this.fromASN(e,i));{let t=e7(i);if(!t)throw Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);return r.from(e.valueBlock.value,e=>t.fromASN(e))}}static processSchemaItems(e,t,r){for(let i in e.items){let n,o=t.result[i];if(!o)continue;let a=e.items[i],s=a.type;(n="number"==typeof s||tl(s)?this.processPrimitiveSchemaItem(o,a,s):this.processComplexSchemaItem(o,a,s))&&"object"==typeof n&&"value"in n&&"raw"in n?(r[i]=n.value,r[`${i}Raw`]=n.raw):r[i]=n}}static processPrimitiveSchemaItem(e,t,r){var i;let n=null!=(i=t.converter)?i:tl(r)?new r:null;if(!n)throw Error("Converter is empty");return t.repeated?this.processRepeatedPrimitiveItem(e,t,n):this.processSinglePrimitiveItem(e,t,r,n)}static processRepeatedPrimitiveItem(e,t,r){if(!t.implicit)return Array.from(e,e=>r.fromASN(e));{let i=new("sequence"===t.repeated?tc.Sequence:tc.Set);i.valueBlock=e.valueBlock;let n=tc.fromBER(i.toBER(!1));if(-1===n.offset)throw Error(`Cannot parse the child item. ${n.result.error}`);if(!("value"in n.result.valueBlock&&Array.isArray(n.result.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");return Array.from(n.result.valueBlock.value,e=>r.fromASN(e))}}static processSinglePrimitiveItem(e,t,r,i){let n=e;if(t.implicit){let e;if(tl(r))e=new r().toSchema("");else{let t=ta[r],i=tc[t];if(!i)throw Error(`Cannot get '${t}' class from asn1js module`);e=new i}e.valueBlock=n.valueBlock,n=tc.fromBER(e.toBER(!1)).result}return i.fromASN(n)}static processComplexSchemaItem(e,t,r){if(t.repeated){if(!Array.isArray(e))throw Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");return Array.from(e,e=>this.fromASN(e,r))}{let i=this.handleImplicitTagging(e,t,r);if(this.isOptionalChoiceField(t))try{return this.fromASN(i,r)}catch(e){if(e instanceof tf&&/Wrong values for Choice type/.test(e.message))return;throw e}{let n=this.fromASN(i,r);return t.raw?{value:n,raw:e.valueBeforeDecodeView}:n}}}static handleImplicitTagging(e,t,r){if(t.implicit&&"number"==typeof t.context){let t=tu.get(r);if(t.type===to.Sequence){let t=new tc.Sequence;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in t.valueBlock)return t.valueBlock.value=e.valueBlock.value,t}else if(t.type===to.Set){let t=new tc.Set;if("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)&&"value"in t.valueBlock)return t.valueBlock.value=e.valueBlock.value,t}}return e}}class ty{static serialize(e){return e instanceof K?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){let t;if(e&&"object"==typeof e&&tl(e))return e.toASN();if(!(e&&"object"==typeof e))throw TypeError("Parameter 1 should be type of Object.");let r=e.constructor,i=tu.get(r);tu.cache(r);let n=[];if(i.itemType){if(!Array.isArray(e))throw TypeError("Parameter 1 should be type of Array.");if("number"==typeof i.itemType){let t=e7(i.itemType);if(!t)throw Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);n=e.map(e=>t.toASN(e))}else n=e.map(e=>this.toAsnItem({type:i.itemType},"[]",r,e))}else for(let t in i.items){let o=i.items[t],a=e[t];if(void 0===a||o.defaultValue===a||"object"==typeof o.defaultValue&&"object"==typeof a&&function(e,t){if(!(e&&t)||e.byteLength!==t.byteLength)return!1;let r=new Uint8Array(e),i=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==i[t])return!1;return!0}(this.serialize(o.defaultValue),this.serialize(a)))continue;let s=ty.toAsnItem(o,t,r,a);if("number"==typeof o.context)if(o.implicit)if(!o.repeated&&("number"==typeof o.type||tl(o.type))){let e={};e.valueHex=s instanceof L?s.valueBeforeDecodeView:s.valueBlock.toBER(),n.push(new U({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},...e}))}else n.push(new W({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:s.valueBlock.value}));else n.push(new W({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:[s]}));else o.repeated?n=n.concat(s):n.push(s)}switch(i.type){case to.Sequence:t=new es({value:n});break;case to.Set:t=new ec({value:n});break;case to.Choice:if(!n[0])throw Error(`Schema '${r.name}' has wrong data. Choice cannot be empty.`);t=n[0]}return t}static toAsnItem(e,t,r,i){let n;if("number"==typeof e.type){let o=e.converter;if(!o)throw Error(`Property '${t}' doesn't have converter for type ${ta[e.type]} in schema '${r.name}'`);if(e.repeated){if(!Array.isArray(i))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(i,e=>o.toASN(e));n=new("sequence"===e.repeated?es:ec)({value:t})}else n=o.toASN(i)}else if(e.repeated){if(!Array.isArray(i))throw TypeError("Parameter 'objProp' should be type of Array.");let t=Array.from(i,e=>this.toASN(e));n=new("sequence"===e.repeated?es:ec)({value:t})}else n=this.toASN(i);return n}}class tg{static serialize(e){return ty.serialize(e)}static parse(e,t){return th.parse(e,t)}static toString(e){let r=D(t.isBufferSource(e)?t.toArrayBuffer(e):tg.serialize(e));if(-1===r.offset)throw Error(`Cannot decode ASN.1 data. ${r.result.error}`);return r.result.toString()}}function tm(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}"function"==typeof SuppressedError&&SuppressedError;class tv extends Error{constructor(e,t){super(t?`${e}. See the inner exception for more details.`:e),this.message=e,this.innerError=t}}class tw extends tv{constructor(e,t,r){super(t,r),this.schema=e}}class tb extends tw{constructor(e,t,r){super(e,`JSON doesn't match to '${e.target.name}' schema. ${t}`,r)}}class t_ extends tv{}class tS extends tv{constructor(e,t,r){super(`Cannot serialize by '${e}' schema. ${t}`,r),this.schemaName=e}}class tA extends tb{constructor(e,t,r={}){super(e,"Some keys doesn't match to schema"),this.keys=t,this.errors=r}}function tE(e,t){if(!function(e,t){switch(t){case ts.Boolean:return"boolean"==typeof e;case ts.Number:return"number"==typeof e;case ts.String:return"string"==typeof e}return!0}(e,t))throw TypeError(`Value must be ${ts[t]}`)}function tO(e){return e&&e.prototype?!!e.prototype.toJSON&&!!e.prototype.fromJSON||tO(e.prototype):!!(e&&e.toJSON&&e.fromJSON)}(te=ts||(ts={}))[te.Any=0]="Any",te[te.Boolean=1]="Boolean",te[te.Number=2]="Number",te[te.String=3]="String";let tk="default",tP=new class{constructor(){this.items=new Map}has(e){return this.items.has(e)||!!this.findParentSchema(e)}get(e){let t=this.items.get(e)||this.findParentSchema(e);if(!t)throw Error("Cannot get schema for current target");return t}create(e){let t={names:{}},r=this.findParentSchema(e);if(r)for(let e in Object.assign(t,r),t.names={},r.names)t.names[e]=Object.assign({},r.names[e]);return t.target=e,t}set(e,t){return this.items.set(e,t),this}findParentSchema(e){let t=e.__proto__;return t?this.items.get(t)||this.findParentSchema(t):null}};class tj{constructor(e){this.pattern=new RegExp(e)}validate(e){let t=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof e)throw new t_("Incoming value must be string");if(!t.exec(e))throw new t_(`Value doesn't match to pattern '${t.toString()}'`)}}class tC{constructor(e=5e-324,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(tE(e,ts.Number),!(this.min<=e&&e<=this.max)){let e=5e-324===this.min?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new t_(`Value doesn't match to diapason [${e},${t}]`)}}}class tI{constructor(e=5e-324,t=Number.MAX_VALUE){this.min=e,this.max=t}validate(e){if(tE(e,ts.Number),!(this.min<e&&e<this.max)){let e=5e-324===this.min?"MIN":this.min,t=this.max===Number.MAX_VALUE?"MAX":this.max;throw new t_(`Value doesn't match to diapason (${e},${t})`)}}}class tx{constructor(e,t,r){this.length=e,this.minLength=t,this.maxLength=r}validate(e){if(void 0!==this.length){if(e.length!==this.length)throw new t_(`Value length must be exactly ${this.length}.`);return}if(void 0!==this.minLength&&e.length<this.minLength)throw new t_(`Value length must be more than ${this.minLength}.`);if(void 0!==this.maxLength&&e.length>this.maxLength)throw new t_(`Value length must be less than ${this.maxLength}.`)}}class tR{constructor(e){this.enumeration=e}validate(e){if(tE(e,ts.String),!this.enumeration.includes(e))throw new t_(`Value must be one of ${this.enumeration.map(e=>`'${e}'`).join(", ")}`)}}class tB{static checkValues(e,t){for(let r of Array.isArray(e)?e:[e])for(let i of t.validations)i instanceof tx&&t.repeated?i.validate(e):i.validate(r)}static checkTypes(e,t){if(t.repeated&&!Array.isArray(e))throw TypeError("Value must be Array");if("number"==typeof t.type)for(let r of Array.isArray(e)?e:[e])tE(r,t.type)}static getSchemaByName(e,t=tk){return{...e.names[tk],...e.names[t]}}}class tK extends tB{static serialize(e,t,r,i){return JSON.stringify(this.toJSON(e,t),r,i)}static toJSON(e,t={}){let r,i=t.targetSchema,n=t.schemaName||tk;if(tO(e))return e.toJSON();if(Array.isArray(e))for(let i of(r=[],e))r.push(this.toJSON(i,t));else if("object"==typeof e){if(i&&!tP.has(i))throw new tv("Cannot get schema for `targetSchema` param");if(i=i||e.constructor,tP.has(i)){let t=tP.get(i);r={};let o=this.getSchemaByName(t,n);for(let a in o)try{let t,s=o[a],c=e[a];if(s.optional&&void 0===c||void 0!==s.defaultValue&&c===s.defaultValue)continue;if(!s.optional&&void 0===c)throw new tS(i.name,`Property '${a}' is required.`);t="number"==typeof s.type?s.converter?s.repeated?c.map(t=>s.converter.toJSON(t,e)):s.converter.toJSON(c,e):c:s.repeated?c.map(e=>this.toJSON(e,{schemaName:n})):this.toJSON(c,{schemaName:n}),this.checkTypes(t,s),this.checkValues(t,s),r[s.name||a]=t}catch(e){if(e instanceof tS)throw e;throw new tS(t.target.name,`Property '${a}' is wrong. ${e.message}`,e)}}else for(let t in r={},e)r[t]=this.toJSON(e[t],{schemaName:n})}else r=e;return r}}class tT extends tB{static parse(e,t){let r=JSON.parse(e);return this.fromJSON(r,t)}static fromJSON(e,t){let r=t.targetSchema,i=t.schemaName||tk,n=new r;if(tO(n))return n.fromJSON(e);let o=tP.get(r),a=this.getSchemaByName(o,i),s={};for(let r in t.strictProperty&&!Array.isArray(e)&&tT.checkStrictProperty(e,a,o),a)try{let s=a[r],c=s.name||r,l=e[c];if(void 0===l&&(s.optional||void 0!==s.defaultValue))continue;if(!s.optional&&void 0===l)throw new tb(o,`Property '${c}' is required.`);if(this.checkTypes(l,s),this.checkValues(l,s),"number"==typeof s.type)s.converter?s.repeated?n[r]=l.map(e=>s.converter.fromJSON(e,n)):n[r]=s.converter.fromJSON(l,n):n[r]=l;else{let e={...t,targetSchema:s.type,schemaName:i};s.repeated?n[r]=l.map(t=>this.fromJSON(t,e)):n[r]=this.fromJSON(l,e)}}catch(e){if(e instanceof tb||(e=new tb(o,`Property '${r}' is wrong. ${e.message}`,e)),t.strictAllKeys)s[r]=e;else throw e}let c=Object.keys(s);if(c.length)throw new tA(o,c,s);return n}static checkStrictProperty(e,t,r){let i=Object.keys(e),n=Object.keys(t),o=[];for(let e of i)-1===n.indexOf(e)&&o.push(e);if(o.length)throw new tA(r,o)}}let tM=(e={})=>(t,r)=>{let i,n,o=`Cannot set type for ${r} property of ${t.constructor.name} schema`;tP.has(t.constructor)?(i=tP.get(t.constructor)).target!==t.constructor&&(i=tP.create(t.constructor),tP.set(t.constructor,i)):(i=tP.create(t.constructor),tP.set(t.constructor,i));let a=Object.assign({type:ts.Any,validations:[]},e);if(n=[],a.pattern&&n.push(new tj(a.pattern)),(a.type===ts.Number||a.type===ts.Any)&&((void 0!==a.minInclusive||void 0!==a.maxInclusive)&&n.push(new tC(a.minInclusive,a.maxInclusive)),(void 0!==a.minExclusive||void 0!==a.maxExclusive)&&n.push(new tI(a.minExclusive,a.maxExclusive)),void 0!==a.enumeration&&n.push(new tR(a.enumeration))),(a.type===ts.String||a.repeated||a.type===ts.Any)&&(void 0!==a.length||void 0!==a.minLength||void 0!==a.maxLength)&&n.push(new tx(a.length,a.minLength,a.maxLength)),a.validations=n,"number"!=typeof a.type&&!tP.has(a.type)&&!tO(a.type))throw Error(`${o}. Assigning type doesn't have schema.`);for(let t of Array.isArray(e.schema)?e.schema:[e.schema||tk])i.names[t]||(i.names[t]={}),i.names[t][r]=a};class tU extends Error{}class tN extends tU{}class tD extends tU{constructor(e){super(`Unsupported operation: ${e?`${e}`:""}`)}}class tz extends tU{}class tW extends tU{constructor(e){super(`${e}: Missing required property`)}}class tH{static toArrayBuffer(e){let t=e.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return c.FromBase64(t)}static toUint8Array(e){return new Uint8Array(this.toArrayBuffer(e))}static fromBufferSource(e,t){let r,i=c.ToBase64(e),n=0,o=[];for(;n<i.length&&(r=i.slice(n,n+64)).length;)o.push(r),n+=64;let a=t.toUpperCase();return`-----BEGIN ${a}-----
${o.join("\n")}
-----END ${a}-----`}static isPEM(e){return/-----BEGIN .+-----[A-Za-z0-9+/+=\s\n]+-----END .+-----/i.test(e)}static getTagName(e){if(!this.isPEM(e))throw Error("Bad parameter. Incoming data is not right PEM");let t=/-----BEGIN (.+)-----/.exec(e);if(!t)throw Error("Cannot get tag from PEM");return t[1]}static hasTagName(e,t){let r=this.getTagName(e);return t.toLowerCase()===r.toLowerCase()}static isCertificate(e){return this.hasTagName(e,"certificate")}static isCertificateRequest(e){return this.hasTagName(e,"certificate request")}static isCRL(e){return this.hasTagName(e,"x509 crl")}static isPublicKey(e){return this.hasTagName(e,"public key")}}class tJ{async digest(...e){return this.checkDigest.apply(this,e),this.onDigest.apply(this,e)}checkDigest(e,t){this.checkAlgorithmName(e)}async onDigest(e,t){throw new tD("digest")}async generateKey(...e){return this.checkGenerateKey.apply(this,e),this.onGenerateKey.apply(this,e)}checkGenerateKey(e,t,r){let i;if(this.checkAlgorithmName(e),this.checkGenerateKeyParams(e),!(r&&r.length))throw TypeError("Usages cannot be empty when creating a key.");i=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(r,i)}checkGenerateKeyParams(e){}async onGenerateKey(e,t,r){throw new tD("generateKey")}async sign(...e){return this.checkSign.apply(this,e),this.onSign.apply(this,e)}checkSign(e,t,r){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"sign")}async onSign(e,t,r){throw new tD("sign")}async verify(...e){return this.checkVerify.apply(this,e),this.onVerify.apply(this,e)}checkVerify(e,t,r,i){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,"verify")}async onVerify(e,t,r,i){throw new tD("verify")}async encrypt(...e){return this.checkEncrypt.apply(this,e),this.onEncrypt.apply(this,e)}checkEncrypt(e,t,r,i={}){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,i.keyUsage?"encrypt":void 0)}async onEncrypt(e,t,r){throw new tD("encrypt")}async decrypt(...e){return this.checkDecrypt.apply(this,e),this.onDecrypt.apply(this,e)}checkDecrypt(e,t,r,i={}){this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,i.keyUsage?"decrypt":void 0)}async onDecrypt(e,t,r){throw new tD("decrypt")}async deriveBits(...e){return this.checkDeriveBits.apply(this,e),this.onDeriveBits.apply(this,e)}checkDeriveBits(e,t,r,i={}){if(this.checkAlgorithmName(e),this.checkAlgorithmParams(e),this.checkCryptoKey(t,i.keyUsage?"deriveBits":void 0),r%8!=0)throw new tz("length: Is not multiple of 8")}async onDeriveBits(e,t,r){throw new tD("deriveBits")}async exportKey(...e){return this.checkExportKey.apply(this,e),this.onExportKey.apply(this,e)}checkExportKey(e,t){if(this.checkKeyFormat(e),this.checkCryptoKey(t),!t.extractable)throw new tU("key: Is not extractable")}async onExportKey(e,t){throw new tD("exportKey")}async importKey(...e){return this.checkImportKey.apply(this,e),this.onImportKey.apply(this,e)}checkImportKey(e,t,r,i,n){this.checkKeyFormat(e),this.checkKeyData(e,t),this.checkAlgorithmName(r),this.checkImportParams(r),Array.isArray(this.usages)&&this.checkKeyUsages(n,this.usages)}async onImportKey(e,t,r,i,n){throw new tD("importKey")}checkAlgorithmName(e){if(e.name.toLowerCase()!==this.name.toLowerCase())throw new tN("Unrecognized name")}checkAlgorithmParams(e){}checkDerivedKeyParams(e){}checkKeyUsages(e,t){for(let r of e)if(-1===t.indexOf(r))throw TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(e,t){if(this.checkAlgorithmName(e.algorithm),t&&-1===e.usages.indexOf(t))throw new tU("key does not match that of operation")}checkRequiredProperty(e,t){if(!(t in e))throw new tW(t)}checkHashAlgorithm(e,t){for(let r of t)if(r.toLowerCase()===e.name.toLowerCase())return;throw new tz(`hash: Must be one of ${t.join(", ")}`)}checkImportParams(e){}checkKeyFormat(e){switch(e){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(e,r){if(!r)throw TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===e){if(!("object"==typeof r&&"kty"in r))throw TypeError("keyData: Is not JsonWebToken")}else if(!t.isBufferSource(r))throw TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(e){return t.toArrayBuffer(e)}}class tL extends tJ{checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not of type Number");switch(e.length){case 128:case 192:case 256:break;default:throw TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class t$ extends tL{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.iv.byteLength)throw TypeError("iv: Must have length 16 bytes")}}class tF extends tL{constructor(){super(...arguments),this.name="AES-CMAC",this.usages=["sign","verify"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw new tz("length: Must be more than 0")}}class tV extends tL{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"counter"),!(e.counter instanceof ArrayBuffer||ArrayBuffer.isView(e.counter)))throw TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==e.counter.byteLength)throw TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw new tz("length: Must be more than 0")}}class tG extends tL{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}}class tq extends tL{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength<1)throw new tz("iv: Must have length more than 0 and less than 2^64 - 1");switch(null!=e.tagLength||(e.tagLength=128),e.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new tz("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}}class tX extends tL{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}}class tY extends tJ{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(e){if(this.ivSize){if(this.checkRequiredProperty(e,"iv"),!(e.iv instanceof ArrayBuffer||ArrayBuffer.isView(e.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(e.iv.byteLength!==this.ivSize)throw TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"length"),"number"!=typeof e.length)throw TypeError("length: Is not of type Number");if(e.length!==this.keySizeBits)throw new tz(`algorithm.length: Must be ${this.keySizeBits}`)}checkDerivedKeyParams(e){this.checkGenerateKeyParams(e)}}class tQ extends tJ{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let t=c.ToBase64(e.publicExponent);if("Aw=="!==t&&"AQAB"!==t)throw TypeError("publicExponent: Must be [3] or [1,0,1]");if(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength%8||e.modulusLength<256||e.modulusLength>16384)throw TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class tZ extends tQ{constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class t0 extends tQ{constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"saltLength"),"number"!=typeof e.saltLength)throw TypeError("saltLength: Is not a Number");if(e.saltLength<0)throw RangeError("saltLength: Must be positive number")}}class t1 extends tQ{constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(e){if(e.label&&!(e.label instanceof ArrayBuffer||ArrayBuffer.isView(e.label)))throw TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}}class t2 extends tJ{checkGenerateKeyParams(e){this.checkRequiredProperty(e,"namedCurve"),this.checkNamedCurve(e.namedCurve)}checkNamedCurve(e){for(let t of this.namedCurves)if(t.toLowerCase()===e.toLowerCase())return;throw new tz(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}}class t8 extends t2{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}let t6=["secret","private","public"];class t5{static create(e,t,r,i){let n=new this;return n.algorithm=e,n.type=t,n.extractable=r,n.usages=i,n}static isKeyType(e){return -1!==t6.indexOf(e)}get[Symbol.toStringTag](){return"CryptoKey"}}class t3 extends t2{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"public"),!(e.public instanceof t5))throw TypeError("public: Is not a CryptoKey");if("public"!==e.public.type)throw new tz("public: Is not a public key");if(e.public.algorithm.name!==this.name)throw new tz(`public: Is not ${this.name} key`)}}class t4 extends t3{constructor(){super(...arguments),this.name="ECDH-ES",this.namedCurves=["X25519","X448"]}}class t9 extends t2{constructor(){super(...arguments),this.name="EdDSA",this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["Ed25519","Ed448"]}}let t7=class{constructor(e){e&&(this.value=e)}};tm([tp({type:ta.ObjectIdentifier})],t7.prototype,"value",void 0),t7=tm([td({type:to.Choice})],t7);class re{constructor(e){Object.assign(this,e)}}tm([tp({type:ta.ObjectIdentifier})],re.prototype,"algorithm",void 0),tm([tp({type:ta.Any,optional:!0})],re.prototype,"parameters",void 0);class rt{constructor(){this.version=0,this.privateKeyAlgorithm=new re,this.privateKey=new ArrayBuffer(0)}}tm([tp({type:ta.Integer})],rt.prototype,"version",void 0),tm([tp({type:re})],rt.prototype,"privateKeyAlgorithm",void 0),tm([tp({type:ta.OctetString})],rt.prototype,"privateKey",void 0),tm([tp({type:ta.Any,optional:!0})],rt.prototype,"attributes",void 0);class rr{constructor(){this.publicKeyAlgorithm=new re,this.publicKey=new ArrayBuffer(0)}}tm([tp({type:re})],rr.prototype,"publicKeyAlgorithm",void 0),tm([tp({type:ta.BitString})],rr.prototype,"publicKey",void 0);let ri={fromJSON:e=>c.FromBase64Url(e),toJSON:e=>c.ToBase64Url(new Uint8Array(e))},rn={fromASN:e=>new Uint8Array(e.valueBlock.valueHex)[0]?e.valueBlock.valueHex:e.valueBlock.valueHex.slice(1),toASN:e=>new Z({valueHex:new Uint8Array(e)[0]>127?l(new Uint8Array([0]).buffer,e):e})};class ro{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}}tm([tp({type:ta.Integer,converter:eW})],ro.prototype,"version",void 0),tm([tp({type:ta.Integer,converter:rn}),tM({name:"n",converter:ri})],ro.prototype,"modulus",void 0),tm([tp({type:ta.Integer,converter:rn}),tM({name:"e",converter:ri})],ro.prototype,"publicExponent",void 0),tm([tp({type:ta.Integer,converter:rn}),tM({name:"d",converter:ri})],ro.prototype,"privateExponent",void 0),tm([tp({type:ta.Integer,converter:rn}),tM({name:"p",converter:ri})],ro.prototype,"prime1",void 0),tm([tp({type:ta.Integer,converter:rn}),tM({name:"q",converter:ri})],ro.prototype,"prime2",void 0),tm([tp({type:ta.Integer,converter:rn}),tM({name:"dp",converter:ri})],ro.prototype,"exponent1",void 0),tm([tp({type:ta.Integer,converter:rn}),tM({name:"dq",converter:ri})],ro.prototype,"exponent2",void 0),tm([tp({type:ta.Integer,converter:rn}),tM({name:"qi",converter:ri})],ro.prototype,"coefficient",void 0),tm([tp({type:ta.Any,optional:!0})],ro.prototype,"otherPrimeInfos",void 0);class ra{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}}tm([tp({type:ta.Integer,converter:rn}),tM({name:"n",converter:ri})],ra.prototype,"modulus",void 0),tm([tp({type:ta.Integer,converter:rn}),tM({name:"e",converter:ri})],ra.prototype,"publicExponent",void 0);let rs=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){let e=new Uint8Array(this.value);if(4!==e[0])throw new tU("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");let t=(e=new Uint8Array(this.value.slice(1))).length/2;return{x:c.ToBase64Url(e.buffer.slice(0,0+t)),y:c.ToBase64Url(e.buffer.slice(0+t,0+t+t))}}fromJSON(e){if(!("x"in e))throw Error("x: Missing required property");if(!("y"in e))throw Error("y: Missing required property");let t=c.FromBase64Url(e.x),r=c.FromBase64Url(e.y),i=l(new Uint8Array([4]).buffer,t,r);return this.value=new Uint8Array(i).buffer,this}};tm([tp({type:ta.OctetString})],rs.prototype,"value",void 0),rs=tm([td({type:to.Choice})],rs);class rc{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(e){if(!("d"in e))throw Error("d: Missing required property");if(this.privateKey=c.FromBase64Url(e.d),"x"in e){let t=new rs;t.fromJSON(e);let r=ty.toASN(t);"valueHex"in r.valueBlock&&(this.publicKey=r.valueBlock.valueHex)}return this}toJSON(){let e={};return e.d=c.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(e,new rs(this.publicKey).toJSON()),e}}tm([tp({type:ta.Integer,converter:eW})],rc.prototype,"version",void 0),tm([tp({type:ta.OctetString})],rc.prototype,"privateKey",void 0),tm([tp({context:0,type:ta.Any,optional:!0})],rc.prototype,"parameters",void 0),tm([tp({context:1,type:ta.BitString,optional:!0})],rc.prototype,"publicKey",void 0);let rl={fromASN:e=>{let t=new Uint8Array(e.valueBlock.valueHex);return 0===t[0]?t.buffer.slice(1):t.buffer},toASN:e=>{let t=new Uint8Array(e);if(t[0]>127){let e=new Uint8Array(t.length+1);return e.set(t,1),new Z({valueHex:e.buffer})}return new Z({valueHex:e})}};var ru=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:rl});class rd{static decodePoint(e,r){let i=t.toUint8Array(e);if(0===i.length||4!==i[0])throw Error("Only uncompressed point format supported");let n=(i.length-1)/2;if(n!==Math.ceil(r/8))throw Error("Point does not match field size");return{x:i.slice(1,n+1),y:i.slice(n+1,n+1+n)}}static encodePoint(e,r){let i=Math.ceil(r/8);if(e.x.byteLength!==i||e.y.byteLength!==i)throw Error("X,Y coordinates don't match point size criteria");let n=t.toUint8Array(e.x),o=t.toUint8Array(e.y),a=new Uint8Array(2*i+1);return a[0]=4,a.set(n,1),a.set(o,i+1),a}static getSize(e){return Math.ceil(e/8)}static encodeSignature(e,r){let i=this.getSize(r),n=t.toUint8Array(e.r),o=t.toUint8Array(e.s),a=new Uint8Array(2*i);return a.set(this.padStart(n,i)),a.set(this.padStart(o,i),i),a}static decodeSignature(e,r){let i=this.getSize(r),n=t.toUint8Array(e);if(n.length!==2*i)throw Error("Incorrect size of the signature");let o=n.slice(0,i),a=n.slice(i);return{r:this.trimStart(o),s:this.trimStart(a)}}static trimStart(e){let t=0;for(;t<e.length-1&&0===e[t];)t++;return 0===t?e:e.slice(t,e.length)}static padStart(e,t){if(t===e.length)return e;let r=new Uint8Array(t);return r.set(e,t-e.length),r}}class rp{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(e){let r=e.byteLength/2,i=rd.decodeSignature(e,8*r),n=new rp;return n.r=t.toArrayBuffer(i.r),n.s=t.toArrayBuffer(i.s),n}toWebCryptoSignature(e){if(!e){let t=Math.max(this.r.byteLength,this.s.byteLength);e=t<=32?256:t<=48?384:521}return rd.encodeSignature(this,e).buffer}}tm([tp({type:ta.Integer,converter:rl})],rp.prototype,"r",void 0),tm([tp({type:ta.Integer,converter:rl})],rp.prototype,"s",void 0);class rf extends rt{}tm([tp({context:1,implicit:!0,type:ta.BitString,optional:!0})],rf.prototype,"publicKey",void 0);let rh=class{constructor(){this.value=new ArrayBuffer(0)}fromJSON(e){if(!e.d)throw Error("d: Missing required property");return this.value=c.FromBase64Url(e.d),this}toJSON(){return{d:c.ToBase64Url(this.value)}}};tm([tp({type:ta.OctetString})],rh.prototype,"value",void 0),rh=tm([td({type:to.Choice})],rh);let ry=class{constructor(e){this.value=new ArrayBuffer(0),e&&(this.value=e)}toJSON(){return{x:c.ToBase64Url(this.value)}}fromJSON(e){if(!("x"in e))throw Error("x: Missing required property");return this.value=c.FromBase64Url(e.x),this}};tm([tp({type:ta.BitString})],ry.prototype,"value",void 0),ry=tm([td({type:to.Choice})],ry);let rg=class{};tm([tp({type:ta.OctetString}),tM({type:ts.String,converter:ri})],rg.prototype,"d",void 0),rg=tm([td({type:to.Choice})],rg);let rm="1.2.840.10045.3.1.7",rv="1.3.132.0",rw=`${rv}.34`,rb=`${rv}.35`,r_=`${rv}.10`,rS="1.3.36.3.3.2.8.1.1",rA=`${rS}.1`,rE=`${rS}.2`,rO=`${rS}.3`,rk=`${rS}.4`,rP=`${rS}.5`,rj=`${rS}.6`,rC=`${rS}.7`,rI=`${rS}.8`,rx=`${rS}.9`,rR=`${rS}.10`,rB=`${rS}.11`,rK=`${rS}.12`,rT=`${rS}.13`,rM=`${rS}.14`;var rU=Object.freeze({__proto__:null,AlgorithmIdentifier:re,get CurvePrivateKey(){return rg},EcDsaSignature:rp,EcPrivateKey:rc,get EcPublicKey(){return rs},get EdPrivateKey(){return rh},get EdPublicKey(){return ry},get ObjectIdentifier(){return t7},OneAsymmetricKey:rf,PrivateKeyInfo:rt,PublicKeyInfo:rr,RsaPrivateKey:ro,RsaPublicKey:ra,converters:ru,idBrainpoolP160r1:rA,idBrainpoolP160t1:rE,idBrainpoolP192r1:rO,idBrainpoolP192t1:rk,idBrainpoolP224r1:rP,idBrainpoolP224t1:rj,idBrainpoolP256r1:rC,idBrainpoolP256t1:rI,idBrainpoolP320r1:rx,idBrainpoolP320t1:rR,idBrainpoolP384r1:rB,idBrainpoolP384t1:rK,idBrainpoolP512r1:rT,idBrainpoolP512t1:rM,idEd25519:"1.3.101.112",idEd448:"1.3.101.113",idEllipticCurve:rv,idSecp256k1:r_,idSecp256r1:rm,idSecp384r1:rw,idSecp521r1:rb,idVersionOne:rS,idX25519:"1.3.101.110",idX448:"1.3.101.111"});class rN{static register(e){let t=new t7;t.value=e.id;let r=tg.serialize(t);this.items.push({...e,raw:r}),this.names.push(e.name)}static find(e){for(let t of(e=e.toUpperCase(),this.items))if(t.name.toUpperCase()===e||t.id.toUpperCase()===e)return t;return null}static get(e){let t=this.find(e);if(!t)throw Error(`Unsupported EC named curve '${e}'`);return t}}rN.items=[],rN.names=[],rN.register({name:"P-256",id:rm,size:256}),rN.register({name:"P-384",id:rw,size:384}),rN.register({name:"P-521",id:rb,size:521}),rN.register({name:"K-256",id:r_,size:256}),rN.register({name:"brainpoolP160r1",id:rA,size:160}),rN.register({name:"brainpoolP160t1",id:rE,size:160}),rN.register({name:"brainpoolP192r1",id:rO,size:192}),rN.register({name:"brainpoolP192t1",id:rk,size:192}),rN.register({name:"brainpoolP224r1",id:rP,size:224}),rN.register({name:"brainpoolP224t1",id:rj,size:224}),rN.register({name:"brainpoolP256r1",id:rC,size:256}),rN.register({name:"brainpoolP256t1",id:rI,size:256}),rN.register({name:"brainpoolP320r1",id:rx,size:320}),rN.register({name:"brainpoolP320t1",id:rR,size:320}),rN.register({name:"brainpoolP384r1",id:rB,size:384}),rN.register({name:"brainpoolP384t1",id:rK,size:384}),rN.register({name:"brainpoolP512r1",id:rT,size:512}),rN.register({name:"brainpoolP512t1",id:rM,size:512});class rD extends tJ{constructor(){super(...arguments),this.name="X25519",this.usages={privateKey:["deriveKey","deriveBits"],publicKey:[]}}checkAlgorithmParams(e){this.checkRequiredProperty(e,"public")}}class rz extends tJ{constructor(){super(...arguments),this.name="Ed25519",this.usages={privateKey:["sign"],publicKey:["verify"]}}}class rW extends tJ{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(e){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw Error(`Unknown algorithm name '${e}'`)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),"length"in e){if("number"!=typeof e.length)throw TypeError("length: Is not a Number");if(e.length<1)throw RangeError("length: Number is out of range")}}checkImportParams(e){this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms)}}class rH extends tJ{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!(e.salt instanceof ArrayBuffer||ArrayBuffer.isView(e.salt)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(e,"iterations"),"number"!=typeof e.iterations)throw TypeError("iterations: Is not a Number");if(e.iterations<1)throw TypeError("iterations: Is less than 1")}checkImportKey(e,t,r,i,n,...o){if(super.checkImportKey(e,t,r,i,n,...o),i)throw SyntaxError("extractable: Must be 'false'")}}class rJ extends tJ{constructor(){super(...arguments),this.name="HKDF",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(e){if(this.checkRequiredProperty(e,"hash"),this.checkHashAlgorithm(e.hash,this.hashAlgorithms),this.checkRequiredProperty(e,"salt"),!t.isBufferSource(e.salt)||(this.checkRequiredProperty(e,"info"),!t.isBufferSource(e.info)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}checkImportKey(e,t,r,i,n,...o){if(super.checkImportKey(e,t,r,i,n,...o),i)throw SyntaxError("extractable: Must be 'false'")}}class rL extends tJ{constructor(){super(...arguments),this.usages=[],this.defaultLength=0}digest(...e){return e[0]={length:this.defaultLength,...e[0]},super.digest.apply(this,e)}checkDigest(e,t){super.checkDigest(e,t);let r=e.length||0;if("number"!=typeof r)throw TypeError("length: Is not a Number");if(r<0)throw TypeError("length: Is negative")}}class r$ extends rL{constructor(){super(...arguments),this.name="shake128",this.defaultLength=16}}class rF extends rL{constructor(){super(...arguments),this.name="shake256",this.defaultLength=32}}class rV{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){let e=this.getRandomValues(new Uint8Array(16));e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=c.ToHex(e).toLowerCase();return`${t.substring(0,8)}-${t.substring(8,12)}-${t.substring(12,16)}-${t.substring(16,20)}-${t.substring(20)}`}}class rG{constructor(){this.items={}}get(e){return this.items[e.toLowerCase()]||null}set(e){this.items[e.name.toLowerCase()]=e}removeAt(e){let t=this.get(e.toLowerCase());return t&&delete this.items[e],t}has(e){return!!this.get(e)}get length(){return Object.keys(this.items).length}get algorithms(){let e=[];for(let t in this.items){let r=this.items[t];e.push(r.name)}return e.sort()}}let rq={jwk:["private","public","secret"],pkcs8:["private"],spki:["public"],raw:["secret","public"]},rX=["pkcs8","spki","raw"];class rY{constructor(){this.providers=new rG}static isHashedAlgorithm(e){return!!e&&"object"==typeof e&&"name"in e&&"hash"in e}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...e){this.checkRequiredArguments(e,2,"digest");let[r,i,...n]=e,o=this.prepareAlgorithm(r),a=t.toArrayBuffer(i),s=this.getProvider(o.name);return await s.digest(o,a,...n)}async generateKey(...e){this.checkRequiredArguments(e,3,"generateKey");let[t,r,i,...n]=e,o=this.prepareAlgorithm(t),a=this.getProvider(o.name);return await a.generateKey({...o,name:a.name},r,i,...n)}async sign(...e){this.checkRequiredArguments(e,3,"sign");let[r,i,n,...o]=e;this.checkCryptoKey(i);let a=this.prepareAlgorithm(r),s=t.toArrayBuffer(n),c=this.getProvider(a.name);return await c.sign({...a,name:c.name},i,s,...o)}async verify(...e){this.checkRequiredArguments(e,4,"verify");let[r,i,n,o,...a]=e;this.checkCryptoKey(i);let s=this.prepareAlgorithm(r),c=t.toArrayBuffer(o),l=t.toArrayBuffer(n),u=this.getProvider(s.name);return await u.verify({...s,name:u.name},i,l,c,...a)}async encrypt(...e){this.checkRequiredArguments(e,3,"encrypt");let[r,i,n,...o]=e;this.checkCryptoKey(i);let a=this.prepareAlgorithm(r),s=t.toArrayBuffer(n),c=this.getProvider(a.name);return await c.encrypt({...a,name:c.name},i,s,{keyUsage:!0},...o)}async decrypt(...e){this.checkRequiredArguments(e,3,"decrypt");let[r,i,n,...o]=e;this.checkCryptoKey(i);let a=this.prepareAlgorithm(r),s=t.toArrayBuffer(n),c=this.getProvider(a.name);return await c.decrypt({...a,name:c.name},i,s,{keyUsage:!0},...o)}async deriveBits(...e){this.checkRequiredArguments(e,3,"deriveBits");let[t,r,i,...n]=e;this.checkCryptoKey(r);let o=this.prepareAlgorithm(t),a=this.getProvider(o.name);return await a.deriveBits({...o,name:a.name},r,i,{keyUsage:!0},...n)}async deriveKey(...e){this.checkRequiredArguments(e,5,"deriveKey");let[t,r,i,n,o,...a]=e,s=this.prepareAlgorithm(i);this.getProvider(s.name).checkDerivedKeyParams(s);let c=this.prepareAlgorithm(t),l=this.getProvider(c.name);l.checkCryptoKey(r,"deriveKey");let u=await l.deriveBits({...c,name:l.name},r,i.length||512,{keyUsage:!1},...a);return this.importKey("raw",u,i,n,o,...a)}async exportKey(...e){this.checkRequiredArguments(e,2,"exportKey");let[t,r,...i]=e;if(this.checkCryptoKey(r),!rq[t])throw TypeError("Invalid keyFormat argument");if(!rq[t].includes(r.type))throw new DOMException("The key is not of the expected type");let n=this.getProvider(r.algorithm.name);return await n.exportKey(t,r,...i)}async importKey(...e){this.checkRequiredArguments(e,5,"importKey");let[r,i,n,o,a,...s]=e,c=this.prepareAlgorithm(n),l=this.getProvider(c.name);if("jwk"===r){if("object"!=typeof i||!i.kty)throw TypeError("Key data must be an object for JWK import")}else if(rX.includes(r)){if(!t.isBufferSource(i))throw TypeError("Key data must be a BufferSource for non-JWK formats")}else throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView or JsonWebKey)'");return l.importKey(r,i,{...c,name:l.name},o,a,...s)}async wrapKey(e,r,i,n,...o){let a=await this.exportKey(e,r,...o);if("jwk"===e){let e=JSON.stringify(a);a=c.FromUtf8String(e)}let s=this.prepareAlgorithm(n),l=t.toArrayBuffer(a),u=this.getProvider(s.name);return u.encrypt({...s,name:u.name},i,l,{keyUsage:!1},...o)}async unwrapKey(e,r,i,n,o,a,s,...l){let u=this.prepareAlgorithm(n),d=t.toArrayBuffer(r),p=this.getProvider(u.name),f=await p.decrypt({...u,name:p.name},i,d,{keyUsage:!1},...l);if("jwk"===e)try{f=JSON.parse(c.ToUtf8String(f))}catch(t){let e=TypeError("wrappedKey: Is not a JSON");throw e.internal=t,e}return this.importKey(e,f,o,a,s,...l)}checkRequiredArguments(e,t,r){if(e.length<t)throw TypeError(`Failed to execute '${r}' on 'SubtleCrypto': ${t} arguments required, but only ${e.length} present`)}prepareAlgorithm(e){if("string"==typeof e)return{name:e};if(rY.isHashedAlgorithm(e)){let t={...e};return t.hash=this.prepareAlgorithm(e.hash),t}return{...e}}getProvider(e){let t=this.providers.get(e);if(!t)throw new tN("Unrecognized name");return t}checkCryptoKey(e){if(!(e instanceof t5))throw TypeError("Key is not of type 'CryptoKey'")}}var rQ=e.i(874),rZ=e.i(54799),r0=e.i(5365);let r1={fromJSON:e=>rQ.Buffer.from(c.FromBase64Url(e)),toJSON:e=>c.ToBase64Url(e)};class r2 extends t5{constructor(){super(...arguments),this.data=rQ.Buffer.alloc(0),this.algorithm={name:""},this.extractable=!1,this.type="secret",this.usages=[],this.kty="oct",this.alg=""}}tm([tM({name:"ext",type:ts.Boolean,optional:!0})],r2.prototype,"extractable",void 0),tm([tM({name:"key_ops",type:ts.String,repeated:!0,optional:!0})],r2.prototype,"usages",void 0),tm([tM({type:ts.String})],r2.prototype,"kty",void 0),tm([tM({type:ts.String,optional:!0})],r2.prototype,"alg",void 0);class r8 extends r2{constructor(){super(...arguments),this.kty="oct",this.type="secret"}}class r6 extends r2{}class r5 extends r8{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new tN("Unsupported algorithm name")}}set alg(e){}}tm([tM({name:"k",converter:r1})],r5.prototype,"data",void 0);class r3{static async generateKey(e,t,r){let i=new r5;return i.algorithm=e,i.extractable=t,i.usages=r,i.data=rZ.default.randomBytes(e.length>>3),i}static async exportKey(e,t){if(!(t instanceof r5))throw Error("key: Is not AesCryptoKey");switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new tz("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,i,n){let o;switch(e.toLowerCase()){case"jwk":o=tT.fromJSON(t,{targetSchema:r5});break;case"raw":(o=new r5).data=rQ.Buffer.from(t);break;default:throw new tz("format: Must be 'jwk' or 'raw'")}switch(o.algorithm=r,o.algorithm.length=o.data.length<<3,o.extractable=i,o.usages=n,o.algorithm.length){case 128:case 192:case 256:break;default:throw new tz("keyData: Is wrong key length")}return o}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(e,t,rQ.Buffer.from(r));case"AES-CTR":return this.encryptAesCTR(e,t,rQ.Buffer.from(r));case"AES-GCM":return this.encryptAesGCM(e,t,rQ.Buffer.from(r));case"AES-KW":return this.encryptAesKW(e,t,rQ.Buffer.from(r));case"AES-ECB":return this.encryptAesECB(e,t,rQ.Buffer.from(r));default:throw new tz("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof r5))throw Error("key: Is not AesCryptoKey");switch(e.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(e,t,rQ.Buffer.from(r));case"AES-CTR":return this.decryptAesCTR(e,t,rQ.Buffer.from(r));case"AES-GCM":return this.decryptAesGCM(e,t,rQ.Buffer.from(r));case"AES-KW":return this.decryptAesKW(e,t,rQ.Buffer.from(r));case"AES-ECB":return this.decryptAesECB(e,t,rQ.Buffer.from(r));default:throw new tz("algorithm: Is not recognized")}}static async encryptAesCBC(e,t,r){let i=rZ.default.createCipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async decryptAesCBC(e,t,r){let i=rZ.default.createDecipheriv(`aes-${t.algorithm.length}-cbc`,t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async encryptAesCTR(e,t,r){let i=rZ.default.createCipheriv(`aes-${t.algorithm.length}-ctr`,t.data,rQ.Buffer.from(e.counter)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async decryptAesCTR(e,t,r){let i=rZ.default.createDecipheriv(`aes-${t.algorithm.length}-ctr`,t.data,new Uint8Array(e.counter)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async encryptAesGCM(e,t,r){let i=rZ.default.createCipheriv(`aes-${t.algorithm.length}-gcm`,t.data,rQ.Buffer.from(e.iv),{authTagLength:(e.tagLength||128)>>3});e.additionalData&&i.setAAD(rQ.Buffer.from(e.additionalData));let n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final(),i.getAuthTag()])).buffer}static async decryptAesGCM(e,t,r){let i=(e.tagLength||128)>>3,n=rZ.default.createDecipheriv(`aes-${t.algorithm.length}-gcm`,t.data,new Uint8Array(e.iv),{authTagLength:i}),o=r.slice(0,r.length-i),a=r.slice(r.length-i);e.additionalData&&n.setAAD(rQ.Buffer.from(e.additionalData)),n.setAuthTag(a);let s=n.update(o);return new Uint8Array(s=rQ.Buffer.concat([s,n.final()])).buffer}static async encryptAesKW(e,t,r){let i=rZ.default.createCipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async decryptAesKW(e,t,r){let i=rZ.default.createDecipheriv(`id-aes${t.algorithm.length}-wrap`,t.data,this.AES_KW_IV),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async encryptAesECB(e,t,r){let i=rZ.default.createCipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async decryptAesECB(e,t,r){let i=rZ.default.createDecipheriv(`aes-${t.algorithm.length}-ecb`,t.data,new Uint8Array(0)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}}r3.AES_KW_IV=rQ.Buffer.from("A6A6A6A6A6A6A6A6","hex");let r4=new WeakMap;function r9(e){let t=r4.get(e);if(!t)throw new tz("Cannot get CryptoKey from secure storage");return t}function r7(e){let t=t5.create(e.algorithm,e.type,e.extractable,e.usages);return Object.freeze(t),r4.set(t,e),t}class ie extends t${async onGenerateKey(e,t,r){return r7(await r3.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return r3.encrypt(e,r9(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r3.decrypt(e,r9(t),new Uint8Array(r))}async onExportKey(e,t){return r3.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await r3.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof r5))throw TypeError("key: Is not a AesCryptoKey")}}let it=rQ.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ir=rQ.Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]);function ii(e){let t=rQ.Buffer.alloc(e.length),r=e.length-1;for(let i=0;i<r;i++)t[i]=e[i]<<1,128&e[i+1]&&(t[i]+=1);return t[r]=e[r]<<1,t}function io(e,t){let r=Math.min(e.length,t.length),i=rQ.Buffer.alloc(r);for(let n=0;n<r;n++)i[n]=e[n]^t[n];return i}function ia(e,t){let r=rZ.default.createCipheriv(`aes${e.length<<3}`,e,it),i=r.update(t);return r.final(),i}function is(e,t){let r=rQ.Buffer.alloc(16),i=16*t;return e.copy(r,0,i,i+16),r}class ic extends tF{async onGenerateKey(e,t,r){return r7(await r3.generateKey({name:this.name,length:e.length},t,r))}async onSign(e,t,r){return new Uint8Array(function(e,t){let r,i,n,o,a,s=(o=ii(n=ia(e,it)),128&n[0]&&(o=io(o,ir)),a=ii(o),128&o[0]&&(a=io(a,ir)),{subkey1:o,subkey2:a}),c=Math.ceil(t.length/16);0===c?(c=1,r=!1):r=t.length%16==0;let l=c-1;if(r)i=io(is(t,l),s.subkey1);else{let e,r,n;i=io((e=rQ.Buffer.alloc(16),r=16*l,n=t.length,e.fill(0),t.copy(e,0,r,n),e[n-r]=128,e),s.subkey2)}let u=it;for(let r=0;r<l;r++)u=ia(e,io(u,is(t,r)));return ia(e,io(i,u))}(r9(t).data,rQ.Buffer.from(r))).buffer}async onVerify(e,t,r,i){let n=await this.sign(e,t,i);return 0===rQ.Buffer.from(r).compare(rQ.Buffer.from(n))}async onExportKey(e,t){return r3.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await r3.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof r5))throw TypeError("key: Is not a AesCryptoKey")}}class il extends tV{async onGenerateKey(e,t,r){return r7(await r3.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return r3.encrypt(e,r9(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r3.decrypt(e,r9(t),new Uint8Array(r))}async onExportKey(e,t){return r3.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await r3.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof r5))throw TypeError("key: Is not a AesCryptoKey")}}class iu extends tq{async onGenerateKey(e,t,r){return r7(await r3.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return r3.encrypt(e,r9(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r3.decrypt(e,r9(t),new Uint8Array(r))}async onExportKey(e,t){return r3.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await r3.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof r5))throw TypeError("key: Is not a AesCryptoKey")}}class id extends tX{async onGenerateKey(e,t,r){return r7(await r3.generateKey({name:this.name,length:e.length},t,r))}async onExportKey(e,t){return r3.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await r3.importKey(e,t,{name:r.name},i,n))}async onEncrypt(e,t,r){return r3.encrypt(e,r9(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r3.decrypt(e,r9(t),new Uint8Array(r))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof r5))throw TypeError("key: Is not a AesCryptoKey")}}class ip extends tG{async onGenerateKey(e,t,r){return r7(await r3.generateKey({name:this.name,length:e.length},t,r))}async onEncrypt(e,t,r){return r3.encrypt(e,r9(t),new Uint8Array(r))}async onDecrypt(e,t,r){return r3.decrypt(e,r9(t),new Uint8Array(r))}async onExportKey(e,t){return r3.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await r3.importKey(e,t,{name:r.name},i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof r5))throw TypeError("key: Is not a AesCryptoKey")}}class ih extends r8{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new tN("Unsupported algorithm name")}}set alg(e){}}tm([tM({name:"k",converter:r1})],ih.prototype,"data",void 0);class iy{static async generateKey(e,t,r){let i=new ih;return i.algorithm=e,i.extractable=t,i.usages=r,i.data=rZ.default.randomBytes(e.length>>3),i}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"raw":return new Uint8Array(t.data).buffer;default:throw new tz("format: Must be 'jwk' or 'raw'")}}static async importKey(e,t,r,i,n){let o;switch(e.toLowerCase()){case"jwk":o=tT.fromJSON(t,{targetSchema:ih});break;case"raw":(o=new ih).data=rQ.Buffer.from(t);break;default:throw new tz("format: Must be 'jwk' or 'raw'")}return o.algorithm=r,o.extractable=i,o.usages=n,o}static async encrypt(e,t,r){switch(e.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(e,t,rQ.Buffer.from(r));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(e,t,rQ.Buffer.from(r));default:throw new tz("algorithm: Is not recognized")}}static async decrypt(e,t,r){if(!(t instanceof ih))throw Error("key: Is not DesCryptoKey");switch(e.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(e,t,rQ.Buffer.from(r));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(e,t,rQ.Buffer.from(r));default:throw new tz("algorithm: Is not recognized")}}static async encryptDesCBC(e,t,r){let i=rZ.default.createCipheriv("des-cbc",t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async decryptDesCBC(e,t,r){let i=rZ.default.createDecipheriv("des-cbc",t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async encryptDesEDE3CBC(e,t,r){let i=rZ.default.createCipheriv("des-ede3-cbc",t.data,rQ.Buffer.from(e.iv)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}static async decryptDesEDE3CBC(e,t,r){let i=rZ.default.createDecipheriv("des-ede3-cbc",t.data,new Uint8Array(e.iv)),n=i.update(r);return new Uint8Array(n=rQ.Buffer.concat([n,i.final()])).buffer}}class ig extends tY{constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}async onGenerateKey(e,t,r){return r7(await iy.generateKey({name:this.name,length:this.keySizeBits},t,r))}async onEncrypt(e,t,r){return iy.encrypt(e,r9(t),new Uint8Array(r))}async onDecrypt(e,t,r){return iy.decrypt(e,r9(t),new Uint8Array(r))}async onExportKey(e,t){return iy.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){let o=await iy.importKey(e,t,{name:this.name,length:this.keySizeBits},i,n);if(o.data.length!==this.keySizeBits>>3)throw new tz("keyData: Wrong key size");return r7(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof ih))throw TypeError("key: Is not a DesCryptoKey")}}class im extends tY{constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}async onGenerateKey(e,t,r){return r7(await iy.generateKey({name:this.name,length:this.keySizeBits},t,r))}async onEncrypt(e,t,r){return iy.encrypt(e,r9(t),new Uint8Array(r))}async onDecrypt(e,t,r){return iy.decrypt(e,r9(t),new Uint8Array(r))}async onExportKey(e,t){return iy.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){let o=await iy.importKey(e,t,{name:this.name,length:this.keySizeBits},i,n);if(o.data.length!==this.keySizeBits>>3)throw new tz("keyData: Wrong key size");return r7(o)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof ih))throw TypeError("key: Is not a DesCryptoKey")}}function iv(e){switch(e.name.toUpperCase()){case"RSA-OAEP":{let t=/(\d+)$/.exec(e.hash.name)[1];return`RSA-OAEP${"1"!==t?`-${t}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(e.hash.name)[1]}`;case"RSA-PKCS1":return"RS1";default:throw new tz("algorithm: Is not recognized")}}class iw extends r6{constructor(){super(...arguments),this.type="private"}getKey(){let e=th.parse(this.data,rU.PrivateKeyInfo);return th.parse(e.privateKey,rU.RsaPrivateKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"RSA",alg:iv(this.algorithm),key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){let t=tT.fromJSON(e,{targetSchema:rU.RsaPrivateKey}),r=new rU.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.privateKeyAlgorithm.parameters=null,r.privateKey=ty.serialize(t),this.data=rQ.Buffer.from(ty.serialize(r))}}class ib extends r6{constructor(){super(...arguments),this.type="public"}getKey(){let e=th.parse(this.data,rU.PublicKeyInfo);return th.parse(e.publicKey,rU.RsaPublicKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"RSA",alg:iv(this.algorithm),key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){let t=tT.fromJSON(e,{targetSchema:rU.RsaPublicKey}),r=new rU.PublicKeyInfo;r.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",r.publicKeyAlgorithm.parameters=null,r.publicKey=ty.serialize(t),this.data=rQ.Buffer.from(ty.serialize(r))}}class i_{static async generateKey(e,t,r){let i=new iw;i.algorithm=e,i.extractable=t,i.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let n=new ib;n.algorithm=e,n.extractable=!0,n.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let o=rQ.Buffer.concat([rQ.Buffer.alloc(4-e.publicExponent.byteLength,0),rQ.Buffer.from(e.publicExponent)]).readInt32BE(0),a=rZ.default.generateKeyPairSync("rsa",{modulusLength:e.modulusLength,publicExponent:o,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return i.data=a.privateKey,n.data=a.publicKey,{privateKey:i,publicKey:n}}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;default:throw new tz("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(e,t,r,i,n){switch(e.toLowerCase()){case"jwk":if(t.d){let e=tT.fromJSON(t,{targetSchema:rU.RsaPrivateKey});return this.importPrivateKey(e,r,i,n)}{let e=tT.fromJSON(t,{targetSchema:rU.RsaPublicKey});return this.importPublicKey(e,r,i,n)}case"spki":{let e=th.parse(new Uint8Array(t),rU.PublicKeyInfo),o=th.parse(e.publicKey,rU.RsaPublicKey);return this.importPublicKey(o,r,i,n)}case"pkcs8":{let e=th.parse(new Uint8Array(t),rU.PrivateKeyInfo),o=th.parse(e.privateKey,rU.RsaPrivateKey);return this.importPrivateKey(o,r,i,n)}default:throw new tz("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(e,t,r){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(e,t,r);default:throw new tz("algorithm: Is not recognized")}}static async verify(e,t,r,i){switch(e.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(e,t,i,r);default:throw new tz("algorithm: Is not recognized")}}static async encrypt(e,t,r){if("RSA-OAEP"===e.name.toUpperCase())return this.encryptOAEP(e,t,r);throw new tz("algorithm: Is not recognized")}static async decrypt(e,t,r){if("RSA-OAEP"===e.name.toUpperCase())return this.decryptOAEP(e,t,r);throw new tz("algorithm: Is not recognized")}static importPrivateKey(e,t,r,i){let n=new rU.PrivateKeyInfo;n.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",n.privateKeyAlgorithm.parameters=null,n.privateKey=ty.serialize(e);let o=new iw;return o.data=rQ.Buffer.from(ty.serialize(n)),o.algorithm=Object.assign({},t),o.algorithm.publicExponent=new Uint8Array(e.publicExponent),o.algorithm.modulusLength=e.modulus.byteLength<<3,o.extractable=r,o.usages=i,o}static importPublicKey(e,t,r,i){let n=new rU.PublicKeyInfo;n.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",n.publicKeyAlgorithm.parameters=null,n.publicKey=ty.serialize(e);let o=new ib;return o.data=rQ.Buffer.from(ty.serialize(n)),o.algorithm=Object.assign({},t),o.algorithm.publicExponent=new Uint8Array(e.publicExponent),o.algorithm.modulusLength=e.modulus.byteLength<<3,o.extractable=r,o.usages=i,o}static getCryptoAlgorithm(e){switch(e.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new tz("algorithm.hash: Is not recognized")}}static signRsa(e,t,r){let i=this.getCryptoAlgorithm(t.algorithm),n=rZ.default.createSign(i);n.update(rQ.Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let o={key:t.pem};return"RSA-PSS"===e.name.toUpperCase()&&(o.padding=rZ.default.constants.RSA_PKCS1_PSS_PADDING,o.saltLength=e.saltLength),new Uint8Array(n.sign(o)).buffer}static verifySSA(e,t,r,i){let n=this.getCryptoAlgorithm(t.algorithm),o=rZ.default.createVerify(n);o.update(rQ.Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let a={key:t.pem};return"RSA-PSS"===e.name.toUpperCase()&&(a.padding=rZ.default.constants.RSA_PKCS1_PSS_PADDING,a.saltLength=e.saltLength),o.verify(a,i)}static encryptOAEP(e,t,r){let i={key:`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`,padding:rZ.default.constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(rZ.default.publicEncrypt(i,r)).buffer}static decryptOAEP(e,t,r){let i={key:`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`,padding:rZ.default.constants.RSA_PKCS1_OAEP_PADDING};return e.label,new Uint8Array(rZ.default.privateDecrypt(i,r)).buffer}}i_.publicKeyUsages=["verify","encrypt","wrapKey"],i_.privateKeyUsages=["sign","decrypt","unwrapKey"];class iS extends tZ{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let i=await i_.generateKey({...e,name:this.name},t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}async onSign(e,t,r){return i_.sign(e,r9(t),new Uint8Array(r))}async onVerify(e,t,r,i){return i_.verify(e,r9(t),new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){return i_.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await i_.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r9(e);if(!(r instanceof iw||r instanceof ib))throw TypeError("key: Is not RSA CryptoKey")}}class iA extends t0{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let i=await i_.generateKey({...e,name:this.name},t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}async onSign(e,t,r){return i_.sign(e,r9(t),new Uint8Array(r))}async onVerify(e,t,r,i){return i_.verify(e,r9(t),new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){return i_.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await i_.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r9(e);if(!(r instanceof iw||r instanceof ib))throw TypeError("key: Is not RSA CryptoKey")}}class iE{static size(e){switch(e.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw Error("Unrecognized name")}}static getAlgorithmName(e){switch(e.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw Error("Unrecognized name")}}static digest(e,t){let r=this.getAlgorithmName(e);return new Uint8Array(rZ.default.createHash(r).update(rQ.Buffer.from(t)).digest()).buffer}}class iO extends t1{async onGenerateKey(e,t,r){let i=await i_.generateKey({...e,name:this.name},t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}async onEncrypt(e,r,i){let n=r9(r),o=new Uint8Array(i),a=Math.ceil(n.algorithm.modulusLength>>3),s=iE.size(n.algorithm.hash)>>3,c=o.byteLength,l=a-c-2*s-2;if(c>a-2*s-2)throw Error("Data too large");let u=new Uint8Array(a),d=u.subarray(1,s+1),p=u.subarray(s+1);p.set(o,s+l+1);let f=rZ.default.createHash(n.algorithm.hash.name.replace("-","")).update(t.toUint8Array(e.label||new Uint8Array(0))).digest();p.set(f,0),p[s+l]=1,rZ.default.randomFillSync(d);let h=this.mgf1(n.algorithm.hash,d,p.length);for(let e=0;e<p.length;e++)p[e]^=h[e];let y=this.mgf1(n.algorithm.hash,p,d.length);for(let e=0;e<d.length;e++)d[e]^=y[e];return n.pem||(n.pem=`-----BEGIN PUBLIC KEY-----
${n.data.toString("base64")}
-----END PUBLIC KEY-----`),new Uint8Array(rZ.default.publicEncrypt({key:n.pem,padding:rZ.default.constants.RSA_NO_PADDING},rQ.Buffer.from(u))).buffer}async onDecrypt(e,r,i){let n=r9(r),o=Math.ceil(n.algorithm.modulusLength>>3),a=iE.size(n.algorithm.hash)>>3;if(i.byteLength!==o)throw Error("Bad data");n.pem||(n.pem=`-----BEGIN PRIVATE KEY-----
${n.data.toString("base64")}
-----END PRIVATE KEY-----`);let s=rZ.default.privateDecrypt({key:n.pem,padding:rZ.default.constants.RSA_NO_PADDING},rQ.Buffer.from(i)),c=s[0],l=s.subarray(1,a+1),u=s.subarray(a+1);if(0!==c)throw Error("Decryption failed");let d=this.mgf1(n.algorithm.hash,u,l.length);for(let e=0;e<l.length;e++)l[e]^=d[e];let p=this.mgf1(n.algorithm.hash,l,u.length);for(let e=0;e<u.length;e++)u[e]^=p[e];let f=rZ.default.createHash(n.algorithm.hash.name.replace("-","")).update(t.toUint8Array(e.label||new Uint8Array(0))).digest();for(let e=0;e<a;e++)if(f[e]!==u[e])throw Error("Decryption failed");let h=a;for(;h<u.length;h++){let e=u[h];if(1===e)break;if(0!==e)throw Error("Decryption failed")}if(h===u.length)throw Error("Decryption failed");return new Uint8Array(s=u.subarray(h+1)).buffer}async onExportKey(e,t){return i_.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await i_.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r9(e);if(!(r instanceof iw||r instanceof ib))throw TypeError("key: Is not RSA CryptoKey")}mgf1(e,t,r=0){let i=iE.size(e)>>3,n=new Uint8Array(r),o=new Uint8Array(4),a=Math.ceil(r/i);for(let r=0;r<a;r++){o[0]=r>>>24,o[1]=r>>>16&255,o[2]=r>>>8&255,o[3]=255&r;let a=n.subarray(r*i),s=rZ.default.createHash(e.name.replace("-","")).update(t).update(o).digest();s.length>a.length&&(s=s.subarray(0,a.length)),a.set(s)}return n}}class ik extends tJ{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(e,t,r){let i=await i_.generateKey({...e,name:this.name},t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}checkGenerateKeyParams(e){if(this.checkRequiredProperty(e,"publicExponent"),!(e.publicExponent&&e.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let t=c.ToBase64(e.publicExponent);if("Aw=="!==t&&"AQAB"!==t)throw TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(e,"modulusLength"),e.modulusLength){case 1024:case 2048:case 4096:break;default:throw TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(e,t,r){let i=this.toCryptoOptions(t),n=rZ.default.publicEncrypt(i,new Uint8Array(r));return new Uint8Array(n).buffer}async onDecrypt(e,t,r){let i=this.toCryptoOptions(t),n=rZ.default.privateDecrypt(i,new Uint8Array(r));return new Uint8Array(n).buffer}async onExportKey(e,t){return i_.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await i_.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r9(e);if(!(r instanceof iw||r instanceof ib))throw TypeError("key: Is not RSA CryptoKey")}toCryptoOptions(e){let t=e.type.toUpperCase();return{key:`-----BEGIN ${t} KEY-----
${r9(e).data.toString("base64")}
-----END ${t} KEY-----`,padding:rZ.default.constants.RSA_PKCS1_PADDING}}}let iP={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function ij(e){let t=iP[e];if(!t)throw new tz(`Cannot convert WebCrypto named curve '${e}' to OID`);return t}class iC extends r6{constructor(){super(...arguments),this.type="private"}getKey(){let e=th.parse(this.data,rU.PrivateKeyInfo);return th.parse(e.privateKey,rU.EcPrivateKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){if(!e.crv)throw new tz("Cannot get named curve from JWK. Property 'crv' is required");let t=new rU.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",t.privateKeyAlgorithm.parameters=ty.serialize(new rU.ObjectIdentifier(ij(e.crv)));let r=tT.fromJSON(e,{targetSchema:rU.EcPrivateKey});return t.privateKey=ty.serialize(r),this.data=rQ.Buffer.from(ty.serialize(t)),this}}class iI extends r6{constructor(){super(...arguments),this.type="public"}getKey(){let e=th.parse(this.data,rU.PublicKeyInfo);return new rU.EcPublicKey(e.publicKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){if(!e.crv)throw new tz("Cannot get named curve from JWK. Property 'crv' is required");let t=tT.fromJSON(e,{targetSchema:rU.EcPublicKey}),r=new rU.PublicKeyInfo;return r.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1",r.publicKeyAlgorithm.parameters=ty.serialize(new rU.ObjectIdentifier(ij(e.crv))),r.publicKey=ty.toASN(t).valueHex,this.data=rQ.Buffer.from(ty.serialize(r)),this}}class ix extends tJ{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}async onDigest(e,t){return iE.digest(e,t)}}class iR extends tJ{constructor(){super(...arguments),this.name="SHA-256",this.usages=[]}async onDigest(e,t){return iE.digest(e,t)}}class iB extends tJ{constructor(){super(...arguments),this.name="SHA-384",this.usages=[]}async onDigest(e,t){return iE.digest(e,t)}}class iK extends tJ{constructor(){super(...arguments),this.name="SHA-512",this.usages=[]}async onDigest(e,t){return iE.digest(e,t)}}class iT extends tJ{constructor(){super(...arguments),this.name="SHA3-256",this.usages=[]}async onDigest(e,t){return iE.digest(e,t)}}class iM extends tJ{constructor(){super(...arguments),this.name="SHA3-384",this.usages=[]}async onDigest(e,t){return iE.digest(e,t)}}class iU extends tJ{constructor(){super(...arguments),this.name="SHA3-512",this.usages=[]}async onDigest(e,t){return iE.digest(e,t)}}class iN{static async generateKey(e,t,r){let i=new iC;i.algorithm=e,i.extractable=t,i.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let n=new iI;n.algorithm=e,n.extractable=!0,n.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let o=rZ.default.generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(e.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return i.data=o.privateKey,n.data=o.publicKey,{privateKey:i,publicKey:n}}static async sign(e,t,r){let i=iE.getAlgorithmName(e.hash),n=rZ.default.createSign(i);n.update(rQ.Buffer.from(r)),t.pem||(t.pem=`-----BEGIN PRIVATE KEY-----
${t.data.toString("base64")}
-----END PRIVATE KEY-----`);let o={key:t.pem},a=n.sign(o),s=th.parse(a,rU.EcDsaSignature);return rd.encodeSignature(s,rN.get(t.algorithm.namedCurve).size).buffer}static async verify(e,r,i,n){let o=iE.getAlgorithmName(e.hash),a=rZ.default.createVerify(o);a.update(rQ.Buffer.from(n)),r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let s={key:r.pem},c=new rU.EcDsaSignature,l=rN.get(r.algorithm.namedCurve),u=rd.decodeSignature(i,l.size);c.r=t.toArrayBuffer(u.r),c.s=t.toArrayBuffer(u.s);let d=rQ.Buffer.from(ty.serialize(c));return a.verify(s,d)}static async deriveBits(e,t,r){let i=this.getOpenSSLNamedCurve(t.algorithm.namedCurve),n=rZ.default.createECDH(i),o=th.parse(t.data,rU.PrivateKeyInfo),a=th.parse(o.privateKey,rU.EcPrivateKey);n.setPrivateKey(rQ.Buffer.from(a.privateKey));let s=th.parse(e.public.data,rU.PublicKeyInfo),c=n.computeSecret(rQ.Buffer.from(s.publicKey));return null===r?c:new Uint8Array(c).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":return th.parse(t.data,rU.PublicKeyInfo).publicKey;default:throw new tz("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,i,n){switch(e.toLowerCase()){case"jwk":if(t.d){let e=tT.fromJSON(t,{targetSchema:rU.EcPrivateKey});return this.importPrivateKey(e,r,i,n)}{let e=tT.fromJSON(t,{targetSchema:rU.EcPublicKey});return this.importPublicKey(e,r,i,n)}case"raw":{let e=new rU.EcPublicKey(t);return this.importPublicKey(e,r,i,n)}case"spki":{let e=th.parse(new Uint8Array(t),rU.PublicKeyInfo),o=new rU.EcPublicKey(e.publicKey);return this.assertKeyParameters(e.publicKeyAlgorithm.parameters,r.namedCurve),this.importPublicKey(o,r,i,n)}case"pkcs8":{let e=th.parse(new Uint8Array(t),rU.PrivateKeyInfo),o=th.parse(e.privateKey,rU.EcPrivateKey);return this.assertKeyParameters(e.privateKeyAlgorithm.parameters,r.namedCurve),this.importPrivateKey(o,r,i,n)}default:throw new tz("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(e,t){if(!e)throw new tU("Key info doesn't have required parameters");let r="";try{r=th.parse(e,rU.ObjectIdentifier).value}catch(e){throw new tU("Cannot read key info parameters")}if(ij(t)!==r)throw new tU("Key info parameter doesn't match to named curve")}static async importPrivateKey(e,t,r,i){let n=new rU.PrivateKeyInfo;n.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",n.privateKeyAlgorithm.parameters=ty.serialize(new rU.ObjectIdentifier(ij(t.namedCurve))),n.privateKey=ty.serialize(e);let o=new iC;return o.data=rQ.Buffer.from(ty.serialize(n)),o.algorithm=Object.assign({},t),o.extractable=r,o.usages=i,o}static async importPublicKey(e,t,r,i){let n=new rU.PublicKeyInfo;n.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";let o=ij(t.namedCurve);n.publicKeyAlgorithm.parameters=ty.serialize(new rU.ObjectIdentifier(o)),n.publicKey=e.value;let a=new iI;return a.data=rQ.Buffer.from(ty.serialize(n)),a.algorithm=Object.assign({},t),a.extractable=r,a.usages=i,a}static getOpenSSLNamedCurve(e){switch(e.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return e}}}iN.publicKeyUsages=["verify"],iN.privateKeyUsages=["sign","deriveKey","deriveBits"];class iD extends t8{constructor(){super(...arguments),this.namedCurves=rN.names,this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(e,t,r){let i=await iN.generateKey({...e,name:this.name},t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}async onSign(e,t,r){return iN.sign(e,r9(t),new Uint8Array(r))}async onVerify(e,t,r,i){return iN.verify(e,r9(t),new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){return iN.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await iN.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r9(e);if(!(r instanceof iC||r instanceof iI))throw TypeError("key: Is not EC CryptoKey")}}class iz extends t3{constructor(){super(...arguments),this.namedCurves=rN.names}async onGenerateKey(e,t,r){let i=await iN.generateKey({...e,name:this.name},t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}async onExportKey(e,t){return iN.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await iN.importKey(e,t,{...r,name:this.name},i,n))}checkCryptoKey(e,t){super.checkCryptoKey(e,t);let r=r9(e);if(!(r instanceof iC||r instanceof iI))throw TypeError("key: Is not EC CryptoKey")}async onDeriveBits(e,t,r){return await iN.deriveBits({...e,public:r9(e.public)},r9(t),r)}}let iW={[rU.idEd448]:"Ed448",ed448:rU.idEd448,[rU.idX448]:"X448",x448:rU.idX448,[rU.idEd25519]:"Ed25519",ed25519:rU.idEd25519,[rU.idX25519]:"X25519",x25519:rU.idX25519};function iH(e){let t=iW[e.toLowerCase()];if(!t)throw new tz(`Cannot convert WebCrypto named curve '${e}' to OID`);return t}class iJ extends r6{constructor(){super(...arguments),this.type="private"}getKey(){let e=th.parse(this.data,rU.PrivateKeyInfo);return th.parse(e.privateKey,rU.CurvePrivateKey)}toJSON(){let e=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},tK.toJSON(e))}fromJSON(e){if(!e.crv)throw new tz("Cannot get named curve from JWK. Property 'crv' is required");let t=new rU.PrivateKeyInfo;t.privateKeyAlgorithm.algorithm=iH(e.crv);let r=tT.fromJSON(e,{targetSchema:rU.CurvePrivateKey});return t.privateKey=ty.serialize(r),this.data=rQ.Buffer.from(ty.serialize(t)),this}}class iL extends r6{constructor(){super(...arguments),this.type="public"}getKey(){return th.parse(this.data,rU.PublicKeyInfo).publicKey}toJSON(){let e=this.getKey();return Object.assign({kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable},{x:c.ToBase64Url(e)})}fromJSON(e){if(!e.crv)throw new tz("Cannot get named curve from JWK. Property 'crv' is required");if(!e.x)throw new tz("Cannot get property from JWK. Property 'x' is required");let t=new rU.PublicKeyInfo;return t.publicKeyAlgorithm.algorithm=iH(e.crv),t.publicKey=c.FromBase64Url(e.x),this.data=rQ.Buffer.from(ty.serialize(t)),this}}class i${static async generateKey(e,t,r){let i=new iJ;i.algorithm=e,i.extractable=t,i.usages=r.filter(e=>-1!==this.privateKeyUsages.indexOf(e));let n=new iL;n.algorithm=e,n.extractable=!0,n.usages=r.filter(e=>-1!==this.publicKeyUsages.indexOf(e));let o=e.namedCurve.toLowerCase(),a=rZ.default.generateKeyPairSync(o,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return i.data=a.privateKey,n.data=a.publicKey,{privateKey:i,publicKey:n}}static async sign(e,r,i){r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let n={key:r.pem},o=rZ.default.sign(null,rQ.Buffer.from(i),n);return t.toArrayBuffer(o)}static async verify(e,t,r,i){t.pem||(t.pem=`-----BEGIN PUBLIC KEY-----
${t.data.toString("base64")}
-----END PUBLIC KEY-----`);let n={key:t.pem};return rZ.default.verify(null,rQ.Buffer.from(i),n,rQ.Buffer.from(r))}static async deriveBits(e,t,r){let i=rZ.default.createPublicKey({key:e.public.data,format:"der",type:"spki"}),n=rZ.default.createPrivateKey({key:t.data,format:"der",type:"pkcs8"});return new Uint8Array(rZ.default.diffieHellman({publicKey:i,privateKey:n})).buffer.slice(0,r>>3)}static async exportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(t);case"pkcs8":case"spki":return new Uint8Array(t.data).buffer;case"raw":return th.parse(t.data,rU.PublicKeyInfo).publicKey;default:throw new tz("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(e,t,r,i,n){switch(e.toLowerCase()){case"jwk":if(t.d){let e=tT.fromJSON(t,{targetSchema:rU.CurvePrivateKey});return this.importPrivateKey(e,r,i,n)}if(!t.x)throw TypeError("keyData: Cannot get required 'x' filed");return this.importPublicKey(c.FromBase64Url(t.x),r,i,n);case"raw":return this.importPublicKey(t,r,i,n);case"spki":{let e=th.parse(new Uint8Array(t),rU.PublicKeyInfo);return this.importPublicKey(e.publicKey,r,i,n)}case"pkcs8":{let e=th.parse(new Uint8Array(t),rU.PrivateKeyInfo),o=th.parse(e.privateKey,rU.CurvePrivateKey);return this.importPrivateKey(o,r,i,n)}default:throw new tz("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(e,t,r,i){let n=new iJ;return n.fromJSON({crv:t.namedCurve,d:c.ToBase64Url(e.d)}),n.algorithm=Object.assign({},t),n.extractable=r,n.usages=i,n}static async importPublicKey(e,t,r,i){let n=new iL;return n.fromJSON({crv:t.namedCurve,x:c.ToBase64Url(e)}),n.algorithm=Object.assign({},t),n.extractable=r,n.usages=i,n}}i$.publicKeyUsages=["verify"],i$.privateKeyUsages=["sign","deriveKey","deriveBits"];class iF extends t9{async onGenerateKey(e,t,r){let i=await i$.generateKey({name:this.name,namedCurve:e.namedCurve.replace(/^ed/i,"Ed")},t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}async onSign(e,t,r){return i$.sign(e,r9(t),new Uint8Array(r))}async onVerify(e,t,r,i){return i$.verify(e,r9(t),new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){return i$.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await i$.importKey(e,t,{...r,name:this.name},i,n))}}class iV extends t4{async onGenerateKey(e,t,r){let i=await i$.generateKey({name:this.name,namedCurve:e.namedCurve.toUpperCase()},t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}async onDeriveBits(e,t,r){return await i$.deriveBits({...e,public:r9(e.public)},r9(t),r)}async onExportKey(e,t){return i$.exportKey(e,r9(t))}async onImportKey(e,t,r,i,n){return r7(await i$.importKey(e,t,{...r,name:this.name},i,n))}}class iG extends r2{constructor(e,t,r,i){super(),this.algorithm=e,this.extractable=t,this.usages=r,this.data=Buffer.from(i)}toJWK(){return{kty:"OKP",crv:this.algorithm.name,key_ops:this.usages,ext:this.extractable}}}class iq extends iG{constructor(){super(...arguments),this.type="private"}toJWK(){let e=rZ.default.createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"}),t=tH.toUint8Array(this.data.toString()),r=tg.parse(t,rU.PrivateKeyInfo),i=tg.parse(r.privateKey,rU.EdPrivateKey).value;return{...super.toJWK(),...e,d:Buffer.from(new Uint8Array(i)).toString("base64url")}}}class iX extends iG{constructor(){super(...arguments),this.type="public"}toJWK(){let e=rZ.default.createPublicKey({key:this.data,format:"pem"}).export({format:"jwk"});return{...super.toJWK(),...e}}}class iY{static async generateKey(e,t,r){let i=e.name.toLowerCase(),n=rZ.default.generateKeyPairSync(i,{publicKeyEncoding:{format:"pem",type:"spki"},privateKeyEncoding:{format:"pem",type:"pkcs8"}}),o={name:"ed25519"===i?"Ed25519":"X25519"},a=r.filter(e=>this.privateKeyUsages.includes(e)),s=r.filter(e=>this.publicKeyUsages.includes(e));return{privateKey:new iq(o,t,a,n.privateKey),publicKey:new iX(o,!0,s,n.publicKey)}}static async sign(e,r,i){let n=rZ.default.sign(null,Buffer.from(i),r.data);return t.toArrayBuffer(n)}static async verify(e,t,r,i){return rZ.default.verify(null,Buffer.from(i),t.data,r)}static async exportKey(e,t){switch(e){case"jwk":return t.toJWK();case"pkcs8":case"spki":return tH.toArrayBuffer(t.data.toString());case"raw":{let e=t.toJWK();return c.FromBase64Url(e.x)}default:return Promise.reject(new tz("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}static async importKey(e,r,i,n,o){switch(e){case"jwk":if(r.d){let e=new rU.EdPrivateKey;e.value=t.toArrayBuffer(Buffer.from(r.d,"base64url"));let a=new rU.PrivateKeyInfo;a.privateKeyAlgorithm.algorithm="ed25519"===i.name.toLowerCase()?rU.idEd25519:rU.idX25519,a.privateKey=tg.serialize(e);let s=tg.serialize(a);return new iq(i,n,o,tH.fromBufferSource(s,"PRIVATE KEY"))}if(r.x)return new iX(i,n,o,rZ.default.createPublicKey({format:"jwk",key:r}).export({format:"pem",type:"spki"}));throw new tz("keyData: Cannot import JWK. 'd' or 'x' must be presented");case"pkcs8":return new iq(i,n,o,tH.fromBufferSource(r,"PRIVATE KEY"));case"spki":return new iX(i,n,o,tH.fromBufferSource(r,"PUBLIC KEY"));case"raw":{let e=rZ.default.createPublicKey({format:"jwk",key:{kty:"OKP",crv:"ed25519"===i.name.toLowerCase()?"Ed25519":"X25519",x:c.ToBase64Url(r)}}).export({format:"pem",type:"spki"});return new iX(i,n,o,e)}default:return Promise.reject(new tz("format: Must be 'jwk', 'raw', pkcs8' or 'spki'"))}}}iY.privateKeyUsages=["sign","deriveBits","deriveKey"],iY.publicKeyUsages=["verify"];class iQ extends rz{async onGenerateKey(e,t,r){let i=await iY.generateKey(e,t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}async onSign(e,t,r){let i=r9(t);return iY.sign(e,i,new Uint8Array(r))}onVerify(e,t,r,i){let n=r9(t);return iY.verify(e,n,new Uint8Array(r),new Uint8Array(i))}async onExportKey(e,t){let r=r9(t);return iY.exportKey(e,r)}async onImportKey(e,t,r,i,n){return r7(await iY.importKey(e,t,r,i,n))}}class iZ extends rD{async onGenerateKey(e,t,r){let i=await iY.generateKey(e,t,r);return{privateKey:r7(i.privateKey),publicKey:r7(i.publicKey)}}async onDeriveBits(e,t,r){let i=r9(t),n=r9(e.public),o=rZ.default.createPublicKey({key:n.data.toString(),format:"pem",type:"spki"}),a=rZ.default.createPrivateKey({key:i.data.toString(),format:"pem",type:"pkcs8"});return new Uint8Array(rZ.default.diffieHellman({publicKey:o,privateKey:a})).buffer.slice(0,r>>3)}async onExportKey(e,t){let r=r9(t);return iY.exportKey(e,r)}async onImportKey(e,t,r,i,n){return r7(await iY.importKey(e,t,r,i,n))}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof iG))throw TypeError("key: Is not a Ed25519CryptoKey")}}class i0 extends r2{}class i1 extends rH{async onDeriveBits(e,r,i){return new Promise((n,o)=>{let a=t.toArrayBuffer(e.salt),s=e.hash.name.replace("-","");rZ.default.pbkdf2(r9(r).data,rQ.Buffer.from(a),e.iterations,i>>3,s,(e,t)=>{e?o(e):n(new Uint8Array(t).buffer)})})}async onImportKey(e,t,r,i,n){if("raw"===e){let e=new i0;return e.data=rQ.Buffer.from(t),e.algorithm={name:this.name},e.extractable=!1,e.usages=n,r7(e)}throw new tz("format: Must be 'raw'")}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof i0))throw TypeError("key: Is not PBKDF CryptoKey")}}class i2 extends r2{get alg(){let e=this.algorithm.hash.name.toUpperCase();return`HS${e.replace("SHA-","")}`}set alg(e){}}tm([tM({name:"k",converter:r1})],i2.prototype,"data",void 0);class i8 extends rW{async onGenerateKey(e,t,r){let i=(e.length||this.getDefaultLength(e.hash.name))>>3<<3,n=new i2;return n.algorithm={...e,length:i,name:this.name},n.extractable=t,n.usages=r,n.data=rZ.default.randomBytes(i>>3),r7(n)}async onSign(e,t,r){let i=iE.getAlgorithmName(t.algorithm.hash);return new Uint8Array(rZ.default.createHmac(i,r9(t).data).update(rQ.Buffer.from(r)).digest()).buffer}async onVerify(e,t,r,i){let n=iE.getAlgorithmName(t.algorithm.hash);return 0===rZ.default.createHmac(n,r9(t).data).update(rQ.Buffer.from(i)).digest().compare(rQ.Buffer.from(r))}async onImportKey(e,t,r,i,n){let o;switch(e.toLowerCase()){case"jwk":o=tT.fromJSON(t,{targetSchema:i2});break;case"raw":(o=new i2).data=rQ.Buffer.from(t);break;default:throw new tz("format: Must be 'jwk' or 'raw'")}return o.algorithm={hash:{name:r.hash.name},name:this.name,length:o.data.length<<3},o.extractable=i,o.usages=n,r7(o)}async onExportKey(e,t){switch(e.toLowerCase()){case"jwk":return tK.toJSON(r9(t));case"raw":return new Uint8Array(r9(t).data).buffer;default:throw new tz("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof i2))throw TypeError("key: Is not HMAC CryptoKey")}}class i6 extends r2{}class i5 extends rJ{async onImportKey(e,t,r,i,n){if("raw"!==e.toLowerCase())throw new tz("Operation not supported");let o=new i6;return o.data=rQ.Buffer.from(t),o.algorithm={name:this.name},o.extractable=i,o.usages=n,r7(o)}async onDeriveBits(e,r,i){let n=e.hash.name.replace("-",""),o=rZ.default.createHash(n).digest().length,a=i/8,s=t.toUint8Array(e.info),c=rZ.default.createHmac(n,t.toUint8Array(e.salt)).update(t.toUint8Array(r9(r).data)).digest(),l=[rQ.Buffer.alloc(0)],u=Math.ceil(a/o)+1;for(let e=1;e<u;++e)l.push(rZ.default.createHmac(n,c).update(rQ.Buffer.concat([l[e-1],s,rQ.Buffer.from([e])])).digest());return rQ.Buffer.concat(l).slice(0,a)}checkCryptoKey(e,t){if(super.checkCryptoKey(e,t),!(r9(e)instanceof i6))throw TypeError("key: Is not HKDF CryptoKey")}}class i3{static digest(e,t){return new Uint8Array(rZ.default.createHash(e.name.toLowerCase(),{outputLength:e.length}).update(rQ.Buffer.from(t)).digest()).buffer}}class i4 extends r${async onDigest(e,t){return i3.digest(e,t)}}class i9 extends rF{async onDigest(e,t){return i3.digest(e,t)}}class i7 extends rY{constructor(){var e;super(),this.providers.set(new ie),this.providers.set(new il),this.providers.set(new iu),this.providers.set(new ic),this.providers.set(new id),this.providers.set(new ip),rZ.default.getCiphers().includes("des-cbc")&&this.providers.set(new ig),this.providers.set(new im),this.providers.set(new iS),this.providers.set(new iA),this.providers.set(new iO),this.providers.set(new ik),this.providers.set(new iD),this.providers.set(new iz),this.providers.set(new ix),this.providers.set(new iR),this.providers.set(new iB),this.providers.set(new iK),this.providers.set(new i1),this.providers.set(new i8),this.providers.set(new i5);const t=null==(e=/^v(\d+)/.exec(r0.version))?void 0:e[1];t&&parseInt(t,10)>=12&&(this.providers.set(new i4),this.providers.set(new i9));const r=rZ.default.getHashes();r.includes("sha3-256")&&this.providers.set(new iT),r.includes("sha3-384")&&this.providers.set(new iM),r.includes("sha3-512")&&this.providers.set(new iU),t&&parseInt(t,10)>=14&&(this.providers.set(new iF),this.providers.set(new iV),this.providers.set(new iQ),this.providers.set(new iZ))}}class ne extends rV{constructor(){super(...arguments),this.subtle=new i7}getRandomValues(e){if(!ArrayBuffer.isView(e))throw TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'");let t=rQ.Buffer.from(e.buffer,e.byteOffset,e.byteLength);return rZ.default.randomFillSync(t),e}}e.s(["Crypto",()=>ne],97157),e.i(97157),e.s(["Crypto",()=>ne,"CryptoKey",()=>t5],34596)},6920,(e,t,r)=>{"use strict";r.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return(r+i)*3/4-i},r.toByteArray=function(e){var t,r,i=l(e),a=i[0],s=i[1],c=new o((a+s)*3/4-s),u=0,d=s>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,o=[],a=0,s=r-n;a<s;a+=16383)o.push(function(e,t,r){for(var n,o=[],a=t;a<r;a+=3)n=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(i[n>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return o.join("")}(e,a,a+16383>s?s:a+16383));return 1===n?o.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&o.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),o.join("")};for(var i=[],n=[],o="u">typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)i[s]=a[s],n[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}n[45]=62,n[95]=63},41690,(e,t,r)=>{r.read=function(e,t,r,i,n){var o,a,s=8*n-i-1,c=(1<<s)-1,l=c>>1,u=-7,d=r?n-1:0,p=r?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=p,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+d],d+=p,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,i),o-=l}return(f?-1:1)*a*Math.pow(2,o-i)},r.write=function(e,t,r,i,n,o){var a,s,c,l=8*o-n-1,u=(1<<l)-1,d=u>>1,p=5960464477539062e-23*(23===n),f=i?0:o-1,h=i?1:-1,y=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(s=+!!isNaN(t),a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+d>=1?t+=p/c:t+=p*Math.pow(2,1-d),t*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,n),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,n),a=0));n>=8;e[r+f]=255&s,f+=h,s/=256,n-=8);for(a=a<<n|s,l+=n;l>0;e[r+f]=255&a,f+=h,a/=256,l-=8);e[r+f-h]|=128*y}},15843,(e,t,r)=>{"use strict";let i=e.r(6920),n=e.r(41690),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e){var i=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!s.isEncoding(n))throw TypeError("Unknown encoding: "+n);let r=0|h(i,n),o=a(r),c=o.write(i,n);return c!==r&&(o=o.slice(0,c)),o}if(ArrayBuffer.isView(e)){var o=e;if(U(o,Uint8Array)){let e=new Uint8Array(o);return p(e.buffer,e.byteOffset,e.byteLength)}return d(o)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(U(e,ArrayBuffer)||e&&U(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(U(e,SharedArrayBuffer)||e&&U(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return s.from(c,t,r);let l=function(e){if(s.isBuffer(e)){let t=0|f(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(l)return l;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return l(e),a(e<0?0:0|f(e))}function d(e){let t=e.length<0?0:0|f(e.length),r=a(t);for(let i=0;i<t;i+=1)r[i]=255&e[i];return r}function p(e,t,r){let i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),s.prototype),i}function f(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function h(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||U(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return T(e).length;default:if(n)return i?-1:K(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=t;i<r;++i)n+=N[e[i]];return n}(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return function(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){let i="";r=Math.min(e.length,r);for(let n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}(this,t,r);case"base64":var o,a,s;return o=this,a=t,s=r,0===a&&s===o.length?i.fromByteArray(o):i.fromByteArray(o.slice(a,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let i=e.slice(t,r),n="";for(let e=0;e<i.length-1;e+=2)n+=String.fromCharCode(i[e]+256*i[e+1]);return n}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function m(e,t,r,i,n){var o;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(o=r*=1)!=o&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(n)return -1;else r=e.length-1;else if(r<0)if(!n)return -1;else r=0;if("string"==typeof t&&(t=s.from(t,i)),s.isBuffer(t))return 0===t.length?-1:v(e,t,r,i,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return v(e,[t],r,i,n)}throw TypeError("val must be string, number or Buffer")}function v(e,t,r,i,n){let o,a=1,s=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;a=2,s/=2,c/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){let i=-1;for(o=r;o<s;o++)if(l(e,o)===l(t,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===c)return i*a}else -1!==i&&(o-=o-i),i=-1}else for(r+c>s&&(r=s-c),o=r;o>=0;o--){let r=!0;for(let i=0;i<c;i++)if(l(e,o+i)!==l(t,i)){r=!1;break}if(r)return o}return -1}function w(e,t,r){r=Math.min(e.length,r);let i=[],n=t;for(;n<r;){let t=e[n],o=null,a=t>239?4:t>223?3:t>191?2:1;if(n+a<=r){let r,i,s,c;switch(a){case 1:t<128&&(o=t);break;case 2:(192&(r=e[n+1]))==128&&(c=(31&t)<<6|63&r)>127&&(o=c);break;case 3:r=e[n+1],i=e[n+2],(192&r)==128&&(192&i)==128&&(c=(15&t)<<12|(63&r)<<6|63&i)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:r=e[n+1],i=e[n+2],s=e[n+3],(192&r)==128&&(192&i)==128&&(192&s)==128&&(c=(15&t)<<18|(63&r)<<12|(63&i)<<6|63&s)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,a=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=a}var o=i;let a=o.length;if(a<=4096)return String.fromCharCode.apply(String,o);let s="",c=0;for(;c<a;)s+=String.fromCharCode.apply(String,o.slice(c,c+=4096));return s}function b(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function _(e,t,r,i,n,o){if(!s.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<o)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function S(e,t,r,i,n){I(t,i,n,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function A(e,t,r,i,n){I(t,i,n,e,r,7);let o=Number(t&BigInt(0xffffffff));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function E(e,t,r,i,n,o){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function O(e,t,r,i,o){return t*=1,r>>>=0,o||E(e,t,r,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,r,i,23,4),r+4}function k(e,t,r,i,o){return t*=1,r>>>=0,o||E(e,t,r,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,r,i,52,8),r+8}r.Buffer=s,r.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},r.INSPECT_MAX_BYTES=50,r.kMaxLength=0x7fffffff,s.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!s.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,r){return(l(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},s.allocUnsafe=function(e){return u(e)},s.allocUnsafeSlow=function(e){return u(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(U(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),U(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,i=t.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:+(i<r)},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let i=s.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){let t=e[r];if(U(t,Uint8Array))n+t.length>i.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(i,n)):Uint8Array.prototype.set.call(i,t,n);else if(s.isBuffer(t))t.copy(i,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=t.length}return i},s.byteLength=h,s.prototype._isBuffer=!0,s.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):y.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){let e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(s.prototype[o]=s.prototype.inspect),s.prototype.compare=function(e,t,r,i,n){if(U(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,n>>>=0,this===e)return 0;let o=n-i,a=r-t,c=Math.min(o,a),l=this.slice(i,n),u=e.slice(t,r);for(let e=0;e<c;++e)if(l[e]!==u[e]){o=l[e],a=u[e];break}return o<a?-1:+(a<o)},s.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},s.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},s.prototype.write=function(e,t,r,i){var n,o,a,s,c,l,u,d;if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let p=this.length-t;if((void 0===r||r>p)&&(r=p),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let f=!1;for(;;)switch(i){case"hex":return function(e,t,r,i){let n;r=Number(r)||0;let o=e.length-r;i?(i=Number(i))>o&&(i=o):i=o;let a=t.length;for(i>a/2&&(i=a/2),n=0;n<i;++n){var s;let i=parseInt(t.substr(2*n,2),16);if((s=i)!=s)break;e[r+n]=i}return n}(this,e,t,r);case"utf8":case"utf-8":return n=t,o=r,M(K(e,this.length-n),this,n,o);case"ascii":case"latin1":case"binary":return a=t,s=r,M(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,a,s);case"base64":return c=t,l=r,M(T(e),this,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,d=r,M(function(e,t){let r,i,n=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)i=(r=e.charCodeAt(o))>>8,n.push(r%256),n.push(i);return n}(e,this.length-u),this,u,d);default:if(f)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),f=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,s.prototype),i},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);let i=this[e+--t],n=1;for(;t>0&&(n*=256);)i+=this[e+--t]*n;return i},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=D(function(e){x(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let i=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],n=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(i)+(BigInt(n)<<BigInt(32))}),s.prototype.readBigUInt64BE=D(function(e){x(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let i=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],n=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),s.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);let i=this[e],n=1,o=0;for(;++o<t&&(n*=256);)i+=this[e+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);let i=t,n=1,o=this[e+--i];for(;i>0&&(n*=256);)o+=this[e+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},s.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=D(function(e){x(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),s.prototype.readBigInt64BE=D(function(e){x(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),n.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;_(this,e,t,r,i,0)}let n=1,o=0;for(this[t]=255&e;++o<r&&(n*=256);)this[t+o]=e/n&255;return t+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;_(this,e,t,r,i,0)}let n=r-1,o=1;for(this[t+n]=255&e;--n>=0&&(o*=256);)this[t+n]=e/o&255;return t+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=D(function(e,t=0){return S(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=D(function(e,t=0){return A(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(e,t,r,i){if(e*=1,t>>>=0,!i){let i=Math.pow(2,8*r-1);_(this,e,t,r,i-1,-i)}let n=0,o=1,a=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/o|0)-a&255;return t+r},s.prototype.writeIntBE=function(e,t,r,i){if(e*=1,t>>>=0,!i){let i=Math.pow(2,8*r-1);_(this,e,t,r,i-1,-i)}let n=r-1,o=1,a=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/o|0)-a&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||_(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=D(function(e,t=0){return S(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=D(function(e,t=0){return A(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return k(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return k(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,i){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);let n=i-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),n},s.prototype.fill=function(e,t,r,i){let n;if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!s.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){let t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{let o=s.isBuffer(e)?e:s.from(e,i),a=o.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%a]}return this};let P={};function j(e,t,r){P[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function C(e){let t="",r=e.length,i=+("-"===e[0]);for(;r>=i+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function I(e,t,r,i,n,o){if(e>r||e<t){let i,n="bigint"==typeof t?"n":"";throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${(o+1)*8}${n}`:`>= -(2${n} ** ${(o+1)*8-1}${n}) and < 2 ** ${(o+1)*8-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new P.ERR_OUT_OF_RANGE("value",i,e)}x(n,"offset"),(void 0===i[n]||void 0===i[n+o])&&R(n,i.length-(o+1))}function x(e,t){if("number"!=typeof e)throw new P.ERR_INVALID_ARG_TYPE(t,"number",e)}function R(e,t,r){if(Math.floor(e)!==e)throw x(e,r),new P.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),j("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),j("ERR_OUT_OF_RANGE",function(e,t,r){let i=`The value of "${e}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?n=C(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=C(n)),n+="n"),i+=` It must be ${t}. Received ${n}`},RangeError);let B=/[^+/0-9A-Za-z-_]/g;function K(e,t){let r;t=t||1/0;let i=e.length,n=null,o=[];for(let a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!n){if(r>56319||a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(t-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function T(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function M(e,t,r,i){let n;for(n=0;n<i&&!(n+r>=t.length)&&!(n>=e.length);++n)t[n+r]=e[n];return n}function U(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let N=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let i=16*r;for(let n=0;n<16;++n)t[i+n]=e[r]+e[n]}return t}();function D(e){return"u"<typeof BigInt?z:e}function z(){throw Error("BigInt not supported")}},67131,(e,t,r)=>{"use strict";var i=e.r(15843),n=e=>(i.Buffer.isBuffer(e)?e:i.Buffer.from(e)).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),o=e=>({...e,encryption:{...e.encryption},integrity:{...e.integrity}}),a={"aes-128-ctr":{keyBits:128,ivBits:128,name:"AES-CTR"},"aes-256-cbc":{keyBits:256,ivBits:128,name:"AES-CBC"},sha256:{keyBits:256,name:"SHA-256"}},s="Fe26.2",c=(e,t)=>{let r;if(t<1)throw Error("Invalid random bits count");let n=Math.ceil(t/8);return r=i.Buffer.allocUnsafe(n),e.getRandomValues(r),r},l=async(e,t,r,n,o,a)=>{let s=new TextEncoder,c=s.encode(t),l=await e.subtle.importKey("raw",c,"PBKDF2",!1,["deriveBits"]),u=s.encode(r),d=await e.subtle.deriveBits({name:"PBKDF2",hash:a,salt:u,iterations:n},l,8*o);return i.Buffer.from(d)},u=async(e,t,r)=>{var i;if(null==t||!t.length)throw Error("Empty password");if(null==r||"object"!=typeof r)throw Error("Bad options");if(!(r.algorithm in a))throw Error(`Unknown algorithm: ${r.algorithm}`);let n=a[r.algorithm],o={},s=null!=(i=r.hmac)&&i,u=s?{name:"HMAC",hash:n.name}:{name:n.name},d=s?["sign","verify"]:["encrypt","decrypt"];if("string"==typeof t){if(t.length<r.minPasswordlength)throw Error(`Password string too short (min ${r.minPasswordlength} characters required)`);let{salt:i=""}=r;if(!i){let{saltBits:t=0}=r;if(!t)throw Error("Missing salt and saltBits options");i=c(e,t).toString("hex")}let a=await l(e,t,i,r.iterations,n.keyBits/8,"SHA-1");o.key=await e.subtle.importKey("raw",a,u,!1,d),o.salt=i}else{if(t.length<n.keyBits/8)throw Error("Key buffer (password) too small");o.key=await e.subtle.importKey("raw",t,u,!1,d),o.salt=""}return r.iv?o.iv=r.iv:"ivBits"in n&&(o.iv=c(e,n.ivBits)),o},d=async(e,t,r,n)=>{let o=await u(e,t,r),s=new TextEncoder().encode(n),c=await e.subtle.encrypt({name:a[r.algorithm].name,iv:o.iv},o.key,s);return{encrypted:i.Buffer.from(c),key:o}},p=async(e,t,r,n)=>{let o=await u(e,t,r),s=await e.subtle.decrypt({name:a[r.algorithm].name,iv:o.iv},o.key,i.Buffer.isBuffer(n)?n:i.Buffer.from(n));return new TextDecoder().decode(s)},f=async(e,t,r,o)=>{let a=await u(e,t,{...r,hmac:!0}),s=new TextEncoder().encode(o),c=await e.subtle.sign({name:"HMAC"},a.key,s);return{digest:n(i.Buffer.from(c)),salt:a.salt}},h=e=>"object"!=typeof e||i.Buffer.isBuffer(e)?{encryption:e,integrity:e}:"secret"in e?{id:e.id,encryption:e.secret,integrity:e.secret}:{id:e.id,encryption:e.encryption,integrity:e.integrity},y=async(e,t,r,i)=>{if(!r)throw Error("Empty password");let a=o(i),c=Date.now()+(a.localtimeOffsetMsec||0),l=JSON.stringify(t),u=h(r),{id:p=""}=u;if(p&&!/^\w+$/.test(p))throw Error("Invalid password id");let{encrypted:y,key:g}=await d(e,u.encryption,a.encryption,l),m=n(y),v=n(g.iv),w=a.ttl?c+a.ttl:"",b=`${s}*${p}*${g.salt}*${v}*${m}*${w}`,_=await f(e,u.integrity,a.integrity,b);return`${b}*${_.salt}*${_.digest}`},g=async(e,t,r,n)=>{let a;if(!r)throw Error("Empty password");let c=o(n),l=Date.now()+(c.localtimeOffsetMsec||0),u=t.split("*");if(8!==u.length)throw Error("Incorrect number of sealed components");let d=u[0],y=u[1],g=u[2],m=u[3],v=u[4],w=u[5],b=u[6],_=u[7],S=`${d}*${y}*${g}*${m}*${v}*${w}`;if(s!==d)throw Error("Wrong mac prefix");if(w){if(!/^\d+$/.exec(w))throw Error("Invalid expiration");if(parseInt(w,10)<=l-1e3*c.timestampSkewSec)throw Error("Expired seal")}if(void 0===r||"string"==typeof r&&0===r.length)throw Error("Empty password");if("object"!=typeof r||i.Buffer.isBuffer(r))a=r;else{if(!((y||"default")in r))throw Error(`Cannot find password: ${y}`);a=r[y||"default"]}a=h(a);let A=c.integrity;if(A.salt=b,!((e,t)=>{let r=+(e.length!==t.length);r&&(t=e);for(let i=0;i<e.length;i+=1)r|=e.charCodeAt(i)^t.charCodeAt(i);return 0===r})((await f(e,a.integrity,A,S)).digest,_))throw Error("Bad hmac value");let E=i.Buffer.from(v,"base64"),O=c.encryption;O.salt=g,O.iv=i.Buffer.from(m,"base64");let k=await p(e,a.encryption,O,E);return k?JSON.parse(k):null};Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return i.Buffer}}),r.algorithms=a,r.base64urlEncode=n,r.clone=o,r.decrypt=p,r.defaults={encryption:{saltBits:256,algorithm:"aes-256-cbc",iterations:1,minPasswordlength:32},integrity:{saltBits:256,algorithm:"sha256",iterations:1,minPasswordlength:32},ttl:0,timestampSkewSec:60,localtimeOffsetMsec:0},r.encrypt=d,r.generateKey=u,r.hmacWithPassword=f,r.macFormatVersion="2",r.macPrefix=s,r.randomBits=c,r.seal=y,r.unseal=g},84414,(e,t,r)=>{"use strict";r.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");for(var r={},i=(t||{}).decode||o,n=0;n<e.length;){var a=e.indexOf("=",n);if(-1===a)break;var s=e.indexOf(";",n);if(-1===s)s=e.length;else if(s<a){n=e.lastIndexOf(";",a-1)+1;continue}var c=e.slice(n,a).trim();if(void 0===r[c]){var l=e.slice(a+1,s).trim();34===l.charCodeAt(0)&&(l=l.slice(1,-1)),r[c]=function(e,t){try{return t(e)}catch(t){return e}}(l,i)}n=s+1}return r},r.serialize=function(e,t,r){var o=r||{},s=o.encode||a;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!n.test(e))throw TypeError("argument name is invalid");var c=s(t);if(c&&!n.test(c))throw TypeError("argument val is invalid");var l=e+"="+c;if(null!=o.maxAge){var u=o.maxAge-0;if(isNaN(u)||!isFinite(u))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(u)}if(o.domain){if(!n.test(o.domain))throw TypeError("option domain is invalid");l+="; Domain="+o.domain}if(o.path){if(!n.test(o.path))throw TypeError("option path is invalid");l+="; Path="+o.path}if(o.expires){var d,p=o.expires;if(d=p,"[object Date]"!==i.call(d)&&!(d instanceof Date)||isNaN(p.valueOf()))throw TypeError("option expires is invalid");l+="; Expires="+p.toUTCString()}if(o.httpOnly&&(l+="; HttpOnly"),o.secure&&(l+="; Secure"),o.priority)switch("string"==typeof o.priority?o.priority.toLowerCase():o.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(o.sameSite)switch("string"==typeof o.sameSite?o.sameSite.toLowerCase():o.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var i=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function o(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}function a(e){return encodeURIComponent(e)}},15700,(e,t,r)=>{"use strict";var i=Object.create,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=(e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of a(t))c.call(e,s)||s===r||n(e,s,{get:()=>t[s],enumerable:!(i=o(t,s))||i.enumerable});return e},u=(e,t,r)=>(r=null!=e?i(s(e)):{},l(!t&&e&&e.__esModule?r:n(r,"default",{value:e,enumerable:!0}),e)),d={},p={createGetIronSession:()=>v,createSealData:()=>_,createUnsealData:()=>b,getIronSession:()=>k,sealData:()=>O,unsealData:()=>E};for(var f in p)n(d,f,{get:p[f],enumerable:!0});t.exports=l(n({},"__esModule",{value:!0}),d);var h=u(e.r(67131)),y=u(e.r(84414)),g=1296e3,m={ttl:g,cookieOptions:{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}};function v(e,t,r){return async(e,i,n)=>{if(!e||!i||!n||!n.cookieName||!n.password)throw Error('iron-session: Bad usage. Minimum usage is const session = await getIronSession(req, res, { cookieName: "...", password: "...". Check the usage here: https://github.com/vvo/iron-session');let o=S(n.password);Object.values(S(n.password)).forEach(e=>{if(e.length<32)throw Error("iron-session: Bad usage. Password must be at least 32 characters long.")});let a={...m,...n,cookieOptions:{...m.cookieOptions,...n.cookieOptions||{}}};0===a.ttl&&(a.ttl=0x7fffffff),n.cookieOptions&&"maxAge"in n.cookieOptions?void 0===n.cookieOptions.maxAge?a.ttl=0:a.cookieOptions.maxAge=n.cookieOptions.maxAge-60:a.cookieOptions.maxAge=a.ttl-60;let s=y.default.parse("credentials"in e?e.headers.get("cookie")||"":e.headers.cookie||"")[a.cookieName],c=void 0===s?{}:await t(s,{password:o,ttl:a.ttl});return Object.defineProperties(c,{save:{value:async function(){if("headersSent"in i&&!0===i.headersSent)throw Error("iron-session: Cannot set session cookie: session.save() was called after headers were sent. Make sure to call it before any res.send() or res.end()");let e=await r(c,{password:o,ttl:a.ttl}),t=y.default.serialize(a.cookieName,e,a.cookieOptions);if(t.length>4096)throw Error(`iron-session: Cookie length is too big ${t.length}, browsers will refuse it. Try to remove some data.`);w(t,i)}},destroy:{value:function(){Object.keys(c).forEach(e=>{delete c[e]}),w(y.default.serialize(a.cookieName,"",{...a.cookieOptions,maxAge:0}),i)}}}),c}}function w(e,t){var r;if("headers"in t)return void t.headers.append("set-cookie",e);let i=null!=(r=t.getHeader("set-cookie"))?r:[];"string"==typeof i&&(i=[i]),t.setHeader("set-cookie",[...i,e])}function b(e){return async(t,{password:r,ttl:i=g})=>{let n=S(r),{sealWithoutVersion:o,tokenVersion:a}=function(e){if("~"===e[e.length-2]){let[t,r]=e.split("~");return{sealWithoutVersion:t,tokenVersion:parseInt(r,10)}}return{sealWithoutVersion:e,tokenVersion:null}}(t);try{let t=await h.unseal(e,o,n,{...h.defaults,ttl:1e3*i})||{};if(2===a)return t;return{...t.persistent}}catch(e){if(e instanceof Error&&("Expired seal"===e.message||"Bad hmac value"===e.message||e.message.startsWith("Cannot find password: ")||"Incorrect number of sealed components"===e.message))return{};throw e}}}function _(e){return async(t,{password:r,ttl:i=g})=>{let n=S(r),o=Math.max(...Object.keys(n).map(e=>parseInt(e,10))),a={id:o.toString(),secret:n[o]},s=await h.seal(e,t,a,{...h.defaults,ttl:1e3*i});return`${s}~2`}}function S(e){return"string"==typeof e?{1:e}:e}var A=new(e.r(34596)).Crypto,E=b(A),O=_(A),k=v(A,E,O)},91986,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IronSessionProvider=void 0,r.IronSessionProvider=class{}},14531,(e,t,r)=>{"use strict";var i=e.e&&e.e.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(r,"__esModule",{value:!0}),r.WebIronSessionProvider=void 0;let n=e.r(15700),o=e.r(91986);class a extends o.IronSessionProvider{sealData(e,t){return i(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},t),{ttl:0});return(0,n.sealData)(e,r)})}unsealData(e,t){return i(this,void 0,void 0,function*(){return(0,n.unsealData)(e,t)})}}r.WebIronSessionProvider=a},6245,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},5177,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},58805,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(6245),r),n(e.r(5177),r)},49357,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},42934,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},37645,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},23724,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},80926,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},60849,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(49357),r),n(e.r(42934),r),n(e.r(37645),r),n(e.r(23724),r),n(e.r(80926),r)},10753,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},29776,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},42227,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},60665,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},51123,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(10753),r),n(e.r(29776),r),n(e.r(42227),r),n(e.r(60665),r)},17182,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},18663,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},82651,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},99877,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},9236,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},71850,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},39961,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},22513,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},60562,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},9922,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},1693,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(17182),r),n(e.r(18663),r),n(e.r(82651),r),n(e.r(99877),r),n(e.r(9236),r),n(e.r(71850),r),n(e.r(39961),r),n(e.r(22513),r),n(e.r(60562),r),n(e.r(9922),r)},1559,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},35691,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},77040,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},22254,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},15285,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},89059,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},73283,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(1559),r),n(e.r(35691),r),n(e.r(77040),r),n(e.r(22254),r),n(e.r(15285),r),n(e.r(89059),r)},57786,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getPrimaryEmail=void 0,r.getPrimaryEmail=function(e){var t;let r=null==(t=e.emails)?void 0:t.find(e=>e.primary);return null==r?void 0:r.value}},32512,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},50501,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(32512),r)},57463,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},99105,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},75956,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},76019,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},37096,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(57463),r),n(e.r(99105),r),n(e.r(75956),r),n(e.r(76019),r)},67316,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},97109,(e,t,r)=>{"use strict";var i,n;Object.defineProperty(r,"__esModule",{value:!0}),r.DomainDataState=void 0,(n=i||(r.DomainDataState=i={})).Verified="verified",n.Pending="pending"},34239,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},2585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},21015,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},39295,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},55667,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(67316),r),n(e.r(97109),r),n(e.r(34239),r),n(e.r(2585),r),n(e.r(21015),r),n(e.r(39295),r)},19431,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},44077,(e,t,r)=>{"use strict";var i,n,o,a;Object.defineProperty(r,"__esModule",{value:!0}),r.OrganizationDomainVerificationStrategy=r.OrganizationDomainState=void 0,(o=i||(r.OrganizationDomainState=i={})).LegacyVerified="legacy_verified",o.Verified="verified",o.Pending="pending",o.Failed="failed",(a=n||(r.OrganizationDomainVerificationStrategy=n={})).Dns="dns",a.Manual="manual"},87527,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(19431),r),n(e.r(44077),r)},72972,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},38099,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},82339,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},47766,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(72972),r),n(e.r(38099),r),n(e.r(82339),r)},59128,(e,t,r)=>{"use strict";var i,n;Object.defineProperty(r,"__esModule",{value:!0}),r.GeneratePortalLinkIntent=void 0,(n=i||(r.GeneratePortalLinkIntent=i={})).AuditLogs="audit_logs",n.DomainVerification="domain_verification",n.DSync="dsync",n.LogStreams="log_streams",n.SSO="sso",n.CertificateRenewal="certificate_renewal"},64885,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GeneratePortalLinkIntent=void 0;var i=e.r(59128);Object.defineProperty(r,"GeneratePortalLinkIntent",{enumerable:!0,get:function(){return i.GeneratePortalLinkIntent}})},88131,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},76855,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(88131),r)},45853,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},42449,(e,t,r)=>{"use strict";var i,n;Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectionType=void 0,(n=i||(r.ConnectionType=i={})).ADFSSAML="ADFSSAML",n.AdpOidc="AdpOidc",n.AppleOAuth="AppleOAuth",n.Auth0SAML="Auth0SAML",n.AzureSAML="AzureSAML",n.CasSAML="CasSAML",n.ClassLinkSAML="ClassLinkSAML",n.CloudflareSAML="CloudflareSAML",n.CyberArkSAML="CyberArkSAML",n.DuoSAML="DuoSAML",n.GenericOIDC="GenericOIDC",n.GenericSAML="GenericSAML",n.GitHubOAuth="GitHubOAuth",n.GoogleOAuth="GoogleOAuth",n.GoogleSAML="GoogleSAML",n.JumpCloudSAML="JumpCloudSAML",n.KeycloakSAML="KeycloakSAML",n.LastPassSAML="LastPassSAML",n.LoginGovOidc="LoginGovOidc",n.MagicLink="MagicLink",n.MicrosoftOAuth="MicrosoftOAuth",n.MiniOrangeSAML="MiniOrangeSAML",n.NetIqSAML="NetIqSAML",n.OktaSAML="OktaSAML",n.OneLoginSAML="OneLoginSAML",n.OracleSAML="OracleSAML",n.PingFederateSAML="PingFederateSAML",n.PingOneSAML="PingOneSAML",n.RipplingSAML="RipplingSAML",n.SalesforceOAuth="SalesforceOAuth",n.SalesforceSAML="SalesforceSAML",n.ShibbolethGenericSAML="ShibbolethGenericSAML",n.ShibbolethSAML="ShibbolethSAML",n.SimpleSamlPhpSAML="SimpleSamlPhpSAML",n.VMwareSAML="VMwareSAML"},45444,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},17582,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},20561,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},61504,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},68411,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},69884,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},1451,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(45853),r),n(e.r(42449),r),n(e.r(45444),r),n(e.r(17582),r),n(e.r(20561),r),n(e.r(61504),r),n(e.r(68411),r),n(e.r(69884),r)},45697,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},30634,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},68691,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},59165,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},57825,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},69988,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},30791,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},35727,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},54443,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},80570,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},30350,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},79752,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),n(e.r(45697),r),n(e.r(30634),r),n(e.r(68691),r),n(e.r(59165),r),n(e.r(57825),r),n(e.r(69988),r),n(e.r(30791),r),n(e.r(35727),r),n(e.r(54443),r),n(e.r(80570),r),n(e.r(30350),r)},54146,(e,t,r)=>{"use strict";var i=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.WorkOS=void 0;let o=e.r(75963),a=e.r(66769),s=e.r(69758),c=e.r(70814),l=e.r(25829),u=e.r(15150),d=e.r(64043),p=e.r(14531);n(e.r(58805),r),n(e.r(60849),r),n(e.r(51123),r),n(e.r(49949),r),n(e.r(1693),r),n(e.r(26647),r),n(e.r(73283),r),n(e.r(57786),r),n(e.r(50501),r),n(e.r(37096),r),n(e.r(98850),r),n(e.r(55667),r),n(e.r(87527),r),n(e.r(47766),r),n(e.r(64885),r),n(e.r(76855),r),n(e.r(1451),r),n(e.r(48373),r),n(e.r(79752),r);class f extends d.WorkOS{createHttpClient(e,t){var r;let i=Object.assign(Object.assign({},e.config),{timeout:e.timeout,headers:Object.assign(Object.assign({},null==(r=e.config)?void 0:r.headers),{Authorization:`Bearer ${this.key}`,"User-Agent":t})});return"u">typeof fetch||void 0!==e.fetchFn?new s.FetchHttpClient(this.baseURL,i,e.fetchFn):new c.NodeHttpClient(this.baseURL,i)}createWebhookClient(){return new u.Webhooks(this.getCryptoProvider())}getCryptoProvider(){return"u">typeof crypto&&void 0!==crypto.subtle?new a.SubtleCryptoProvider:new o.NodeCryptoProvider}createActionsClient(){return new l.Actions(this.getCryptoProvider())}createIronSessionProvider(){return new p.WebIronSessionProvider}emitWarning(e){return process.emitWarning(e,"WorkOS")}}r.WorkOS=f},55700,17187,13870,e=>{"use strict";var t=e.i(54146),r=e.i(84204),i=e.i(89171);function n(e){e.set("Cache-Control","private, no-cache, no-store, must-revalidate, max-age=0"),e.set("x-middleware-cache","no-cache")}function o(e,t){let r=t?new Headers(t):new Headers;return r.set("Location",e),(null===i.NextResponse||void 0===i.NextResponse?void 0:i.NextResponse.redirect)?i.NextResponse.redirect(e,{headers:t}):new Response(null,{status:307,headers:r})}function a(e){return(null===i.NextResponse||void 0===i.NextResponse?void 0:i.NextResponse.json)?i.NextResponse.json(e,{status:500}):new Response(JSON.stringify(e),{status:500,headers:{"Content-Type":"application/json"}})}function s(e){let t,r=!1;return()=>(r||(t=e(),r=!0),t)}e.s(["errorResponseWithFallback",()=>a,"lazy",()=>s,"redirectWithFallback",()=>o,"setCachePreventionHeaders",()=>n],17187);let c={apiHostname:r.WORKOS_API_HOSTNAME,https:!r.WORKOS_API_HTTPS||"true"===r.WORKOS_API_HTTPS,port:r.WORKOS_API_PORT?parseInt(r.WORKOS_API_PORT):void 0,appInfo:{name:"authkit/nextjs",version:"2.13.0"}},l=s(()=>new t.WorkOS(r.WORKOS_API_KEY,c));e.s(["getWorkOS",0,l],13870);var u=e.i(93458);async function d(e={}){var t;let{returnPathname:i,screenHint:n,organizationId:o,loginHint:a,prompt:s,state:c}=e,p=e.redirectUri;p||(p=null!=(t=(await (0,u.headers)()).get("x-redirect-uri"))?t:void 0);let f=i?btoa(JSON.stringify({returnPathname:i})).replace(/\+/g,"-").replace(/\//g,"_"):null,h=f&&c?`${f}.${c}`:f||c||void 0;return l().userManagement.getAuthorizationUrl({provider:"authkit",clientId:r.WORKOS_CLIENT_ID,redirectUri:null!=p?p:r.WORKOS_REDIRECT_URI,state:h,screenHint:n,organizationId:o,loginHint:a,prompt:s})}e.s(["getAuthorizationUrl",()=>d],55700)},92907,(e,t,r)=>{"use strict";r.parse=function(e,t){if("string"!=typeof e)throw TypeError("argument str must be a string");var r={},i=e.length;if(i<2)return r;var o=t&&t.decode||d,a=0,s=0,c=0;do{if(-1===(s=e.indexOf("=",a)))break;if(-1===(c=e.indexOf(";",a)))c=i;else if(s>c){a=e.lastIndexOf(";",s-1)+1;continue}var p=l(e,a,s),f=u(e,s,p),h=e.slice(p,f);if(!n.call(r,h)){var y=l(e,s+1,c),g=u(e,c,y);34===e.charCodeAt(y)&&34===e.charCodeAt(g-1)&&(y++,g--);var m=e.slice(y,g);r[h]=function(e,t){try{return t(e)}catch(t){return e}}(m,o)}a=c+1}while(a<i)return r},r.serialize=function(e,t,r){var n=r&&r.encode||encodeURIComponent;if("function"!=typeof n)throw TypeError("option encode is invalid");if(!o.test(e))throw TypeError("argument name is invalid");var l=n(t);if(!a.test(l))throw TypeError("argument val is invalid");var u=e+"="+l;if(!r)return u;if(null!=r.maxAge){var d=Math.floor(r.maxAge);if(!isFinite(d))throw TypeError("option maxAge is invalid");u+="; Max-Age="+d}if(r.domain){if(!s.test(r.domain))throw TypeError("option domain is invalid");u+="; Domain="+r.domain}if(r.path){if(!c.test(r.path))throw TypeError("option path is invalid");u+="; Path="+r.path}if(r.expires){var p,f=r.expires;if(p=f,"[object Date]"!==i.call(p)||isNaN(f.valueOf()))throw TypeError("option expires is invalid");u+="; Expires="+f.toUTCString()}if(r.httpOnly&&(u+="; HttpOnly"),r.secure&&(u+="; Secure"),r.partitioned&&(u+="; Partitioned"),r.priority)switch("string"==typeof r.priority?r.priority.toLowerCase():r.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(r.sameSite)switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var i=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,a=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,c=/^[\u0020-\u003A\u003D-\u007E]*$/;function l(e,t,r){do{var i=e.charCodeAt(t);if(32!==i&&9!==i)return t}while(++t<r)return r}function u(e,t,r){for(;t>r;){var i=e.charCodeAt(--t);if(32!==i&&9!==i)return t+1}return r}function d(e){return -1!==e.indexOf("%")?decodeURIComponent(e):e}},70161,e=>{"use strict";var t,r,i=e.i(92907),n={},o=Array.from({length:64});for(let e=0;e+65<=90;e++){let t=String.fromCharCode(e+65);n[t]=e,o[e]=t}for(let e=0;e+97<=122;e++){let t=String.fromCharCode(e+97),r=e+26;n[t]=r,o[r]=t}for(let e=0;e<10;e++){n[e.toString(10)]=e+52;let t=e.toString(10),r=e+52;n[t]=r,o[r]=t}n["-"]=62,o[62]="-",n._=63,o[63]="_";var a=e=>new TextEncoder().encode(e),s=e=>{let t=e+"=".repeat((4-e.length%4)%4),r=t.length/4*3;t.endsWith("==")?r-=2:t.endsWith("=")&&r--;let i=new ArrayBuffer(r),o=new DataView(i);for(let e=0;e<t.length;e+=4){let r=0,i=0;for(let o=e,a=e+3;o<=a;o++)if("="===t[o])r>>=6;else{if(!(t[o]in n))throw TypeError(`Invalid character ${t[o]} in base64 string.`);r|=n[t[o]]<<(a-o)*6,i+=6}let a=e/4*3;r>>=i%8;let s=Math.floor(i/8);for(let e=0;e<s;e++){let t=(s-e-1)*8;o.setUint8(a+e,(r&255<<t)>>t)}}return new Uint8Array(i)},c=e=>{let t="string"==typeof e?a(e):e,r="";for(let e=0;e<t.length;e+=3){let i=0,n=0;for(let r=e,o=Math.min(e+3,t.length);r<o;r++)i|=t[r]<<(o-r-1)*8,n+=8;let a=Math.ceil(n/6);i<<=6*a-n;for(let e=1;e<=a;e++){let t=(a-e)*6;r+=o[(i&63<<t)>>t]}}return r},l={encryption:{saltBits:256,algorithm:"aes-256-cbc",iterations:1,minPasswordlength:32},integrity:{saltBits:256,algorithm:"sha256",iterations:1,minPasswordlength:32},ttl:0,timestampSkewSec:60,localtimeOffsetMsec:0},u=e=>({...e,encryption:{...e.encryption},integrity:{...e.integrity}}),d={"aes-128-ctr":{keyBits:128,ivBits:128,name:"AES-CTR"},"aes-256-cbc":{keyBits:256,ivBits:128,name:"AES-CBC"},sha256:{keyBits:256,name:"SHA-256"}},p="Fe26.2",f=(e,t)=>{let r;if(t<1)throw Error("Invalid random bits count");return r=new Uint8Array(Math.ceil(t/8)),e.getRandomValues(r),r},h=async(e,t,r,i,n,o)=>{let s=a(t),c=await e.subtle.importKey("raw",s,{name:"PBKDF2"},!1,["deriveBits"]),l=a(r);return await e.subtle.deriveBits({name:"PBKDF2",hash:o,salt:l,iterations:i},c,8*n)},y=async(e,t,r)=>{var i;if(!(null==t?void 0:t.length))throw Error("Empty password");if(null==r||"object"!=typeof r)throw Error("Bad options");if(!(r.algorithm in d))throw Error(`Unknown algorithm: ${r.algorithm}`);let n=d[r.algorithm],o={},a=null!=(i=r.hmac)&&i,s=a?{name:"HMAC",hash:n.name}:{name:n.name},c=a?["sign","verify"]:["encrypt","decrypt"];if("string"==typeof t){if(t.length<r.minPasswordlength)throw Error(`Password string too short (min ${r.minPasswordlength} characters required)`);let{salt:i=""}=r;if(!i){let{saltBits:t=0}=r;if(!t)throw Error("Missing salt and saltBits options");i=[...new Uint8Array(f(e,t))].map(e=>e.toString(16).padStart(2,"0")).join("")}let a=await h(e,t,i,r.iterations,n.keyBits/8,"SHA-1");o.key=await e.subtle.importKey("raw",a,s,!1,c),o.salt=i}else{if(t.length<n.keyBits/8)throw Error("Key buffer (password) too small");o.key=await e.subtle.importKey("raw",t,s,!1,c),o.salt=""}return r.iv?o.iv=r.iv:"ivBits"in n&&(o.iv=f(e,n.ivBits)),o},g=(e,t,r)=>["aes-128-ctr"===e?{name:"AES-CTR",counter:t.iv,length:128}:{name:"AES-CBC",iv:t.iv},t.key,"string"==typeof r?a(r):r],m=async(e,t,r,i)=>{let n=await y(e,t,r);return{encrypted:new Uint8Array(await e.subtle.encrypt(...g(r.algorithm,n,i))),key:n}},v=async(e,t,r,i)=>{let n,o=await y(e,t,r);return n=new Uint8Array(await e.subtle.decrypt(...g(r.algorithm,o,i))),new TextDecoder().decode(n)},w=async(e,t,r,i)=>{let n=await y(e,t,{...r,hmac:!0}),o=a(i);return{digest:c(new Uint8Array(await e.subtle.sign({name:"HMAC"},n.key,o))),salt:n.salt}},b=e=>"string"==typeof e||e instanceof Uint8Array?{encryption:e,integrity:e}:"secret"in e?{id:e.id,encryption:e.secret,integrity:e.secret}:{id:e.id,encryption:e.encryption,integrity:e.integrity},_=async(e,t,r,i)=>{if(!r)throw Error("Empty password");let n=u(i),o=Date.now()+(n.localtimeOffsetMsec||0),a=JSON.stringify(t),{id:s="",encryption:l,integrity:d}=b(r);if(s&&!/^\w+$/.test(s))throw Error("Invalid password id");let{encrypted:f,key:h}=await m(e,l,n.encryption,a),y=c(new Uint8Array(f)),g=c(h.iv),v=n.ttl?o+n.ttl:"",_=`${p}*${s}*${h.salt}*${g}*${y}*${v}`,S=await w(e,d,n.integrity,_);return`${_}*${S.salt}*${S.digest}`},S=async(e,t,r,i)=>{if(!r)throw Error("Empty password");let n=u(i),o=Date.now()+(n.localtimeOffsetMsec||0),a=t.split("*");if(8!==a.length)throw Error("Incorrect number of sealed components");let c=a[0],l=a[1],d=a[2],f=a[3],h=a[4],y=a[5],g=a[6],m=a[7],_=`${c}*${l}*${d}*${f}*${h}*${y}`;if(p!==c)throw Error("Wrong mac prefix");if(y){if(!/^\d+$/.test(y))throw Error("Invalid expiration");if(Number.parseInt(y,10)<=o-1e3*n.timestampSkewSec)throw Error("Expired seal")}let S="";if(l=l||"default","string"==typeof r||r instanceof Uint8Array)S=r;else if(l in r)S=r[l];else throw Error(`Cannot find password: ${l}`);S=b(S);let A=n.integrity;if(A.salt=g,!((e,t)=>{let r=+(e.length!==t.length);r&&(t=e);for(let i=0;i<e.length;i+=1)r|=e.charCodeAt(i)^t.charCodeAt(i);return 0===r})((await w(e,S.integrity,A,_)).digest,m))throw Error("Bad hmac value");let E=s(h),O=n.encryption;O.salt=d,O.iv=s(f);let k=await v(e,S.encryption,O,E);return k?JSON.parse(k):null},A=e.i(66680);let E=A.default.webcrypto?.subtle||{},O=()=>A.default.randomUUID(),k=e=>A.default.webcrypto.getRandomValues(e),P={randomUUID:O,getRandomValues:k,subtle:E};e.s(["default",()=>P,"getRandomValues",()=>k,"randomUUID",()=>O,"subtle",()=>E],62604);var j=e.i(62604),C={ttl:1209600,cookieOptions:{httpOnly:!0,secure:!0,sameSite:"lax",path:"/"}};function I(e){return"string"==typeof e?{1:e}:e}var x=async function(e,{password:t,ttl:r=1209600}){let i=I(t),n=Math.max(...Object.keys(i).map(Number)),o={id:n.toString(),secret:i[n]},a=await _(j,e,o,{...l,ttl:1e3*r});return`${a}~2`},R=async function(e,{password:t,ttl:r=1209600}){let i=I(t),{sealWithoutVersion:n,tokenVersion:o}=function(e){let[t,r]=e.split("~");return{sealWithoutVersion:t,tokenVersion:null==r?null:parseInt(r,10)}}(e);try{let e=await S(j,n,i,{...l,ttl:1e3*r})??{};if(2===o)return e;return{...e.persistent}}catch(e){if(e instanceof Error&&/^(Expired seal|Bad hmac value|Cannot find password|Incorrect number of sealed components)/.test(e.message))return{};throw e}};t=x,r=R,e.s(["sealData",()=>x,"unsealData",()=>R],70161)},41444,e=>{"use strict";var t=e.i(47299),r=e.i(43698),i=e.i(87769),n=e.i(1842),o=e.i(5632);let a=async(e,a,s)=>{let c;switch(e.protocol){case"https:":c=r.get;break;case"http:":c=t.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:l,headers:u}=s,d=c(e.href,{agent:l,timeout:a,headers:u}),[p]=await Promise.race([(0,i.once)(d,"response"),(0,i.once)(d,"timeout")]);if(!p)throw d.destroy(),new n.JWKSTimeout;if(200!==p.statusCode)throw new n.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let f=[];for await(let e of p)f.push(e);try{return JSON.parse(o.decoder.decode((0,o.concat)(...f)))}catch{throw new n.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};e.s(["default",0,a])},5269,e=>{"use strict";var t=e.i(66680);e.s(["default",0,e=>e.d?(0,t.createPrivateKey)({format:"jwk",key:e}):(0,t.createPublicKey)({format:"jwk",key:e})])},78992,35430,e=>{"use strict";let t;var r=e.i(41444),i=e.i(1842),n=e.i(14122),o=e.i(5269),a=e.i(17444);async function s(e,t){if(!(0,a.default)(e))throw TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if("string"!=typeof e.k||!e.k)throw TypeError('missing "k" (Key Value) Parameter value');return(0,n.decode)(e.k);case"RSA":if("oth"in e&&void 0!==e.oth)throw new i.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,o.default)({...e,alg:t});default:throw new i.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}function c(e){return(0,a.default)(e)}function l(e){return"function"==typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}e.s(["importJWK",()=>s],35430);class u{_jwks;_cached=new WeakMap;constructor(e){if(!function(e){return e&&"object"==typeof e&&Array.isArray(e.keys)&&e.keys.every(c)}(e))throw new i.JWKSInvalid("JSON Web Key Set malformed");this._jwks=l(e)}async getKey(e,t){let{alg:r,kid:n}={...e,...t?.header},o=function(e){switch("string"==typeof e&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new i.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(r),a=this._jwks.keys.filter(e=>{let t=o===e.kty;if(t&&"string"==typeof n&&(t=n===e.kid),t&&"string"==typeof e.alg&&(t=r===e.alg),t&&"string"==typeof e.use&&(t="sig"===e.use),t&&Array.isArray(e.key_ops)&&(t=e.key_ops.includes("verify")),t)switch(r){case"ES256":t="P-256"===e.crv;break;case"ES256K":t="secp256k1"===e.crv;break;case"ES384":t="P-384"===e.crv;break;case"ES512":t="P-521"===e.crv;break;case"Ed25519":t="Ed25519"===e.crv;break;case"EdDSA":t="Ed25519"===e.crv||"Ed448"===e.crv}return t}),{0:s,length:c}=a;if(0===c)throw new i.JWKSNoMatchingKey;if(1!==c){let e=new i.JWKSMultipleMatchingKeys,{_cached:t}=this;throw e[Symbol.asyncIterator]=async function*(){for(let e of a)try{yield await d(t,e,r)}catch{}},e}return d(this._cached,s,r)}}async function d(e,t,r){let n=e.get(t)||e.set(t,{}).get(t);if(void 0===n[r]){let e=await s({...t,ext:!0},r);if(e instanceof Uint8Array||"public"!==e.type)throw new i.JWKSInvalid("JSON Web Key Set members must be public keys");n[r]=e}return n[r]}function p(e){let t=new u(e),r=async(e,r)=>t.getKey(e,r);return Object.defineProperties(r,{jwks:{value:()=>l(t._jwks),enumerable:!0,configurable:!1,writable:!1}}),r}("u"<typeof navigator||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))&&(t="jose/v5.10.0");let f=Symbol();class h{_url;_timeoutDuration;_cooldownDuration;_cacheMaxAge;_jwksTimestamp;_pendingFetch;_options;_local;_cache;constructor(e,t){if(!(e instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:t?.agent,headers:t?.headers},this._timeoutDuration="number"==typeof t?.timeoutDuration?t?.timeoutDuration:5e3,this._cooldownDuration="number"==typeof t?.cooldownDuration?t?.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof t?.cacheMaxAge?t?.cacheMaxAge:6e5,t?.[f]!==void 0&&(this._cache=t?.[f],function(e,t){return!("object"!=typeof e||null===e||!("uat"in e)||"number"!=typeof e.uat||Date.now()-e.uat>=t)&&"jwks"in e&&!!(0,a.default)(e.jwks)&&!!Array.isArray(e.jwks.keys)&&!!Array.prototype.every.call(e.jwks.keys,a.default)}(t?.[f],this._cacheMaxAge)&&(this._jwksTimestamp=this._cache.uat,this._local=p(this._cache.jwks)))}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._local&&this.fresh()||await this.reload();try{return await this._local(e,t)}catch(r){if(r instanceof i.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),this._local(e,t);throw r}}async reload(){this._pendingFetch&&("u">typeof WebSocketPair||"u">typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"u">typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0);let e=new Headers(this._options.headers);t&&!e.has("User-Agent")&&(e.set("User-Agent",t),this._options.headers=Object.fromEntries(e.entries())),this._pendingFetch||=(0,r.default)(this._url,this._timeoutDuration,this._options).then(e=>{this._local=p(e),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=e),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e}),await this._pendingFetch}}function y(e,t){let r=new h(e,t),i=async(e,t)=>r.getKey(e,t);return Object.defineProperties(i,{coolingDown:{get:()=>r.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>r.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>r.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!r._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>r._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),i}e.s(["createRemoteJWKSet",()=>y],78992)},4975,e=>{"use strict";var t=e.i(14122),r=e.i(66680),i=e.i(12057),n=e.i(1842);function o(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"Ed25519":case"EdDSA":return;default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}let a=r.webcrypto;function s(e,t,...r){if((r=r.filter(Boolean)).length>2){let t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}let c=(e,...t)=>s("Key must be ",e,...t);function l(e,t,...r){return s(`Key for the ${e} algorithm must be `,t,...r)}let u=e=>i.types.isKeyObject(e)||i.types.isCryptoKey(e),d=["KeyObject"];(globalThis.CryptoKey||a?.CryptoKey)&&d.push("CryptoKey");var p=e.i(17444);function f(e){return(0,p.default)(e)&&"string"==typeof e.kty}new WeakMap;let h=(e,t)=>{let i;try{i=e instanceof r.KeyObject?e.asymmetricKeyDetails?.modulusLength:Buffer.from(e.n,"base64url").byteLength<<3}catch{}if("number"!=typeof i||i<2048)throw TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)},y=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function g(e,t){let o,a,s,l;if(t instanceof r.KeyObject)o=t.asymmetricKeyType,a=t.asymmetricKeyDetails;else switch(s=!0,t.kty){case"RSA":o="rsa";break;case"EC":o="ec";break;case"OKP":if("Ed25519"===t.crv){o="ed25519";break}if("Ed448"===t.crv){o="ed448";break}throw TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448");default:throw TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}switch(e){case"Ed25519":if("ed25519"!==o)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519");break;case"EdDSA":if(!["ed25519","ed448"].includes(o))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if("rsa"!==o)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");h(t,e);break;case"PS256":case"PS384":case"PS512":if("rsa-pss"===o){let{hashAlgorithm:t,mgf1HashAlgorithm:r,saltLength:i}=a,n=parseInt(e.slice(-3),10);if(void 0!==t&&(t!==`sha${n}`||r!==t))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(void 0!==i&&i>n>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if("rsa"!==o)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");h(t,e),l={padding:r.constants.RSA_PKCS1_PSS_PADDING,saltLength:r.constants.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==o)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let a=((e,t)=>{let o;if(i.types.isCryptoKey(e))o=r.KeyObject.from(e);else if(i.types.isKeyObject(e))o=e;else if(f(e))return e.crv;else throw TypeError(c(e,...d));if("secret"===o.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(o.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${o.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${o.asymmetricKeyType.slice(1)}`;case"ec":{let e=o.asymmetricKeyDetails.namedCurve;if(t)return e;switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new n.JOSENotSupported("Unsupported key curve for this operation")}}default:throw TypeError("Invalid asymmetric key type for this operation")}})(t),s=y.get(e);if(a!==s)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${s}, got ${a}`);l={dsaEncoding:"ieee-p1363"};break}default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}return s?{format:"jwk",key:t,...l}:l?{...l,key:t}:t}function m(e,t="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function v(e,t){return e.name===t}function w(e){return parseInt(e.name.slice(4),10)}function b(e,t,n){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw TypeError(c(t,...d));return(0,r.createSecretKey)(t)}if(t instanceof r.KeyObject)return t;if(i.types.isCryptoKey(t))return!function(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!v(e.algorithm,"HMAC"))throw m("HMAC");let r=parseInt(t.slice(2),10);if(w(e.algorithm.hash)!==r)throw m(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!v(e.algorithm,"RSASSA-PKCS1-v1_5"))throw m("RSASSA-PKCS1-v1_5");let r=parseInt(t.slice(2),10);if(w(e.algorithm.hash)!==r)throw m(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!v(e.algorithm,"RSA-PSS"))throw m("RSA-PSS");let r=parseInt(t.slice(2),10);if(w(e.algorithm.hash)!==r)throw m(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw m("Ed25519 or Ed448");break;case"Ed25519":if(!v(e.algorithm,"Ed25519"))throw m("Ed25519");break;case"ES256":case"ES384":case"ES512":{if(!v(e.algorithm,"ECDSA"))throw m("ECDSA");let r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw m(r,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}if(r.length&&!r.some(t=>e.usages.includes(t))){let e="CryptoKey does not support this operation, its usages must include ";if(r.length>2){let t=r.pop();e+=`one of ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of ${r[0]} or ${r[1]}.`:e+=`${r[0]}.`;throw TypeError(e)}}(t,e,n),r.KeyObject.from(t);if(f(t))return e.startsWith("HS")?(0,r.createSecretKey)(Buffer.from(t.k,"base64url")):t;throw TypeError(c(t,...d,"Uint8Array","JSON Web Key"))}let _=(0,i.promisify)(r.sign),S=async(e,t,i)=>{let a=b(e,t,"sign");if(e.startsWith("HS")){let t=r.createHmac(function(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new n.JOSENotSupported(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e),a);return t.update(i),t.digest()}return _(o(e),i,g(e,a))},A=(0,i.promisify)(r.verify),E=async(e,t,i,n)=>{let a=b(e,t,"verify");if(e.startsWith("HS")){let t=await S(e,a,n);try{return r.timingSafeEqual(i,t)}catch{return!1}}let s=o(e),c=g(e,a);try{return await A(s,n,c,i)}catch{return!1}};var O=e.i(5632);let k=e=>e?.[Symbol.toStringTag],P=(e,t,r)=>{if(void 0!==t.use&&"sig"!==t.use)throw TypeError("Invalid key for this operation, when present its use must be sig");if(void 0!==t.key_ops&&t.key_ops.includes?.(r)!==!0)throw TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(void 0!==t.alg&&t.alg!==e)throw TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0};function j(e,t,r,i){t.startsWith("HS")||"dir"===t||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?((e,t,r,i)=>{if(!(t instanceof Uint8Array)){if(i&&f(t)){if(f(t)&&"oct"===t.kty&&"string"==typeof t.k&&P(e,t,r))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!u(t))throw TypeError(l(e,t,...d,"Uint8Array",i?"JSON Web Key":null));if("secret"!==t.type)throw TypeError(`${k(t)} instances for symmetric algorithms must be of type "secret"`)}})(t,r,i,e):((e,t,r,i)=>{if(i&&f(t))switch(r){case"sign":if("oct"!==t.kty&&"string"==typeof t.d&&P(e,t,r))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"verify":if("oct"!==t.kty&&void 0===t.d&&P(e,t,r))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!u(t))throw TypeError(l(e,t,...d,i?"JSON Web Key":null));if("secret"===t.type)throw TypeError(`${k(t)} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw TypeError(`${k(t)} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw TypeError(`${k(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw TypeError(`${k(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw TypeError(`${k(t)} instances for asymmetric algorithm encryption must be of type "public"`)})(t,r,i,e)}j.bind(void 0,!1);let C=j.bind(void 0,!0),I=function(e,t,r,i,o){let a;if(void 0!==o.crit&&i?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!i||void 0===i.crit)return new Set;if(!Array.isArray(i.crit)||0===i.crit.length||i.crit.some(e=>"string"!=typeof e||0===e.length))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let s of(a=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t,i.crit)){if(!a.has(s))throw new n.JOSENotSupported(`Extension Header Parameter "${s}" is not recognized`);if(void 0===o[s])throw new e(`Extension Header Parameter "${s}" is missing`);if(a.get(s)&&void 0===i[s])throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(i.crit)};var x=e.i(35430);async function R(e,r,i){let o,a;if(!(0,p.default)(e))throw new n.JWSInvalid("Flattened JWS must be an object");if(void 0===e.protected&&void 0===e.header)throw new n.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==e.protected&&"string"!=typeof e.protected)throw new n.JWSInvalid("JWS Protected Header incorrect type");if(void 0===e.payload)throw new n.JWSInvalid("JWS Payload missing");if("string"!=typeof e.signature)throw new n.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==e.header&&!(0,p.default)(e.header))throw new n.JWSInvalid("JWS Unprotected Header incorrect type");let s={};if(e.protected)try{let r=(0,t.decode)(e.protected);s=JSON.parse(O.decoder.decode(r))}catch{throw new n.JWSInvalid("JWS Protected Header is invalid")}if(!((...e)=>{let t,r=e.filter(Boolean);if(0===r.length||1===r.length)return!0;for(let e of r){let r=Object.keys(e);if(!t||0===t.size){t=new Set(r);continue}for(let e of r){if(t.has(e))return!1;t.add(e)}}return!0})(s,e.header))throw new n.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let c={...s,...e.header},l=I(n.JWSInvalid,new Map([["b64",!0]]),i?.crit,s,c),u=!0;if(l.has("b64")&&"boolean"!=typeof(u=s.b64))throw new n.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:d}=c;if("string"!=typeof d||!d)throw new n.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let h=i&&((e,t)=>{if(void 0!==t&&(!Array.isArray(t)||t.some(e=>"string"!=typeof e)))throw TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)})("algorithms",i.algorithms);if(h&&!h.has(d))throw new n.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(u){if("string"!=typeof e.payload)throw new n.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof e.payload&&!(e.payload instanceof Uint8Array))throw new n.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let y=!1;"function"==typeof r?(r=await r(s,e),y=!0,C(d,r,"verify"),f(r)&&(r=await (0,x.importJWK)(r,d))):C(d,r,"verify");let g=(0,O.concat)(O.encoder.encode(e.protected??""),O.encoder.encode("."),"string"==typeof e.payload?O.encoder.encode(e.payload):e.payload);try{o=(0,t.decode)(e.signature)}catch{throw new n.JWSInvalid("Failed to base64url decode the signature")}if(!await E(d,r,o,g))throw new n.JWSSignatureVerificationFailed;if(u)try{a=(0,t.decode)(e.payload)}catch{throw new n.JWSInvalid("Failed to base64url decode the payload")}else a="string"==typeof e.payload?O.encoder.encode(e.payload):e.payload;let m={payload:a};return(void 0!==e.protected&&(m.protectedHeader=s),void 0!==e.header&&(m.unprotectedHeader=e.header),y)?{...m,key:r}:m}async function B(e,t,r){if(e instanceof Uint8Array&&(e=O.decoder.decode(e)),"string"!=typeof e)throw new n.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:i,1:o,2:a,length:s}=e.split(".");if(3!==s)throw new n.JWSInvalid("Invalid Compact JWS");let c=await R({payload:o,protected:i,signature:a},t,r),l={payload:c.payload,protectedHeader:c.protectedHeader};return"function"==typeof t?{...l,key:c.key}:l}let K=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,T=e=>{let t,r=K.exec(e);if(!r||r[4]&&r[1])throw TypeError("Invalid time period format");let i=parseFloat(r[2]);switch(r[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":t=Math.round(i);break;case"minute":case"minutes":case"min":case"mins":case"m":t=Math.round(60*i);break;case"hour":case"hours":case"hr":case"hrs":case"h":t=Math.round(3600*i);break;case"day":case"days":case"d":t=Math.round(86400*i);break;case"week":case"weeks":case"w":t=Math.round(604800*i);break;default:t=Math.round(0x1e187e0*i)}return"-"===r[1]||"ago"===r[4]?-t:t},M=e=>e.toLowerCase().replace(/^application\//,"");async function U(e,t,r){let i=await B(e,t,r);if(i.protectedHeader.crit?.includes("b64")&&!1===i.protectedHeader.b64)throw new n.JWTInvalid("JWTs MUST NOT use unencoded payload");let o={payload:((e,t,r={})=>{var i,o;let a,s;try{a=JSON.parse(O.decoder.decode(t))}catch{}if(!(0,p.default)(a))throw new n.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{typ:c}=r;if(c&&("string"!=typeof e.typ||M(e.typ)!==M(c)))throw new n.JWTClaimValidationFailed('unexpected "typ" JWT header value',a,"typ","check_failed");let{requiredClaims:l=[],issuer:u,subject:d,audience:f,maxTokenAge:h}=r,y=[...l];for(let e of(void 0!==h&&y.push("iat"),void 0!==f&&y.push("aud"),void 0!==d&&y.push("sub"),void 0!==u&&y.push("iss"),new Set(y.reverse())))if(!(e in a))throw new n.JWTClaimValidationFailed(`missing required "${e}" claim`,a,e,"missing");if(u&&!(Array.isArray(u)?u:[u]).includes(a.iss))throw new n.JWTClaimValidationFailed('unexpected "iss" claim value',a,"iss","check_failed");if(d&&a.sub!==d)throw new n.JWTClaimValidationFailed('unexpected "sub" claim value',a,"sub","check_failed");if(f&&(i=a.aud,o="string"==typeof f?[f]:f,"string"==typeof i?!o.includes(i):!(Array.isArray(i)&&o.some(Set.prototype.has.bind(new Set(i))))))throw new n.JWTClaimValidationFailed('unexpected "aud" claim value',a,"aud","check_failed");switch(typeof r.clockTolerance){case"string":s=T(r.clockTolerance);break;case"number":s=r.clockTolerance;break;case"undefined":s=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:g}=r,m=Math.floor((g||new Date).getTime()/1e3);if((void 0!==a.iat||h)&&"number"!=typeof a.iat)throw new n.JWTClaimValidationFailed('"iat" claim must be a number',a,"iat","invalid");if(void 0!==a.nbf){if("number"!=typeof a.nbf)throw new n.JWTClaimValidationFailed('"nbf" claim must be a number',a,"nbf","invalid");if(a.nbf>m+s)throw new n.JWTClaimValidationFailed('"nbf" claim timestamp check failed',a,"nbf","check_failed")}if(void 0!==a.exp){if("number"!=typeof a.exp)throw new n.JWTClaimValidationFailed('"exp" claim must be a number',a,"exp","invalid");if(a.exp<=m-s)throw new n.JWTExpired('"exp" claim timestamp check failed',a,"exp","check_failed")}if(h){let e=m-a.iat;if(e-s>("number"==typeof h?h:T(h)))throw new n.JWTExpired('"iat" claim timestamp check failed (too far in the past)',a,"iat","check_failed");if(e<0-s)throw new n.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',a,"iat","check_failed")}return a})(i.protectedHeader,i.payload,r),protectedHeader:i.protectedHeader};return"function"==typeof t?{...o,key:i.key}:o}e.s(["jwtVerify",()=>U],4975)},56538,e=>{"use strict";function t(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),r="=".repeat((4-t.length%4)%4);return atob(t+r)}class r extends Error{constructor(e,t,r){super(e),this.name="AuthKitError",this.cause=t,this.data=r}}class i extends r{constructor(e,t,r){super(e,t),this.name="TokenRefreshError",this.userId=null==r?void 0:r.userId,this.sessionId=null==r?void 0:r.sessionId}}function n(e){if(!(null==e?void 0:e.accessToken))return{};try{let{payload:r}=function(e){let r=e.split(".");if(3!==r.length)throw Error("Invalid JWT format");try{let e=JSON.parse(t(r[0])),i=JSON.parse(t(r[1]));return{header:e,payload:i}}catch(e){throw Error(`Failed to decode JWT: ${e instanceof Error?e.message:String(e)}`)}}(e.accessToken);return{userId:r.sub,sessionId:r.sid}}catch(e){return{}}}e.s(["TokenRefreshError",()=>i,"getSessionErrorContext",()=>n],56538)},91111,e=>{"use strict";var t=e.i(70161),r=e.i(78992),i=e.i(35311);e.i(4975);var n=e.i(93458);e.i(51783);var o=e.i(79509),a=e.i(52486),s=e.i(84204);e.i(56538);var c=e.i(55700),l=e.i(13870);function u(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}async function d(e){return(0,t.sealData)(e,{password:s.WORKOS_COOKIE_PASSWORD,ttl:0})}async function p(){var e,t,r;let i,a=await (0,n.headers)(),s=a.get("x-url");if(!s)throw Error("No URL found in the headers");let l=(t=null==(e=a.get("x-sign-up-paths"))?void 0:e.split(","),r=new URL(s).pathname,t&&t.filter(e=>(function(e){try{let t=new URL(e,"https://example.com"),r=`${t.pathname}${t.hash||""}`,i=function(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var i=e[r];if("*"===i||"+"===i||"?"===i){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===i){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===i){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===i){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===i){for(var n="",o=r+1;o<e.length;){var a=e.charCodeAt(o);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||95===a){n+=e[o++];continue}break}if(!n)throw TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:n}),r=o;continue}if("("===i){var s=1,c="",o=r+1;if("?"===e[o])throw TypeError('Pattern cannot start with "?" at '.concat(o));for(;o<e.length;){if("\\"===e[o]){c+=e[o++]+e[o++];continue}if(")"===e[o]){if(0==--s){o++;break}}else if("("===e[o]&&(s++,"?"!==e[o+1]))throw TypeError("Capturing groups are not allowed at ".concat(o));c+=e[o++]}if(s)throw TypeError("Unbalanced pattern at ".concat(r));if(!c)throw TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:c}),r=o;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),i=t.prefixes,n=void 0===i?"./":i,o=t.delimiter,a=void 0===o?"/#?":o,s=[],c=0,l=0,d="",p=function(e){if(l<r.length&&r[l].type===e)return r[l++].value},f=function(e){var t=p(e);if(void 0!==t)return t;var i=r[l],n=i.type,o=i.index;throw TypeError("Unexpected ".concat(n," at ").concat(o,", expected ").concat(e))},h=function(){for(var e,t="";e=p("CHAR")||p("ESCAPED_CHAR");)t+=e;return t},y=function(e){for(var t=0;t<a.length;t++){var r=a[t];if(e.indexOf(r)>-1)return!0}return!1},g=function(e){var t=s[s.length-1],r=e||(t&&"string"==typeof t?t:"");if(t&&!r)throw TypeError('Must have text between two parameters, missing text after "'.concat(t.name,'"'));return!r||y(r)?"[^".concat(u(a),"]+?"):"(?:(?!".concat(u(r),")[^").concat(u(a),"])+?")};l<r.length;){var m=p("CHAR"),v=p("NAME"),w=p("PATTERN");if(v||w){var b=m||"";-1===n.indexOf(b)&&(d+=b,b=""),d&&(s.push(d),d=""),s.push({name:v||c++,prefix:b,suffix:"",pattern:w||g(b),modifier:p("MODIFIER")||""});continue}var _=m||p("ESCAPED_CHAR");if(_){d+=_;continue}if(d&&(s.push(d),d=""),p("OPEN")){var b=h(),S=p("NAME")||"",A=p("PATTERN")||"",E=h();f("CLOSE"),s.push({name:S||(A?c++:""),pattern:S&&!A?g(b):A,prefix:b,suffix:E,modifier:p("MODIFIER")||""});continue}f("END")}return s}(r),n=function(e,t,r){void 0===r&&(r={});for(var i,n=r.strict,o=void 0!==n&&n,a=r.start,s=r.end,c=r.encode,l=void 0===c?function(e){return e}:c,d=r.delimiter,p=r.endsWith,f="[".concat(u(void 0===p?"":p),"]|$"),h="[".concat(u(void 0===d?"/#?":d),"]"),y=void 0===a||a?"^":"",g=0;g<e.length;g++){var m=e[g];if("string"==typeof m)y+=u(l(m));else{var v=u(l(m.prefix)),w=u(l(m.suffix));if(m.pattern)if(v||w)if("+"===m.modifier||"*"===m.modifier){var b="*"===m.modifier?"?":"";y+="(?:".concat(v,"((?:").concat(m.pattern,")(?:").concat(w).concat(v,"(?:").concat(m.pattern,"))*)").concat(w,")").concat(b)}else y+="(?:".concat(v,"(").concat(m.pattern,")").concat(w,")").concat(m.modifier);else{if("+"===m.modifier||"*"===m.modifier)throw TypeError('Can not repeat "'.concat(m.name,'" without a prefix and suffix'));y+="(".concat(m.pattern,")").concat(m.modifier)}else y+="(?:".concat(v).concat(w,")").concat(m.modifier)}}if(void 0===s||s)o||(y+="".concat(h,"?")),y+=r.endsWith?"(?=".concat(f,")"):"$";else{var _=e[e.length-1],S="string"==typeof _?h.indexOf(_[_.length-1])>-1:void 0===_;o||(y+="(?:".concat(h,"(?=").concat(f,"))?")),S||(y+="(?=".concat(h,"|").concat(f,")"))}return new RegExp(y,(i=r)&&i.sensitive?"":"i")}(i).source;return new RegExp(n)}catch(t){console.log("err",t);let e=t instanceof Error?t.message:String(t);throw Error(`Error parsing routes for middleware auth. Reason: ${e}`)}})(e).exec(r)).length>0?"sign-up":"sign-in"),d=(i=new URL(s),`${i.pathname}${i.searchParams.size>0?"?"+i.searchParams.toString():""}`);(0,o.redirect)(await (0,c.getAuthorizationUrl)({returnPathname:d,screenHint:l}))}async function f(e){let t=await y();if(!t)return(null==e?void 0:e.ensureSignedIn)&&await p(),{user:null};let{sid:r,org_id:n,role:o,roles:a,permissions:s,entitlements:c,feature_flags:l}=(0,i.decodeJwt)(t.accessToken);return{sessionId:r,user:t.user,organizationId:n,role:o,roles:a,permissions:s,entitlements:c,featureFlags:l,impersonator:t.impersonator,accessToken:t.accessToken}}async function h(e){let r,i=s.WORKOS_COOKIE_NAME||"wos-session";if(r=e?e.cookies.get(i):(await (0,n.cookies)()).get(i))return(0,t.unsealData)(r.value,{password:s.WORKOS_COOKIE_PASSWORD})}async function y(){let e=await (0,n.headers)();if(!e.get("x-workos-middleware")){let t=e.get("x-url");throw Error(`You are calling 'withAuth' on ${null!=t?t:"a route"} that isn't covered by the AuthKit middleware. Make sure it is running on all paths you are calling 'withAuth' from by updating your middleware config in 'middleware.(js|ts)'.`)}let r=e.get("x-workos-session");if(r)return(0,t.unsealData)(r,{password:s.WORKOS_COOKIE_PASSWORD})}async function g(e,t){let r=s.WORKOS_COOKIE_NAME||"wos-session",i=await d(e),o=await (0,n.cookies)(),c="string"==typeof t?t:t.url;o.set(r,i,(0,a.getCookieOptions)(c))}e.i(89171),(0,e.i(17187).lazy)(()=>(0,r.createRemoteJWKSet)(new URL((0,l.getWorkOS)().userManagement.getJwksUrl(s.WORKOS_CLIENT_ID)))),e.s(["getSessionFromCookie",()=>h,"saveSession",()=>g,"withAuth",()=>f],91111)}];

//# sourceMappingURL=node_modules_d47c57c0._.js.map